{"ast":null,"code":"var _jsxFileName = \"/mnt/c/Users/Dell/Desktop/se/KhanaShana-Client/src/components/profile/OrderHistory.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport Header from '../navigation/Header';\nimport firebase_integration from '../fire.js';\nimport './orderhistorystyles.css';\n\nfunction OrderHistory() {\n  const [orders, setorders] = useState([]);\n  useEffect(() => {\n    firebase_integration.database.collection('RegularOrder').where(\"CustomerID\", \"==\", firebase_integration.auth.currentUser.uid.toString()).onSnapshot(snapshot => {\n      var order_arr = [];\n      snapshot.docs.forEach(doc => {\n        order_arr.push(doc.data());\n      });\n      setorders(order_arr);\n      console.log(order_arr);\n    });\n  }, orders);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"orderhistorypage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"orderhistorybox\",\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"boxheading\",\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 21\n    }\n  }, \"Order History\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    id: \"orderslist\",\n    className: \"table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      color: \"#576271\"\n    },\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 29\n    }\n  }, \"Order ID\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      color: \"#576271\"\n    },\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 29\n    }\n  }, \"Date\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      color: \"#576271\"\n    },\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 29\n    }\n  }, \"Cost\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      color: \"#576271\"\n    },\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 29\n    }\n  }, \"Order Tracking\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      color: \"#576271\"\n    },\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 29\n    }\n  }, \"Order Details\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      color: \"#576271\"\n    },\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 29\n    }\n  }, \"Reorder\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      color: \"#576271\"\n    },\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 29\n    }\n  }, \"Cancel\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 25\n    }\n  }, orders.map((x, i) => {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: x.OrderID,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      style: {\n        color: \"#576271\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 49\n      }\n    }, orders[i].OrderID), /*#__PURE__*/React.createElement(\"td\", {\n      style: {\n        color: \"#576271\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 49\n      }\n    }, orders[i].Date.toDate().getDate() + \"-\" + orders[i].Date.toDate().getMonth() + \"-\" + orders[i].Date.toDate().getFullYear()), /*#__PURE__*/React.createElement(\"td\", {\n      style: {\n        color: \"#576271\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 49\n      }\n    }, \"Rs. \", orders[i].Subtotal, \"\\\\-\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-danger redbox\",\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 53\n      }\n    }, orders[i].Tracking)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-danger redbox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 53\n      }\n    }, \"Order Details\")), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-danger redbox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 53\n      }\n    }, \"Reorder\")), orders[i].Tracking === \"Cancelled\" || orders[i].Tracking === \"Completed\" || orders[i].Tracking === \"Done\" || orders[i].Tracking === \"Rejected\" ? /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-danger redbox\",\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 57\n      }\n    }, \"Cancel\")) : /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-danger redbox\",\n      onClick: () => {\n        updateDBcancel(orders[i].OrderID);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 57\n      }\n    }, \"Cancel\")));\n  }))))));\n\n  async function updateDBcancel(OrderID) {\n    firebase_integration.database.collection(\"RegularOrder\").doc(OrderID.toString()).update({\n      Tracking: \"Cancelled\"\n    }).catch(function (error) {\n      alert(error.message);\n    });\n  }\n}\n\nexport default OrderHistory;","map":{"version":3,"sources":["/mnt/c/Users/Dell/Desktop/se/KhanaShana-Client/src/components/profile/OrderHistory.jsx"],"names":["React","useState","useEffect","Header","firebase_integration","OrderHistory","orders","setorders","database","collection","where","auth","currentUser","uid","toString","onSnapshot","snapshot","order_arr","docs","forEach","doc","push","data","console","log","color","map","x","i","OrderID","Date","toDate","getDate","getMonth","getFullYear","Subtotal","Tracking","updateDBcancel","update","catch","error","alert","message"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Header from '../navigation/Header';\r\nimport firebase_integration from '../fire.js';\r\nimport './orderhistorystyles.css';\r\n\r\nfunction OrderHistory() {\r\n    \r\n    const [orders, setorders] = useState([]) \r\n    \r\n    useEffect(() => {\r\n        firebase_integration.database.collection('RegularOrder').where(\"CustomerID\", \"==\", firebase_integration.auth.currentUser.uid.toString()).onSnapshot((snapshot) => {\r\n            var order_arr = []\r\n            snapshot.docs.forEach(doc => {\r\n                order_arr.push(doc.data())\r\n            });\r\n            setorders(order_arr)\r\n            console.log(order_arr)\r\n        })\r\n    }, orders);   \r\n    \r\n    return (\r\n        <div id=\"orderhistorypage\">\r\n            <Header/>\r\n            <div id=\"orderhistorybox\" className=\"container\">\r\n                <div id=\"boxheading\" className=\"row\">\r\n                    <b>Order History</b>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <table id=\"orderslist\" className=\"table\">\r\n                        <thead>\r\n                            <tr>\r\n                            <th style = {{color: \"#576271\"}} scope=\"col\">Order ID</th>\r\n                            <th style = {{color: \"#576271\"}} scope=\"col\">Date</th>\r\n                            <th style = {{color: \"#576271\"}} scope=\"col\">Cost</th>\r\n                            <th style = {{color: \"#576271\"}} scope=\"col\">Order Tracking</th>\r\n                            <th style = {{color: \"#576271\"}} scope=\"col\">Order Details</th>\r\n                            <th style = {{color: \"#576271\"}} scope=\"col\">Reorder</th>\r\n                            <th style = {{color: \"#576271\"}} scope=\"col\">Cancel</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {\r\n                                orders.map(\r\n                                    (x, i) => {\r\n                                        return (\r\n                                            <tr key = {x.OrderID}>\r\n                                                <td style = {{color: \"#576271\"}}>{orders[i].OrderID}</td>\r\n                                                <td style = {{color: \"#576271\"}}>{orders[i].Date.toDate().getDate()+\"-\"+orders[i].Date.toDate().getMonth()+\"-\"+orders[i].Date.toDate().getFullYear()}</td>\r\n                                                <td style = {{color: \"#576271\"}}>Rs. {orders[i].Subtotal}\\-</td>\r\n                                                <td><button className = \"btn btn-danger redbox\" disabled>{orders[i].Tracking}</button></td>\r\n                                                <td><button className = \"btn btn-danger redbox\">Order Details</button></td>\r\n                                                <td><button className = \"btn btn-danger redbox\">Reorder</button></td>\r\n                                                {orders[i].Tracking === \"Cancelled\" || orders[i].Tracking === \"Completed\" || orders[i].Tracking === \"Done\" || orders[i].Tracking === \"Rejected\"?\r\n                                                    <td><button className = \"btn btn-danger redbox\" disabled>Cancel</button></td>:\r\n                                                    <td><button className = \"btn btn-danger redbox\" onClick = {() => {\r\n                                                        updateDBcancel(orders[i].OrderID)\r\n                                                    }}>Cancel</button></td>   \r\n                                                }\r\n                                            </tr>\r\n                                        );\r\n                                    }\r\n                                )\r\n                            }\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n    async function updateDBcancel(OrderID){\r\n        firebase_integration.database.collection(\"RegularOrder\").doc(OrderID.toString()).update({\r\n            Tracking: \"Cancelled\"\r\n        }).catch(function(error) {\r\n            alert(error.message)\r\n        });\r\n    }\r\n}\r\n\r\nexport default OrderHistory;"]},"metadata":{},"sourceType":"module"}