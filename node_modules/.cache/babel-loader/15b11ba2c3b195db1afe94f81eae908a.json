{"ast":null,"code":"var _jsxFileName = \"/mnt/c/Users/Dell/Desktop/se/KhanaShana-Client/src/components/order/cart.jsx\";\nimport React, { Component, Fragment, useContext, useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { removeItem, addQuantity, subtractQuantity } from './actions/cart-actions';\nimport './orderstyles.css';\nimport Header from './navbar';\nimport firebase_integration from \"../fire\"; // import DiscountContext from '../context/context';\n\nimport CheckoutContext from '../context/checkoutcontext';\nvar discount_price = 0;\nvar discount_bill = 0;\nvar string_discount = \"\";\n\nfunction Cart(props) {\n  // const {discount, setDiscount} = useContext(DiscountContext);\n  // let discount = 0;\n  const {\n    orderdetails,\n    setCart,\n    setOrderDiscount,\n    setTotal\n  } = useContext(CheckoutContext);\n  useEffect(() => {\n    var UserID = firebase_integration.auth.currentUser.uid;\n    firebase_integration.database.collection(\"CustomerDatabase\").where(\"CustomerID\", \"==\", UserID.toString()).get().then(docs => {\n      var mydata = 0;\n      docs.forEach(doc => {\n        mydata = doc.data();\n        discount_price = mydata.Discount;\n      });\n      console.log(mydata.Discount);\n    });\n  }, discount_price);\n  console.log(discount_price); // discount_price = 10;\n  // if(discount === null){\n  //     discount_price = \"0%\";\n  //     string_discount = \"0%\";\n  //     discount_price = parseInt(discount_price.split(\"%\",1));\n  // } else {\n  //     string_discount = discount;\n  //     discount_price = parseInt(discount.split(\"%\",1));\n  // }\n\n  function handleRemove(id) {\n    props.removeItem(id);\n  } //to add the quantity\n\n\n  function handleAddQuantity(id) {\n    props.addQuantity(id);\n  } //to substruct from the quantity\n\n\n  function handleSubtractQuantity(id) {\n    props.subtractQuantity(id);\n  }\n\n  let productsinCart = props.items.map(item => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"product row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"delete-icon col-sm-\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"ion-icon\", {\n      onClick: () => {\n        handleRemove(item.DishID);\n      },\n      name: \"trash-outline\",\n      class: \"remove\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"col-md-\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      class: \"imgcolumn\",\n      src: item.URL,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"name-col col-md-\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"pname\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 21\n      }\n    }, item.Name), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"quantity\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"ion-icon\", {\n      onClick: () => {\n        handleAddQuantity(item.DishID);\n      },\n      name: \"add-circle-outline\",\n      class: \"increase\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 25\n      }\n    }, \"+\"), item.quantity, /*#__PURE__*/React.createElement(\"ion-icon\", {\n      onClick: () => {\n        handleSubtractQuantity(item.DishID);\n      },\n      name: \"remove-circle-outline\",\n      class: \"decrease\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 25\n      }\n    }, \"-\"))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"price-col col-md-\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"priceee\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 21\n      }\n    }, \"Rs \", item.SalePrice), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"timerrr\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }\n    }, item.PrepTime)))));\n  });\n  let productsBill = props.items.map(item => {\n    return /*#__PURE__*/React.createElement(Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"product-bill row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"item col-md-\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"item-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 25\n      }\n    }, item.Name)), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"item-nums col-md-\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"nums\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 25\n      }\n    }, \"x \", item.quantity)), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"item-subtotal col-md-\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"subtotal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 25\n      }\n    }, \"Rs \", item.quantity * item.SalePrice))));\n  });\n  discount_bill = (100 - discount_price) * (props.total + 100) / 100; // console.log(discount_bill)\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    class: \"order\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"order-details01\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, \"ORDER DETAILS\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"container-products\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"products\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, productsinCart)), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"container-bill\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"order-now\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  }, \"ORDER NOW\"), productsBill, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"ddetails\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"delivery\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 17\n    }\n  }, \" Delivery\"), /*#__PURE__*/React.createElement(\"p\", {\n    class: \"delivery-cost\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  }, \"Rs 100\")), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"discount\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"discount-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 17\n    }\n  }, \"Discount\"), /*#__PURE__*/React.createElement(\"p\", {\n    class: \"discount-price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, discount_price, \"%\"), \"\\\"\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"basketTotalContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    class: \"basketTotalTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 17\n    }\n  }, \"ORIGINAL BILL\"), /*#__PURE__*/React.createElement(\"p\", {\n    class: \"basketTotal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 17\n    }\n  }, \"Rs \", props.total + 100)), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"discountContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    class: \"discountedBill\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  }, \"DISCOUNTED BILL\"), /*#__PURE__*/React.createElement(\"p\", {\n    class: \"discountedTotal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }\n  }, \"Rs \", discount_bill)), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Link, {\n    to: \"/checkout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"check\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => {\n      // if(discount_price === \"0%\"){\n      //     setOrderDiscount(\"0%\")\n      // } else {\n      //     setOrderDiscount(discount)\n      // }\n      setOrderDiscount(string_discount);\n      setCart(props.items);\n      setTotal(props.total);\n      console.log(props.items);\n    },\n    type: \"button\",\n    class: \"btn btn-success btn-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }\n  }, \"CHECKOUT\")))));\n}\n\nconst mapStateToProps = state => {\n  return {\n    items: state.cart,\n    addedItems: state.addedItems,\n    total: state.total\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    removeItem: id => {\n      dispatch(removeItem(id));\n    },\n    addQuantity: id => {\n      dispatch(addQuantity(id));\n    },\n    subtractQuantity: id => {\n      dispatch(subtractQuantity(id));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Cart);","map":{"version":3,"sources":["/mnt/c/Users/Dell/Desktop/se/KhanaShana-Client/src/components/order/cart.jsx"],"names":["React","Component","Fragment","useContext","useState","useEffect","connect","Link","removeItem","addQuantity","subtractQuantity","Header","firebase_integration","CheckoutContext","discount_price","discount_bill","string_discount","Cart","props","orderdetails","setCart","setOrderDiscount","setTotal","UserID","auth","currentUser","uid","database","collection","where","toString","get","then","docs","mydata","forEach","doc","data","Discount","console","log","handleRemove","id","handleAddQuantity","handleSubtractQuantity","productsinCart","items","map","item","DishID","URL","Name","quantity","SalePrice","PrepTime","productsBill","total","mapStateToProps","state","cart","addedItems","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component, Fragment, useContext, useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport { removeItem,addQuantity,subtractQuantity} from './actions/cart-actions'\r\nimport './orderstyles.css';\r\nimport Header from './navbar';\r\nimport firebase_integration from \"../fire\";\r\n// import DiscountContext from '../context/context';\r\nimport CheckoutContext from '../context/checkoutcontext';\r\n\r\nvar discount_price = 0;\r\nvar discount_bill = 0;\r\nvar string_discount = \"\";\r\n\r\nfunction Cart(props) {\r\n    // const {discount, setDiscount} = useContext(DiscountContext);\r\n    // let discount = 0;\r\n    const {orderdetails, setCart, setOrderDiscount, setTotal} = useContext(CheckoutContext);\r\n\r\n\r\n    useEffect(() => {\r\n        var UserID = firebase_integration.auth.currentUser.uid\r\n        firebase_integration.database.collection(\"CustomerDatabase\").where(\"CustomerID\", \"==\", UserID.toString()).get().then((docs) => {\r\n          var mydata = 0              \r\n          docs.forEach((doc) => {\r\n            mydata = doc.data()\r\n            discount_price = mydata.Discount\r\n          });\r\n    \r\n          \r\n          console.log(mydata.Discount)\r\n         \r\n        })\r\n      }, discount_price);\r\n\r\n      \r\n      console.log(discount_price);\r\n    // discount_price = 10;\r\n    \r\n\r\n    // if(discount === null){\r\n        \r\n    //     discount_price = \"0%\";\r\n    //     string_discount = \"0%\";\r\n    //     discount_price = parseInt(discount_price.split(\"%\",1));\r\n    // } else {\r\n    //     string_discount = discount;\r\n    //     discount_price = parseInt(discount.split(\"%\",1));\r\n    // }\r\n    \r\n    function handleRemove(id){\r\n        props.removeItem(id);\r\n    }\r\n    //to add the quantity\r\n    function handleAddQuantity(id){\r\n        props.addQuantity(id);\r\n    }\r\n    //to substruct from the quantity\r\n    function handleSubtractQuantity(id){\r\n        props.subtractQuantity(id);\r\n    }\r\n\r\n    let productsinCart = props.items.map((item) => {\r\n        return (\r\n            <div>\r\n            <Fragment>\r\n                \r\n            \r\n            <div class = \"product row\">\r\n                <div class = \"delete-icon col-sm-\">\r\n                    <ion-icon onClick={()=>{handleRemove(item.DishID)}} name=\"trash-outline\" class = \"remove\"></ion-icon>\r\n                </div>\r\n                <div class = \"col-md-\">\r\n                    <img class = \"imgcolumn\" src = {item.URL} />\r\n                </div>\r\n                <div class = \"name-col col-md-\">\r\n                    <div class = \"pname\">{item.Name}</div>\r\n                    <div class = \"quantity\">\r\n                        <ion-icon onClick={()=>{handleAddQuantity(item.DishID)}} name = \"add-circle-outline\" class = \"increase\">+</ion-icon>\r\n                            {item.quantity}\r\n                        <ion-icon onClick={()=>{handleSubtractQuantity(item.DishID)}} name = \"remove-circle-outline\" class = \"decrease\">-</ion-icon>\r\n                    </div>                     \r\n                </div>\r\n                <div class =\"price-col col-md-\">\r\n                    <div class = \"priceee\">Rs {item.SalePrice}</div>\r\n                    <div class = \"timerrr\">{item.PrepTime}</div>\r\n                    \r\n                </div>\r\n            </div>\r\n            </Fragment>\r\n            </div>\r\n        )\r\n    });\r\n\r\n\r\n    let productsBill = props.items.map((item) => {\r\n\r\n        return(\r\n            <Fragment>\r\n                <div class = \"product-bill row\">\r\n                    <div class = \"item col-md-\">\r\n                        <div class = \"item-name\">{item.Name}</div>\r\n                    </div>\r\n                    <div class = \"item-nums col-md-\">\r\n                        <div class = \"nums\">x {item.quantity}</div>\r\n                    </div>\r\n                    <div class = \"item-subtotal col-md-\">\r\n                        <div class = \"subtotal\">Rs {item.quantity*item.SalePrice}</div>\r\n                    </div>\r\n                </div>\r\n            </Fragment>\r\n        )\r\n    });\r\n\r\n    discount_bill = ((100-discount_price)*(props.total+100))/100;\r\n    // console.log(discount_bill)\r\n\r\n    return (\r\n        \r\n    <div class = \"order\">\r\n        {/* {setDiscount(100)} */}\r\n        {/* {console.log(discount)} */}\r\n        <div class = \"order-details01\">ORDER DETAILS</div>\r\n        <div class = \"container-products\">\r\n            <div class = \"products\">\r\n                {productsinCart}\r\n            </div>\r\n        </div>\r\n        <div class = \"container-bill\">\r\n            <div class = \"order-now\">\r\n                ORDER NOW\r\n            </div>\r\n            {productsBill}\r\n            <br/> <br/>\r\n            <div class = \"ddetails\">\r\n                <div class = \"delivery\"> Delivery</div>\r\n                <p class = \"delivery-cost\">Rs 100</p>\r\n            </div>\r\n            <div class = \"discount\">\r\n                <div class = \"discount-title\">Discount</div>\r\n                <p class = \"discount-price\">{discount_price}%</p>\"\r\n            </div>\r\n            <br/> <br/>\r\n            <div class = \"basketTotalContainer\">\r\n                <p class = \"basketTotalTitle\">ORIGINAL BILL</p>\r\n                <p class = \"basketTotal\">Rs {props.total+100}</p>\r\n            </div>\r\n            <div class = \"discountContainer\">\r\n                <p class = \"discountedBill\">DISCOUNTED BILL</p>\r\n                <p class = \"discountedTotal\">Rs {discount_bill}</p>\r\n            </div>\r\n            <br/>\r\n            <Link to = \"/checkout\">\r\n            <div class = \"check\">\r\n            <button onClick = {\r\n                ()=>{\r\n                    \r\n    // if(discount_price === \"0%\"){\r\n    //     setOrderDiscount(\"0%\")\r\n    // } else {\r\n    //     setOrderDiscount(discount)\r\n    // }\r\n    setOrderDiscount(string_discount)\r\n                setCart(props.items)\r\n                setTotal(props.total)\r\n                console.log(props.items)           \r\n            \r\n            }} type=\"button\" class=\"btn btn-success btn-lg\">CHECKOUT</button>\r\n            </div>\r\n            </Link>\r\n        </div>\r\n     </div>\r\n   \r\n     \r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state)=>{\r\n    return{\r\n        items: state.cart,\r\n        addedItems: state.addedItems,\r\n        total: state.total\r\n    }\r\n}\r\nconst mapDispatchToProps = (dispatch)=>{\r\n    return{\r\n        removeItem: (id)=>{dispatch(removeItem(id))},\r\n        addQuantity: (id)=>{dispatch(addQuantity(id))},\r\n        subtractQuantity: (id)=>{dispatch(subtractQuantity(id))}\r\n    }\r\n}\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Cart)"]},"metadata":{},"sourceType":"module"}