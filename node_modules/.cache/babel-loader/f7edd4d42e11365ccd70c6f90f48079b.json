{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.AnnotationLayerInternal = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf3 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _pdfjsDist = _interopRequireDefault(require(\"pdfjs-dist\"));\n\nvar _DocumentContext = _interopRequireDefault(require(\"../DocumentContext\"));\n\nvar _PageContext = _interopRequireDefault(require(\"../PageContext\"));\n\nvar _utils = require(\"../shared/utils\");\n\nvar _propTypes2 = require(\"../shared/propTypes\");\n\nvar AnnotationLayerInternal = /*#__PURE__*/function (_PureComponent) {\n  (0, _inherits2.default)(AnnotationLayerInternal, _PureComponent);\n\n  function AnnotationLayerInternal() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    (0, _classCallCheck2.default)(this, AnnotationLayerInternal);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = (0, _possibleConstructorReturn2.default)(this, (_getPrototypeOf2 = (0, _getPrototypeOf3.default)(AnnotationLayerInternal)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), \"state\", {\n      annotations: null\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), \"loadAnnotations\", /*#__PURE__*/(0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee() {\n      var page, cancellable, annotations;\n      return _regenerator.default.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              page = _this.props.page;\n              _context.prev = 1;\n              cancellable = (0, _utils.makeCancellable)(page.getAnnotations());\n              _this.runningTask = cancellable;\n              _context.next = 6;\n              return cancellable.promise;\n\n            case 6:\n              annotations = _context.sent;\n\n              _this.setState({\n                annotations: annotations\n              }, _this.onLoadSuccess);\n\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](1);\n\n              _this.onLoadError(_context.t0);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this, [[1, 10]]);\n    })));\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), \"onLoadSuccess\", function () {\n      var onGetAnnotationsSuccess = _this.props.onGetAnnotationsSuccess;\n      var annotations = _this.state.annotations;\n      (0, _utils.callIfDefined)(onGetAnnotationsSuccess, annotations);\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), \"onLoadError\", function (error) {\n      if ((0, _utils.isCancelException)(error)) {\n        return;\n      }\n\n      _this.setState({\n        annotations: false\n      });\n\n      (0, _utils.errorOnDev)(error);\n      var onGetAnnotationsError = _this.props.onGetAnnotationsError;\n      (0, _utils.callIfDefined)(onGetAnnotationsError, error);\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), \"onRenderSuccess\", function () {\n      var onRenderAnnotationLayerSuccess = _this.props.onRenderAnnotationLayerSuccess;\n      (0, _utils.callIfDefined)(onRenderAnnotationLayerSuccess);\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), \"onRenderError\", function (error) {\n      if ((0, _utils.isCancelException)(error)) {\n        return;\n      }\n\n      (0, _utils.errorOnDev)(error);\n      var onRenderAnnotationLayerError = _this.props.onRenderAnnotationLayerError;\n      (0, _utils.callIfDefined)(onRenderAnnotationLayerError, error);\n    });\n    return _this;\n  }\n\n  (0, _createClass2.default)(AnnotationLayerInternal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var page = this.props.page;\n\n      if (!page) {\n        throw new Error('Attempted to load page annotations, but no page was specified.');\n      }\n\n      this.loadAnnotations();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props = this.props,\n          page = _this$props.page,\n          renderInteractiveForms = _this$props.renderInteractiveForms;\n\n      if (prevProps.page && page !== prevProps.page || renderInteractiveForms !== prevProps.renderInteractiveForms) {\n        this.loadAnnotations();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      (0, _utils.cancelRunningTask)(this.runningTask);\n    }\n  }, {\n    key: \"renderAnnotationLayer\",\n    value: function renderAnnotationLayer() {\n      var annotations = this.state.annotations;\n\n      if (!annotations) {\n        return;\n      }\n\n      var _this$props2 = this.props,\n          linkService = _this$props2.linkService,\n          page = _this$props2.page,\n          renderInteractiveForms = _this$props2.renderInteractiveForms;\n      var viewport = this.viewport.clone({\n        dontFlip: true\n      });\n      var parameters = {\n        annotations: annotations,\n        div: this.annotationLayer,\n        linkService: linkService,\n        page: page,\n        renderInteractiveForms: renderInteractiveForms,\n        viewport: viewport\n      };\n      this.annotationLayer.innerHTML = '';\n\n      try {\n        _pdfjsDist.default.AnnotationLayer.render(parameters);\n\n        this.onRenderSuccess();\n      } catch (error) {\n        this.onRenderError(error);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return _react.default.createElement(\"div\", {\n        className: \"react-pdf__Page__annotations annotationLayer\",\n        ref: function ref(_ref2) {\n          _this2.annotationLayer = _ref2;\n        }\n      }, this.renderAnnotationLayer());\n    }\n  }, {\n    key: \"viewport\",\n    get: function get() {\n      var _this$props3 = this.props,\n          page = _this$props3.page,\n          rotate = _this$props3.rotate,\n          scale = _this$props3.scale;\n      return page.getViewport({\n        scale: scale,\n        rotation: rotate\n      });\n    }\n  }]);\n  return AnnotationLayerInternal;\n}(_react.PureComponent);\n\nexports.AnnotationLayerInternal = AnnotationLayerInternal;\nAnnotationLayerInternal.propTypes = {\n  linkService: _propTypes2.isLinkService.isRequired,\n  onGetAnnotationsError: _propTypes.default.func,\n  onGetAnnotationsSuccess: _propTypes.default.func,\n  onRenderAnnotationLayerError: _propTypes.default.func,\n  onRenderAnnotationLayerSuccess: _propTypes.default.func,\n  page: _propTypes2.isPage,\n  renderInteractiveForms: _propTypes.default.bool,\n  rotate: _propTypes2.isRotate,\n  scale: _propTypes.default.number\n};\n\nvar AnnotationLayer = function AnnotationLayer(props) {\n  return _react.default.createElement(_DocumentContext.default.Consumer, null, function (documentContext) {\n    return _react.default.createElement(_PageContext.default.Consumer, null, function (pageContext) {\n      return _react.default.createElement(AnnotationLayerInternal, (0, _extends2.default)({}, documentContext, pageContext, props));\n    });\n  });\n};\n\nvar _default = AnnotationLayer;\nexports.default = _default;","map":{"version":3,"sources":["/mnt/c/Users/Dell/Desktop/KhanaWeb/KhanaShana-Client/node_modules/react-pdf/dist/Page/AnnotationLayer.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","Object","defineProperty","exports","value","default","AnnotationLayerInternal","_extends2","_regenerator","_asyncToGenerator2","_classCallCheck2","_createClass2","_possibleConstructorReturn2","_getPrototypeOf3","_inherits2","_assertThisInitialized2","_defineProperty2","_react","_propTypes","_pdfjsDist","_DocumentContext","_PageContext","_utils","_propTypes2","_PureComponent","_getPrototypeOf2","_this","_len","arguments","length","args","Array","_key","call","apply","concat","annotations","mark","_callee","page","cancellable","wrap","_callee$","_context","prev","next","props","makeCancellable","getAnnotations","runningTask","promise","sent","setState","onLoadSuccess","t0","onLoadError","stop","onGetAnnotationsSuccess","state","callIfDefined","error","isCancelException","errorOnDev","onGetAnnotationsError","onRenderAnnotationLayerSuccess","onRenderAnnotationLayerError","key","componentDidMount","Error","loadAnnotations","componentDidUpdate","prevProps","_this$props","renderInteractiveForms","componentWillUnmount","cancelRunningTask","renderAnnotationLayer","_this$props2","linkService","viewport","clone","dontFlip","parameters","div","annotationLayer","innerHTML","AnnotationLayer","render","onRenderSuccess","onRenderError","_this2","createElement","className","ref","_ref2","get","_this$props3","rotate","scale","getViewport","rotation","PureComponent","propTypes","isLinkService","isRequired","func","isPage","bool","isRotate","number","Consumer","documentContext","pageContext","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.AnnotationLayerInternal = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf3 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _pdfjsDist = _interopRequireDefault(require(\"pdfjs-dist\"));\n\nvar _DocumentContext = _interopRequireDefault(require(\"../DocumentContext\"));\n\nvar _PageContext = _interopRequireDefault(require(\"../PageContext\"));\n\nvar _utils = require(\"../shared/utils\");\n\nvar _propTypes2 = require(\"../shared/propTypes\");\n\nvar AnnotationLayerInternal =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  (0, _inherits2.default)(AnnotationLayerInternal, _PureComponent);\n\n  function AnnotationLayerInternal() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    (0, _classCallCheck2.default)(this, AnnotationLayerInternal);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = (0, _possibleConstructorReturn2.default)(this, (_getPrototypeOf2 = (0, _getPrototypeOf3.default)(AnnotationLayerInternal)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), \"state\", {\n      annotations: null\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), \"loadAnnotations\",\n    /*#__PURE__*/\n    (0, _asyncToGenerator2.default)(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee() {\n      var page, cancellable, annotations;\n      return _regenerator.default.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              page = _this.props.page;\n              _context.prev = 1;\n              cancellable = (0, _utils.makeCancellable)(page.getAnnotations());\n              _this.runningTask = cancellable;\n              _context.next = 6;\n              return cancellable.promise;\n\n            case 6:\n              annotations = _context.sent;\n\n              _this.setState({\n                annotations: annotations\n              }, _this.onLoadSuccess);\n\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](1);\n\n              _this.onLoadError(_context.t0);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this, [[1, 10]]);\n    })));\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), \"onLoadSuccess\", function () {\n      var onGetAnnotationsSuccess = _this.props.onGetAnnotationsSuccess;\n      var annotations = _this.state.annotations;\n      (0, _utils.callIfDefined)(onGetAnnotationsSuccess, annotations);\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), \"onLoadError\", function (error) {\n      if ((0, _utils.isCancelException)(error)) {\n        return;\n      }\n\n      _this.setState({\n        annotations: false\n      });\n\n      (0, _utils.errorOnDev)(error);\n      var onGetAnnotationsError = _this.props.onGetAnnotationsError;\n      (0, _utils.callIfDefined)(onGetAnnotationsError, error);\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), \"onRenderSuccess\", function () {\n      var onRenderAnnotationLayerSuccess = _this.props.onRenderAnnotationLayerSuccess;\n      (0, _utils.callIfDefined)(onRenderAnnotationLayerSuccess);\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), \"onRenderError\", function (error) {\n      if ((0, _utils.isCancelException)(error)) {\n        return;\n      }\n\n      (0, _utils.errorOnDev)(error);\n      var onRenderAnnotationLayerError = _this.props.onRenderAnnotationLayerError;\n      (0, _utils.callIfDefined)(onRenderAnnotationLayerError, error);\n    });\n    return _this;\n  }\n\n  (0, _createClass2.default)(AnnotationLayerInternal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var page = this.props.page;\n\n      if (!page) {\n        throw new Error('Attempted to load page annotations, but no page was specified.');\n      }\n\n      this.loadAnnotations();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props = this.props,\n          page = _this$props.page,\n          renderInteractiveForms = _this$props.renderInteractiveForms;\n\n      if (prevProps.page && page !== prevProps.page || renderInteractiveForms !== prevProps.renderInteractiveForms) {\n        this.loadAnnotations();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      (0, _utils.cancelRunningTask)(this.runningTask);\n    }\n  }, {\n    key: \"renderAnnotationLayer\",\n    value: function renderAnnotationLayer() {\n      var annotations = this.state.annotations;\n\n      if (!annotations) {\n        return;\n      }\n\n      var _this$props2 = this.props,\n          linkService = _this$props2.linkService,\n          page = _this$props2.page,\n          renderInteractiveForms = _this$props2.renderInteractiveForms;\n      var viewport = this.viewport.clone({\n        dontFlip: true\n      });\n      var parameters = {\n        annotations: annotations,\n        div: this.annotationLayer,\n        linkService: linkService,\n        page: page,\n        renderInteractiveForms: renderInteractiveForms,\n        viewport: viewport\n      };\n      this.annotationLayer.innerHTML = '';\n\n      try {\n        _pdfjsDist.default.AnnotationLayer.render(parameters);\n\n        this.onRenderSuccess();\n      } catch (error) {\n        this.onRenderError(error);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return _react.default.createElement(\"div\", {\n        className: \"react-pdf__Page__annotations annotationLayer\",\n        ref: function ref(_ref2) {\n          _this2.annotationLayer = _ref2;\n        }\n      }, this.renderAnnotationLayer());\n    }\n  }, {\n    key: \"viewport\",\n    get: function get() {\n      var _this$props3 = this.props,\n          page = _this$props3.page,\n          rotate = _this$props3.rotate,\n          scale = _this$props3.scale;\n      return page.getViewport({\n        scale: scale,\n        rotation: rotate\n      });\n    }\n  }]);\n  return AnnotationLayerInternal;\n}(_react.PureComponent);\n\nexports.AnnotationLayerInternal = AnnotationLayerInternal;\nAnnotationLayerInternal.propTypes = {\n  linkService: _propTypes2.isLinkService.isRequired,\n  onGetAnnotationsError: _propTypes.default.func,\n  onGetAnnotationsSuccess: _propTypes.default.func,\n  onRenderAnnotationLayerError: _propTypes.default.func,\n  onRenderAnnotationLayerSuccess: _propTypes.default.func,\n  page: _propTypes2.isPage,\n  renderInteractiveForms: _propTypes.default.bool,\n  rotate: _propTypes2.isRotate,\n  scale: _propTypes.default.number\n};\n\nvar AnnotationLayer = function AnnotationLayer(props) {\n  return _react.default.createElement(_DocumentContext.default.Consumer, null, function (documentContext) {\n    return _react.default.createElement(_PageContext.default.Consumer, null, function (pageContext) {\n      return _react.default.createElement(AnnotationLayerInternal, (0, _extends2.default)({}, documentContext, pageContext, props));\n    });\n  });\n};\n\nvar _default = AnnotationLayer;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}