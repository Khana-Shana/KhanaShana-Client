{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _omit from \"lodash/omit\";\nimport _pick from \"lodash/pick\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport shallowEqual from '../utils/shallowEqual';\nimport { polyfill } from 'react-lifecycles-compat';\nimport { findNodeOfTree } from '../utils/treeUtils';\nimport IntlProvider from '../IntlProvider';\nimport FormattedMessage from '../IntlProvider/FormattedMessage';\nimport DropdownMenu, { dropdownMenuPropTypes } from './DropdownMenu';\nimport _stringToObject from '../utils/stringToObject';\nimport getSafeRegExpString from '../utils/getSafeRegExpString';\nimport { flattenTree, getNodeParents } from '../utils/treeUtils';\nimport { getDerivedStateForCascade } from './utils';\nimport { defaultProps, prefix, getUnhandledProps, createChainedFunction } from '../utils';\nimport { PickerToggle, MenuWrapper, SearchBar, PickerToggleTrigger, getToggleWrapperClassName, createConcatChildrenFunction } from '../Picker';\nimport { PLACEMENT } from '../constants';\n\nvar Cascader = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(Cascader, _React$Component);\n\n  function Cascader(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.triggerRef = void 0;\n    _this.containerRef = void 0;\n    _this.positionRef = void 0;\n    _this.menuContainerRef = void 0;\n    _this.isControlled = void 0;\n\n    _this.handleSelect = function (node, cascadeItems, activePaths, isLeafNode, event) {\n      var _this$props = _this.props,\n          onChange = _this$props.onChange,\n          onSelect = _this$props.onSelect,\n          valueKey = _this$props.valueKey,\n          childrenKey = _this$props.childrenKey,\n          parentSelectable = _this$props.parentSelectable;\n\n      var prevValue = _this.getValue();\n\n      var value = node[valueKey];\n      onSelect === null || onSelect === void 0 ? void 0 : onSelect(node, activePaths, createConcatChildrenFunction(node, value, {\n        valueKey: valueKey,\n        childrenKey: childrenKey\n      }), event);\n      /**\n       Determines whether the option is a leaf node, and if so, closes the picker.\n       */\n\n      if (isLeafNode) {\n        _this.handleCloseDropdown();\n\n        var _nextState = {\n          selectNode: node\n        };\n\n        if (!_this.isControlled) {\n          _nextState = _extends({}, _nextState, {\n            value: value\n          }, getDerivedStateForCascade(_this.props, _this.state, value));\n        }\n\n        _this.setState(_nextState);\n\n        if (!shallowEqual(value, prevValue)) {\n          onChange === null || onChange === void 0 ? void 0 : onChange(value, event);\n        }\n\n        return;\n      }\n\n      var nextState = {\n        selectNode: node,\n        items: cascadeItems,\n        tempActivePaths: activePaths\n      };\n      /** When the parent is optional, the value and the displayed path are updated. */\n\n      if (parentSelectable) {\n        nextState.value = value;\n        nextState.activePaths = activePaths;\n\n        if (!shallowEqual(value, prevValue)) {\n          onChange === null || onChange === void 0 ? void 0 : onChange(value, event);\n        }\n      }\n\n      _this.setState(nextState, function () {\n        var _this$positionRef$cur, _this$positionRef$cur2; // Update menu position\n\n\n        (_this$positionRef$cur = _this.positionRef.current) === null || _this$positionRef$cur === void 0 ? void 0 : (_this$positionRef$cur2 = _this$positionRef$cur.updatePosition) === null || _this$positionRef$cur2 === void 0 ? void 0 : _this$positionRef$cur2.call(_this$positionRef$cur);\n      });\n    };\n\n    _this.handleSearchRowSelect = function (item, event) {\n      var _this$props2 = _this.props,\n          valueKey = _this$props2.valueKey,\n          onChange = _this$props2.onChange,\n          onSelect = _this$props2.onSelect;\n      var value = item[valueKey];\n\n      _this.handleCloseDropdown();\n\n      var nextState = {\n        selectNode: item,\n        searchKeyword: ''\n      };\n\n      if (!_this.isControlled) {\n        nextState = _extends({}, nextState, {}, getDerivedStateForCascade(_this.props, _this.state, value), {\n          value: value\n        });\n      }\n\n      _this.setState(nextState);\n\n      onSelect === null || onSelect === void 0 ? void 0 : onSelect(item, null, null, event);\n      onChange === null || onChange === void 0 ? void 0 : onChange(value, event);\n    };\n\n    _this.handleCloseDropdown = function () {\n      if (_this.triggerRef.current) {\n        _this.triggerRef.current.hide();\n      }\n    };\n\n    _this.handleOpenDropdown = function () {\n      if (_this.triggerRef.current) {\n        _this.triggerRef.current.show();\n      }\n    };\n\n    _this.open = function () {\n      var _this$handleOpenDropd, _this2;\n\n      (_this$handleOpenDropd = (_this2 = _this).handleOpenDropdown) === null || _this$handleOpenDropd === void 0 ? void 0 : _this$handleOpenDropd.call(_this2);\n    };\n\n    _this.close = function () {\n      var _this$handleCloseDrop, _this3;\n\n      (_this$handleCloseDrop = (_this3 = _this).handleCloseDropdown) === null || _this$handleCloseDrop === void 0 ? void 0 : _this$handleCloseDrop.call(_this3);\n    };\n\n    _this.handleClean = function (event) {\n      var _this$props3 = _this.props,\n          disabled = _this$props3.disabled,\n          onChange = _this$props3.onChange,\n          data = _this$props3.data;\n\n      if (disabled) {\n        return;\n      }\n\n      var nextState = {\n        items: [data],\n        value: null,\n        selectNode: null,\n        activePaths: [],\n        tempActivePaths: []\n      };\n\n      _this.setState(nextState, function () {\n        onChange === null || onChange === void 0 ? void 0 : onChange(null, event);\n      });\n    };\n\n    _this.handleSearch = function (searchKeyword, event) {\n      var _this$props$onSearch, _this$props4;\n\n      _this.setState({\n        searchKeyword: searchKeyword\n      });\n\n      (_this$props$onSearch = (_this$props4 = _this.props).onSearch) === null || _this$props$onSearch === void 0 ? void 0 : _this$props$onSearch.call(_this$props4, searchKeyword, event);\n    };\n\n    _this.handleEntered = function () {\n      var _this$props$onOpen, _this$props5;\n\n      (_this$props$onOpen = (_this$props5 = _this.props).onOpen) === null || _this$props$onOpen === void 0 ? void 0 : _this$props$onOpen.call(_this$props5);\n\n      _this.setState({\n        active: true\n      });\n    };\n\n    _this.handleExit = function () {\n      var _this$props$onClose, _this$props6;\n\n      (_this$props$onClose = (_this$props6 = _this.props).onClose) === null || _this$props$onClose === void 0 ? void 0 : _this$props$onClose.call(_this$props6);\n\n      _this.setState({\n        searchKeyword: '',\n        active: false\n      });\n    };\n\n    _this.addPrefix = function (name) {\n      return prefix(_this.props.classPrefix)(name);\n    };\n\n    _this.renderSearchRow = function (item, key) {\n      var _classNames;\n\n      var _this$props7 = _this.props,\n          labelKey = _this$props7.labelKey,\n          valueKey = _this$props7.valueKey,\n          _this$props7$disabled = _this$props7.disabledItemValues,\n          disabledItemValues = _this$props7$disabled === void 0 ? [] : _this$props7$disabled;\n      var searchKeyword = _this.state.searchKeyword;\n      var regx = new RegExp(getSafeRegExpString(searchKeyword), 'ig');\n      var nodes = getNodeParents(item);\n      nodes.push(item);\n      nodes = nodes.map(function (node) {\n        var _extends2;\n\n        var labelElements = [];\n        var a = node[labelKey].split(regx);\n        var b = node[labelKey].match(regx);\n\n        for (var i = 0; i < a.length; i++) {\n          labelElements.push(a[i]);\n\n          if (b && b[i]) {\n            labelElements.push(React.createElement(\"strong\", {\n              key: i\n            }, b[i]));\n          }\n        }\n\n        return _extends({}, node, (_extends2 = {}, _extends2[labelKey] = labelElements, _extends2));\n      });\n      var disabled = disabledItemValues.some(function (value) {\n        return nodes.some(function (node) {\n          return node[valueKey] === value;\n        });\n      });\n      var itemClasses = classNames(_this.addPrefix('cascader-row'), (_classNames = {}, _classNames[_this.addPrefix('cascader-row-disabled')] = disabled, _classNames));\n      return React.createElement(\"div\", {\n        key: key,\n        className: itemClasses,\n        onClick: function onClick(event) {\n          if (!disabled) {\n            _this.handleSearchRowSelect(item, event);\n          }\n        }\n      }, nodes.map(function (node, index) {\n        return React.createElement(\"span\", {\n          key: \"col-\" + index,\n          className: _this.addPrefix('cascader-col')\n        }, node[labelKey]);\n      }));\n    };\n\n    var initState = {\n      searchKeyword: '',\n      selectNode: null,\n      data: props.data,\n      value: props.defaultValue,\n\n      /**\n       * 选中值的路径\n       */\n      activePaths: [],\n\n      /**\n       * 用于展示面板的数据列表，是一个二维的数组\n       * 是通过 data 树结构转换成的二维的数组，其中只包含页面上展示的数据\n       */\n      items: []\n    };\n    _this.state = _extends({}, initState, {}, getDerivedStateForCascade(props, initState), {\n      flattenData: flattenTree(props.data)\n    });\n    _this.isControlled = !_isUndefined(props.value);\n    _this.triggerRef = React.createRef();\n    _this.containerRef = React.createRef();\n    _this.positionRef = React.createRef(); // for test\n\n    _this.menuContainerRef = React.createRef();\n    return _this;\n  }\n\n  Cascader.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    var value = nextProps.value,\n        data = nextProps.data,\n        labelKey = nextProps.labelKey,\n        valueKey = nextProps.valueKey;\n\n    if (data !== prevState.data) {\n      var _prevState$selectNode; // First get the value of the clicked node `selectNodeValue`, and then get the new `newChildren`.\n\n\n      var selectNodeValue = prevState === null || prevState === void 0 ? void 0 : (_prevState$selectNode = prevState.selectNode) === null || _prevState$selectNode === void 0 ? void 0 : _prevState$selectNode[valueKey];\n\n      if (selectNodeValue) {\n        var _findNodeOfTree;\n\n        var newChildren = ((_findNodeOfTree = findNodeOfTree(data, function (item) {\n          return shallowEqual(item[valueKey], selectNodeValue);\n        })) === null || _findNodeOfTree === void 0 ? void 0 : _findNodeOfTree.children) || [];\n        return _extends({}, getDerivedStateForCascade(nextProps, prevState, selectNodeValue, newChildren.map(function (item) {\n          return _stringToObject(item, labelKey, valueKey);\n        })), {\n          data: data,\n          flattenData: flattenTree(data)\n        });\n      }\n\n      return _extends({}, getDerivedStateForCascade(nextProps, prevState), {\n        flattenData: flattenTree(data),\n        data: data\n      });\n    }\n\n    if (typeof value !== 'undefined' && !shallowEqual(value, prevState.value)) {\n      return _extends({}, getDerivedStateForCascade(nextProps, prevState), {\n        value: value\n      });\n    }\n\n    return null;\n  };\n\n  var _proto = Cascader.prototype;\n\n  _proto.getValue = function getValue(nextProps) {\n    var _ref = nextProps || this.props,\n        value = _ref.value;\n\n    return _isUndefined(value) ? this.state.value : value;\n  };\n  /**\n   * 在 data 对象中的数据类型是字符串比如: ['foo']\n   * 通过这个行数可以把值转换成 [{name:'foo':value:'foo'}]\n   */\n\n\n  _proto.stringToObject = function stringToObject(value) {\n    var _this$props8 = this.props,\n        labelKey = _this$props8.labelKey,\n        valueKey = _this$props8.valueKey;\n    return _stringToObject(value, labelKey, valueKey);\n  };\n\n  _proto.someKeyword = function someKeyword(item) {\n    var labelKey = this.props.labelKey;\n    var searchKeyword = this.state.searchKeyword;\n\n    if (item[labelKey].match(new RegExp(getSafeRegExpString(searchKeyword), 'i'))) {\n      return true;\n    }\n\n    if (item.parent && this.someKeyword(item.parent)) {\n      return true;\n    }\n\n    return false;\n  };\n\n  _proto.getSearchResult = function getSearchResult() {\n    var _this4 = this;\n\n    var childrenKey = this.props.childrenKey;\n    var flattenData = this.state.flattenData;\n    var items = [];\n    var result = flattenData.filter(function (item) {\n      if (item[childrenKey]) {\n        return false;\n      }\n\n      return _this4.someKeyword(item);\n    });\n\n    for (var i = 0; i < result.length; i++) {\n      items.push(result[i]);\n\n      if (i === 99) {\n        return items;\n      }\n    }\n\n    return items;\n  };\n\n  _proto.renderSearchResultPanel = function renderSearchResultPanel() {\n    var locale = this.props.locale;\n    var searchKeyword = this.state.searchKeyword;\n\n    if (searchKeyword === '') {\n      return null;\n    }\n\n    var items = this.getSearchResult();\n    return React.createElement(\"div\", {\n      className: this.addPrefix('cascader-search-panel')\n    }, items.length ? items.map(this.renderSearchRow) : React.createElement(\"div\", {\n      className: this.addPrefix('none')\n    }, locale.noResultsText));\n  };\n\n  _proto.renderDropdownMenu = function renderDropdownMenu() {\n    var _classNames2;\n\n    var _this$state = this.state,\n        items = _this$state.items,\n        tempActivePaths = _this$state.tempActivePaths,\n        activePaths = _this$state.activePaths,\n        searchKeyword = _this$state.searchKeyword;\n    var _this$props9 = this.props,\n        renderMenu = _this$props9.renderMenu,\n        renderExtraFooter = _this$props9.renderExtraFooter,\n        menuClassName = _this$props9.menuClassName,\n        menuStyle = _this$props9.menuStyle,\n        searchable = _this$props9.searchable,\n        locale = _this$props9.locale,\n        inline = _this$props9.inline;\n    var classes = classNames(this.addPrefix('cascader-menu'), menuClassName, (_classNames2 = {}, _classNames2[this.addPrefix('inline')] = inline, _classNames2));\n\n    var menuProps = _pick(this.props, Object.keys(_omit(dropdownMenuPropTypes, ['classPrefix'])));\n\n    return React.createElement(MenuWrapper, {\n      className: classes,\n      style: menuStyle\n    }, searchable && React.createElement(SearchBar, {\n      placeholder: locale.searchPlaceholder,\n      onChange: this.handleSearch,\n      value: searchKeyword\n    }), this.renderSearchResultPanel(), searchKeyword === '' && React.createElement(DropdownMenu, _extends({}, menuProps, {\n      classPrefix: this.addPrefix('cascader-menu'),\n      ref: this.menuContainerRef,\n      cascadeItems: items,\n      cascadePathItems: tempActivePaths || activePaths,\n      activeItemValue: this.getValue(),\n      onSelect: this.handleSelect,\n      renderMenu: renderMenu\n    })), renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n\n  _proto.render = function render() {\n    var _this$props10 = this.props,\n        valueKey = _this$props10.valueKey,\n        labelKey = _this$props10.labelKey,\n        placeholder = _this$props10.placeholder,\n        renderValue = _this$props10.renderValue,\n        disabled = _this$props10.disabled,\n        cleanable = _this$props10.cleanable,\n        locale = _this$props10.locale,\n        toggleComponentClass = _this$props10.toggleComponentClass,\n        style = _this$props10.style,\n        onEnter = _this$props10.onEnter,\n        onExited = _this$props10.onExited,\n        onClean = _this$props10.onClean,\n        inline = _this$props10.inline,\n        rest = _objectWithoutPropertiesLoose(_this$props10, [\"valueKey\", \"labelKey\", \"placeholder\", \"renderValue\", \"disabled\", \"cleanable\", \"locale\", \"toggleComponentClass\", \"style\", \"onEnter\", \"onExited\", \"onClean\", \"inline\"]);\n\n    if (inline) {\n      return this.renderDropdownMenu();\n    }\n\n    var _this$state2 = this.state,\n        activePaths = _this$state2.activePaths,\n        active = _this$state2.active;\n    var unhandled = getUnhandledProps(Cascader, rest);\n    var value = this.getValue();\n    var hasValue = !!value;\n    var activeItemLabel = placeholder;\n\n    if (activePaths.length > 0) {\n      activeItemLabel = [];\n      activePaths.forEach(function (item, index) {\n        var key = item[valueKey] || item[labelKey];\n        activeItemLabel.push(React.createElement(\"span\", {\n          key: key\n        }, item[labelKey]));\n\n        if (index < activePaths.length - 1) {\n          activeItemLabel.push(React.createElement(\"span\", {\n            className: \"separator\",\n            key: key + \"-separator\"\n          }, ' / '));\n        }\n      });\n\n      if (renderValue) {\n        activeItemLabel = renderValue(value, activePaths, activeItemLabel);\n      }\n    }\n\n    var classes = getToggleWrapperClassName('cascader', this.addPrefix, this.props, hasValue);\n    return React.createElement(IntlProvider, {\n      locale: locale\n    }, React.createElement(\"div\", {\n      className: classes,\n      style: style,\n      tabIndex: -1,\n      role: \"menu\",\n      ref: this.containerRef\n    }, React.createElement(PickerToggleTrigger, {\n      pickerProps: this.props,\n      ref: this.triggerRef,\n      positionRef: this.positionRef,\n      onEnter: createChainedFunction(this.handleEntered, onEnter),\n      onExit: createChainedFunction(this.handleExit, onExited),\n      speaker: this.renderDropdownMenu()\n    }, React.createElement(PickerToggle, _extends({}, unhandled, {\n      componentClass: toggleComponentClass,\n      onClean: createChainedFunction(this.handleClean, onClean),\n      cleanable: cleanable && !disabled,\n      hasValue: hasValue,\n      active: active\n    }), activeItemLabel || React.createElement(FormattedMessage, {\n      id: \"placeholder\"\n    })))));\n  };\n\n  return Cascader;\n}(React.Component);\n\nCascader.propTypes = {\n  appearance: PropTypes.oneOf(['default', 'subtle']),\n  classPrefix: PropTypes.string,\n  data: PropTypes.array,\n  className: PropTypes.string,\n  container: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  containerPadding: PropTypes.number,\n  block: PropTypes.bool,\n  toggleComponentClass: PropTypes.elementType,\n  menuClassName: PropTypes.string,\n  menuStyle: PropTypes.object,\n  childrenKey: PropTypes.string,\n  valueKey: PropTypes.string,\n  labelKey: PropTypes.string,\n  renderMenu: PropTypes.func,\n  renderValue: PropTypes.func,\n  renderExtraFooter: PropTypes.func,\n  disabled: PropTypes.bool,\n  value: PropTypes.any,\n  defaultValue: PropTypes.any,\n  placeholder: PropTypes.string,\n  onChange: PropTypes.func,\n  onClean: PropTypes.func,\n  onOpen: PropTypes.func,\n  onClose: PropTypes.func,\n  onHide: PropTypes.func,\n  onEnter: PropTypes.func,\n  onEntering: PropTypes.func,\n  onEntered: PropTypes.func,\n  onExit: PropTypes.func,\n  onExiting: PropTypes.func,\n  onExited: PropTypes.func,\n  onSelect: PropTypes.func,\n  onSearch: PropTypes.func,\n  locale: PropTypes.object,\n  cleanable: PropTypes.bool,\n  open: PropTypes.bool,\n  defaultOpen: PropTypes.bool,\n  placement: PropTypes.oneOf(PLACEMENT),\n  renderMenuItem: PropTypes.func,\n  menuWidth: PropTypes.number,\n  menuHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  disabledItemValues: PropTypes.array,\n  style: PropTypes.object,\n  searchable: PropTypes.bool,\n  preventOverflow: PropTypes.bool,\n  inline: PropTypes.bool,\n  parentSelectable: PropTypes.bool\n};\nCascader.defaultProps = {\n  appearance: 'default',\n  data: [],\n  disabledItemValues: [],\n  childrenKey: 'children',\n  valueKey: 'value',\n  labelKey: 'label',\n  locale: {\n    placeholder: 'Select',\n    searchPlaceholder: 'Search',\n    noResultsText: 'No results found'\n  },\n  cleanable: true,\n  searchable: true,\n  placement: 'bottomStart'\n};\npolyfill(Cascader);\nexport default defaultProps({\n  classPrefix: 'picker'\n})(Cascader);","map":{"version":3,"sources":["/mnt/c/Users/Dell/Desktop/se/KhanaShana-Client/node_modules/rsuite/es/Cascader/Cascader.js"],"names":["_objectWithoutPropertiesLoose","_extends","_inheritsLoose","_omit","_pick","_isUndefined","React","PropTypes","classNames","shallowEqual","polyfill","findNodeOfTree","IntlProvider","FormattedMessage","DropdownMenu","dropdownMenuPropTypes","_stringToObject","getSafeRegExpString","flattenTree","getNodeParents","getDerivedStateForCascade","defaultProps","prefix","getUnhandledProps","createChainedFunction","PickerToggle","MenuWrapper","SearchBar","PickerToggleTrigger","getToggleWrapperClassName","createConcatChildrenFunction","PLACEMENT","Cascader","_React$Component","props","_this","call","triggerRef","containerRef","positionRef","menuContainerRef","isControlled","handleSelect","node","cascadeItems","activePaths","isLeafNode","event","_this$props","onChange","onSelect","valueKey","childrenKey","parentSelectable","prevValue","getValue","value","handleCloseDropdown","_nextState","selectNode","state","setState","nextState","items","tempActivePaths","_this$positionRef$cur","_this$positionRef$cur2","current","updatePosition","handleSearchRowSelect","item","_this$props2","searchKeyword","hide","handleOpenDropdown","show","open","_this$handleOpenDropd","_this2","close","_this$handleCloseDrop","_this3","handleClean","_this$props3","disabled","data","handleSearch","_this$props$onSearch","_this$props4","onSearch","handleEntered","_this$props$onOpen","_this$props5","onOpen","active","handleExit","_this$props$onClose","_this$props6","onClose","addPrefix","name","classPrefix","renderSearchRow","key","_classNames","_this$props7","labelKey","_this$props7$disabled","disabledItemValues","regx","RegExp","nodes","push","map","_extends2","labelElements","a","split","b","match","i","length","createElement","some","itemClasses","className","onClick","index","initState","defaultValue","flattenData","createRef","getDerivedStateFromProps","nextProps","prevState","_prevState$selectNode","selectNodeValue","_findNodeOfTree","newChildren","children","_proto","prototype","_ref","stringToObject","_this$props8","someKeyword","parent","getSearchResult","_this4","result","filter","renderSearchResultPanel","locale","noResultsText","renderDropdownMenu","_classNames2","_this$state","_this$props9","renderMenu","renderExtraFooter","menuClassName","menuStyle","searchable","inline","classes","menuProps","Object","keys","style","placeholder","searchPlaceholder","ref","cascadePathItems","activeItemValue","render","_this$props10","renderValue","cleanable","toggleComponentClass","onEnter","onExited","onClean","rest","_this$state2","unhandled","hasValue","activeItemLabel","forEach","tabIndex","role","pickerProps","onExit","speaker","componentClass","id","Component","propTypes","appearance","oneOf","string","array","container","oneOfType","func","containerPadding","number","block","bool","elementType","object","any","onHide","onEntering","onEntered","onExiting","defaultOpen","placement","renderMenuItem","menuWidth","menuHeight","preventOverflow"],"mappings":"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","sourcesContent":["import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _omit from \"lodash/omit\";\nimport _pick from \"lodash/pick\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport shallowEqual from '../utils/shallowEqual';\nimport { polyfill } from 'react-lifecycles-compat';\nimport { findNodeOfTree } from '../utils/treeUtils';\nimport IntlProvider from '../IntlProvider';\nimport FormattedMessage from '../IntlProvider/FormattedMessage';\nimport DropdownMenu, { dropdownMenuPropTypes } from './DropdownMenu';\nimport _stringToObject from '../utils/stringToObject';\nimport getSafeRegExpString from '../utils/getSafeRegExpString';\nimport { flattenTree, getNodeParents } from '../utils/treeUtils';\nimport { getDerivedStateForCascade } from './utils';\nimport { defaultProps, prefix, getUnhandledProps, createChainedFunction } from '../utils';\nimport { PickerToggle, MenuWrapper, SearchBar, PickerToggleTrigger, getToggleWrapperClassName, createConcatChildrenFunction } from '../Picker';\nimport { PLACEMENT } from '../constants';\n\nvar Cascader =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(Cascader, _React$Component);\n\n  function Cascader(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.triggerRef = void 0;\n    _this.containerRef = void 0;\n    _this.positionRef = void 0;\n    _this.menuContainerRef = void 0;\n    _this.isControlled = void 0;\n\n    _this.handleSelect = function (node, cascadeItems, activePaths, isLeafNode, event) {\n      var _this$props = _this.props,\n          onChange = _this$props.onChange,\n          onSelect = _this$props.onSelect,\n          valueKey = _this$props.valueKey,\n          childrenKey = _this$props.childrenKey,\n          parentSelectable = _this$props.parentSelectable;\n\n      var prevValue = _this.getValue();\n\n      var value = node[valueKey];\n      onSelect === null || onSelect === void 0 ? void 0 : onSelect(node, activePaths, createConcatChildrenFunction(node, value, {\n        valueKey: valueKey,\n        childrenKey: childrenKey\n      }), event);\n      /**\n       Determines whether the option is a leaf node, and if so, closes the picker.\n       */\n\n      if (isLeafNode) {\n        _this.handleCloseDropdown();\n\n        var _nextState = {\n          selectNode: node\n        };\n\n        if (!_this.isControlled) {\n          _nextState = _extends({}, _nextState, {\n            value: value\n          }, getDerivedStateForCascade(_this.props, _this.state, value));\n        }\n\n        _this.setState(_nextState);\n\n        if (!shallowEqual(value, prevValue)) {\n          onChange === null || onChange === void 0 ? void 0 : onChange(value, event);\n        }\n\n        return;\n      }\n\n      var nextState = {\n        selectNode: node,\n        items: cascadeItems,\n        tempActivePaths: activePaths\n      };\n      /** When the parent is optional, the value and the displayed path are updated. */\n\n      if (parentSelectable) {\n        nextState.value = value;\n        nextState.activePaths = activePaths;\n\n        if (!shallowEqual(value, prevValue)) {\n          onChange === null || onChange === void 0 ? void 0 : onChange(value, event);\n        }\n      }\n\n      _this.setState(nextState, function () {\n        var _this$positionRef$cur, _this$positionRef$cur2;\n\n        // Update menu position\n        (_this$positionRef$cur = _this.positionRef.current) === null || _this$positionRef$cur === void 0 ? void 0 : (_this$positionRef$cur2 = _this$positionRef$cur.updatePosition) === null || _this$positionRef$cur2 === void 0 ? void 0 : _this$positionRef$cur2.call(_this$positionRef$cur);\n      });\n    };\n\n    _this.handleSearchRowSelect = function (item, event) {\n      var _this$props2 = _this.props,\n          valueKey = _this$props2.valueKey,\n          onChange = _this$props2.onChange,\n          onSelect = _this$props2.onSelect;\n      var value = item[valueKey];\n\n      _this.handleCloseDropdown();\n\n      var nextState = {\n        selectNode: item,\n        searchKeyword: ''\n      };\n\n      if (!_this.isControlled) {\n        nextState = _extends({}, nextState, {}, getDerivedStateForCascade(_this.props, _this.state, value), {\n          value: value\n        });\n      }\n\n      _this.setState(nextState);\n\n      onSelect === null || onSelect === void 0 ? void 0 : onSelect(item, null, null, event);\n      onChange === null || onChange === void 0 ? void 0 : onChange(value, event);\n    };\n\n    _this.handleCloseDropdown = function () {\n      if (_this.triggerRef.current) {\n        _this.triggerRef.current.hide();\n      }\n    };\n\n    _this.handleOpenDropdown = function () {\n      if (_this.triggerRef.current) {\n        _this.triggerRef.current.show();\n      }\n    };\n\n    _this.open = function () {\n      var _this$handleOpenDropd, _this2;\n\n      (_this$handleOpenDropd = (_this2 = _this).handleOpenDropdown) === null || _this$handleOpenDropd === void 0 ? void 0 : _this$handleOpenDropd.call(_this2);\n    };\n\n    _this.close = function () {\n      var _this$handleCloseDrop, _this3;\n\n      (_this$handleCloseDrop = (_this3 = _this).handleCloseDropdown) === null || _this$handleCloseDrop === void 0 ? void 0 : _this$handleCloseDrop.call(_this3);\n    };\n\n    _this.handleClean = function (event) {\n      var _this$props3 = _this.props,\n          disabled = _this$props3.disabled,\n          onChange = _this$props3.onChange,\n          data = _this$props3.data;\n\n      if (disabled) {\n        return;\n      }\n\n      var nextState = {\n        items: [data],\n        value: null,\n        selectNode: null,\n        activePaths: [],\n        tempActivePaths: []\n      };\n\n      _this.setState(nextState, function () {\n        onChange === null || onChange === void 0 ? void 0 : onChange(null, event);\n      });\n    };\n\n    _this.handleSearch = function (searchKeyword, event) {\n      var _this$props$onSearch, _this$props4;\n\n      _this.setState({\n        searchKeyword: searchKeyword\n      });\n\n      (_this$props$onSearch = (_this$props4 = _this.props).onSearch) === null || _this$props$onSearch === void 0 ? void 0 : _this$props$onSearch.call(_this$props4, searchKeyword, event);\n    };\n\n    _this.handleEntered = function () {\n      var _this$props$onOpen, _this$props5;\n\n      (_this$props$onOpen = (_this$props5 = _this.props).onOpen) === null || _this$props$onOpen === void 0 ? void 0 : _this$props$onOpen.call(_this$props5);\n\n      _this.setState({\n        active: true\n      });\n    };\n\n    _this.handleExit = function () {\n      var _this$props$onClose, _this$props6;\n\n      (_this$props$onClose = (_this$props6 = _this.props).onClose) === null || _this$props$onClose === void 0 ? void 0 : _this$props$onClose.call(_this$props6);\n\n      _this.setState({\n        searchKeyword: '',\n        active: false\n      });\n    };\n\n    _this.addPrefix = function (name) {\n      return prefix(_this.props.classPrefix)(name);\n    };\n\n    _this.renderSearchRow = function (item, key) {\n      var _classNames;\n\n      var _this$props7 = _this.props,\n          labelKey = _this$props7.labelKey,\n          valueKey = _this$props7.valueKey,\n          _this$props7$disabled = _this$props7.disabledItemValues,\n          disabledItemValues = _this$props7$disabled === void 0 ? [] : _this$props7$disabled;\n      var searchKeyword = _this.state.searchKeyword;\n      var regx = new RegExp(getSafeRegExpString(searchKeyword), 'ig');\n      var nodes = getNodeParents(item);\n      nodes.push(item);\n      nodes = nodes.map(function (node) {\n        var _extends2;\n\n        var labelElements = [];\n        var a = node[labelKey].split(regx);\n        var b = node[labelKey].match(regx);\n\n        for (var i = 0; i < a.length; i++) {\n          labelElements.push(a[i]);\n\n          if (b && b[i]) {\n            labelElements.push(React.createElement(\"strong\", {\n              key: i\n            }, b[i]));\n          }\n        }\n\n        return _extends({}, node, (_extends2 = {}, _extends2[labelKey] = labelElements, _extends2));\n      });\n      var disabled = disabledItemValues.some(function (value) {\n        return nodes.some(function (node) {\n          return node[valueKey] === value;\n        });\n      });\n      var itemClasses = classNames(_this.addPrefix('cascader-row'), (_classNames = {}, _classNames[_this.addPrefix('cascader-row-disabled')] = disabled, _classNames));\n      return React.createElement(\"div\", {\n        key: key,\n        className: itemClasses,\n        onClick: function onClick(event) {\n          if (!disabled) {\n            _this.handleSearchRowSelect(item, event);\n          }\n        }\n      }, nodes.map(function (node, index) {\n        return React.createElement(\"span\", {\n          key: \"col-\" + index,\n          className: _this.addPrefix('cascader-col')\n        }, node[labelKey]);\n      }));\n    };\n\n    var initState = {\n      searchKeyword: '',\n      selectNode: null,\n      data: props.data,\n      value: props.defaultValue,\n\n      /**\n       * 选中值的路径\n       */\n      activePaths: [],\n\n      /**\n       * 用于展示面板的数据列表，是一个二维的数组\n       * 是通过 data 树结构转换成的二维的数组，其中只包含页面上展示的数据\n       */\n      items: []\n    };\n    _this.state = _extends({}, initState, {}, getDerivedStateForCascade(props, initState), {\n      flattenData: flattenTree(props.data)\n    });\n    _this.isControlled = !_isUndefined(props.value);\n    _this.triggerRef = React.createRef();\n    _this.containerRef = React.createRef();\n    _this.positionRef = React.createRef(); // for test\n\n    _this.menuContainerRef = React.createRef();\n    return _this;\n  }\n\n  Cascader.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    var value = nextProps.value,\n        data = nextProps.data,\n        labelKey = nextProps.labelKey,\n        valueKey = nextProps.valueKey;\n\n    if (data !== prevState.data) {\n      var _prevState$selectNode;\n\n      // First get the value of the clicked node `selectNodeValue`, and then get the new `newChildren`.\n      var selectNodeValue = prevState === null || prevState === void 0 ? void 0 : (_prevState$selectNode = prevState.selectNode) === null || _prevState$selectNode === void 0 ? void 0 : _prevState$selectNode[valueKey];\n\n      if (selectNodeValue) {\n        var _findNodeOfTree;\n\n        var newChildren = ((_findNodeOfTree = findNodeOfTree(data, function (item) {\n          return shallowEqual(item[valueKey], selectNodeValue);\n        })) === null || _findNodeOfTree === void 0 ? void 0 : _findNodeOfTree.children) || [];\n        return _extends({}, getDerivedStateForCascade(nextProps, prevState, selectNodeValue, newChildren.map(function (item) {\n          return _stringToObject(item, labelKey, valueKey);\n        })), {\n          data: data,\n          flattenData: flattenTree(data)\n        });\n      }\n\n      return _extends({}, getDerivedStateForCascade(nextProps, prevState), {\n        flattenData: flattenTree(data),\n        data: data\n      });\n    }\n\n    if (typeof value !== 'undefined' && !shallowEqual(value, prevState.value)) {\n      return _extends({}, getDerivedStateForCascade(nextProps, prevState), {\n        value: value\n      });\n    }\n\n    return null;\n  };\n\n  var _proto = Cascader.prototype;\n\n  _proto.getValue = function getValue(nextProps) {\n    var _ref = nextProps || this.props,\n        value = _ref.value;\n\n    return _isUndefined(value) ? this.state.value : value;\n  };\n\n  /**\n   * 在 data 对象中的数据类型是字符串比如: ['foo']\n   * 通过这个行数可以把值转换成 [{name:'foo':value:'foo'}]\n   */\n  _proto.stringToObject = function stringToObject(value) {\n    var _this$props8 = this.props,\n        labelKey = _this$props8.labelKey,\n        valueKey = _this$props8.valueKey;\n    return _stringToObject(value, labelKey, valueKey);\n  };\n\n  _proto.someKeyword = function someKeyword(item) {\n    var labelKey = this.props.labelKey;\n    var searchKeyword = this.state.searchKeyword;\n\n    if (item[labelKey].match(new RegExp(getSafeRegExpString(searchKeyword), 'i'))) {\n      return true;\n    }\n\n    if (item.parent && this.someKeyword(item.parent)) {\n      return true;\n    }\n\n    return false;\n  };\n\n  _proto.getSearchResult = function getSearchResult() {\n    var _this4 = this;\n\n    var childrenKey = this.props.childrenKey;\n    var flattenData = this.state.flattenData;\n    var items = [];\n    var result = flattenData.filter(function (item) {\n      if (item[childrenKey]) {\n        return false;\n      }\n\n      return _this4.someKeyword(item);\n    });\n\n    for (var i = 0; i < result.length; i++) {\n      items.push(result[i]);\n\n      if (i === 99) {\n        return items;\n      }\n    }\n\n    return items;\n  };\n\n  _proto.renderSearchResultPanel = function renderSearchResultPanel() {\n    var locale = this.props.locale;\n    var searchKeyword = this.state.searchKeyword;\n\n    if (searchKeyword === '') {\n      return null;\n    }\n\n    var items = this.getSearchResult();\n    return React.createElement(\"div\", {\n      className: this.addPrefix('cascader-search-panel')\n    }, items.length ? items.map(this.renderSearchRow) : React.createElement(\"div\", {\n      className: this.addPrefix('none')\n    }, locale.noResultsText));\n  };\n\n  _proto.renderDropdownMenu = function renderDropdownMenu() {\n    var _classNames2;\n\n    var _this$state = this.state,\n        items = _this$state.items,\n        tempActivePaths = _this$state.tempActivePaths,\n        activePaths = _this$state.activePaths,\n        searchKeyword = _this$state.searchKeyword;\n    var _this$props9 = this.props,\n        renderMenu = _this$props9.renderMenu,\n        renderExtraFooter = _this$props9.renderExtraFooter,\n        menuClassName = _this$props9.menuClassName,\n        menuStyle = _this$props9.menuStyle,\n        searchable = _this$props9.searchable,\n        locale = _this$props9.locale,\n        inline = _this$props9.inline;\n    var classes = classNames(this.addPrefix('cascader-menu'), menuClassName, (_classNames2 = {}, _classNames2[this.addPrefix('inline')] = inline, _classNames2));\n\n    var menuProps = _pick(this.props, Object.keys(_omit(dropdownMenuPropTypes, ['classPrefix'])));\n\n    return React.createElement(MenuWrapper, {\n      className: classes,\n      style: menuStyle\n    }, searchable && React.createElement(SearchBar, {\n      placeholder: locale.searchPlaceholder,\n      onChange: this.handleSearch,\n      value: searchKeyword\n    }), this.renderSearchResultPanel(), searchKeyword === '' && React.createElement(DropdownMenu, _extends({}, menuProps, {\n      classPrefix: this.addPrefix('cascader-menu'),\n      ref: this.menuContainerRef,\n      cascadeItems: items,\n      cascadePathItems: tempActivePaths || activePaths,\n      activeItemValue: this.getValue(),\n      onSelect: this.handleSelect,\n      renderMenu: renderMenu\n    })), renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n\n  _proto.render = function render() {\n    var _this$props10 = this.props,\n        valueKey = _this$props10.valueKey,\n        labelKey = _this$props10.labelKey,\n        placeholder = _this$props10.placeholder,\n        renderValue = _this$props10.renderValue,\n        disabled = _this$props10.disabled,\n        cleanable = _this$props10.cleanable,\n        locale = _this$props10.locale,\n        toggleComponentClass = _this$props10.toggleComponentClass,\n        style = _this$props10.style,\n        onEnter = _this$props10.onEnter,\n        onExited = _this$props10.onExited,\n        onClean = _this$props10.onClean,\n        inline = _this$props10.inline,\n        rest = _objectWithoutPropertiesLoose(_this$props10, [\"valueKey\", \"labelKey\", \"placeholder\", \"renderValue\", \"disabled\", \"cleanable\", \"locale\", \"toggleComponentClass\", \"style\", \"onEnter\", \"onExited\", \"onClean\", \"inline\"]);\n\n    if (inline) {\n      return this.renderDropdownMenu();\n    }\n\n    var _this$state2 = this.state,\n        activePaths = _this$state2.activePaths,\n        active = _this$state2.active;\n    var unhandled = getUnhandledProps(Cascader, rest);\n    var value = this.getValue();\n    var hasValue = !!value;\n    var activeItemLabel = placeholder;\n\n    if (activePaths.length > 0) {\n      activeItemLabel = [];\n      activePaths.forEach(function (item, index) {\n        var key = item[valueKey] || item[labelKey];\n        activeItemLabel.push(React.createElement(\"span\", {\n          key: key\n        }, item[labelKey]));\n\n        if (index < activePaths.length - 1) {\n          activeItemLabel.push(React.createElement(\"span\", {\n            className: \"separator\",\n            key: key + \"-separator\"\n          }, ' / '));\n        }\n      });\n\n      if (renderValue) {\n        activeItemLabel = renderValue(value, activePaths, activeItemLabel);\n      }\n    }\n\n    var classes = getToggleWrapperClassName('cascader', this.addPrefix, this.props, hasValue);\n    return React.createElement(IntlProvider, {\n      locale: locale\n    }, React.createElement(\"div\", {\n      className: classes,\n      style: style,\n      tabIndex: -1,\n      role: \"menu\",\n      ref: this.containerRef\n    }, React.createElement(PickerToggleTrigger, {\n      pickerProps: this.props,\n      ref: this.triggerRef,\n      positionRef: this.positionRef,\n      onEnter: createChainedFunction(this.handleEntered, onEnter),\n      onExit: createChainedFunction(this.handleExit, onExited),\n      speaker: this.renderDropdownMenu()\n    }, React.createElement(PickerToggle, _extends({}, unhandled, {\n      componentClass: toggleComponentClass,\n      onClean: createChainedFunction(this.handleClean, onClean),\n      cleanable: cleanable && !disabled,\n      hasValue: hasValue,\n      active: active\n    }), activeItemLabel || React.createElement(FormattedMessage, {\n      id: \"placeholder\"\n    })))));\n  };\n\n  return Cascader;\n}(React.Component);\n\nCascader.propTypes = {\n  appearance: PropTypes.oneOf(['default', 'subtle']),\n  classPrefix: PropTypes.string,\n  data: PropTypes.array,\n  className: PropTypes.string,\n  container: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  containerPadding: PropTypes.number,\n  block: PropTypes.bool,\n  toggleComponentClass: PropTypes.elementType,\n  menuClassName: PropTypes.string,\n  menuStyle: PropTypes.object,\n  childrenKey: PropTypes.string,\n  valueKey: PropTypes.string,\n  labelKey: PropTypes.string,\n  renderMenu: PropTypes.func,\n  renderValue: PropTypes.func,\n  renderExtraFooter: PropTypes.func,\n  disabled: PropTypes.bool,\n  value: PropTypes.any,\n  defaultValue: PropTypes.any,\n  placeholder: PropTypes.string,\n  onChange: PropTypes.func,\n  onClean: PropTypes.func,\n  onOpen: PropTypes.func,\n  onClose: PropTypes.func,\n  onHide: PropTypes.func,\n  onEnter: PropTypes.func,\n  onEntering: PropTypes.func,\n  onEntered: PropTypes.func,\n  onExit: PropTypes.func,\n  onExiting: PropTypes.func,\n  onExited: PropTypes.func,\n  onSelect: PropTypes.func,\n  onSearch: PropTypes.func,\n  locale: PropTypes.object,\n  cleanable: PropTypes.bool,\n  open: PropTypes.bool,\n  defaultOpen: PropTypes.bool,\n  placement: PropTypes.oneOf(PLACEMENT),\n  renderMenuItem: PropTypes.func,\n  menuWidth: PropTypes.number,\n  menuHeight: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  disabledItemValues: PropTypes.array,\n  style: PropTypes.object,\n  searchable: PropTypes.bool,\n  preventOverflow: PropTypes.bool,\n  inline: PropTypes.bool,\n  parentSelectable: PropTypes.bool\n};\nCascader.defaultProps = {\n  appearance: 'default',\n  data: [],\n  disabledItemValues: [],\n  childrenKey: 'children',\n  valueKey: 'value',\n  labelKey: 'label',\n  locale: {\n    placeholder: 'Select',\n    searchPlaceholder: 'Search',\n    noResultsText: 'No results found'\n  },\n  cleanable: true,\n  searchable: true,\n  placement: 'bottomStart'\n};\npolyfill(Cascader);\nexport default defaultProps({\n  classPrefix: 'picker'\n})(Cascader);"]},"metadata":{},"sourceType":"module"}