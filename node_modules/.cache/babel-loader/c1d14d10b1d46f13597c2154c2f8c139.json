{"ast":null,"code":"import { ADD_TO_CART, REMOVE_ITEM, DEC_CART, INC_CART } from '../actions/cart-action-types';\nimport img1 from '../images/4.jpg';\nimport img2 from '../images/8.jpg';\nimport img3 from '../images/9.jpg';\nimport img4 from '../images/5.png';\nimport img5 from '../images/1.jpg';\nimport img6 from '../images/7.jpg';\nimport { useEffect } from 'react';\nimport firebase_integration from '../../fire';\nconst initState = {\n  items: [{\n    id: 1,\n    title: 'Winter body',\n    desc: \"30mins\",\n    price: 110,\n    img: img1\n  }, {\n    id: 2,\n    title: 'Adidas',\n    desc: \"30mins\",\n    price: 80,\n    img: img2\n  }, {\n    id: 3,\n    title: 'Vans',\n    desc: \"30mins\",\n    price: 120,\n    img: img3\n  }, {\n    id: 4,\n    title: 'White',\n    desc: \"30mins\",\n    price: 260,\n    img: img4\n  }, {\n    id: 5,\n    title: 'Cropped-sho',\n    desc: \"30mins\",\n    price: 160,\n    img: img5\n  }, {\n    id: 6,\n    title: 'Blues',\n    desc: \"30mins\",\n    price: 90,\n    img: img6\n  }],\n  cart: [],\n  total: 0\n};\n\nfunction dataread() {\n  useEffect(() => {\n    firebase_integration.database.collection('Menu').onSnapshot(snapshot => {\n      var menu_items = [];\n      snapshot.docs.forEach(doc => {\n        menu_items.push(doc.data());\n      }); //   setFooditems(menu_items)\n    });\n  }, []);\n}\n\nconst cartReducer = (state = initState, action) => {\n  //INSIDE HOME COMPONENT\n  if (action.type === ADD_TO_CART) {\n    let fooditem = state.items.find(item => item.id === action.payload); //check if the action.payload exists in the cart\n\n    let existed_item = state.cart.find(item => action.payload === item.id);\n\n    if (existed_item) {\n      fooditem.quantity += 1;\n      return { ...state,\n        total: state.total + fooditem.price\n      };\n    } else {\n      fooditem.quantity = 1; //calculating the total\n\n      let newTotal = state.total + fooditem.price;\n      return { ...state,\n        cart: [...state.cart, fooditem],\n        total: newTotal\n      };\n    }\n  }\n\n  if (action.type === REMOVE_ITEM) {\n    let itemToRemove = state.cart.find(item => action.payload === item.id);\n    let new_items = state.cart.filter(item => action.payload !== item.id); //calculating the total\n\n    let newTotal = state.total - itemToRemove.price * itemToRemove.quantity;\n    console.log(itemToRemove);\n    return { ...state,\n      cart: new_items,\n      total: newTotal\n    };\n  } //INSIDE CART COMPONENT\n\n\n  if (action.type === INC_CART) {\n    let fooditem = state.items.find(item => item.id === action.payload);\n    fooditem.quantity += 1;\n    let newTotal = state.total + fooditem.price;\n    return { ...state,\n      total: newTotal\n    };\n  }\n\n  if (action.type === DEC_CART) {\n    let fooditem = state.items.find(item => item.id === action.payload); //if the qt == 0 then it should be removed\n\n    if (fooditem.quantity === 1) {\n      let new_items = state.cart.filter(item => item.id !== action.payload);\n      let newTotal = state.total - fooditem.price;\n      return { ...state,\n        cart: new_items,\n        total: newTotal\n      };\n    } else {\n      fooditem.quantity -= 1;\n      let newTotal = state.total - fooditem.price;\n      return { ...state,\n        total: newTotal\n      };\n    }\n  } else {\n    return state;\n  }\n};\n\nexport default cartReducer;","map":{"version":3,"sources":["/mnt/c/Users/Dell/Desktop/se/KhanaShana-Client/src/components/order/reducers/reducer.jsx"],"names":["ADD_TO_CART","REMOVE_ITEM","DEC_CART","INC_CART","img1","img2","img3","img4","img5","img6","useEffect","firebase_integration","initState","items","id","title","desc","price","img","cart","total","dataread","database","collection","onSnapshot","snapshot","menu_items","docs","forEach","doc","push","data","cartReducer","state","action","type","fooditem","find","item","payload","existed_item","quantity","newTotal","itemToRemove","new_items","filter","console","log"],"mappings":"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","sourcesContent":["import { ADD_TO_CART,REMOVE_ITEM,DEC_CART,INC_CART } from '../actions/cart-action-types';\r\nimport img1 from '../images/4.jpg'\r\nimport img2 from '../images/8.jpg'\r\nimport img3 from '../images/9.jpg'\r\nimport img4 from '../images/5.png'\r\nimport img5 from '../images/1.jpg'\r\nimport img6 from '../images/7.jpg'\r\nimport {useEffect} from 'react';\r\nimport firebase_integration from '../../fire'\r\n\r\n\r\n\r\nconst initState = {\r\n    items: [\r\n        {id:1,title:'Winter body', desc: \"30mins\", price:110, img:img1},\r\n        {id:2,title:'Adidas', desc: \"30mins\", price:80,img:img2},\r\n        {id:3,title:'Vans', desc: \"30mins\",price:120,img:img3},\r\n        {id:4,title:'White', desc: \"30mins\", price:260,img:img4},\r\n        {id:5,title:'Cropped-sho', desc: \"30mins\", price:160,img:img5},\r\n        {id:6,title:'Blues', desc: \"30mins\",price:90,img:img6}\r\n    ],\r\n    cart:[],\r\n    total: 0\r\n\r\n}\r\n\r\nfunction dataread(){\r\n    useEffect(() => {\r\n        firebase_integration.database.collection('Menu').onSnapshot((snapshot) => {\r\n          var menu_items = []\r\n          snapshot.docs.forEach(doc => {\r\n              menu_items.push(doc.data())\r\n          });\r\n        //   setFooditems(menu_items)\r\n        })\r\n      }, [])\r\n\r\n\r\n}\r\n\r\nconst cartReducer= (state = initState,action)=>{\r\n    \r\n\r\n   \r\n    //INSIDE HOME COMPONENT\r\n    if(action.type === ADD_TO_CART){\r\n          let fooditem = state.items.find(item=> item.id === action.payload)\r\n          //check if the action.payload exists in the cart\r\n         let existed_item= state.cart.find(item=> action.payload === item.id)\r\n         if(existed_item)\r\n         {\r\n            fooditem.quantity += 1 \r\n             return{\r\n                ...state,\r\n                 total: state.total + fooditem.price \r\n                  }\r\n        }\r\n         else{\r\n            fooditem.quantity = 1;\r\n            //calculating the total\r\n            let newTotal = state.total + fooditem.price \r\n            \r\n            return{\r\n                ...state,\r\n                cart: [...state.cart, fooditem],\r\n                total : newTotal\r\n            }\r\n            \r\n        }\r\n    }\r\n    if(action.type === REMOVE_ITEM){\r\n        let itemToRemove= state.cart.find(item=> action.payload === item.id)\r\n        let new_items = state.cart.filter(item=> action.payload !== item.id)\r\n        \r\n        //calculating the total\r\n        let newTotal = state.total - (itemToRemove.price * itemToRemove.quantity )\r\n        console.log(itemToRemove)\r\n        return{\r\n            ...state,\r\n            cart: new_items,\r\n            total: newTotal\r\n        }\r\n    }\r\n    //INSIDE CART COMPONENT\r\n    if(action.type=== INC_CART){\r\n        let fooditem = state.items.find(item=> item.id === action.payload)\r\n          fooditem.quantity += 1 \r\n          let newTotal = state.total + fooditem.price\r\n          return{\r\n              ...state,\r\n              total: newTotal\r\n          }\r\n    }\r\n    if(action.type=== DEC_CART){  \r\n        let fooditem = state.items.find(item=> item.id === action.payload) \r\n        //if the qt == 0 then it should be removed\r\n        if(fooditem.quantity === 1){\r\n            let new_items = state.cart.filter(item=>item.id !== action.payload)\r\n            let newTotal = state.total - fooditem.price\r\n            return{\r\n                ...state,\r\n                cart: new_items,\r\n                total: newTotal\r\n            }\r\n        }\r\n        else {\r\n            fooditem.quantity -= 1\r\n            let newTotal = state.total - fooditem.price\r\n            return{\r\n                ...state,\r\n                total: newTotal\r\n            }\r\n        }\r\n        \r\n    }\r\n    \r\n  else{\r\n    return state\r\n    }\r\n    \r\n}\r\n\r\nexport default cartReducer\r\n"]},"metadata":{},"sourceType":"module"}