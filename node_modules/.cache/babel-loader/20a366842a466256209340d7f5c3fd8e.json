{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = PageCanvas;\nexports.PageCanvasInternal = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf3 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _PageContext = _interopRequireDefault(require(\"../PageContext\"));\n\nvar _utils = require(\"../shared/utils\");\n\nvar _propTypes2 = require(\"../shared/propTypes\");\n\nvar PageCanvasInternal = /*#__PURE__*/function (_PureComponent) {\n  (0, _inherits2.default)(PageCanvasInternal, _PureComponent);\n\n  function PageCanvasInternal() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    (0, _classCallCheck2.default)(this, PageCanvasInternal);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = (0, _possibleConstructorReturn2.default)(this, (_getPrototypeOf2 = (0, _getPrototypeOf3.default)(PageCanvasInternal)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), \"onRenderSuccess\", function () {\n      _this.renderer = null;\n      var _this$props = _this.props,\n          onRenderSuccess = _this$props.onRenderSuccess,\n          page = _this$props.page,\n          scale = _this$props.scale;\n      (0, _utils.callIfDefined)(onRenderSuccess, (0, _utils.makePageCallback)(page, scale));\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), \"onRenderError\", function (error) {\n      if ((0, _utils.isCancelException)(error)) {\n        return;\n      }\n\n      (0, _utils.errorOnDev)(error);\n      var onRenderError = _this.props.onRenderError;\n      (0, _utils.callIfDefined)(onRenderError, error);\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), \"drawPageOnCanvas\", function () {\n      var _assertThisInitialize = (0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)),\n          canvas = _assertThisInitialize.canvasLayer;\n\n      if (!canvas) {\n        return null;\n      }\n\n      var _assertThisInitialize2 = (0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)),\n          renderViewport = _assertThisInitialize2.renderViewport,\n          viewport = _assertThisInitialize2.viewport;\n\n      var _this$props2 = _this.props,\n          page = _this$props2.page,\n          renderInteractiveForms = _this$props2.renderInteractiveForms;\n      canvas.width = renderViewport.width;\n      canvas.height = renderViewport.height;\n      canvas.style.width = \"\".concat(Math.floor(viewport.width), \"px\");\n      canvas.style.height = \"\".concat(Math.floor(viewport.height), \"px\");\n      var renderContext = {\n        get canvasContext() {\n          return canvas.getContext('2d');\n        },\n\n        viewport: renderViewport,\n        renderInteractiveForms: renderInteractiveForms\n      }; // If another render is in progress, let's cancel it\n\n      _this.cancelRenderingTask();\n\n      _this.renderer = page.render(renderContext);\n      return _this.renderer.promise.then(_this.onRenderSuccess).catch(_this.onRenderError);\n    });\n    return _this;\n  }\n\n  (0, _createClass2.default)(PageCanvasInternal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.drawPageOnCanvas();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props3 = this.props,\n          page = _this$props3.page,\n          renderInteractiveForms = _this$props3.renderInteractiveForms;\n\n      if (renderInteractiveForms !== prevProps.renderInteractiveForms) {\n        // Ensures the canvas will be re-rendered from scratch. Otherwise all form data will stay.\n        page.cleanup();\n        this.drawPageOnCanvas();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.cancelRenderingTask();\n      /**\n       * Zeroing the width and height cause most browsers to release graphics\n       * resources immediately, which can greatly reduce memory consumption.\n       */\n\n      if (this.canvasLayer) {\n        this.canvasLayer.width = 0;\n        this.canvasLayer.height = 0;\n        this.canvasLayer = null;\n      }\n    }\n  }, {\n    key: \"cancelRenderingTask\",\n    value: function cancelRenderingTask() {\n      /* eslint-disable no-underscore-dangle */\n      if (this.renderer && this.renderer._internalRenderTask.running) {\n        this.renderer._internalRenderTask.cancel();\n      }\n      /* eslint-enable no-underscore-dangle */\n\n    }\n    /**\n     * Called when a page is rendered successfully.\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return _react.default.createElement(\"canvas\", {\n        className: \"react-pdf__Page__canvas\",\n        style: {\n          display: 'block',\n          userSelect: 'none'\n        },\n        ref: function ref(_ref) {\n          _this2.canvasLayer = _ref;\n        }\n      });\n    }\n  }, {\n    key: \"renderViewport\",\n    get: function get() {\n      var _this$props4 = this.props,\n          page = _this$props4.page,\n          rotate = _this$props4.rotate,\n          scale = _this$props4.scale;\n      var pixelRatio = (0, _utils.getPixelRatio)();\n      return page.getViewport({\n        scale: scale * pixelRatio,\n        rotation: rotate\n      });\n    }\n  }, {\n    key: \"viewport\",\n    get: function get() {\n      var _this$props5 = this.props,\n          page = _this$props5.page,\n          rotate = _this$props5.rotate,\n          scale = _this$props5.scale;\n      return page.getViewport({\n        scale: scale,\n        rotation: rotate\n      });\n    }\n  }]);\n  return PageCanvasInternal;\n}(_react.PureComponent);\n\nexports.PageCanvasInternal = PageCanvasInternal;\nPageCanvasInternal.propTypes = {\n  onRenderError: _propTypes.default.func,\n  onRenderSuccess: _propTypes.default.func,\n  page: _propTypes2.isPage.isRequired,\n  renderInteractiveForms: _propTypes.default.bool,\n  rotate: _propTypes2.isRotate,\n  scale: _propTypes.default.number\n};\n\nfunction PageCanvas(props) {\n  return _react.default.createElement(_PageContext.default.Consumer, null, function (context) {\n    return _react.default.createElement(PageCanvasInternal, (0, _extends2.default)({}, context, props));\n  });\n}","map":{"version":3,"sources":["/mnt/c/Users/Dell/Desktop/KhanaWeb/KhanaShana-Client/node_modules/react-pdf/dist/Page/PageCanvas.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","Object","defineProperty","exports","value","default","PageCanvas","PageCanvasInternal","_extends2","_classCallCheck2","_createClass2","_possibleConstructorReturn2","_getPrototypeOf3","_inherits2","_assertThisInitialized2","_defineProperty2","_react","_propTypes","_PageContext","_utils","_propTypes2","_PureComponent","_getPrototypeOf2","_this","_len","arguments","length","args","Array","_key","call","apply","concat","renderer","_this$props","props","onRenderSuccess","page","scale","callIfDefined","makePageCallback","error","isCancelException","errorOnDev","onRenderError","_assertThisInitialize","canvas","canvasLayer","_assertThisInitialize2","renderViewport","viewport","_this$props2","renderInteractiveForms","width","height","style","Math","floor","renderContext","canvasContext","getContext","cancelRenderingTask","render","promise","then","catch","key","componentDidMount","drawPageOnCanvas","componentDidUpdate","prevProps","_this$props3","cleanup","componentWillUnmount","_internalRenderTask","running","cancel","_this2","createElement","className","display","userSelect","ref","_ref","get","_this$props4","rotate","pixelRatio","getPixelRatio","getViewport","rotation","_this$props5","PureComponent","propTypes","func","isPage","isRequired","bool","isRotate","number","Consumer","context"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = PageCanvas;\nexports.PageCanvasInternal = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf3 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _PageContext = _interopRequireDefault(require(\"../PageContext\"));\n\nvar _utils = require(\"../shared/utils\");\n\nvar _propTypes2 = require(\"../shared/propTypes\");\n\nvar PageCanvasInternal =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  (0, _inherits2.default)(PageCanvasInternal, _PureComponent);\n\n  function PageCanvasInternal() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    (0, _classCallCheck2.default)(this, PageCanvasInternal);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = (0, _possibleConstructorReturn2.default)(this, (_getPrototypeOf2 = (0, _getPrototypeOf3.default)(PageCanvasInternal)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), \"onRenderSuccess\", function () {\n      _this.renderer = null;\n      var _this$props = _this.props,\n          onRenderSuccess = _this$props.onRenderSuccess,\n          page = _this$props.page,\n          scale = _this$props.scale;\n      (0, _utils.callIfDefined)(onRenderSuccess, (0, _utils.makePageCallback)(page, scale));\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), \"onRenderError\", function (error) {\n      if ((0, _utils.isCancelException)(error)) {\n        return;\n      }\n\n      (0, _utils.errorOnDev)(error);\n      var onRenderError = _this.props.onRenderError;\n      (0, _utils.callIfDefined)(onRenderError, error);\n    });\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), \"drawPageOnCanvas\", function () {\n      var _assertThisInitialize = (0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)),\n          canvas = _assertThisInitialize.canvasLayer;\n\n      if (!canvas) {\n        return null;\n      }\n\n      var _assertThisInitialize2 = (0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)),\n          renderViewport = _assertThisInitialize2.renderViewport,\n          viewport = _assertThisInitialize2.viewport;\n\n      var _this$props2 = _this.props,\n          page = _this$props2.page,\n          renderInteractiveForms = _this$props2.renderInteractiveForms;\n      canvas.width = renderViewport.width;\n      canvas.height = renderViewport.height;\n      canvas.style.width = \"\".concat(Math.floor(viewport.width), \"px\");\n      canvas.style.height = \"\".concat(Math.floor(viewport.height), \"px\");\n      var renderContext = {\n        get canvasContext() {\n          return canvas.getContext('2d');\n        },\n\n        viewport: renderViewport,\n        renderInteractiveForms: renderInteractiveForms\n      }; // If another render is in progress, let's cancel it\n\n      _this.cancelRenderingTask();\n\n      _this.renderer = page.render(renderContext);\n      return _this.renderer.promise.then(_this.onRenderSuccess).catch(_this.onRenderError);\n    });\n    return _this;\n  }\n\n  (0, _createClass2.default)(PageCanvasInternal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.drawPageOnCanvas();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props3 = this.props,\n          page = _this$props3.page,\n          renderInteractiveForms = _this$props3.renderInteractiveForms;\n\n      if (renderInteractiveForms !== prevProps.renderInteractiveForms) {\n        // Ensures the canvas will be re-rendered from scratch. Otherwise all form data will stay.\n        page.cleanup();\n        this.drawPageOnCanvas();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.cancelRenderingTask();\n      /**\n       * Zeroing the width and height cause most browsers to release graphics\n       * resources immediately, which can greatly reduce memory consumption.\n       */\n\n      if (this.canvasLayer) {\n        this.canvasLayer.width = 0;\n        this.canvasLayer.height = 0;\n        this.canvasLayer = null;\n      }\n    }\n  }, {\n    key: \"cancelRenderingTask\",\n    value: function cancelRenderingTask() {\n      /* eslint-disable no-underscore-dangle */\n      if (this.renderer && this.renderer._internalRenderTask.running) {\n        this.renderer._internalRenderTask.cancel();\n      }\n      /* eslint-enable no-underscore-dangle */\n\n    }\n    /**\n     * Called when a page is rendered successfully.\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return _react.default.createElement(\"canvas\", {\n        className: \"react-pdf__Page__canvas\",\n        style: {\n          display: 'block',\n          userSelect: 'none'\n        },\n        ref: function ref(_ref) {\n          _this2.canvasLayer = _ref;\n        }\n      });\n    }\n  }, {\n    key: \"renderViewport\",\n    get: function get() {\n      var _this$props4 = this.props,\n          page = _this$props4.page,\n          rotate = _this$props4.rotate,\n          scale = _this$props4.scale;\n      var pixelRatio = (0, _utils.getPixelRatio)();\n      return page.getViewport({\n        scale: scale * pixelRatio,\n        rotation: rotate\n      });\n    }\n  }, {\n    key: \"viewport\",\n    get: function get() {\n      var _this$props5 = this.props,\n          page = _this$props5.page,\n          rotate = _this$props5.rotate,\n          scale = _this$props5.scale;\n      return page.getViewport({\n        scale: scale,\n        rotation: rotate\n      });\n    }\n  }]);\n  return PageCanvasInternal;\n}(_react.PureComponent);\n\nexports.PageCanvasInternal = PageCanvasInternal;\nPageCanvasInternal.propTypes = {\n  onRenderError: _propTypes.default.func,\n  onRenderSuccess: _propTypes.default.func,\n  page: _propTypes2.isPage.isRequired,\n  renderInteractiveForms: _propTypes.default.bool,\n  rotate: _propTypes2.isRotate,\n  scale: _propTypes.default.number\n};\n\nfunction PageCanvas(props) {\n  return _react.default.createElement(_PageContext.default.Consumer, null, function (context) {\n    return _react.default.createElement(PageCanvasInternal, (0, _extends2.default)({}, context, props));\n  });\n}"]},"metadata":{},"sourceType":"script"}