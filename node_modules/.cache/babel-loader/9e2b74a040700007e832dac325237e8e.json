{"ast":null,"code":"var _jsxFileName = \"/home/moniex/Desktop/Final SE Project/KhanaShana-Client/src/components/order/checkout.jsx\";\nimport React, { Fragment, useContext, useState } from 'react';\nimport './orderstyles.css';\nimport Header from './navbar';\nimport Footer from '../navigation/footer';\nimport DiscountContext from '../context/context';\nimport CheckoutContext from '../context/checkoutcontext';\nimport { Link } from 'react-router-dom';\nimport { Formik, Form, Field, ErrorMessage, useFormik } from 'formik';\nimport firebase_integration from '../fire.js';\n\nfunction Checkout() {\n  const {\n    discount,\n    setDiscount\n  } = useContext(DiscountContext);\n  const [number, setNumber] = useState(\"\");\n  const [address, setAddress] = useState(\"\");\n  const [area, setArea] = useState(\"\");\n  const [floor, setFloor] = useState(\"\");\n  const [deliverytype, setDeliveryType] = useState(\"\");\n  const [paymentMethod] = useState(\"Cash on Delivery\");\n  var orderid = \"\";\n  const {\n    orderdetails,\n    setOrderID\n  } = useContext(CheckoutContext);\n  console.log(orderdetails);\n\n  async function PlaceOrder() {\n    var CustomerID = firebase_integration.auth.currentUser.uid;\n    var TodaysDate = new Date();\n    var Address = floor + \" \" + address + \" \" + area;\n    var DishNames = [];\n    var DishQuantities = [];\n    orderdetails.cart.map(item => DishNames.push(item.Name));\n    orderdetails.cart.map(item => DishQuantities.push(item.quantity));\n    var instructions = document.getElementById(\"instruction-box\").value;\n\n    if (instructions === \"\") {\n      instructions = \"None\";\n    }\n\n    var placeorder = await firebase_integration.database.collection(\"RegularOrder\").add({\n      CustomerID: CustomerID,\n      Date: TodaysDate,\n      Action: \"Accept/Reject\",\n      Address: Address,\n      Discount: discount,\n      DishName: DishNames,\n      DishQuantity: DishQuantities,\n      OrderType: deliverytype,\n      Subtotal: orderdetails.total,\n      Tracking: \"Pending\",\n      MobileNumber: number,\n      SpecialInstruction: instructions,\n      OrderID: \"Not Assigned\"\n    }).then(function (docRef) {\n      let promise = new Promise(() => {\n        orderid = docRef.id;\n      });\n      promise.then(setOrderID(docRef.id));\n      firebase_integration.database.collection(\"RegularOrder\").doc(orderid.toString()).update({\n        OrderID: orderid\n      });\n    });\n  }\n\n  const validate = values => {\n    const errors = {};\n\n    if (!values.number) {\n      errors.number = 'Required';\n    } else if (values.number.length !== 11) {\n      errors.number = 'Phone number must be 11 characters long.';\n    }\n\n    if (!values.address) {\n      errors.lastName = 'Address Required';\n    }\n\n    if (!values.area) {\n      errors.email = 'Area Required';\n    }\n\n    return errors;\n  };\n\n  const formik = useFormik({\n    initialValues: {\n      number: '',\n      address: '',\n      area: '',\n      floor: ''\n    },\n    validate,\n    onSubmit: values => {\n      alert(value);\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    class: \"menuback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    title: \"CHECKOUT\",\n    link: \"/cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"forms\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    name: \"your-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 44\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 48\n    }\n  }, \"Your Details:\"))), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: formik.handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    value: formik.values.number,\n    onChange: formik.handleChange,\n    onBlur: formik.handleBlur,\n    type: \"text\",\n    name: \"mobile\",\n    placeholder: \"  Mobile Number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }), formik.touched.number && formik.errors.number ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 71\n    }\n  }, formik.errors.number) : null, /*#__PURE__*/React.createElement(\"input\", {\n    value: formik.values.address,\n    onChange: formik.handleChange,\n    onBlur: formik.handleBlur,\n    type: \"text\",\n    name: \"address\",\n    placeholder: \"  Street Address\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 176\n    }\n  }), formik.touched.address && formik.errors.address ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 73\n    }\n  }, formik.errors.address) : null, /*#__PURE__*/React.createElement(\"input\", {\n    value: formik.values.area,\n    onChange: formik.handleChange,\n    onBlur: formik.handleBlur,\n    type: \"text\",\n    name: \"area\",\n    placeholder: \"  Area\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 21\n    }\n  }), formik.touched.area && formik.errors.area ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 67\n    }\n  }, formik.errors.area) : null, /*#__PURE__*/React.createElement(\"input\", {\n    value: formik.values.floor,\n    onChange: formik.handleChange,\n    onBlur: formik.handleBlur,\n    type: \"text\",\n    name: \"floor\",\n    placeholder: \"  Floor/Unit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 49\n    }\n  }, \"Special Instructions:\"))), /*#__PURE__*/React.createElement(\"textarea\", {\n    maxlength: \"700\",\n    id: \"instruction-box\",\n    class: \"text-area\",\n    placeholder: \"   Write your text here\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 26\n    }\n  }, \"Order Type:\"))), /*#__PURE__*/React.createElement(\"div\", {\n    name: \"order-type-checkout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    value: deliverytype,\n    onChange: e => setDeliveryType(\"Delivery\"),\n    type: \"radio\",\n    name: \"method\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 21\n    }\n  }, \"Delivery\"), /*#__PURE__*/React.createElement(\"input\", {\n    value: deliverytype,\n    onChange: e => setDeliveryType(\"Takeaway\"),\n    type: \"radio\",\n    name: \"method\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 21\n    }\n  }, \"Takeaway\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 26\n    }\n  }, \"Select a payment method:\"))), /*#__PURE__*/React.createElement(\"div\", {\n    name: \"payment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    checked: \"checked\",\n    name: \"method\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 21\n    }\n  }, \"Cash on Delivery\"), /*#__PURE__*/React.createElement(Link, {\n    to: \"/orderconfirmed\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"confirm\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    onClick: () => {\n      PlaceOrder();\n    } // href = \"/orderconfirmed\"\n    ,\n    type: \"button\",\n    class: \"btn btn-success btn-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 25\n    }\n  }, \"CONFIRM\"))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }\n  }));\n}\n\nexport default Checkout;","map":{"version":3,"sources":["/home/moniex/Desktop/Final SE Project/KhanaShana-Client/src/components/order/checkout.jsx"],"names":["React","Fragment","useContext","useState","Header","Footer","DiscountContext","CheckoutContext","Link","Formik","Form","Field","ErrorMessage","useFormik","firebase_integration","Checkout","discount","setDiscount","number","setNumber","address","setAddress","area","setArea","floor","setFloor","deliverytype","setDeliveryType","paymentMethod","orderid","orderdetails","setOrderID","console","log","PlaceOrder","CustomerID","auth","currentUser","uid","TodaysDate","Date","Address","DishNames","DishQuantities","cart","map","item","push","Name","quantity","instructions","document","getElementById","value","placeorder","database","collection","add","Action","Discount","DishName","DishQuantity","OrderType","Subtotal","total","Tracking","MobileNumber","SpecialInstruction","OrderID","then","docRef","promise","Promise","id","doc","toString","update","validate","values","errors","length","lastName","email","formik","initialValues","onSubmit","alert","handleSubmit","handleChange","handleBlur","touched","e"],"mappings":"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","sourcesContent":["import React, { Fragment, useContext, useState } from 'react';\nimport './orderstyles.css';\nimport Header from './navbar';\nimport Footer from '../navigation/footer';\nimport DiscountContext from '../context/context';\nimport CheckoutContext from '../context/checkoutcontext';\nimport {Link} from 'react-router-dom';\nimport { Formik, Form, Field, ErrorMessage, useFormik } from 'formik';\nimport firebase_integration from '../fire.js'\n\nfunction Checkout() {\n\n    const {discount, setDiscount} = useContext(DiscountContext);\n    const [number, setNumber] = useState(\"\");\n    const [address, setAddress] = useState(\"\");\n    const [area, setArea] = useState(\"\");\n    const [floor, setFloor] = useState(\"\");\n    const [deliverytype, setDeliveryType] = useState(\"\");\n    const [paymentMethod] = useState(\"Cash on Delivery\")\n    var orderid = \"\"\n\n    const {orderdetails, setOrderID} = useContext(CheckoutContext);\n    console.log(orderdetails)\n    \n    async function PlaceOrder(){\n        var CustomerID = firebase_integration.auth.currentUser.uid\n        var TodaysDate = new Date()\n        var Address = floor+\" \"+address+\" \"+area\n        var DishNames = []\n        var DishQuantities = []\n        \n        orderdetails.cart.map((item) => \n            DishNames.push(item.Name)\n        )\n        orderdetails.cart.map((item) => \n            DishQuantities.push(item.quantity)\n        ) \n        var instructions = document.getElementById(\"instruction-box\").value\n        if(instructions === \"\"){\n            instructions = \"None\"\n        }\n        var placeorder = await firebase_integration.database.collection(\"RegularOrder\").add({\n            CustomerID: CustomerID,\n            Date: TodaysDate,\n            Action: \"Accept/Reject\",\n            Address: Address,\n            Discount: discount,\n            DishName: DishNames,\n            DishQuantity: DishQuantities,\n            OrderType: deliverytype,\n            Subtotal: orderdetails.total,\n            Tracking: \"Pending\",\n            MobileNumber: number,\n            SpecialInstruction: instructions,\n            OrderID: \"Not Assigned\"\n        }).then(function(docRef){\n            let promise = new Promise(() => {orderid = docRef.id})\n            promise.then(setOrderID(docRef.id));\n            firebase_integration.database.collection(\"RegularOrder\").doc(orderid.toString()).update({\n                OrderID: orderid\n            })\n        })\n    }\n\n    const validate = values => {\n        const errors = {};\n        if (!values.number) {\n          errors.number = 'Required';\n        } else if (values.number.length !== 11) {\n          errors.number = 'Phone number must be 11 characters long.';\n        }\n      \n        if (!values.address) {\n          errors.lastName = 'Address Required';\n        } \n      \n        if (!values.area) {\n          errors.email = 'Area Required';\n        }\n      \n        return errors;\n      };\n\n    const formik = useFormik({\n        \n        initialValues: {\n            number: '',\n            address: '',\n            area: '',\n            floor: ''\n        },\n        validate,\n        onSubmit: values => {\n            alert(value);\n        },\n        \n    });\n\n    return (\n        <div class = \"menuback\">\n            <Header title = \"CHECKOUT\" link = \"/cart\"/>\n            <div class = \"forms\">\n                <div name = \"your-details\"><h3><strong>Your Details:</strong></h3></div>\n                <form onSubmit = {formik.handleSubmit}>\n                    <input value={formik.values.number} onChange={formik.handleChange} onBlur={formik.handleBlur} type=\"text\" name =\"mobile\" placeholder=\"  Mobile Number\"/>\n                    {formik.touched.number && formik.errors.number ? (<div>{formik.errors.number}</div>) : null}\n                    <input value={formik.values.address} onChange={formik.handleChange} onBlur={formik.handleBlur} type=\"text\" name =\"address\" placeholder=\"  Street Address\"/><br/>\n                    {formik.touched.address && formik.errors.address ? (<div>{formik.errors.address}</div>) : null}\n                    <input value={formik.values.area} onChange={formik.handleChange} onBlur={formik.handleBlur} type=\"text\" name =\"area\" placeholder=\"  Area\"/>\n                    {formik.touched.area && formik.errors.area ? (<div>{formik.errors.area}</div>) : null}\n                    <input value={formik.values.floor} onChange={formik.handleChange} onBlur={formik.handleBlur} type=\"text\" name =\"floor\" placeholder=\"  Floor/Unit\"/>\n                </form> \n                <br/> <br/>\n                <div class = \"instructions\"><h3><strong>Special Instructions:</strong></h3></div>\n                <textarea maxlength=\"700\" id=\"instruction-box\" class = \"text-area\" placeholder=\"   Write your text here\"></textarea>\n                <br/> <br/>\n                <div><h3><strong>Order Type:</strong></h3></div>\n                <div name = \"order-type-checkout\">\n                    <input value={deliverytype} onChange={(e) => setDeliveryType(\"Delivery\")} type=\"radio\" name = \"method\"/>\n                    <label>Delivery</label>\n                    <input value={deliverytype} onChange={(e) => setDeliveryType(\"Takeaway\")} type=\"radio\" name = \"method\"/>\n                    <label>Takeaway</label>\n                </div>\n                <div><h3><strong>Select a payment method:</strong></h3></div>\n                <div name = \"payment\">\n                    <input type=\"checkbox\" checked='checked' name = \"method\"/>\n                    <label>Cash on Delivery</label>   \n                    <Link to = \"/orderconfirmed\">              \n                    <div class = \"confirm\">\n                        \n                        <a\n                         onClick = {() => {PlaceOrder()}}\n                            // href = \"/orderconfirmed\"\n                             type=\"button\" class=\"btn btn-success btn-lg\">CONFIRM</a>\n                             \n                    </div>\n                    </Link>  \n                    <br/>\n                </div>\n\n            </div>\n            <br/> <br/>\n            <Footer/>\n        </div>\n    )\n}\n\nexport default Checkout;"]},"metadata":{},"sourceType":"module"}