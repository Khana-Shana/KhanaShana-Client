{"ast":null,"code":"/**\n * @licstart The following is the entire license notice for the\n * Javascript code in this page\n *\n * Copyright 2018 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * Javascript code in this page\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isValidRotation = isValidRotation;\nexports.isValidScrollMode = isValidScrollMode;\nexports.isValidSpreadMode = isValidSpreadMode;\nexports.isPortraitOrientation = isPortraitOrientation;\nexports.getGlobalEventBus = getGlobalEventBus;\nexports.getPDFFileNameFromURL = getPDFFileNameFromURL;\nexports.noContextMenuHandler = noContextMenuHandler;\nexports.parseQueryString = parseQueryString;\nexports.backtrackBeforeAllVisibleElements = backtrackBeforeAllVisibleElements;\nexports.getVisibleElements = getVisibleElements;\nexports.roundToDivide = roundToDivide;\nexports.getPageSizeInches = getPageSizeInches;\nexports.approximateFraction = approximateFraction;\nexports.getOutputScale = getOutputScale;\nexports.scrollIntoView = scrollIntoView;\nexports.watchScroll = watchScroll;\nexports.binarySearchFirstItem = binarySearchFirstItem;\nexports.normalizeWheelEventDelta = normalizeWheelEventDelta;\nexports.waitOnEventOrTimeout = waitOnEventOrTimeout;\nexports.moveToEndOfArray = moveToEndOfArray;\nexports.WaitOnType = exports.animationStarted = exports.ProgressBar = exports.EventBus = exports.NullL10n = exports.SpreadMode = exports.ScrollMode = exports.TextLayerMode = exports.RendererType = exports.PresentationModeState = exports.VERTICAL_PADDING = exports.SCROLLBAR_PADDING = exports.MAX_AUTO_SCALE = exports.UNKNOWN_SCALE = exports.MAX_SCALE = exports.MIN_SCALE = exports.DEFAULT_SCALE = exports.DEFAULT_SCALE_VALUE = exports.CSS_UNITS = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nvar CSS_UNITS = 96.0 / 72.0;\nexports.CSS_UNITS = CSS_UNITS;\nvar DEFAULT_SCALE_VALUE = 'auto';\nexports.DEFAULT_SCALE_VALUE = DEFAULT_SCALE_VALUE;\nvar DEFAULT_SCALE = 1.0;\nexports.DEFAULT_SCALE = DEFAULT_SCALE;\nvar MIN_SCALE = 0.10;\nexports.MIN_SCALE = MIN_SCALE;\nvar MAX_SCALE = 10.0;\nexports.MAX_SCALE = MAX_SCALE;\nvar UNKNOWN_SCALE = 0;\nexports.UNKNOWN_SCALE = UNKNOWN_SCALE;\nvar MAX_AUTO_SCALE = 1.25;\nexports.MAX_AUTO_SCALE = MAX_AUTO_SCALE;\nvar SCROLLBAR_PADDING = 40;\nexports.SCROLLBAR_PADDING = SCROLLBAR_PADDING;\nvar VERTICAL_PADDING = 5;\nexports.VERTICAL_PADDING = VERTICAL_PADDING;\nvar PresentationModeState = {\n  UNKNOWN: 0,\n  NORMAL: 1,\n  CHANGING: 2,\n  FULLSCREEN: 3\n};\nexports.PresentationModeState = PresentationModeState;\nvar RendererType = {\n  CANVAS: 'canvas',\n  SVG: 'svg'\n};\nexports.RendererType = RendererType;\nvar TextLayerMode = {\n  DISABLE: 0,\n  ENABLE: 1,\n  ENABLE_ENHANCE: 2\n};\nexports.TextLayerMode = TextLayerMode;\nvar ScrollMode = {\n  UNKNOWN: -1,\n  VERTICAL: 0,\n  HORIZONTAL: 1,\n  WRAPPED: 2\n};\nexports.ScrollMode = ScrollMode;\nvar SpreadMode = {\n  UNKNOWN: -1,\n  NONE: 0,\n  ODD: 1,\n  EVEN: 2\n};\nexports.SpreadMode = SpreadMode;\n\nfunction formatL10nValue(text, args) {\n  if (!args) {\n    return text;\n  }\n\n  return text.replace(/\\{\\{\\s*(\\w+)\\s*\\}\\}/g, function (all, name) {\n    return name in args ? args[name] : '{{' + name + '}}';\n  });\n}\n\nvar NullL10n = {\n  getLanguage: function () {\n    var _getLanguage = _asyncToGenerator( /*#__PURE__*/_regenerator.default.mark(function _callee() {\n      return _regenerator.default.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", 'en-us');\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    function getLanguage() {\n      return _getLanguage.apply(this, arguments);\n    }\n\n    return getLanguage;\n  }(),\n  getDirection: function () {\n    var _getDirection = _asyncToGenerator( /*#__PURE__*/_regenerator.default.mark(function _callee2() {\n      return _regenerator.default.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              return _context2.abrupt(\"return\", 'ltr');\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n\n    function getDirection() {\n      return _getDirection.apply(this, arguments);\n    }\n\n    return getDirection;\n  }(),\n  get: function () {\n    var _get = _asyncToGenerator( /*#__PURE__*/_regenerator.default.mark(function _callee3(property, args, fallback) {\n      return _regenerator.default.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              return _context3.abrupt(\"return\", formatL10nValue(fallback, args));\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, this);\n    }));\n\n    function get(_x, _x2, _x3) {\n      return _get.apply(this, arguments);\n    }\n\n    return get;\n  }(),\n  translate: function () {\n    var _translate = _asyncToGenerator( /*#__PURE__*/_regenerator.default.mark(function _callee4(element) {\n      return _regenerator.default.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, this);\n    }));\n\n    function translate(_x4) {\n      return _translate.apply(this, arguments);\n    }\n\n    return translate;\n  }()\n};\nexports.NullL10n = NullL10n;\n\nfunction getOutputScale(ctx) {\n  var devicePixelRatio = window.devicePixelRatio || 1;\n  var backingStoreRatio = ctx.webkitBackingStorePixelRatio || ctx.mozBackingStorePixelRatio || ctx.msBackingStorePixelRatio || ctx.oBackingStorePixelRatio || ctx.backingStorePixelRatio || 1;\n  var pixelRatio = devicePixelRatio / backingStoreRatio;\n  return {\n    sx: pixelRatio,\n    sy: pixelRatio,\n    scaled: pixelRatio !== 1\n  };\n}\n\nfunction scrollIntoView(element, spot) {\n  var skipOverflowHiddenElements = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var parent = element.offsetParent;\n\n  if (!parent) {\n    console.error('offsetParent is not set -- cannot scroll');\n    return;\n  }\n\n  var offsetY = element.offsetTop + element.clientTop;\n  var offsetX = element.offsetLeft + element.clientLeft;\n\n  while (parent.clientHeight === parent.scrollHeight && parent.clientWidth === parent.scrollWidth || skipOverflowHiddenElements && getComputedStyle(parent).overflow === 'hidden') {\n    if (parent.dataset._scaleY) {\n      offsetY /= parent.dataset._scaleY;\n      offsetX /= parent.dataset._scaleX;\n    }\n\n    offsetY += parent.offsetTop;\n    offsetX += parent.offsetLeft;\n    parent = parent.offsetParent;\n\n    if (!parent) {\n      return;\n    }\n  }\n\n  if (spot) {\n    if (spot.top !== undefined) {\n      offsetY += spot.top;\n    }\n\n    if (spot.left !== undefined) {\n      offsetX += spot.left;\n      parent.scrollLeft = offsetX;\n    }\n  }\n\n  parent.scrollTop = offsetY;\n}\n\nfunction watchScroll(viewAreaElement, callback) {\n  var debounceScroll = function debounceScroll(evt) {\n    if (rAF) {\n      return;\n    }\n\n    rAF = window.requestAnimationFrame(function viewAreaElementScrolled() {\n      rAF = null;\n      var currentX = viewAreaElement.scrollLeft;\n      var lastX = state.lastX;\n\n      if (currentX !== lastX) {\n        state.right = currentX > lastX;\n      }\n\n      state.lastX = currentX;\n      var currentY = viewAreaElement.scrollTop;\n      var lastY = state.lastY;\n\n      if (currentY !== lastY) {\n        state.down = currentY > lastY;\n      }\n\n      state.lastY = currentY;\n      callback(state);\n    });\n  };\n\n  var state = {\n    right: true,\n    down: true,\n    lastX: viewAreaElement.scrollLeft,\n    lastY: viewAreaElement.scrollTop,\n    _eventHandler: debounceScroll\n  };\n  var rAF = null;\n  viewAreaElement.addEventListener('scroll', debounceScroll, true);\n  return state;\n}\n\nfunction parseQueryString(query) {\n  var parts = query.split('&');\n  var params = Object.create(null);\n\n  for (var i = 0, ii = parts.length; i < ii; ++i) {\n    var param = parts[i].split('=');\n    var key = param[0].toLowerCase();\n    var value = param.length > 1 ? param[1] : null;\n    params[decodeURIComponent(key)] = decodeURIComponent(value);\n  }\n\n  return params;\n}\n\nfunction binarySearchFirstItem(items, condition) {\n  var minIndex = 0;\n  var maxIndex = items.length - 1;\n\n  if (items.length === 0 || !condition(items[maxIndex])) {\n    return items.length;\n  }\n\n  if (condition(items[minIndex])) {\n    return minIndex;\n  }\n\n  while (minIndex < maxIndex) {\n    var currentIndex = minIndex + maxIndex >> 1;\n    var currentItem = items[currentIndex];\n\n    if (condition(currentItem)) {\n      maxIndex = currentIndex;\n    } else {\n      minIndex = currentIndex + 1;\n    }\n  }\n\n  return minIndex;\n}\n\nfunction approximateFraction(x) {\n  if (Math.floor(x) === x) {\n    return [x, 1];\n  }\n\n  var xinv = 1 / x;\n  var limit = 8;\n\n  if (xinv > limit) {\n    return [1, limit];\n  } else if (Math.floor(xinv) === xinv) {\n    return [1, xinv];\n  }\n\n  var x_ = x > 1 ? xinv : x;\n  var a = 0,\n      b = 1,\n      c = 1,\n      d = 1;\n\n  while (true) {\n    var p = a + c,\n        q = b + d;\n\n    if (q > limit) {\n      break;\n    }\n\n    if (x_ <= p / q) {\n      c = p;\n      d = q;\n    } else {\n      a = p;\n      b = q;\n    }\n  }\n\n  var result;\n\n  if (x_ - a / b < c / d - x_) {\n    result = x_ === x ? [a, b] : [b, a];\n  } else {\n    result = x_ === x ? [c, d] : [d, c];\n  }\n\n  return result;\n}\n\nfunction roundToDivide(x, div) {\n  var r = x % div;\n  return r === 0 ? x : Math.round(x - r + div);\n}\n\nfunction getPageSizeInches(_ref) {\n  var view = _ref.view,\n      userUnit = _ref.userUnit,\n      rotate = _ref.rotate;\n\n  var _view = _slicedToArray(view, 4),\n      x1 = _view[0],\n      y1 = _view[1],\n      x2 = _view[2],\n      y2 = _view[3];\n\n  var changeOrientation = rotate % 180 !== 0;\n  var width = (x2 - x1) / 72 * userUnit;\n  var height = (y2 - y1) / 72 * userUnit;\n  return {\n    width: changeOrientation ? height : width,\n    height: changeOrientation ? width : height\n  };\n}\n\nfunction backtrackBeforeAllVisibleElements(index, views, top) {\n  if (index < 2) {\n    return index;\n  }\n\n  var elt = views[index].div;\n  var pageTop = elt.offsetTop + elt.clientTop;\n\n  if (pageTop >= top) {\n    elt = views[index - 1].div;\n    pageTop = elt.offsetTop + elt.clientTop;\n  }\n\n  for (var i = index - 2; i >= 0; --i) {\n    elt = views[i].div;\n\n    if (elt.offsetTop + elt.clientTop + elt.clientHeight <= pageTop) {\n      break;\n    }\n\n    index = i;\n  }\n\n  return index;\n}\n\nfunction getVisibleElements(scrollEl, views) {\n  var sortByVisibility = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var horizontal = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var top = scrollEl.scrollTop,\n      bottom = top + scrollEl.clientHeight;\n  var left = scrollEl.scrollLeft,\n      right = left + scrollEl.clientWidth;\n\n  function isElementBottomAfterViewTop(view) {\n    var element = view.div;\n    var elementBottom = element.offsetTop + element.clientTop + element.clientHeight;\n    return elementBottom > top;\n  }\n\n  function isElementRightAfterViewLeft(view) {\n    var element = view.div;\n    var elementRight = element.offsetLeft + element.clientLeft + element.clientWidth;\n    return elementRight > left;\n  }\n\n  var visible = [],\n      numViews = views.length;\n  var firstVisibleElementInd = numViews === 0 ? 0 : binarySearchFirstItem(views, horizontal ? isElementRightAfterViewLeft : isElementBottomAfterViewTop);\n\n  if (firstVisibleElementInd > 0 && firstVisibleElementInd < numViews && !horizontal) {\n    firstVisibleElementInd = backtrackBeforeAllVisibleElements(firstVisibleElementInd, views, top);\n  }\n\n  var lastEdge = horizontal ? right : -1;\n\n  for (var i = firstVisibleElementInd; i < numViews; i++) {\n    var view = views[i],\n        element = view.div;\n    var currentWidth = element.offsetLeft + element.clientLeft;\n    var currentHeight = element.offsetTop + element.clientTop;\n    var viewWidth = element.clientWidth,\n        viewHeight = element.clientHeight;\n    var viewRight = currentWidth + viewWidth;\n    var viewBottom = currentHeight + viewHeight;\n\n    if (lastEdge === -1) {\n      if (viewBottom >= bottom) {\n        lastEdge = viewBottom;\n      }\n    } else if ((horizontal ? currentWidth : currentHeight) > lastEdge) {\n      break;\n    }\n\n    if (viewBottom <= top || currentHeight >= bottom || viewRight <= left || currentWidth >= right) {\n      continue;\n    }\n\n    var hiddenHeight = Math.max(0, top - currentHeight) + Math.max(0, viewBottom - bottom);\n    var hiddenWidth = Math.max(0, left - currentWidth) + Math.max(0, viewRight - right);\n    var percent = (viewHeight - hiddenHeight) * (viewWidth - hiddenWidth) * 100 / viewHeight / viewWidth | 0;\n    visible.push({\n      id: view.id,\n      x: currentWidth,\n      y: currentHeight,\n      view: view,\n      percent: percent\n    });\n  }\n\n  var first = visible[0],\n      last = visible[visible.length - 1];\n\n  if (sortByVisibility) {\n    visible.sort(function (a, b) {\n      var pc = a.percent - b.percent;\n\n      if (Math.abs(pc) > 0.001) {\n        return -pc;\n      }\n\n      return a.id - b.id;\n    });\n  }\n\n  return {\n    first: first,\n    last: last,\n    views: visible\n  };\n}\n\nfunction noContextMenuHandler(evt) {\n  evt.preventDefault();\n}\n\nfunction isDataSchema(url) {\n  var i = 0,\n      ii = url.length;\n\n  while (i < ii && url[i].trim() === '') {\n    i++;\n  }\n\n  return url.substring(i, i + 5).toLowerCase() === 'data:';\n}\n\nfunction getPDFFileNameFromURL(url) {\n  var defaultFilename = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'document.pdf';\n\n  if (typeof url !== 'string') {\n    return defaultFilename;\n  }\n\n  if (isDataSchema(url)) {\n    console.warn('getPDFFileNameFromURL: ' + 'ignoring \"data:\" URL for performance reasons.');\n    return defaultFilename;\n  }\n\n  var reURI = /^(?:(?:[^:]+:)?\\/\\/[^\\/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/;\n  var reFilename = /[^\\/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;\n  var splitURI = reURI.exec(url);\n  var suggestedFilename = reFilename.exec(splitURI[1]) || reFilename.exec(splitURI[2]) || reFilename.exec(splitURI[3]);\n\n  if (suggestedFilename) {\n    suggestedFilename = suggestedFilename[0];\n\n    if (suggestedFilename.includes('%')) {\n      try {\n        suggestedFilename = reFilename.exec(decodeURIComponent(suggestedFilename))[0];\n      } catch (ex) {}\n    }\n  }\n\n  return suggestedFilename || defaultFilename;\n}\n\nfunction normalizeWheelEventDelta(evt) {\n  var delta = Math.sqrt(evt.deltaX * evt.deltaX + evt.deltaY * evt.deltaY);\n  var angle = Math.atan2(evt.deltaY, evt.deltaX);\n\n  if (-0.25 * Math.PI < angle && angle < 0.75 * Math.PI) {\n    delta = -delta;\n  }\n\n  var MOUSE_DOM_DELTA_PIXEL_MODE = 0;\n  var MOUSE_DOM_DELTA_LINE_MODE = 1;\n  var MOUSE_PIXELS_PER_LINE = 30;\n  var MOUSE_LINES_PER_PAGE = 30;\n\n  if (evt.deltaMode === MOUSE_DOM_DELTA_PIXEL_MODE) {\n    delta /= MOUSE_PIXELS_PER_LINE * MOUSE_LINES_PER_PAGE;\n  } else if (evt.deltaMode === MOUSE_DOM_DELTA_LINE_MODE) {\n    delta /= MOUSE_LINES_PER_PAGE;\n  }\n\n  return delta;\n}\n\nfunction isValidRotation(angle) {\n  return Number.isInteger(angle) && angle % 90 === 0;\n}\n\nfunction isValidScrollMode(mode) {\n  return Number.isInteger(mode) && Object.values(ScrollMode).includes(mode) && mode !== ScrollMode.UNKNOWN;\n}\n\nfunction isValidSpreadMode(mode) {\n  return Number.isInteger(mode) && Object.values(SpreadMode).includes(mode) && mode !== SpreadMode.UNKNOWN;\n}\n\nfunction isPortraitOrientation(size) {\n  return size.width <= size.height;\n}\n\nvar WaitOnType = {\n  EVENT: 'event',\n  TIMEOUT: 'timeout'\n};\nexports.WaitOnType = WaitOnType;\n\nfunction waitOnEventOrTimeout(_ref2) {\n  var target = _ref2.target,\n      name = _ref2.name,\n      _ref2$delay = _ref2.delay,\n      delay = _ref2$delay === void 0 ? 0 : _ref2$delay;\n  return new Promise(function (resolve, reject) {\n    if (_typeof(target) !== 'object' || !(name && typeof name === 'string') || !(Number.isInteger(delay) && delay >= 0)) {\n      throw new Error('waitOnEventOrTimeout - invalid parameters.');\n    }\n\n    function handler(type) {\n      if (target instanceof EventBus) {\n        target.off(name, eventHandler);\n      } else {\n        target.removeEventListener(name, eventHandler);\n      }\n\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n\n      resolve(type);\n    }\n\n    var eventHandler = handler.bind(null, WaitOnType.EVENT);\n\n    if (target instanceof EventBus) {\n      target.on(name, eventHandler);\n    } else {\n      target.addEventListener(name, eventHandler);\n    }\n\n    var timeoutHandler = handler.bind(null, WaitOnType.TIMEOUT);\n    var timeout = setTimeout(timeoutHandler, delay);\n  });\n}\n\nvar animationStarted = new Promise(function (resolve) {\n  if (typeof window === 'undefined') {\n    setTimeout(resolve, 20);\n    return;\n  }\n\n  window.requestAnimationFrame(resolve);\n});\nexports.animationStarted = animationStarted;\n\nvar EventBus = /*#__PURE__*/function () {\n  function EventBus() {\n    var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref3$dispatchToDOM = _ref3.dispatchToDOM,\n        dispatchToDOM = _ref3$dispatchToDOM === void 0 ? false : _ref3$dispatchToDOM;\n\n    _classCallCheck(this, EventBus);\n\n    this._listeners = Object.create(null);\n    this._dispatchToDOM = dispatchToDOM === true;\n  }\n\n  _createClass(EventBus, [{\n    key: \"on\",\n    value: function on(eventName, listener) {\n      var eventListeners = this._listeners[eventName];\n\n      if (!eventListeners) {\n        eventListeners = [];\n        this._listeners[eventName] = eventListeners;\n      }\n\n      eventListeners.push(listener);\n    }\n  }, {\n    key: \"off\",\n    value: function off(eventName, listener) {\n      var eventListeners = this._listeners[eventName];\n      var i;\n\n      if (!eventListeners || (i = eventListeners.indexOf(listener)) < 0) {\n        return;\n      }\n\n      eventListeners.splice(i, 1);\n    }\n  }, {\n    key: \"dispatch\",\n    value: function dispatch(eventName) {\n      var eventListeners = this._listeners[eventName];\n\n      if (!eventListeners || eventListeners.length === 0) {\n        if (this._dispatchToDOM) {\n          var _args5 = Array.prototype.slice.call(arguments, 1);\n\n          this._dispatchDOMEvent(eventName, _args5);\n        }\n\n        return;\n      }\n\n      var args = Array.prototype.slice.call(arguments, 1);\n      eventListeners.slice(0).forEach(function (listener) {\n        listener.apply(null, args);\n      });\n\n      if (this._dispatchToDOM) {\n        this._dispatchDOMEvent(eventName, args);\n      }\n    }\n  }, {\n    key: \"_dispatchDOMEvent\",\n    value: function _dispatchDOMEvent(eventName) {\n      var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var details = Object.create(null);\n\n      if (args && args.length > 0) {\n        var obj = args[0];\n\n        for (var key in obj) {\n          var value = obj[key];\n\n          if (key === 'source') {\n            if (value === window || value === document) {\n              return;\n            }\n\n            continue;\n          }\n\n          details[key] = value;\n        }\n      }\n\n      var event = document.createEvent('CustomEvent');\n      event.initCustomEvent(eventName, true, true, details);\n      document.dispatchEvent(event);\n    }\n  }]);\n\n  return EventBus;\n}();\n\nexports.EventBus = EventBus;\nvar globalEventBus = null;\n\nfunction getGlobalEventBus() {\n  var dispatchToDOM = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n  if (!globalEventBus) {\n    globalEventBus = new EventBus({\n      dispatchToDOM: dispatchToDOM\n    });\n  }\n\n  return globalEventBus;\n}\n\nfunction clamp(v, min, max) {\n  return Math.min(Math.max(v, min), max);\n}\n\nvar ProgressBar = /*#__PURE__*/function () {\n  function ProgressBar(id) {\n    var _ref4 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        height = _ref4.height,\n        width = _ref4.width,\n        units = _ref4.units;\n\n    _classCallCheck(this, ProgressBar);\n\n    this.visible = true;\n    this.div = document.querySelector(id + ' .progress');\n    this.bar = this.div.parentNode;\n    this.height = height || 100;\n    this.width = width || 100;\n    this.units = units || '%';\n    this.div.style.height = this.height + this.units;\n    this.percent = 0;\n  }\n\n  _createClass(ProgressBar, [{\n    key: \"_updateBar\",\n    value: function _updateBar() {\n      if (this._indeterminate) {\n        this.div.classList.add('indeterminate');\n        this.div.style.width = this.width + this.units;\n        return;\n      }\n\n      this.div.classList.remove('indeterminate');\n      var progressSize = this.width * this._percent / 100;\n      this.div.style.width = progressSize + this.units;\n    }\n  }, {\n    key: \"setWidth\",\n    value: function setWidth(viewer) {\n      if (!viewer) {\n        return;\n      }\n\n      var container = viewer.parentNode;\n      var scrollbarWidth = container.offsetWidth - viewer.offsetWidth;\n\n      if (scrollbarWidth > 0) {\n        this.bar.setAttribute('style', 'width: calc(100% - ' + scrollbarWidth + 'px);');\n      }\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      if (!this.visible) {\n        return;\n      }\n\n      this.visible = false;\n      this.bar.classList.add('hidden');\n      document.body.classList.remove('loadingInProgress');\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      if (this.visible) {\n        return;\n      }\n\n      this.visible = true;\n      document.body.classList.add('loadingInProgress');\n      this.bar.classList.remove('hidden');\n    }\n  }, {\n    key: \"percent\",\n    get: function get() {\n      return this._percent;\n    },\n    set: function set(val) {\n      this._indeterminate = isNaN(val);\n      this._percent = clamp(val, 0, 100);\n\n      this._updateBar();\n    }\n  }]);\n\n  return ProgressBar;\n}();\n\nexports.ProgressBar = ProgressBar;\n\nfunction moveToEndOfArray(arr, condition) {\n  var moved = [],\n      len = arr.length;\n  var write = 0;\n\n  for (var read = 0; read < len; ++read) {\n    if (condition(arr[read])) {\n      moved.push(arr[read]);\n    } else {\n      arr[write] = arr[read];\n      ++write;\n    }\n  }\n\n  for (var _read = 0; write < len; ++_read, ++write) {\n    arr[write] = moved[_read];\n  }\n}","map":{"version":3,"sources":["/mnt/c/Users/Dell/Desktop/KhanaWeb/KhanaShana-Client/node_modules/pdfjs-dist/lib/web/ui_utils.js"],"names":["Object","defineProperty","exports","value","isValidRotation","isValidScrollMode","isValidSpreadMode","isPortraitOrientation","getGlobalEventBus","getPDFFileNameFromURL","noContextMenuHandler","parseQueryString","backtrackBeforeAllVisibleElements","getVisibleElements","roundToDivide","getPageSizeInches","approximateFraction","getOutputScale","scrollIntoView","watchScroll","binarySearchFirstItem","normalizeWheelEventDelta","waitOnEventOrTimeout","moveToEndOfArray","WaitOnType","animationStarted","ProgressBar","EventBus","NullL10n","SpreadMode","ScrollMode","TextLayerMode","RendererType","PresentationModeState","VERTICAL_PADDING","SCROLLBAR_PADDING","MAX_AUTO_SCALE","UNKNOWN_SCALE","MAX_SCALE","MIN_SCALE","DEFAULT_SCALE","DEFAULT_SCALE_VALUE","CSS_UNITS","_regenerator","_interopRequireDefault","require","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","prototype","_typeof","Symbol","iterator","constructor","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","err","Array","isArray","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","UNKNOWN","NORMAL","CHANGING","FULLSCREEN","CANVAS","SVG","DISABLE","ENABLE","ENABLE_ENHANCE","VERTICAL","HORIZONTAL","WRAPPED","NONE","ODD","EVEN","formatL10nValue","text","replace","all","name","getLanguage","_getLanguage","mark","_callee","wrap","_callee$","_context","prev","abrupt","stop","getDirection","_getDirection","_callee2","_callee2$","_context2","get","_get","_callee3","property","fallback","_callee3$","_context3","_x","_x2","_x3","translate","_translate","_callee4","element","_callee4$","_context4","_x4","ctx","devicePixelRatio","window","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","pixelRatio","sx","sy","scaled","spot","skipOverflowHiddenElements","parent","offsetParent","console","offsetY","offsetTop","clientTop","offsetX","offsetLeft","clientLeft","clientHeight","scrollHeight","clientWidth","scrollWidth","getComputedStyle","overflow","dataset","_scaleY","_scaleX","top","left","scrollLeft","scrollTop","viewAreaElement","callback","debounceScroll","evt","rAF","requestAnimationFrame","viewAreaElementScrolled","currentX","lastX","state","right","currentY","lastY","down","_eventHandler","addEventListener","query","parts","split","params","create","ii","param","toLowerCase","decodeURIComponent","items","condition","minIndex","maxIndex","currentIndex","currentItem","x","Math","floor","xinv","limit","x_","a","b","c","d","p","q","result","div","r","round","_ref","view","userUnit","rotate","_view","x1","y1","x2","y2","changeOrientation","width","height","index","views","elt","pageTop","scrollEl","sortByVisibility","horizontal","bottom","isElementBottomAfterViewTop","elementBottom","isElementRightAfterViewLeft","elementRight","visible","numViews","firstVisibleElementInd","lastEdge","currentWidth","currentHeight","viewWidth","viewHeight","viewRight","viewBottom","hiddenHeight","max","hiddenWidth","percent","id","y","first","last","sort","pc","abs","preventDefault","isDataSchema","url","trim","substring","defaultFilename","warn","reURI","reFilename","splitURI","exec","suggestedFilename","includes","ex","delta","sqrt","deltaX","deltaY","angle","atan2","PI","MOUSE_DOM_DELTA_PIXEL_MODE","MOUSE_DOM_DELTA_LINE_MODE","MOUSE_PIXELS_PER_LINE","MOUSE_LINES_PER_PAGE","deltaMode","Number","isInteger","mode","values","size","EVENT","TIMEOUT","_ref2","_ref2$delay","delay","Error","handler","type","off","eventHandler","removeEventListener","timeout","clearTimeout","bind","on","timeoutHandler","setTimeout","_ref3","_ref3$dispatchToDOM","dispatchToDOM","_listeners","_dispatchToDOM","eventName","listener","eventListeners","indexOf","splice","dispatch","_args5","slice","call","_dispatchDOMEvent","forEach","details","document","event","createEvent","initCustomEvent","dispatchEvent","globalEventBus","clamp","v","min","_ref4","units","querySelector","bar","parentNode","style","_updateBar","_indeterminate","classList","add","remove","progressSize","_percent","setWidth","viewer","container","scrollbarWidth","offsetWidth","setAttribute","hide","body","show","set","val","isNaN","moved","len","write","read","_read"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;AAqBA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,eAAR,GAA0BA,eAA1B;AACAF,OAAO,CAACG,iBAAR,GAA4BA,iBAA5B;AACAH,OAAO,CAACI,iBAAR,GAA4BA,iBAA5B;AACAJ,OAAO,CAACK,qBAAR,GAAgCA,qBAAhC;AACAL,OAAO,CAACM,iBAAR,GAA4BA,iBAA5B;AACAN,OAAO,CAACO,qBAAR,GAAgCA,qBAAhC;AACAP,OAAO,CAACQ,oBAAR,GAA+BA,oBAA/B;AACAR,OAAO,CAACS,gBAAR,GAA2BA,gBAA3B;AACAT,OAAO,CAACU,iCAAR,GAA4CA,iCAA5C;AACAV,OAAO,CAACW,kBAAR,GAA6BA,kBAA7B;AACAX,OAAO,CAACY,aAAR,GAAwBA,aAAxB;AACAZ,OAAO,CAACa,iBAAR,GAA4BA,iBAA5B;AACAb,OAAO,CAACc,mBAAR,GAA8BA,mBAA9B;AACAd,OAAO,CAACe,cAAR,GAAyBA,cAAzB;AACAf,OAAO,CAACgB,cAAR,GAAyBA,cAAzB;AACAhB,OAAO,CAACiB,WAAR,GAAsBA,WAAtB;AACAjB,OAAO,CAACkB,qBAAR,GAAgCA,qBAAhC;AACAlB,OAAO,CAACmB,wBAAR,GAAmCA,wBAAnC;AACAnB,OAAO,CAACoB,oBAAR,GAA+BA,oBAA/B;AACApB,OAAO,CAACqB,gBAAR,GAA2BA,gBAA3B;AACArB,OAAO,CAACsB,UAAR,GAAqBtB,OAAO,CAACuB,gBAAR,GAA2BvB,OAAO,CAACwB,WAAR,GAAsBxB,OAAO,CAACyB,QAAR,GAAmBzB,OAAO,CAAC0B,QAAR,GAAmB1B,OAAO,CAAC2B,UAAR,GAAqB3B,OAAO,CAAC4B,UAAR,GAAqB5B,OAAO,CAAC6B,aAAR,GAAwB7B,OAAO,CAAC8B,YAAR,GAAuB9B,OAAO,CAAC+B,qBAAR,GAAgC/B,OAAO,CAACgC,gBAAR,GAA2BhC,OAAO,CAACiC,iBAAR,GAA4BjC,OAAO,CAACkC,cAAR,GAAyBlC,OAAO,CAACmC,aAAR,GAAwBnC,OAAO,CAACoC,SAAR,GAAoBpC,OAAO,CAACqC,SAAR,GAAoBrC,OAAO,CAACsC,aAAR,GAAwBtC,OAAO,CAACuC,mBAAR,GAA8BvC,OAAO,CAACwC,SAAR,GAAoB,KAAK,CAApc;;AAEA,IAAIC,YAAY,GAAGC,sBAAsB,CAACC,OAAO,CAAC,4BAAD,CAAR,CAAzC;;AAEA,SAASD,sBAAT,CAAgCE,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AAAEE,IAAAA,OAAO,EAAEF;AAAX,GAArC;AAAwD;;AAE/F,SAASG,eAAT,CAAyBC,QAAzB,EAAmCC,WAAnC,EAAgD;AAAE,MAAI,EAAED,QAAQ,YAAYC,WAAtB,CAAJ,EAAwC;AAAE,UAAM,IAAIC,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;;AAEzJ,SAASC,iBAAT,CAA2BC,MAA3B,EAAmCC,KAAnC,EAA0C;AAAE,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,KAAK,CAACE,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AAAE,QAAIE,UAAU,GAAGH,KAAK,CAACC,CAAD,CAAtB;AAA2BE,IAAAA,UAAU,CAACC,UAAX,GAAwBD,UAAU,CAACC,UAAX,IAAyB,KAAjD;AAAwDD,IAAAA,UAAU,CAACE,YAAX,GAA0B,IAA1B;AAAgC,QAAI,WAAWF,UAAf,EAA2BA,UAAU,CAACG,QAAX,GAAsB,IAAtB;AAA4B7D,IAAAA,MAAM,CAACC,cAAP,CAAsBqD,MAAtB,EAA8BI,UAAU,CAACI,GAAzC,EAA8CJ,UAA9C;AAA4D;AAAE;;AAE7T,SAASK,YAAT,CAAsBZ,WAAtB,EAAmCa,UAAnC,EAA+CC,WAA/C,EAA4D;AAAE,MAAID,UAAJ,EAAgBX,iBAAiB,CAACF,WAAW,CAACe,SAAb,EAAwBF,UAAxB,CAAjB;AAAsD,MAAIC,WAAJ,EAAiBZ,iBAAiB,CAACF,WAAD,EAAcc,WAAd,CAAjB;AAA6C,SAAOd,WAAP;AAAqB;;AAEvN,SAASgB,OAAT,CAAiBrB,GAAjB,EAAsB;AAAE,MAAI,OAAOsB,MAAP,KAAkB,UAAlB,IAAgC,OAAOA,MAAM,CAACC,QAAd,KAA2B,QAA/D,EAAyE;AAAEF,IAAAA,OAAO,GAAG,SAASA,OAAT,CAAiBrB,GAAjB,EAAsB;AAAE,aAAO,OAAOA,GAAd;AAAoB,KAAtD;AAAyD,GAApI,MAA0I;AAAEqB,IAAAA,OAAO,GAAG,SAASA,OAAT,CAAiBrB,GAAjB,EAAsB;AAAE,aAAOA,GAAG,IAAI,OAAOsB,MAAP,KAAkB,UAAzB,IAAuCtB,GAAG,CAACwB,WAAJ,KAAoBF,MAA3D,IAAqEtB,GAAG,KAAKsB,MAAM,CAACF,SAApF,GAAgG,QAAhG,GAA2G,OAAOpB,GAAzH;AAA+H,KAAjK;AAAoK;;AAAC,SAAOqB,OAAO,CAACrB,GAAD,CAAd;AAAsB;;AAE/V,SAASyB,cAAT,CAAwBC,GAAxB,EAA6BhB,CAA7B,EAAgC;AAAE,SAAOiB,eAAe,CAACD,GAAD,CAAf,IAAwBE,qBAAqB,CAACF,GAAD,EAAMhB,CAAN,CAA7C,IAAyDmB,gBAAgB,EAAhF;AAAqF;;AAEvH,SAASA,gBAAT,GAA4B;AAAE,QAAM,IAAIvB,SAAJ,CAAc,sDAAd,CAAN;AAA8E;;AAE5G,SAASsB,qBAAT,CAA+BF,GAA/B,EAAoChB,CAApC,EAAuC;AAAE,MAAIoB,IAAI,GAAG,EAAX;AAAe,MAAIC,EAAE,GAAG,IAAT;AAAe,MAAIC,EAAE,GAAG,KAAT;AAAgB,MAAIC,EAAE,GAAGC,SAAT;;AAAoB,MAAI;AAAE,SAAK,IAAIC,EAAE,GAAGT,GAAG,CAACJ,MAAM,CAACC,QAAR,CAAH,EAAT,EAAiCa,EAAtC,EAA0C,EAAEL,EAAE,GAAG,CAACK,EAAE,GAAGD,EAAE,CAACE,IAAH,EAAN,EAAiBC,IAAxB,CAA1C,EAAyEP,EAAE,GAAG,IAA9E,EAAoF;AAAED,MAAAA,IAAI,CAACS,IAAL,CAAUH,EAAE,CAAC/E,KAAb;;AAAqB,UAAIqD,CAAC,IAAIoB,IAAI,CAACnB,MAAL,KAAgBD,CAAzB,EAA4B;AAAQ;AAAE,GAAvJ,CAAwJ,OAAO8B,GAAP,EAAY;AAAER,IAAAA,EAAE,GAAG,IAAL;AAAWC,IAAAA,EAAE,GAAGO,GAAL;AAAW,GAA5L,SAAqM;AAAE,QAAI;AAAE,UAAI,CAACT,EAAD,IAAOI,EAAE,CAAC,QAAD,CAAF,IAAgB,IAA3B,EAAiCA,EAAE,CAAC,QAAD,CAAF;AAAiB,KAAxD,SAAiE;AAAE,UAAIH,EAAJ,EAAQ,MAAMC,EAAN;AAAW;AAAE;;AAAC,SAAOH,IAAP;AAAc;;AAEzZ,SAASH,eAAT,CAAyBD,GAAzB,EAA8B;AAAE,MAAIe,KAAK,CAACC,OAAN,CAAchB,GAAd,CAAJ,EAAwB,OAAOA,GAAP;AAAa;;AAErE,SAASiB,kBAAT,CAA4BC,GAA5B,EAAiCC,OAAjC,EAA0CC,MAA1C,EAAkDC,KAAlD,EAAyDC,MAAzD,EAAiEhC,GAAjE,EAAsEiC,GAAtE,EAA2E;AAAE,MAAI;AAAE,QAAIC,IAAI,GAAGN,GAAG,CAAC5B,GAAD,CAAH,CAASiC,GAAT,CAAX;AAA0B,QAAI5F,KAAK,GAAG6F,IAAI,CAAC7F,KAAjB;AAAyB,GAAzD,CAA0D,OAAO8F,KAAP,EAAc;AAAEL,IAAAA,MAAM,CAACK,KAAD,CAAN;AAAe;AAAS;;AAAC,MAAID,IAAI,CAACZ,IAAT,EAAe;AAAEO,IAAAA,OAAO,CAACxF,KAAD,CAAP;AAAiB,GAAlC,MAAwC;AAAE+F,IAAAA,OAAO,CAACP,OAAR,CAAgBxF,KAAhB,EAAuBgG,IAAvB,CAA4BN,KAA5B,EAAmCC,MAAnC;AAA6C;AAAE;;AAEzQ,SAASM,iBAAT,CAA2BC,EAA3B,EAA+B;AAAE,SAAO,YAAY;AAAE,QAAIC,IAAI,GAAG,IAAX;AAAA,QAAiBC,IAAI,GAAGC,SAAxB;AAAmC,WAAO,IAAIN,OAAJ,CAAY,UAAUP,OAAV,EAAmBC,MAAnB,EAA2B;AAAE,UAAIF,GAAG,GAAGW,EAAE,CAACI,KAAH,CAASH,IAAT,EAAeC,IAAf,CAAV;;AAAgC,eAASV,KAAT,CAAe1F,KAAf,EAAsB;AAAEsF,QAAAA,kBAAkB,CAACC,GAAD,EAAMC,OAAN,EAAeC,MAAf,EAAuBC,KAAvB,EAA8BC,MAA9B,EAAsC,MAAtC,EAA8C3F,KAA9C,CAAlB;AAAyE;;AAAC,eAAS2F,MAAT,CAAgBR,GAAhB,EAAqB;AAAEG,QAAAA,kBAAkB,CAACC,GAAD,EAAMC,OAAN,EAAeC,MAAf,EAAuBC,KAAvB,EAA8BC,MAA9B,EAAsC,OAAtC,EAA+CR,GAA/C,CAAlB;AAAwE;;AAACO,MAAAA,KAAK,CAACb,SAAD,CAAL;AAAmB,KAA9R,CAAP;AAAyS,GAAjW;AAAoW;;AAErY,IAAItC,SAAS,GAAG,OAAO,IAAvB;AACAxC,OAAO,CAACwC,SAAR,GAAoBA,SAApB;AACA,IAAID,mBAAmB,GAAG,MAA1B;AACAvC,OAAO,CAACuC,mBAAR,GAA8BA,mBAA9B;AACA,IAAID,aAAa,GAAG,GAApB;AACAtC,OAAO,CAACsC,aAAR,GAAwBA,aAAxB;AACA,IAAID,SAAS,GAAG,IAAhB;AACArC,OAAO,CAACqC,SAAR,GAAoBA,SAApB;AACA,IAAID,SAAS,GAAG,IAAhB;AACApC,OAAO,CAACoC,SAAR,GAAoBA,SAApB;AACA,IAAID,aAAa,GAAG,CAApB;AACAnC,OAAO,CAACmC,aAAR,GAAwBA,aAAxB;AACA,IAAID,cAAc,GAAG,IAArB;AACAlC,OAAO,CAACkC,cAAR,GAAyBA,cAAzB;AACA,IAAID,iBAAiB,GAAG,EAAxB;AACAjC,OAAO,CAACiC,iBAAR,GAA4BA,iBAA5B;AACA,IAAID,gBAAgB,GAAG,CAAvB;AACAhC,OAAO,CAACgC,gBAAR,GAA2BA,gBAA3B;AACA,IAAID,qBAAqB,GAAG;AAC1ByE,EAAAA,OAAO,EAAE,CADiB;AAE1BC,EAAAA,MAAM,EAAE,CAFkB;AAG1BC,EAAAA,QAAQ,EAAE,CAHgB;AAI1BC,EAAAA,UAAU,EAAE;AAJc,CAA5B;AAMA3G,OAAO,CAAC+B,qBAAR,GAAgCA,qBAAhC;AACA,IAAID,YAAY,GAAG;AACjB8E,EAAAA,MAAM,EAAE,QADS;AAEjBC,EAAAA,GAAG,EAAE;AAFY,CAAnB;AAIA7G,OAAO,CAAC8B,YAAR,GAAuBA,YAAvB;AACA,IAAID,aAAa,GAAG;AAClBiF,EAAAA,OAAO,EAAE,CADS;AAElBC,EAAAA,MAAM,EAAE,CAFU;AAGlBC,EAAAA,cAAc,EAAE;AAHE,CAApB;AAKAhH,OAAO,CAAC6B,aAAR,GAAwBA,aAAxB;AACA,IAAID,UAAU,GAAG;AACf4E,EAAAA,OAAO,EAAE,CAAC,CADK;AAEfS,EAAAA,QAAQ,EAAE,CAFK;AAGfC,EAAAA,UAAU,EAAE,CAHG;AAIfC,EAAAA,OAAO,EAAE;AAJM,CAAjB;AAMAnH,OAAO,CAAC4B,UAAR,GAAqBA,UAArB;AACA,IAAID,UAAU,GAAG;AACf6E,EAAAA,OAAO,EAAE,CAAC,CADK;AAEfY,EAAAA,IAAI,EAAE,CAFS;AAGfC,EAAAA,GAAG,EAAE,CAHU;AAIfC,EAAAA,IAAI,EAAE;AAJS,CAAjB;AAMAtH,OAAO,CAAC2B,UAAR,GAAqBA,UAArB;;AAEA,SAAS4F,eAAT,CAAyBC,IAAzB,EAA+BnB,IAA/B,EAAqC;AACnC,MAAI,CAACA,IAAL,EAAW;AACT,WAAOmB,IAAP;AACD;;AAED,SAAOA,IAAI,CAACC,OAAL,CAAa,sBAAb,EAAqC,UAAUC,GAAV,EAAeC,IAAf,EAAqB;AAC/D,WAAOA,IAAI,IAAItB,IAAR,GAAeA,IAAI,CAACsB,IAAD,CAAnB,GAA4B,OAAOA,IAAP,GAAc,IAAjD;AACD,GAFM,CAAP;AAGD;;AAED,IAAIjG,QAAQ,GAAG;AACbkG,EAAAA,WAAW,EAAE,YAAY;AACvB,QAAIC,YAAY,GAAG3B,iBAAiB,EACpC,aACAzD,YAAY,CAACK,OAAb,CAAqBgF,IAArB,CAA0B,SAASC,OAAT,GAAmB;AAC3C,aAAOtF,YAAY,CAACK,OAAb,CAAqBkF,IAArB,CAA0B,SAASC,QAAT,CAAkBC,QAAlB,EAA4B;AAC3D,eAAO,CAAP,EAAU;AACR,kBAAQA,QAAQ,CAACC,IAAT,GAAgBD,QAAQ,CAACjD,IAAjC;AACE,iBAAK,CAAL;AACE,qBAAOiD,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAA0B,OAA1B,CAAP;;AAEF,iBAAK,CAAL;AACA,iBAAK,KAAL;AACE,qBAAOF,QAAQ,CAACG,IAAT,EAAP;AANJ;AAQD;AACF,OAXM,EAWJN,OAXI,EAWK,IAXL,CAAP;AAYD,KAbD,CAFoC,CAApC;;AAiBA,aAASH,WAAT,GAAuB;AACrB,aAAOC,YAAY,CAACtB,KAAb,CAAmB,IAAnB,EAAyBD,SAAzB,CAAP;AACD;;AAED,WAAOsB,WAAP;AACD,GAvBY,EADA;AAyBbU,EAAAA,YAAY,EAAE,YAAY;AACxB,QAAIC,aAAa,GAAGrC,iBAAiB,EACrC,aACAzD,YAAY,CAACK,OAAb,CAAqBgF,IAArB,CAA0B,SAASU,QAAT,GAAoB;AAC5C,aAAO/F,YAAY,CAACK,OAAb,CAAqBkF,IAArB,CAA0B,SAASS,SAAT,CAAmBC,SAAnB,EAA8B;AAC7D,eAAO,CAAP,EAAU;AACR,kBAAQA,SAAS,CAACP,IAAV,GAAiBO,SAAS,CAACzD,IAAnC;AACE,iBAAK,CAAL;AACE,qBAAOyD,SAAS,CAACN,MAAV,CAAiB,QAAjB,EAA2B,KAA3B,CAAP;;AAEF,iBAAK,CAAL;AACA,iBAAK,KAAL;AACE,qBAAOM,SAAS,CAACL,IAAV,EAAP;AANJ;AAQD;AACF,OAXM,EAWJG,QAXI,EAWM,IAXN,CAAP;AAYD,KAbD,CAFqC,CAArC;;AAiBA,aAASF,YAAT,GAAwB;AACtB,aAAOC,aAAa,CAAChC,KAAd,CAAoB,IAApB,EAA0BD,SAA1B,CAAP;AACD;;AAED,WAAOgC,YAAP;AACD,GAvBa,EAzBD;AAiDbK,EAAAA,GAAG,EAAE,YAAY;AACf,QAAIC,IAAI,GAAG1C,iBAAiB,EAC5B,aACAzD,YAAY,CAACK,OAAb,CAAqBgF,IAArB,CAA0B,SAASe,QAAT,CAAkBC,QAAlB,EAA4BzC,IAA5B,EAAkC0C,QAAlC,EAA4C;AACpE,aAAOtG,YAAY,CAACK,OAAb,CAAqBkF,IAArB,CAA0B,SAASgB,SAAT,CAAmBC,SAAnB,EAA8B;AAC7D,eAAO,CAAP,EAAU;AACR,kBAAQA,SAAS,CAACd,IAAV,GAAiBc,SAAS,CAAChE,IAAnC;AACE,iBAAK,CAAL;AACE,qBAAOgE,SAAS,CAACb,MAAV,CAAiB,QAAjB,EAA2Bb,eAAe,CAACwB,QAAD,EAAW1C,IAAX,CAA1C,CAAP;;AAEF,iBAAK,CAAL;AACA,iBAAK,KAAL;AACE,qBAAO4C,SAAS,CAACZ,IAAV,EAAP;AANJ;AAQD;AACF,OAXM,EAWJQ,QAXI,EAWM,IAXN,CAAP;AAYD,KAbD,CAF4B,CAA5B;;AAiBA,aAASF,GAAT,CAAaO,EAAb,EAAiBC,GAAjB,EAAsBC,GAAtB,EAA2B;AACzB,aAAOR,IAAI,CAACrC,KAAL,CAAW,IAAX,EAAiBD,SAAjB,CAAP;AACD;;AAED,WAAOqC,GAAP;AACD,GAvBI,EAjDQ;AAyEbU,EAAAA,SAAS,EAAE,YAAY;AACrB,QAAIC,UAAU,GAAGpD,iBAAiB,EAClC,aACAzD,YAAY,CAACK,OAAb,CAAqBgF,IAArB,CAA0B,SAASyB,QAAT,CAAkBC,OAAlB,EAA2B;AACnD,aAAO/G,YAAY,CAACK,OAAb,CAAqBkF,IAArB,CAA0B,SAASyB,SAAT,CAAmBC,SAAnB,EAA8B;AAC7D,eAAO,CAAP,EAAU;AACR,kBAAQA,SAAS,CAACvB,IAAV,GAAiBuB,SAAS,CAACzE,IAAnC;AACE,iBAAK,CAAL;AACA,iBAAK,KAAL;AACE,qBAAOyE,SAAS,CAACrB,IAAV,EAAP;AAHJ;AAKD;AACF,OARM,EAQJkB,QARI,EAQM,IARN,CAAP;AASD,KAVD,CAFkC,CAAlC;;AAcA,aAASF,SAAT,CAAmBM,GAAnB,EAAwB;AACtB,aAAOL,UAAU,CAAC/C,KAAX,CAAiB,IAAjB,EAAuBD,SAAvB,CAAP;AACD;;AAED,WAAO+C,SAAP;AACD,GApBU;AAzEE,CAAf;AA+FArJ,OAAO,CAAC0B,QAAR,GAAmBA,QAAnB;;AAEA,SAASX,cAAT,CAAwB6I,GAAxB,EAA6B;AAC3B,MAAIC,gBAAgB,GAAGC,MAAM,CAACD,gBAAP,IAA2B,CAAlD;AACA,MAAIE,iBAAiB,GAAGH,GAAG,CAACI,4BAAJ,IAAoCJ,GAAG,CAACK,yBAAxC,IAAqEL,GAAG,CAACM,wBAAzE,IAAqGN,GAAG,CAACO,uBAAzG,IAAoIP,GAAG,CAACQ,sBAAxI,IAAkK,CAA1L;AACA,MAAIC,UAAU,GAAGR,gBAAgB,GAAGE,iBAApC;AACA,SAAO;AACLO,IAAAA,EAAE,EAAED,UADC;AAELE,IAAAA,EAAE,EAAEF,UAFC;AAGLG,IAAAA,MAAM,EAAEH,UAAU,KAAK;AAHlB,GAAP;AAKD;;AAED,SAASrJ,cAAT,CAAwBwI,OAAxB,EAAiCiB,IAAjC,EAAuC;AACrC,MAAIC,0BAA0B,GAAGpE,SAAS,CAAC/C,MAAV,GAAmB,CAAnB,IAAwB+C,SAAS,CAAC,CAAD,CAAT,KAAiBxB,SAAzC,GAAqDwB,SAAS,CAAC,CAAD,CAA9D,GAAoE,KAArG;AACA,MAAIqE,MAAM,GAAGnB,OAAO,CAACoB,YAArB;;AAEA,MAAI,CAACD,MAAL,EAAa;AACXE,IAAAA,OAAO,CAAC9E,KAAR,CAAc,0CAAd;AACA;AACD;;AAED,MAAI+E,OAAO,GAAGtB,OAAO,CAACuB,SAAR,GAAoBvB,OAAO,CAACwB,SAA1C;AACA,MAAIC,OAAO,GAAGzB,OAAO,CAAC0B,UAAR,GAAqB1B,OAAO,CAAC2B,UAA3C;;AAEA,SAAOR,MAAM,CAACS,YAAP,KAAwBT,MAAM,CAACU,YAA/B,IAA+CV,MAAM,CAACW,WAAP,KAAuBX,MAAM,CAACY,WAA7E,IAA4Fb,0BAA0B,IAAIc,gBAAgB,CAACb,MAAD,CAAhB,CAAyBc,QAAzB,KAAsC,QAAvK,EAAiL;AAC/K,QAAId,MAAM,CAACe,OAAP,CAAeC,OAAnB,EAA4B;AAC1Bb,MAAAA,OAAO,IAAIH,MAAM,CAACe,OAAP,CAAeC,OAA1B;AACAV,MAAAA,OAAO,IAAIN,MAAM,CAACe,OAAP,CAAeE,OAA1B;AACD;;AAEDd,IAAAA,OAAO,IAAIH,MAAM,CAACI,SAAlB;AACAE,IAAAA,OAAO,IAAIN,MAAM,CAACO,UAAlB;AACAP,IAAAA,MAAM,GAAGA,MAAM,CAACC,YAAhB;;AAEA,QAAI,CAACD,MAAL,EAAa;AACX;AACD;AACF;;AAED,MAAIF,IAAJ,EAAU;AACR,QAAIA,IAAI,CAACoB,GAAL,KAAa/G,SAAjB,EAA4B;AAC1BgG,MAAAA,OAAO,IAAIL,IAAI,CAACoB,GAAhB;AACD;;AAED,QAAIpB,IAAI,CAACqB,IAAL,KAAchH,SAAlB,EAA6B;AAC3BmG,MAAAA,OAAO,IAAIR,IAAI,CAACqB,IAAhB;AACAnB,MAAAA,MAAM,CAACoB,UAAP,GAAoBd,OAApB;AACD;AACF;;AAEDN,EAAAA,MAAM,CAACqB,SAAP,GAAmBlB,OAAnB;AACD;;AAED,SAAS7J,WAAT,CAAqBgL,eAArB,EAAsCC,QAAtC,EAAgD;AAC9C,MAAIC,cAAc,GAAG,SAASA,cAAT,CAAwBC,GAAxB,EAA6B;AAChD,QAAIC,GAAJ,EAAS;AACP;AACD;;AAEDA,IAAAA,GAAG,GAAGvC,MAAM,CAACwC,qBAAP,CAA6B,SAASC,uBAAT,GAAmC;AACpEF,MAAAA,GAAG,GAAG,IAAN;AACA,UAAIG,QAAQ,GAAGP,eAAe,CAACF,UAA/B;AACA,UAAIU,KAAK,GAAGC,KAAK,CAACD,KAAlB;;AAEA,UAAID,QAAQ,KAAKC,KAAjB,EAAwB;AACtBC,QAAAA,KAAK,CAACC,KAAN,GAAcH,QAAQ,GAAGC,KAAzB;AACD;;AAEDC,MAAAA,KAAK,CAACD,KAAN,GAAcD,QAAd;AACA,UAAII,QAAQ,GAAGX,eAAe,CAACD,SAA/B;AACA,UAAIa,KAAK,GAAGH,KAAK,CAACG,KAAlB;;AAEA,UAAID,QAAQ,KAAKC,KAAjB,EAAwB;AACtBH,QAAAA,KAAK,CAACI,IAAN,GAAaF,QAAQ,GAAGC,KAAxB;AACD;;AAEDH,MAAAA,KAAK,CAACG,KAAN,GAAcD,QAAd;AACAV,MAAAA,QAAQ,CAACQ,KAAD,CAAR;AACD,KAnBK,CAAN;AAoBD,GAzBD;;AA2BA,MAAIA,KAAK,GAAG;AACVC,IAAAA,KAAK,EAAE,IADG;AAEVG,IAAAA,IAAI,EAAE,IAFI;AAGVL,IAAAA,KAAK,EAAER,eAAe,CAACF,UAHb;AAIVc,IAAAA,KAAK,EAAEZ,eAAe,CAACD,SAJb;AAKVe,IAAAA,aAAa,EAAEZ;AALL,GAAZ;AAOA,MAAIE,GAAG,GAAG,IAAV;AACAJ,EAAAA,eAAe,CAACe,gBAAhB,CAAiC,QAAjC,EAA2Cb,cAA3C,EAA2D,IAA3D;AACA,SAAOO,KAAP;AACD;;AAED,SAASjM,gBAAT,CAA0BwM,KAA1B,EAAiC;AAC/B,MAAIC,KAAK,GAAGD,KAAK,CAACE,KAAN,CAAY,GAAZ,CAAZ;AACA,MAAIC,MAAM,GAAGtN,MAAM,CAACuN,MAAP,CAAc,IAAd,CAAb;;AAEA,OAAK,IAAI/J,CAAC,GAAG,CAAR,EAAWgK,EAAE,GAAGJ,KAAK,CAAC3J,MAA3B,EAAmCD,CAAC,GAAGgK,EAAvC,EAA2C,EAAEhK,CAA7C,EAAgD;AAC9C,QAAIiK,KAAK,GAAGL,KAAK,CAAC5J,CAAD,CAAL,CAAS6J,KAAT,CAAe,GAAf,CAAZ;AACA,QAAIvJ,GAAG,GAAG2J,KAAK,CAAC,CAAD,CAAL,CAASC,WAAT,EAAV;AACA,QAAIvN,KAAK,GAAGsN,KAAK,CAAChK,MAAN,GAAe,CAAf,GAAmBgK,KAAK,CAAC,CAAD,CAAxB,GAA8B,IAA1C;AACAH,IAAAA,MAAM,CAACK,kBAAkB,CAAC7J,GAAD,CAAnB,CAAN,GAAkC6J,kBAAkB,CAACxN,KAAD,CAApD;AACD;;AAED,SAAOmN,MAAP;AACD;;AAED,SAASlM,qBAAT,CAA+BwM,KAA/B,EAAsCC,SAAtC,EAAiD;AAC/C,MAAIC,QAAQ,GAAG,CAAf;AACA,MAAIC,QAAQ,GAAGH,KAAK,CAACnK,MAAN,GAAe,CAA9B;;AAEA,MAAImK,KAAK,CAACnK,MAAN,KAAiB,CAAjB,IAAsB,CAACoK,SAAS,CAACD,KAAK,CAACG,QAAD,CAAN,CAApC,EAAuD;AACrD,WAAOH,KAAK,CAACnK,MAAb;AACD;;AAED,MAAIoK,SAAS,CAACD,KAAK,CAACE,QAAD,CAAN,CAAb,EAAgC;AAC9B,WAAOA,QAAP;AACD;;AAED,SAAOA,QAAQ,GAAGC,QAAlB,EAA4B;AAC1B,QAAIC,YAAY,GAAGF,QAAQ,GAAGC,QAAX,IAAuB,CAA1C;AACA,QAAIE,WAAW,GAAGL,KAAK,CAACI,YAAD,CAAvB;;AAEA,QAAIH,SAAS,CAACI,WAAD,CAAb,EAA4B;AAC1BF,MAAAA,QAAQ,GAAGC,YAAX;AACD,KAFD,MAEO;AACLF,MAAAA,QAAQ,GAAGE,YAAY,GAAG,CAA1B;AACD;AACF;;AAED,SAAOF,QAAP;AACD;;AAED,SAAS9M,mBAAT,CAA6BkN,CAA7B,EAAgC;AAC9B,MAAIC,IAAI,CAACC,KAAL,CAAWF,CAAX,MAAkBA,CAAtB,EAAyB;AACvB,WAAO,CAACA,CAAD,EAAI,CAAJ,CAAP;AACD;;AAED,MAAIG,IAAI,GAAG,IAAIH,CAAf;AACA,MAAII,KAAK,GAAG,CAAZ;;AAEA,MAAID,IAAI,GAAGC,KAAX,EAAkB;AAChB,WAAO,CAAC,CAAD,EAAIA,KAAJ,CAAP;AACD,GAFD,MAEO,IAAIH,IAAI,CAACC,KAAL,CAAWC,IAAX,MAAqBA,IAAzB,EAA+B;AACpC,WAAO,CAAC,CAAD,EAAIA,IAAJ,CAAP;AACD;;AAED,MAAIE,EAAE,GAAGL,CAAC,GAAG,CAAJ,GAAQG,IAAR,GAAeH,CAAxB;AACA,MAAIM,CAAC,GAAG,CAAR;AAAA,MACIC,CAAC,GAAG,CADR;AAAA,MAEIC,CAAC,GAAG,CAFR;AAAA,MAGIC,CAAC,GAAG,CAHR;;AAKA,SAAO,IAAP,EAAa;AACX,QAAIC,CAAC,GAAGJ,CAAC,GAAGE,CAAZ;AAAA,QACIG,CAAC,GAAGJ,CAAC,GAAGE,CADZ;;AAGA,QAAIE,CAAC,GAAGP,KAAR,EAAe;AACb;AACD;;AAED,QAAIC,EAAE,IAAIK,CAAC,GAAGC,CAAd,EAAiB;AACfH,MAAAA,CAAC,GAAGE,CAAJ;AACAD,MAAAA,CAAC,GAAGE,CAAJ;AACD,KAHD,MAGO;AACLL,MAAAA,CAAC,GAAGI,CAAJ;AACAH,MAAAA,CAAC,GAAGI,CAAJ;AACD;AACF;;AAED,MAAIC,MAAJ;;AAEA,MAAIP,EAAE,GAAGC,CAAC,GAAGC,CAAT,GAAaC,CAAC,GAAGC,CAAJ,GAAQJ,EAAzB,EAA6B;AAC3BO,IAAAA,MAAM,GAAGP,EAAE,KAAKL,CAAP,GAAW,CAACM,CAAD,EAAIC,CAAJ,CAAX,GAAoB,CAACA,CAAD,EAAID,CAAJ,CAA7B;AACD,GAFD,MAEO;AACLM,IAAAA,MAAM,GAAGP,EAAE,KAAKL,CAAP,GAAW,CAACQ,CAAD,EAAIC,CAAJ,CAAX,GAAoB,CAACA,CAAD,EAAID,CAAJ,CAA7B;AACD;;AAED,SAAOI,MAAP;AACD;;AAED,SAAShO,aAAT,CAAuBoN,CAAvB,EAA0Ba,GAA1B,EAA+B;AAC7B,MAAIC,CAAC,GAAGd,CAAC,GAAGa,GAAZ;AACA,SAAOC,CAAC,KAAK,CAAN,GAAUd,CAAV,GAAcC,IAAI,CAACc,KAAL,CAAWf,CAAC,GAAGc,CAAJ,GAAQD,GAAnB,CAArB;AACD;;AAED,SAAShO,iBAAT,CAA2BmO,IAA3B,EAAiC;AAC/B,MAAIC,IAAI,GAAGD,IAAI,CAACC,IAAhB;AAAA,MACIC,QAAQ,GAAGF,IAAI,CAACE,QADpB;AAAA,MAEIC,MAAM,GAAGH,IAAI,CAACG,MAFlB;;AAIA,MAAIC,KAAK,GAAG/K,cAAc,CAAC4K,IAAD,EAAO,CAAP,CAA1B;AAAA,MACII,EAAE,GAAGD,KAAK,CAAC,CAAD,CADd;AAAA,MAEIE,EAAE,GAAGF,KAAK,CAAC,CAAD,CAFd;AAAA,MAGIG,EAAE,GAAGH,KAAK,CAAC,CAAD,CAHd;AAAA,MAIII,EAAE,GAAGJ,KAAK,CAAC,CAAD,CAJd;;AAMA,MAAIK,iBAAiB,GAAGN,MAAM,GAAG,GAAT,KAAiB,CAAzC;AACA,MAAIO,KAAK,GAAG,CAACH,EAAE,GAAGF,EAAN,IAAY,EAAZ,GAAiBH,QAA7B;AACA,MAAIS,MAAM,GAAG,CAACH,EAAE,GAAGF,EAAN,IAAY,EAAZ,GAAiBJ,QAA9B;AACA,SAAO;AACLQ,IAAAA,KAAK,EAAED,iBAAiB,GAAGE,MAAH,GAAYD,KAD/B;AAELC,IAAAA,MAAM,EAAEF,iBAAiB,GAAGC,KAAH,GAAWC;AAF/B,GAAP;AAID;;AAED,SAASjP,iCAAT,CAA2CkP,KAA3C,EAAkDC,KAAlD,EAAyDhE,GAAzD,EAA8D;AAC5D,MAAI+D,KAAK,GAAG,CAAZ,EAAe;AACb,WAAOA,KAAP;AACD;;AAED,MAAIE,GAAG,GAAGD,KAAK,CAACD,KAAD,CAAL,CAAaf,GAAvB;AACA,MAAIkB,OAAO,GAAGD,GAAG,CAAC/E,SAAJ,GAAgB+E,GAAG,CAAC9E,SAAlC;;AAEA,MAAI+E,OAAO,IAAIlE,GAAf,EAAoB;AAClBiE,IAAAA,GAAG,GAAGD,KAAK,CAACD,KAAK,GAAG,CAAT,CAAL,CAAiBf,GAAvB;AACAkB,IAAAA,OAAO,GAAGD,GAAG,CAAC/E,SAAJ,GAAgB+E,GAAG,CAAC9E,SAA9B;AACD;;AAED,OAAK,IAAI1H,CAAC,GAAGsM,KAAK,GAAG,CAArB,EAAwBtM,CAAC,IAAI,CAA7B,EAAgC,EAAEA,CAAlC,EAAqC;AACnCwM,IAAAA,GAAG,GAAGD,KAAK,CAACvM,CAAD,CAAL,CAASuL,GAAf;;AAEA,QAAIiB,GAAG,CAAC/E,SAAJ,GAAgB+E,GAAG,CAAC9E,SAApB,GAAgC8E,GAAG,CAAC1E,YAApC,IAAoD2E,OAAxD,EAAiE;AAC/D;AACD;;AAEDH,IAAAA,KAAK,GAAGtM,CAAR;AACD;;AAED,SAAOsM,KAAP;AACD;;AAED,SAASjP,kBAAT,CAA4BqP,QAA5B,EAAsCH,KAAtC,EAA6C;AAC3C,MAAII,gBAAgB,GAAG3J,SAAS,CAAC/C,MAAV,GAAmB,CAAnB,IAAwB+C,SAAS,CAAC,CAAD,CAAT,KAAiBxB,SAAzC,GAAqDwB,SAAS,CAAC,CAAD,CAA9D,GAAoE,KAA3F;AACA,MAAI4J,UAAU,GAAG5J,SAAS,CAAC/C,MAAV,GAAmB,CAAnB,IAAwB+C,SAAS,CAAC,CAAD,CAAT,KAAiBxB,SAAzC,GAAqDwB,SAAS,CAAC,CAAD,CAA9D,GAAoE,KAArF;AACA,MAAIuF,GAAG,GAAGmE,QAAQ,CAAChE,SAAnB;AAAA,MACImE,MAAM,GAAGtE,GAAG,GAAGmE,QAAQ,CAAC5E,YAD5B;AAEA,MAAIU,IAAI,GAAGkE,QAAQ,CAACjE,UAApB;AAAA,MACIY,KAAK,GAAGb,IAAI,GAAGkE,QAAQ,CAAC1E,WAD5B;;AAGA,WAAS8E,2BAAT,CAAqCnB,IAArC,EAA2C;AACzC,QAAIzF,OAAO,GAAGyF,IAAI,CAACJ,GAAnB;AACA,QAAIwB,aAAa,GAAG7G,OAAO,CAACuB,SAAR,GAAoBvB,OAAO,CAACwB,SAA5B,GAAwCxB,OAAO,CAAC4B,YAApE;AACA,WAAOiF,aAAa,GAAGxE,GAAvB;AACD;;AAED,WAASyE,2BAAT,CAAqCrB,IAArC,EAA2C;AACzC,QAAIzF,OAAO,GAAGyF,IAAI,CAACJ,GAAnB;AACA,QAAI0B,YAAY,GAAG/G,OAAO,CAAC0B,UAAR,GAAqB1B,OAAO,CAAC2B,UAA7B,GAA0C3B,OAAO,CAAC8B,WAArE;AACA,WAAOiF,YAAY,GAAGzE,IAAtB;AACD;;AAED,MAAI0E,OAAO,GAAG,EAAd;AAAA,MACIC,QAAQ,GAAGZ,KAAK,CAACtM,MADrB;AAEA,MAAImN,sBAAsB,GAAGD,QAAQ,KAAK,CAAb,GAAiB,CAAjB,GAAqBvP,qBAAqB,CAAC2O,KAAD,EAAQK,UAAU,GAAGI,2BAAH,GAAiCF,2BAAnD,CAAvE;;AAEA,MAAIM,sBAAsB,GAAG,CAAzB,IAA8BA,sBAAsB,GAAGD,QAAvD,IAAmE,CAACP,UAAxE,EAAoF;AAClFQ,IAAAA,sBAAsB,GAAGhQ,iCAAiC,CAACgQ,sBAAD,EAAyBb,KAAzB,EAAgChE,GAAhC,CAA1D;AACD;;AAED,MAAI8E,QAAQ,GAAGT,UAAU,GAAGvD,KAAH,GAAW,CAAC,CAArC;;AAEA,OAAK,IAAIrJ,CAAC,GAAGoN,sBAAb,EAAqCpN,CAAC,GAAGmN,QAAzC,EAAmDnN,CAAC,EAApD,EAAwD;AACtD,QAAI2L,IAAI,GAAGY,KAAK,CAACvM,CAAD,CAAhB;AAAA,QACIkG,OAAO,GAAGyF,IAAI,CAACJ,GADnB;AAEA,QAAI+B,YAAY,GAAGpH,OAAO,CAAC0B,UAAR,GAAqB1B,OAAO,CAAC2B,UAAhD;AACA,QAAI0F,aAAa,GAAGrH,OAAO,CAACuB,SAAR,GAAoBvB,OAAO,CAACwB,SAAhD;AACA,QAAI8F,SAAS,GAAGtH,OAAO,CAAC8B,WAAxB;AAAA,QACIyF,UAAU,GAAGvH,OAAO,CAAC4B,YADzB;AAEA,QAAI4F,SAAS,GAAGJ,YAAY,GAAGE,SAA/B;AACA,QAAIG,UAAU,GAAGJ,aAAa,GAAGE,UAAjC;;AAEA,QAAIJ,QAAQ,KAAK,CAAC,CAAlB,EAAqB;AACnB,UAAIM,UAAU,IAAId,MAAlB,EAA0B;AACxBQ,QAAAA,QAAQ,GAAGM,UAAX;AACD;AACF,KAJD,MAIO,IAAI,CAACf,UAAU,GAAGU,YAAH,GAAkBC,aAA7B,IAA8CF,QAAlD,EAA4D;AACjE;AACD;;AAED,QAAIM,UAAU,IAAIpF,GAAd,IAAqBgF,aAAa,IAAIV,MAAtC,IAAgDa,SAAS,IAAIlF,IAA7D,IAAqE8E,YAAY,IAAIjE,KAAzF,EAAgG;AAC9F;AACD;;AAED,QAAIuE,YAAY,GAAGjD,IAAI,CAACkD,GAAL,CAAS,CAAT,EAAYtF,GAAG,GAAGgF,aAAlB,IAAmC5C,IAAI,CAACkD,GAAL,CAAS,CAAT,EAAYF,UAAU,GAAGd,MAAzB,CAAtD;AACA,QAAIiB,WAAW,GAAGnD,IAAI,CAACkD,GAAL,CAAS,CAAT,EAAYrF,IAAI,GAAG8E,YAAnB,IAAmC3C,IAAI,CAACkD,GAAL,CAAS,CAAT,EAAYH,SAAS,GAAGrE,KAAxB,CAArD;AACA,QAAI0E,OAAO,GAAG,CAACN,UAAU,GAAGG,YAAd,KAA+BJ,SAAS,GAAGM,WAA3C,IAA0D,GAA1D,GAAgEL,UAAhE,GAA6ED,SAA7E,GAAyF,CAAvG;AACAN,IAAAA,OAAO,CAACrL,IAAR,CAAa;AACXmM,MAAAA,EAAE,EAAErC,IAAI,CAACqC,EADE;AAEXtD,MAAAA,CAAC,EAAE4C,YAFQ;AAGXW,MAAAA,CAAC,EAAEV,aAHQ;AAIX5B,MAAAA,IAAI,EAAEA,IAJK;AAKXoC,MAAAA,OAAO,EAAEA;AALE,KAAb;AAOD;;AAED,MAAIG,KAAK,GAAGhB,OAAO,CAAC,CAAD,CAAnB;AAAA,MACIiB,IAAI,GAAGjB,OAAO,CAACA,OAAO,CAACjN,MAAR,GAAiB,CAAlB,CADlB;;AAGA,MAAI0M,gBAAJ,EAAsB;AACpBO,IAAAA,OAAO,CAACkB,IAAR,CAAa,UAAUpD,CAAV,EAAaC,CAAb,EAAgB;AAC3B,UAAIoD,EAAE,GAAGrD,CAAC,CAAC+C,OAAF,GAAY9C,CAAC,CAAC8C,OAAvB;;AAEA,UAAIpD,IAAI,CAAC2D,GAAL,CAASD,EAAT,IAAe,KAAnB,EAA0B;AACxB,eAAO,CAACA,EAAR;AACD;;AAED,aAAOrD,CAAC,CAACgD,EAAF,GAAO/C,CAAC,CAAC+C,EAAhB;AACD,KARD;AASD;;AAED,SAAO;AACLE,IAAAA,KAAK,EAAEA,KADF;AAELC,IAAAA,IAAI,EAAEA,IAFD;AAGL5B,IAAAA,KAAK,EAAEW;AAHF,GAAP;AAKD;;AAED,SAAShQ,oBAAT,CAA8B4L,GAA9B,EAAmC;AACjCA,EAAAA,GAAG,CAACyF,cAAJ;AACD;;AAED,SAASC,YAAT,CAAsBC,GAAtB,EAA2B;AACzB,MAAIzO,CAAC,GAAG,CAAR;AAAA,MACIgK,EAAE,GAAGyE,GAAG,CAACxO,MADb;;AAGA,SAAOD,CAAC,GAAGgK,EAAJ,IAAUyE,GAAG,CAACzO,CAAD,CAAH,CAAO0O,IAAP,OAAkB,EAAnC,EAAuC;AACrC1O,IAAAA,CAAC;AACF;;AAED,SAAOyO,GAAG,CAACE,SAAJ,CAAc3O,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBkK,WAAxB,OAA0C,OAAjD;AACD;;AAED,SAASjN,qBAAT,CAA+BwR,GAA/B,EAAoC;AAClC,MAAIG,eAAe,GAAG5L,SAAS,CAAC/C,MAAV,GAAmB,CAAnB,IAAwB+C,SAAS,CAAC,CAAD,CAAT,KAAiBxB,SAAzC,GAAqDwB,SAAS,CAAC,CAAD,CAA9D,GAAoE,cAA1F;;AAEA,MAAI,OAAOyL,GAAP,KAAe,QAAnB,EAA6B;AAC3B,WAAOG,eAAP;AACD;;AAED,MAAIJ,YAAY,CAACC,GAAD,CAAhB,EAAuB;AACrBlH,IAAAA,OAAO,CAACsH,IAAR,CAAa,4BAA4B,+CAAzC;AACA,WAAOD,eAAP;AACD;;AAED,MAAIE,KAAK,GAAG,sDAAZ;AACA,MAAIC,UAAU,GAAG,gCAAjB;AACA,MAAIC,QAAQ,GAAGF,KAAK,CAACG,IAAN,CAAWR,GAAX,CAAf;AACA,MAAIS,iBAAiB,GAAGH,UAAU,CAACE,IAAX,CAAgBD,QAAQ,CAAC,CAAD,CAAxB,KAAgCD,UAAU,CAACE,IAAX,CAAgBD,QAAQ,CAAC,CAAD,CAAxB,CAAhC,IAAgED,UAAU,CAACE,IAAX,CAAgBD,QAAQ,CAAC,CAAD,CAAxB,CAAxF;;AAEA,MAAIE,iBAAJ,EAAuB;AACrBA,IAAAA,iBAAiB,GAAGA,iBAAiB,CAAC,CAAD,CAArC;;AAEA,QAAIA,iBAAiB,CAACC,QAAlB,CAA2B,GAA3B,CAAJ,EAAqC;AACnC,UAAI;AACFD,QAAAA,iBAAiB,GAAGH,UAAU,CAACE,IAAX,CAAgB9E,kBAAkB,CAAC+E,iBAAD,CAAlC,EAAuD,CAAvD,CAApB;AACD,OAFD,CAEE,OAAOE,EAAP,EAAW,CAAE;AAChB;AACF;;AAED,SAAOF,iBAAiB,IAAIN,eAA5B;AACD;;AAED,SAAS/Q,wBAAT,CAAkCiL,GAAlC,EAAuC;AACrC,MAAIuG,KAAK,GAAG1E,IAAI,CAAC2E,IAAL,CAAUxG,GAAG,CAACyG,MAAJ,GAAazG,GAAG,CAACyG,MAAjB,GAA0BzG,GAAG,CAAC0G,MAAJ,GAAa1G,GAAG,CAAC0G,MAArD,CAAZ;AACA,MAAIC,KAAK,GAAG9E,IAAI,CAAC+E,KAAL,CAAW5G,GAAG,CAAC0G,MAAf,EAAuB1G,GAAG,CAACyG,MAA3B,CAAZ;;AAEA,MAAI,CAAC,IAAD,GAAQ5E,IAAI,CAACgF,EAAb,GAAkBF,KAAlB,IAA2BA,KAAK,GAAG,OAAO9E,IAAI,CAACgF,EAAnD,EAAuD;AACrDN,IAAAA,KAAK,GAAG,CAACA,KAAT;AACD;;AAED,MAAIO,0BAA0B,GAAG,CAAjC;AACA,MAAIC,yBAAyB,GAAG,CAAhC;AACA,MAAIC,qBAAqB,GAAG,EAA5B;AACA,MAAIC,oBAAoB,GAAG,EAA3B;;AAEA,MAAIjH,GAAG,CAACkH,SAAJ,KAAkBJ,0BAAtB,EAAkD;AAChDP,IAAAA,KAAK,IAAIS,qBAAqB,GAAGC,oBAAjC;AACD,GAFD,MAEO,IAAIjH,GAAG,CAACkH,SAAJ,KAAkBH,yBAAtB,EAAiD;AACtDR,IAAAA,KAAK,IAAIU,oBAAT;AACD;;AAED,SAAOV,KAAP;AACD;;AAED,SAASzS,eAAT,CAAyB6S,KAAzB,EAAgC;AAC9B,SAAOQ,MAAM,CAACC,SAAP,CAAiBT,KAAjB,KAA2BA,KAAK,GAAG,EAAR,KAAe,CAAjD;AACD;;AAED,SAAS5S,iBAAT,CAA2BsT,IAA3B,EAAiC;AAC/B,SAAOF,MAAM,CAACC,SAAP,CAAiBC,IAAjB,KAA0B3T,MAAM,CAAC4T,MAAP,CAAc9R,UAAd,EAA0B6Q,QAA1B,CAAmCgB,IAAnC,CAA1B,IAAsEA,IAAI,KAAK7R,UAAU,CAAC4E,OAAjG;AACD;;AAED,SAASpG,iBAAT,CAA2BqT,IAA3B,EAAiC;AAC/B,SAAOF,MAAM,CAACC,SAAP,CAAiBC,IAAjB,KAA0B3T,MAAM,CAAC4T,MAAP,CAAc/R,UAAd,EAA0B8Q,QAA1B,CAAmCgB,IAAnC,CAA1B,IAAsEA,IAAI,KAAK9R,UAAU,CAAC6E,OAAjG;AACD;;AAED,SAASnG,qBAAT,CAA+BsT,IAA/B,EAAqC;AACnC,SAAOA,IAAI,CAACjE,KAAL,IAAciE,IAAI,CAAChE,MAA1B;AACD;;AAED,IAAIrO,UAAU,GAAG;AACfsS,EAAAA,KAAK,EAAE,OADQ;AAEfC,EAAAA,OAAO,EAAE;AAFM,CAAjB;AAIA7T,OAAO,CAACsB,UAAR,GAAqBA,UAArB;;AAEA,SAASF,oBAAT,CAA8B0S,KAA9B,EAAqC;AACnC,MAAI1Q,MAAM,GAAG0Q,KAAK,CAAC1Q,MAAnB;AAAA,MACIuE,IAAI,GAAGmM,KAAK,CAACnM,IADjB;AAAA,MAEIoM,WAAW,GAAGD,KAAK,CAACE,KAFxB;AAAA,MAGIA,KAAK,GAAGD,WAAW,KAAK,KAAK,CAArB,GAAyB,CAAzB,GAA6BA,WAHzC;AAIA,SAAO,IAAI/N,OAAJ,CAAY,UAAUP,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C,QAAIzB,OAAO,CAACb,MAAD,CAAP,KAAoB,QAApB,IAAgC,EAAEuE,IAAI,IAAI,OAAOA,IAAP,KAAgB,QAA1B,CAAhC,IAAuE,EAAE4L,MAAM,CAACC,SAAP,CAAiBQ,KAAjB,KAA2BA,KAAK,IAAI,CAAtC,CAA3E,EAAqH;AACnH,YAAM,IAAIC,KAAJ,CAAU,4CAAV,CAAN;AACD;;AAED,aAASC,OAAT,CAAiBC,IAAjB,EAAuB;AACrB,UAAI/Q,MAAM,YAAY3B,QAAtB,EAAgC;AAC9B2B,QAAAA,MAAM,CAACgR,GAAP,CAAWzM,IAAX,EAAiB0M,YAAjB;AACD,OAFD,MAEO;AACLjR,QAAAA,MAAM,CAACkR,mBAAP,CAA2B3M,IAA3B,EAAiC0M,YAAjC;AACD;;AAED,UAAIE,OAAJ,EAAa;AACXC,QAAAA,YAAY,CAACD,OAAD,CAAZ;AACD;;AAED9O,MAAAA,OAAO,CAAC0O,IAAD,CAAP;AACD;;AAED,QAAIE,YAAY,GAAGH,OAAO,CAACO,IAAR,CAAa,IAAb,EAAmBnT,UAAU,CAACsS,KAA9B,CAAnB;;AAEA,QAAIxQ,MAAM,YAAY3B,QAAtB,EAAgC;AAC9B2B,MAAAA,MAAM,CAACsR,EAAP,CAAU/M,IAAV,EAAgB0M,YAAhB;AACD,KAFD,MAEO;AACLjR,MAAAA,MAAM,CAAC4J,gBAAP,CAAwBrF,IAAxB,EAA8B0M,YAA9B;AACD;;AAED,QAAIM,cAAc,GAAGT,OAAO,CAACO,IAAR,CAAa,IAAb,EAAmBnT,UAAU,CAACuS,OAA9B,CAArB;AACA,QAAIU,OAAO,GAAGK,UAAU,CAACD,cAAD,EAAiBX,KAAjB,CAAxB;AACD,GA7BM,CAAP;AA8BD;;AAED,IAAIzS,gBAAgB,GAAG,IAAIyE,OAAJ,CAAY,UAAUP,OAAV,EAAmB;AACpD,MAAI,OAAOqE,MAAP,KAAkB,WAAtB,EAAmC;AACjC8K,IAAAA,UAAU,CAACnP,OAAD,EAAU,EAAV,CAAV;AACA;AACD;;AAEDqE,EAAAA,MAAM,CAACwC,qBAAP,CAA6B7G,OAA7B;AACD,CAPsB,CAAvB;AAQAzF,OAAO,CAACuB,gBAAR,GAA2BA,gBAA3B;;AAEA,IAAIE,QAAQ,GACZ,aACA,YAAY;AACV,WAASA,QAAT,GAAoB;AAClB,QAAIoT,KAAK,GAAGvO,SAAS,CAAC/C,MAAV,GAAmB,CAAnB,IAAwB+C,SAAS,CAAC,CAAD,CAAT,KAAiBxB,SAAzC,GAAqDwB,SAAS,CAAC,CAAD,CAA9D,GAAoE,EAAhF;AAAA,QACIwO,mBAAmB,GAAGD,KAAK,CAACE,aADhC;AAAA,QAEIA,aAAa,GAAGD,mBAAmB,KAAK,KAAK,CAA7B,GAAiC,KAAjC,GAAyCA,mBAF7D;;AAIA/R,IAAAA,eAAe,CAAC,IAAD,EAAOtB,QAAP,CAAf;;AAEA,SAAKuT,UAAL,GAAkBlV,MAAM,CAACuN,MAAP,CAAc,IAAd,CAAlB;AACA,SAAK4H,cAAL,GAAsBF,aAAa,KAAK,IAAxC;AACD;;AAEDlR,EAAAA,YAAY,CAACpC,QAAD,EAAW,CAAC;AACtBmC,IAAAA,GAAG,EAAE,IADiB;AAEtB3D,IAAAA,KAAK,EAAE,SAASyU,EAAT,CAAYQ,SAAZ,EAAuBC,QAAvB,EAAiC;AACtC,UAAIC,cAAc,GAAG,KAAKJ,UAAL,CAAgBE,SAAhB,CAArB;;AAEA,UAAI,CAACE,cAAL,EAAqB;AACnBA,QAAAA,cAAc,GAAG,EAAjB;AACA,aAAKJ,UAAL,CAAgBE,SAAhB,IAA6BE,cAA7B;AACD;;AAEDA,MAAAA,cAAc,CAACjQ,IAAf,CAAoBgQ,QAApB;AACD;AAXqB,GAAD,EAYpB;AACDvR,IAAAA,GAAG,EAAE,KADJ;AAED3D,IAAAA,KAAK,EAAE,SAASmU,GAAT,CAAac,SAAb,EAAwBC,QAAxB,EAAkC;AACvC,UAAIC,cAAc,GAAG,KAAKJ,UAAL,CAAgBE,SAAhB,CAArB;AACA,UAAI5R,CAAJ;;AAEA,UAAI,CAAC8R,cAAD,IAAmB,CAAC9R,CAAC,GAAG8R,cAAc,CAACC,OAAf,CAAuBF,QAAvB,CAAL,IAAyC,CAAhE,EAAmE;AACjE;AACD;;AAEDC,MAAAA,cAAc,CAACE,MAAf,CAAsBhS,CAAtB,EAAyB,CAAzB;AACD;AAXA,GAZoB,EAwBpB;AACDM,IAAAA,GAAG,EAAE,UADJ;AAED3D,IAAAA,KAAK,EAAE,SAASsV,QAAT,CAAkBL,SAAlB,EAA6B;AAClC,UAAIE,cAAc,GAAG,KAAKJ,UAAL,CAAgBE,SAAhB,CAArB;;AAEA,UAAI,CAACE,cAAD,IAAmBA,cAAc,CAAC7R,MAAf,KAA0B,CAAjD,EAAoD;AAClD,YAAI,KAAK0R,cAAT,EAAyB;AACvB,cAAIO,MAAM,GAAGnQ,KAAK,CAACrB,SAAN,CAAgByR,KAAhB,CAAsBC,IAAtB,CAA2BpP,SAA3B,EAAsC,CAAtC,CAAb;;AAEA,eAAKqP,iBAAL,CAAuBT,SAAvB,EAAkCM,MAAlC;AACD;;AAED;AACD;;AAED,UAAInP,IAAI,GAAGhB,KAAK,CAACrB,SAAN,CAAgByR,KAAhB,CAAsBC,IAAtB,CAA2BpP,SAA3B,EAAsC,CAAtC,CAAX;AACA8O,MAAAA,cAAc,CAACK,KAAf,CAAqB,CAArB,EAAwBG,OAAxB,CAAgC,UAAUT,QAAV,EAAoB;AAClDA,QAAAA,QAAQ,CAAC5O,KAAT,CAAe,IAAf,EAAqBF,IAArB;AACD,OAFD;;AAIA,UAAI,KAAK4O,cAAT,EAAyB;AACvB,aAAKU,iBAAL,CAAuBT,SAAvB,EAAkC7O,IAAlC;AACD;AACF;AAvBA,GAxBoB,EAgDpB;AACDzC,IAAAA,GAAG,EAAE,mBADJ;AAED3D,IAAAA,KAAK,EAAE,SAAS0V,iBAAT,CAA2BT,SAA3B,EAAsC;AAC3C,UAAI7O,IAAI,GAAGC,SAAS,CAAC/C,MAAV,GAAmB,CAAnB,IAAwB+C,SAAS,CAAC,CAAD,CAAT,KAAiBxB,SAAzC,GAAqDwB,SAAS,CAAC,CAAD,CAA9D,GAAoE,IAA/E;AACA,UAAIuP,OAAO,GAAG/V,MAAM,CAACuN,MAAP,CAAc,IAAd,CAAd;;AAEA,UAAIhH,IAAI,IAAIA,IAAI,CAAC9C,MAAL,GAAc,CAA1B,EAA6B;AAC3B,YAAIX,GAAG,GAAGyD,IAAI,CAAC,CAAD,CAAd;;AAEA,aAAK,IAAIzC,GAAT,IAAgBhB,GAAhB,EAAqB;AACnB,cAAI3C,KAAK,GAAG2C,GAAG,CAACgB,GAAD,CAAf;;AAEA,cAAIA,GAAG,KAAK,QAAZ,EAAsB;AACpB,gBAAI3D,KAAK,KAAK6J,MAAV,IAAoB7J,KAAK,KAAK6V,QAAlC,EAA4C;AAC1C;AACD;;AAED;AACD;;AAEDD,UAAAA,OAAO,CAACjS,GAAD,CAAP,GAAe3D,KAAf;AACD;AACF;;AAED,UAAI8V,KAAK,GAAGD,QAAQ,CAACE,WAAT,CAAqB,aAArB,CAAZ;AACAD,MAAAA,KAAK,CAACE,eAAN,CAAsBf,SAAtB,EAAiC,IAAjC,EAAuC,IAAvC,EAA6CW,OAA7C;AACAC,MAAAA,QAAQ,CAACI,aAAT,CAAuBH,KAAvB;AACD;AA3BA,GAhDoB,CAAX,CAAZ;;AA8EA,SAAOtU,QAAP;AACD,CA3FD,EAFA;;AA+FAzB,OAAO,CAACyB,QAAR,GAAmBA,QAAnB;AACA,IAAI0U,cAAc,GAAG,IAArB;;AAEA,SAAS7V,iBAAT,GAA6B;AAC3B,MAAIyU,aAAa,GAAGzO,SAAS,CAAC/C,MAAV,GAAmB,CAAnB,IAAwB+C,SAAS,CAAC,CAAD,CAAT,KAAiBxB,SAAzC,GAAqDwB,SAAS,CAAC,CAAD,CAA9D,GAAoE,KAAxF;;AAEA,MAAI,CAAC6P,cAAL,EAAqB;AACnBA,IAAAA,cAAc,GAAG,IAAI1U,QAAJ,CAAa;AAC5BsT,MAAAA,aAAa,EAAEA;AADa,KAAb,CAAjB;AAGD;;AAED,SAAOoB,cAAP;AACD;;AAED,SAASC,KAAT,CAAeC,CAAf,EAAkBC,GAAlB,EAAuBnF,GAAvB,EAA4B;AAC1B,SAAOlD,IAAI,CAACqI,GAAL,CAASrI,IAAI,CAACkD,GAAL,CAASkF,CAAT,EAAYC,GAAZ,CAAT,EAA2BnF,GAA3B,CAAP;AACD;;AAED,IAAI3P,WAAW,GACf,aACA,YAAY;AACV,WAASA,WAAT,CAAqB8P,EAArB,EAAyB;AACvB,QAAIiF,KAAK,GAAGjQ,SAAS,CAAC/C,MAAV,GAAmB,CAAnB,IAAwB+C,SAAS,CAAC,CAAD,CAAT,KAAiBxB,SAAzC,GAAqDwB,SAAS,CAAC,CAAD,CAA9D,GAAoE,EAAhF;AAAA,QACIqJ,MAAM,GAAG4G,KAAK,CAAC5G,MADnB;AAAA,QAEID,KAAK,GAAG6G,KAAK,CAAC7G,KAFlB;AAAA,QAGI8G,KAAK,GAAGD,KAAK,CAACC,KAHlB;;AAKAzT,IAAAA,eAAe,CAAC,IAAD,EAAOvB,WAAP,CAAf;;AAEA,SAAKgP,OAAL,GAAe,IAAf;AACA,SAAK3B,GAAL,GAAWiH,QAAQ,CAACW,aAAT,CAAuBnF,EAAE,GAAG,YAA5B,CAAX;AACA,SAAKoF,GAAL,GAAW,KAAK7H,GAAL,CAAS8H,UAApB;AACA,SAAKhH,MAAL,GAAcA,MAAM,IAAI,GAAxB;AACA,SAAKD,KAAL,GAAaA,KAAK,IAAI,GAAtB;AACA,SAAK8G,KAAL,GAAaA,KAAK,IAAI,GAAtB;AACA,SAAK3H,GAAL,CAAS+H,KAAT,CAAejH,MAAf,GAAwB,KAAKA,MAAL,GAAc,KAAK6G,KAA3C;AACA,SAAKnF,OAAL,GAAe,CAAf;AACD;;AAEDxN,EAAAA,YAAY,CAACrC,WAAD,EAAc,CAAC;AACzBoC,IAAAA,GAAG,EAAE,YADoB;AAEzB3D,IAAAA,KAAK,EAAE,SAAS4W,UAAT,GAAsB;AAC3B,UAAI,KAAKC,cAAT,EAAyB;AACvB,aAAKjI,GAAL,CAASkI,SAAT,CAAmBC,GAAnB,CAAuB,eAAvB;AACA,aAAKnI,GAAL,CAAS+H,KAAT,CAAelH,KAAf,GAAuB,KAAKA,KAAL,GAAa,KAAK8G,KAAzC;AACA;AACD;;AAED,WAAK3H,GAAL,CAASkI,SAAT,CAAmBE,MAAnB,CAA0B,eAA1B;AACA,UAAIC,YAAY,GAAG,KAAKxH,KAAL,GAAa,KAAKyH,QAAlB,GAA6B,GAAhD;AACA,WAAKtI,GAAL,CAAS+H,KAAT,CAAelH,KAAf,GAAuBwH,YAAY,GAAG,KAAKV,KAA3C;AACD;AAZwB,GAAD,EAavB;AACD5S,IAAAA,GAAG,EAAE,UADJ;AAED3D,IAAAA,KAAK,EAAE,SAASmX,QAAT,CAAkBC,MAAlB,EAA0B;AAC/B,UAAI,CAACA,MAAL,EAAa;AACX;AACD;;AAED,UAAIC,SAAS,GAAGD,MAAM,CAACV,UAAvB;AACA,UAAIY,cAAc,GAAGD,SAAS,CAACE,WAAV,GAAwBH,MAAM,CAACG,WAApD;;AAEA,UAAID,cAAc,GAAG,CAArB,EAAwB;AACtB,aAAKb,GAAL,CAASe,YAAT,CAAsB,OAAtB,EAA+B,wBAAwBF,cAAxB,GAAyC,MAAxE;AACD;AACF;AAbA,GAbuB,EA2BvB;AACD3T,IAAAA,GAAG,EAAE,MADJ;AAED3D,IAAAA,KAAK,EAAE,SAASyX,IAAT,GAAgB;AACrB,UAAI,CAAC,KAAKlH,OAAV,EAAmB;AACjB;AACD;;AAED,WAAKA,OAAL,GAAe,KAAf;AACA,WAAKkG,GAAL,CAASK,SAAT,CAAmBC,GAAnB,CAAuB,QAAvB;AACAlB,MAAAA,QAAQ,CAAC6B,IAAT,CAAcZ,SAAd,CAAwBE,MAAxB,CAA+B,mBAA/B;AACD;AAVA,GA3BuB,EAsCvB;AACDrT,IAAAA,GAAG,EAAE,MADJ;AAED3D,IAAAA,KAAK,EAAE,SAAS2X,IAAT,GAAgB;AACrB,UAAI,KAAKpH,OAAT,EAAkB;AAChB;AACD;;AAED,WAAKA,OAAL,GAAe,IAAf;AACAsF,MAAAA,QAAQ,CAAC6B,IAAT,CAAcZ,SAAd,CAAwBC,GAAxB,CAA4B,mBAA5B;AACA,WAAKN,GAAL,CAASK,SAAT,CAAmBE,MAAnB,CAA0B,QAA1B;AACD;AAVA,GAtCuB,EAiDvB;AACDrT,IAAAA,GAAG,EAAE,SADJ;AAED+E,IAAAA,GAAG,EAAE,SAASA,GAAT,GAAe;AAClB,aAAO,KAAKwO,QAAZ;AACD,KAJA;AAKDU,IAAAA,GAAG,EAAE,SAASA,GAAT,CAAaC,GAAb,EAAkB;AACrB,WAAKhB,cAAL,GAAsBiB,KAAK,CAACD,GAAD,CAA3B;AACA,WAAKX,QAAL,GAAgBf,KAAK,CAAC0B,GAAD,EAAM,CAAN,EAAS,GAAT,CAArB;;AAEA,WAAKjB,UAAL;AACD;AAVA,GAjDuB,CAAd,CAAZ;;AA8DA,SAAOrV,WAAP;AACD,CAlFD,EAFA;;AAsFAxB,OAAO,CAACwB,WAAR,GAAsBA,WAAtB;;AAEA,SAASH,gBAAT,CAA0BiD,GAA1B,EAA+BqJ,SAA/B,EAA0C;AACxC,MAAIqK,KAAK,GAAG,EAAZ;AAAA,MACIC,GAAG,GAAG3T,GAAG,CAACf,MADd;AAEA,MAAI2U,KAAK,GAAG,CAAZ;;AAEA,OAAK,IAAIC,IAAI,GAAG,CAAhB,EAAmBA,IAAI,GAAGF,GAA1B,EAA+B,EAAEE,IAAjC,EAAuC;AACrC,QAAIxK,SAAS,CAACrJ,GAAG,CAAC6T,IAAD,CAAJ,CAAb,EAA0B;AACxBH,MAAAA,KAAK,CAAC7S,IAAN,CAAWb,GAAG,CAAC6T,IAAD,CAAd;AACD,KAFD,MAEO;AACL7T,MAAAA,GAAG,CAAC4T,KAAD,CAAH,GAAa5T,GAAG,CAAC6T,IAAD,CAAhB;AACA,QAAED,KAAF;AACD;AACF;;AAED,OAAK,IAAIE,KAAK,GAAG,CAAjB,EAAoBF,KAAK,GAAGD,GAA5B,EAAiC,EAAEG,KAAF,EAAS,EAAEF,KAA5C,EAAmD;AACjD5T,IAAAA,GAAG,CAAC4T,KAAD,CAAH,GAAaF,KAAK,CAACI,KAAD,CAAlB;AACD;AACF","sourcesContent":["/**\n * @licstart The following is the entire license notice for the\n * Javascript code in this page\n *\n * Copyright 2018 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * Javascript code in this page\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isValidRotation = isValidRotation;\nexports.isValidScrollMode = isValidScrollMode;\nexports.isValidSpreadMode = isValidSpreadMode;\nexports.isPortraitOrientation = isPortraitOrientation;\nexports.getGlobalEventBus = getGlobalEventBus;\nexports.getPDFFileNameFromURL = getPDFFileNameFromURL;\nexports.noContextMenuHandler = noContextMenuHandler;\nexports.parseQueryString = parseQueryString;\nexports.backtrackBeforeAllVisibleElements = backtrackBeforeAllVisibleElements;\nexports.getVisibleElements = getVisibleElements;\nexports.roundToDivide = roundToDivide;\nexports.getPageSizeInches = getPageSizeInches;\nexports.approximateFraction = approximateFraction;\nexports.getOutputScale = getOutputScale;\nexports.scrollIntoView = scrollIntoView;\nexports.watchScroll = watchScroll;\nexports.binarySearchFirstItem = binarySearchFirstItem;\nexports.normalizeWheelEventDelta = normalizeWheelEventDelta;\nexports.waitOnEventOrTimeout = waitOnEventOrTimeout;\nexports.moveToEndOfArray = moveToEndOfArray;\nexports.WaitOnType = exports.animationStarted = exports.ProgressBar = exports.EventBus = exports.NullL10n = exports.SpreadMode = exports.ScrollMode = exports.TextLayerMode = exports.RendererType = exports.PresentationModeState = exports.VERTICAL_PADDING = exports.SCROLLBAR_PADDING = exports.MAX_AUTO_SCALE = exports.UNKNOWN_SCALE = exports.MAX_SCALE = exports.MIN_SCALE = exports.DEFAULT_SCALE = exports.DEFAULT_SCALE_VALUE = exports.CSS_UNITS = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar CSS_UNITS = 96.0 / 72.0;\nexports.CSS_UNITS = CSS_UNITS;\nvar DEFAULT_SCALE_VALUE = 'auto';\nexports.DEFAULT_SCALE_VALUE = DEFAULT_SCALE_VALUE;\nvar DEFAULT_SCALE = 1.0;\nexports.DEFAULT_SCALE = DEFAULT_SCALE;\nvar MIN_SCALE = 0.10;\nexports.MIN_SCALE = MIN_SCALE;\nvar MAX_SCALE = 10.0;\nexports.MAX_SCALE = MAX_SCALE;\nvar UNKNOWN_SCALE = 0;\nexports.UNKNOWN_SCALE = UNKNOWN_SCALE;\nvar MAX_AUTO_SCALE = 1.25;\nexports.MAX_AUTO_SCALE = MAX_AUTO_SCALE;\nvar SCROLLBAR_PADDING = 40;\nexports.SCROLLBAR_PADDING = SCROLLBAR_PADDING;\nvar VERTICAL_PADDING = 5;\nexports.VERTICAL_PADDING = VERTICAL_PADDING;\nvar PresentationModeState = {\n  UNKNOWN: 0,\n  NORMAL: 1,\n  CHANGING: 2,\n  FULLSCREEN: 3\n};\nexports.PresentationModeState = PresentationModeState;\nvar RendererType = {\n  CANVAS: 'canvas',\n  SVG: 'svg'\n};\nexports.RendererType = RendererType;\nvar TextLayerMode = {\n  DISABLE: 0,\n  ENABLE: 1,\n  ENABLE_ENHANCE: 2\n};\nexports.TextLayerMode = TextLayerMode;\nvar ScrollMode = {\n  UNKNOWN: -1,\n  VERTICAL: 0,\n  HORIZONTAL: 1,\n  WRAPPED: 2\n};\nexports.ScrollMode = ScrollMode;\nvar SpreadMode = {\n  UNKNOWN: -1,\n  NONE: 0,\n  ODD: 1,\n  EVEN: 2\n};\nexports.SpreadMode = SpreadMode;\n\nfunction formatL10nValue(text, args) {\n  if (!args) {\n    return text;\n  }\n\n  return text.replace(/\\{\\{\\s*(\\w+)\\s*\\}\\}/g, function (all, name) {\n    return name in args ? args[name] : '{{' + name + '}}';\n  });\n}\n\nvar NullL10n = {\n  getLanguage: function () {\n    var _getLanguage = _asyncToGenerator(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee() {\n      return _regenerator.default.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", 'en-us');\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    function getLanguage() {\n      return _getLanguage.apply(this, arguments);\n    }\n\n    return getLanguage;\n  }(),\n  getDirection: function () {\n    var _getDirection = _asyncToGenerator(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee2() {\n      return _regenerator.default.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              return _context2.abrupt(\"return\", 'ltr');\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n\n    function getDirection() {\n      return _getDirection.apply(this, arguments);\n    }\n\n    return getDirection;\n  }(),\n  get: function () {\n    var _get = _asyncToGenerator(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee3(property, args, fallback) {\n      return _regenerator.default.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              return _context3.abrupt(\"return\", formatL10nValue(fallback, args));\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, this);\n    }));\n\n    function get(_x, _x2, _x3) {\n      return _get.apply(this, arguments);\n    }\n\n    return get;\n  }(),\n  translate: function () {\n    var _translate = _asyncToGenerator(\n    /*#__PURE__*/\n    _regenerator.default.mark(function _callee4(element) {\n      return _regenerator.default.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, this);\n    }));\n\n    function translate(_x4) {\n      return _translate.apply(this, arguments);\n    }\n\n    return translate;\n  }()\n};\nexports.NullL10n = NullL10n;\n\nfunction getOutputScale(ctx) {\n  var devicePixelRatio = window.devicePixelRatio || 1;\n  var backingStoreRatio = ctx.webkitBackingStorePixelRatio || ctx.mozBackingStorePixelRatio || ctx.msBackingStorePixelRatio || ctx.oBackingStorePixelRatio || ctx.backingStorePixelRatio || 1;\n  var pixelRatio = devicePixelRatio / backingStoreRatio;\n  return {\n    sx: pixelRatio,\n    sy: pixelRatio,\n    scaled: pixelRatio !== 1\n  };\n}\n\nfunction scrollIntoView(element, spot) {\n  var skipOverflowHiddenElements = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var parent = element.offsetParent;\n\n  if (!parent) {\n    console.error('offsetParent is not set -- cannot scroll');\n    return;\n  }\n\n  var offsetY = element.offsetTop + element.clientTop;\n  var offsetX = element.offsetLeft + element.clientLeft;\n\n  while (parent.clientHeight === parent.scrollHeight && parent.clientWidth === parent.scrollWidth || skipOverflowHiddenElements && getComputedStyle(parent).overflow === 'hidden') {\n    if (parent.dataset._scaleY) {\n      offsetY /= parent.dataset._scaleY;\n      offsetX /= parent.dataset._scaleX;\n    }\n\n    offsetY += parent.offsetTop;\n    offsetX += parent.offsetLeft;\n    parent = parent.offsetParent;\n\n    if (!parent) {\n      return;\n    }\n  }\n\n  if (spot) {\n    if (spot.top !== undefined) {\n      offsetY += spot.top;\n    }\n\n    if (spot.left !== undefined) {\n      offsetX += spot.left;\n      parent.scrollLeft = offsetX;\n    }\n  }\n\n  parent.scrollTop = offsetY;\n}\n\nfunction watchScroll(viewAreaElement, callback) {\n  var debounceScroll = function debounceScroll(evt) {\n    if (rAF) {\n      return;\n    }\n\n    rAF = window.requestAnimationFrame(function viewAreaElementScrolled() {\n      rAF = null;\n      var currentX = viewAreaElement.scrollLeft;\n      var lastX = state.lastX;\n\n      if (currentX !== lastX) {\n        state.right = currentX > lastX;\n      }\n\n      state.lastX = currentX;\n      var currentY = viewAreaElement.scrollTop;\n      var lastY = state.lastY;\n\n      if (currentY !== lastY) {\n        state.down = currentY > lastY;\n      }\n\n      state.lastY = currentY;\n      callback(state);\n    });\n  };\n\n  var state = {\n    right: true,\n    down: true,\n    lastX: viewAreaElement.scrollLeft,\n    lastY: viewAreaElement.scrollTop,\n    _eventHandler: debounceScroll\n  };\n  var rAF = null;\n  viewAreaElement.addEventListener('scroll', debounceScroll, true);\n  return state;\n}\n\nfunction parseQueryString(query) {\n  var parts = query.split('&');\n  var params = Object.create(null);\n\n  for (var i = 0, ii = parts.length; i < ii; ++i) {\n    var param = parts[i].split('=');\n    var key = param[0].toLowerCase();\n    var value = param.length > 1 ? param[1] : null;\n    params[decodeURIComponent(key)] = decodeURIComponent(value);\n  }\n\n  return params;\n}\n\nfunction binarySearchFirstItem(items, condition) {\n  var minIndex = 0;\n  var maxIndex = items.length - 1;\n\n  if (items.length === 0 || !condition(items[maxIndex])) {\n    return items.length;\n  }\n\n  if (condition(items[minIndex])) {\n    return minIndex;\n  }\n\n  while (minIndex < maxIndex) {\n    var currentIndex = minIndex + maxIndex >> 1;\n    var currentItem = items[currentIndex];\n\n    if (condition(currentItem)) {\n      maxIndex = currentIndex;\n    } else {\n      minIndex = currentIndex + 1;\n    }\n  }\n\n  return minIndex;\n}\n\nfunction approximateFraction(x) {\n  if (Math.floor(x) === x) {\n    return [x, 1];\n  }\n\n  var xinv = 1 / x;\n  var limit = 8;\n\n  if (xinv > limit) {\n    return [1, limit];\n  } else if (Math.floor(xinv) === xinv) {\n    return [1, xinv];\n  }\n\n  var x_ = x > 1 ? xinv : x;\n  var a = 0,\n      b = 1,\n      c = 1,\n      d = 1;\n\n  while (true) {\n    var p = a + c,\n        q = b + d;\n\n    if (q > limit) {\n      break;\n    }\n\n    if (x_ <= p / q) {\n      c = p;\n      d = q;\n    } else {\n      a = p;\n      b = q;\n    }\n  }\n\n  var result;\n\n  if (x_ - a / b < c / d - x_) {\n    result = x_ === x ? [a, b] : [b, a];\n  } else {\n    result = x_ === x ? [c, d] : [d, c];\n  }\n\n  return result;\n}\n\nfunction roundToDivide(x, div) {\n  var r = x % div;\n  return r === 0 ? x : Math.round(x - r + div);\n}\n\nfunction getPageSizeInches(_ref) {\n  var view = _ref.view,\n      userUnit = _ref.userUnit,\n      rotate = _ref.rotate;\n\n  var _view = _slicedToArray(view, 4),\n      x1 = _view[0],\n      y1 = _view[1],\n      x2 = _view[2],\n      y2 = _view[3];\n\n  var changeOrientation = rotate % 180 !== 0;\n  var width = (x2 - x1) / 72 * userUnit;\n  var height = (y2 - y1) / 72 * userUnit;\n  return {\n    width: changeOrientation ? height : width,\n    height: changeOrientation ? width : height\n  };\n}\n\nfunction backtrackBeforeAllVisibleElements(index, views, top) {\n  if (index < 2) {\n    return index;\n  }\n\n  var elt = views[index].div;\n  var pageTop = elt.offsetTop + elt.clientTop;\n\n  if (pageTop >= top) {\n    elt = views[index - 1].div;\n    pageTop = elt.offsetTop + elt.clientTop;\n  }\n\n  for (var i = index - 2; i >= 0; --i) {\n    elt = views[i].div;\n\n    if (elt.offsetTop + elt.clientTop + elt.clientHeight <= pageTop) {\n      break;\n    }\n\n    index = i;\n  }\n\n  return index;\n}\n\nfunction getVisibleElements(scrollEl, views) {\n  var sortByVisibility = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var horizontal = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var top = scrollEl.scrollTop,\n      bottom = top + scrollEl.clientHeight;\n  var left = scrollEl.scrollLeft,\n      right = left + scrollEl.clientWidth;\n\n  function isElementBottomAfterViewTop(view) {\n    var element = view.div;\n    var elementBottom = element.offsetTop + element.clientTop + element.clientHeight;\n    return elementBottom > top;\n  }\n\n  function isElementRightAfterViewLeft(view) {\n    var element = view.div;\n    var elementRight = element.offsetLeft + element.clientLeft + element.clientWidth;\n    return elementRight > left;\n  }\n\n  var visible = [],\n      numViews = views.length;\n  var firstVisibleElementInd = numViews === 0 ? 0 : binarySearchFirstItem(views, horizontal ? isElementRightAfterViewLeft : isElementBottomAfterViewTop);\n\n  if (firstVisibleElementInd > 0 && firstVisibleElementInd < numViews && !horizontal) {\n    firstVisibleElementInd = backtrackBeforeAllVisibleElements(firstVisibleElementInd, views, top);\n  }\n\n  var lastEdge = horizontal ? right : -1;\n\n  for (var i = firstVisibleElementInd; i < numViews; i++) {\n    var view = views[i],\n        element = view.div;\n    var currentWidth = element.offsetLeft + element.clientLeft;\n    var currentHeight = element.offsetTop + element.clientTop;\n    var viewWidth = element.clientWidth,\n        viewHeight = element.clientHeight;\n    var viewRight = currentWidth + viewWidth;\n    var viewBottom = currentHeight + viewHeight;\n\n    if (lastEdge === -1) {\n      if (viewBottom >= bottom) {\n        lastEdge = viewBottom;\n      }\n    } else if ((horizontal ? currentWidth : currentHeight) > lastEdge) {\n      break;\n    }\n\n    if (viewBottom <= top || currentHeight >= bottom || viewRight <= left || currentWidth >= right) {\n      continue;\n    }\n\n    var hiddenHeight = Math.max(0, top - currentHeight) + Math.max(0, viewBottom - bottom);\n    var hiddenWidth = Math.max(0, left - currentWidth) + Math.max(0, viewRight - right);\n    var percent = (viewHeight - hiddenHeight) * (viewWidth - hiddenWidth) * 100 / viewHeight / viewWidth | 0;\n    visible.push({\n      id: view.id,\n      x: currentWidth,\n      y: currentHeight,\n      view: view,\n      percent: percent\n    });\n  }\n\n  var first = visible[0],\n      last = visible[visible.length - 1];\n\n  if (sortByVisibility) {\n    visible.sort(function (a, b) {\n      var pc = a.percent - b.percent;\n\n      if (Math.abs(pc) > 0.001) {\n        return -pc;\n      }\n\n      return a.id - b.id;\n    });\n  }\n\n  return {\n    first: first,\n    last: last,\n    views: visible\n  };\n}\n\nfunction noContextMenuHandler(evt) {\n  evt.preventDefault();\n}\n\nfunction isDataSchema(url) {\n  var i = 0,\n      ii = url.length;\n\n  while (i < ii && url[i].trim() === '') {\n    i++;\n  }\n\n  return url.substring(i, i + 5).toLowerCase() === 'data:';\n}\n\nfunction getPDFFileNameFromURL(url) {\n  var defaultFilename = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'document.pdf';\n\n  if (typeof url !== 'string') {\n    return defaultFilename;\n  }\n\n  if (isDataSchema(url)) {\n    console.warn('getPDFFileNameFromURL: ' + 'ignoring \"data:\" URL for performance reasons.');\n    return defaultFilename;\n  }\n\n  var reURI = /^(?:(?:[^:]+:)?\\/\\/[^\\/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/;\n  var reFilename = /[^\\/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;\n  var splitURI = reURI.exec(url);\n  var suggestedFilename = reFilename.exec(splitURI[1]) || reFilename.exec(splitURI[2]) || reFilename.exec(splitURI[3]);\n\n  if (suggestedFilename) {\n    suggestedFilename = suggestedFilename[0];\n\n    if (suggestedFilename.includes('%')) {\n      try {\n        suggestedFilename = reFilename.exec(decodeURIComponent(suggestedFilename))[0];\n      } catch (ex) {}\n    }\n  }\n\n  return suggestedFilename || defaultFilename;\n}\n\nfunction normalizeWheelEventDelta(evt) {\n  var delta = Math.sqrt(evt.deltaX * evt.deltaX + evt.deltaY * evt.deltaY);\n  var angle = Math.atan2(evt.deltaY, evt.deltaX);\n\n  if (-0.25 * Math.PI < angle && angle < 0.75 * Math.PI) {\n    delta = -delta;\n  }\n\n  var MOUSE_DOM_DELTA_PIXEL_MODE = 0;\n  var MOUSE_DOM_DELTA_LINE_MODE = 1;\n  var MOUSE_PIXELS_PER_LINE = 30;\n  var MOUSE_LINES_PER_PAGE = 30;\n\n  if (evt.deltaMode === MOUSE_DOM_DELTA_PIXEL_MODE) {\n    delta /= MOUSE_PIXELS_PER_LINE * MOUSE_LINES_PER_PAGE;\n  } else if (evt.deltaMode === MOUSE_DOM_DELTA_LINE_MODE) {\n    delta /= MOUSE_LINES_PER_PAGE;\n  }\n\n  return delta;\n}\n\nfunction isValidRotation(angle) {\n  return Number.isInteger(angle) && angle % 90 === 0;\n}\n\nfunction isValidScrollMode(mode) {\n  return Number.isInteger(mode) && Object.values(ScrollMode).includes(mode) && mode !== ScrollMode.UNKNOWN;\n}\n\nfunction isValidSpreadMode(mode) {\n  return Number.isInteger(mode) && Object.values(SpreadMode).includes(mode) && mode !== SpreadMode.UNKNOWN;\n}\n\nfunction isPortraitOrientation(size) {\n  return size.width <= size.height;\n}\n\nvar WaitOnType = {\n  EVENT: 'event',\n  TIMEOUT: 'timeout'\n};\nexports.WaitOnType = WaitOnType;\n\nfunction waitOnEventOrTimeout(_ref2) {\n  var target = _ref2.target,\n      name = _ref2.name,\n      _ref2$delay = _ref2.delay,\n      delay = _ref2$delay === void 0 ? 0 : _ref2$delay;\n  return new Promise(function (resolve, reject) {\n    if (_typeof(target) !== 'object' || !(name && typeof name === 'string') || !(Number.isInteger(delay) && delay >= 0)) {\n      throw new Error('waitOnEventOrTimeout - invalid parameters.');\n    }\n\n    function handler(type) {\n      if (target instanceof EventBus) {\n        target.off(name, eventHandler);\n      } else {\n        target.removeEventListener(name, eventHandler);\n      }\n\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n\n      resolve(type);\n    }\n\n    var eventHandler = handler.bind(null, WaitOnType.EVENT);\n\n    if (target instanceof EventBus) {\n      target.on(name, eventHandler);\n    } else {\n      target.addEventListener(name, eventHandler);\n    }\n\n    var timeoutHandler = handler.bind(null, WaitOnType.TIMEOUT);\n    var timeout = setTimeout(timeoutHandler, delay);\n  });\n}\n\nvar animationStarted = new Promise(function (resolve) {\n  if (typeof window === 'undefined') {\n    setTimeout(resolve, 20);\n    return;\n  }\n\n  window.requestAnimationFrame(resolve);\n});\nexports.animationStarted = animationStarted;\n\nvar EventBus =\n/*#__PURE__*/\nfunction () {\n  function EventBus() {\n    var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref3$dispatchToDOM = _ref3.dispatchToDOM,\n        dispatchToDOM = _ref3$dispatchToDOM === void 0 ? false : _ref3$dispatchToDOM;\n\n    _classCallCheck(this, EventBus);\n\n    this._listeners = Object.create(null);\n    this._dispatchToDOM = dispatchToDOM === true;\n  }\n\n  _createClass(EventBus, [{\n    key: \"on\",\n    value: function on(eventName, listener) {\n      var eventListeners = this._listeners[eventName];\n\n      if (!eventListeners) {\n        eventListeners = [];\n        this._listeners[eventName] = eventListeners;\n      }\n\n      eventListeners.push(listener);\n    }\n  }, {\n    key: \"off\",\n    value: function off(eventName, listener) {\n      var eventListeners = this._listeners[eventName];\n      var i;\n\n      if (!eventListeners || (i = eventListeners.indexOf(listener)) < 0) {\n        return;\n      }\n\n      eventListeners.splice(i, 1);\n    }\n  }, {\n    key: \"dispatch\",\n    value: function dispatch(eventName) {\n      var eventListeners = this._listeners[eventName];\n\n      if (!eventListeners || eventListeners.length === 0) {\n        if (this._dispatchToDOM) {\n          var _args5 = Array.prototype.slice.call(arguments, 1);\n\n          this._dispatchDOMEvent(eventName, _args5);\n        }\n\n        return;\n      }\n\n      var args = Array.prototype.slice.call(arguments, 1);\n      eventListeners.slice(0).forEach(function (listener) {\n        listener.apply(null, args);\n      });\n\n      if (this._dispatchToDOM) {\n        this._dispatchDOMEvent(eventName, args);\n      }\n    }\n  }, {\n    key: \"_dispatchDOMEvent\",\n    value: function _dispatchDOMEvent(eventName) {\n      var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var details = Object.create(null);\n\n      if (args && args.length > 0) {\n        var obj = args[0];\n\n        for (var key in obj) {\n          var value = obj[key];\n\n          if (key === 'source') {\n            if (value === window || value === document) {\n              return;\n            }\n\n            continue;\n          }\n\n          details[key] = value;\n        }\n      }\n\n      var event = document.createEvent('CustomEvent');\n      event.initCustomEvent(eventName, true, true, details);\n      document.dispatchEvent(event);\n    }\n  }]);\n\n  return EventBus;\n}();\n\nexports.EventBus = EventBus;\nvar globalEventBus = null;\n\nfunction getGlobalEventBus() {\n  var dispatchToDOM = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n  if (!globalEventBus) {\n    globalEventBus = new EventBus({\n      dispatchToDOM: dispatchToDOM\n    });\n  }\n\n  return globalEventBus;\n}\n\nfunction clamp(v, min, max) {\n  return Math.min(Math.max(v, min), max);\n}\n\nvar ProgressBar =\n/*#__PURE__*/\nfunction () {\n  function ProgressBar(id) {\n    var _ref4 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        height = _ref4.height,\n        width = _ref4.width,\n        units = _ref4.units;\n\n    _classCallCheck(this, ProgressBar);\n\n    this.visible = true;\n    this.div = document.querySelector(id + ' .progress');\n    this.bar = this.div.parentNode;\n    this.height = height || 100;\n    this.width = width || 100;\n    this.units = units || '%';\n    this.div.style.height = this.height + this.units;\n    this.percent = 0;\n  }\n\n  _createClass(ProgressBar, [{\n    key: \"_updateBar\",\n    value: function _updateBar() {\n      if (this._indeterminate) {\n        this.div.classList.add('indeterminate');\n        this.div.style.width = this.width + this.units;\n        return;\n      }\n\n      this.div.classList.remove('indeterminate');\n      var progressSize = this.width * this._percent / 100;\n      this.div.style.width = progressSize + this.units;\n    }\n  }, {\n    key: \"setWidth\",\n    value: function setWidth(viewer) {\n      if (!viewer) {\n        return;\n      }\n\n      var container = viewer.parentNode;\n      var scrollbarWidth = container.offsetWidth - viewer.offsetWidth;\n\n      if (scrollbarWidth > 0) {\n        this.bar.setAttribute('style', 'width: calc(100% - ' + scrollbarWidth + 'px);');\n      }\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      if (!this.visible) {\n        return;\n      }\n\n      this.visible = false;\n      this.bar.classList.add('hidden');\n      document.body.classList.remove('loadingInProgress');\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      if (this.visible) {\n        return;\n      }\n\n      this.visible = true;\n      document.body.classList.add('loadingInProgress');\n      this.bar.classList.remove('hidden');\n    }\n  }, {\n    key: \"percent\",\n    get: function get() {\n      return this._percent;\n    },\n    set: function set(val) {\n      this._indeterminate = isNaN(val);\n      this._percent = clamp(val, 0, 100);\n\n      this._updateBar();\n    }\n  }]);\n\n  return ProgressBar;\n}();\n\nexports.ProgressBar = ProgressBar;\n\nfunction moveToEndOfArray(arr, condition) {\n  var moved = [],\n      len = arr.length;\n  var write = 0;\n\n  for (var read = 0; read < len; ++read) {\n    if (condition(arr[read])) {\n      moved.push(arr[read]);\n    } else {\n      arr[write] = arr[read];\n      ++write;\n    }\n  }\n\n  for (var _read = 0; write < len; ++_read, ++write) {\n    arr[write] = moved[_read];\n  }\n}"]},"metadata":{},"sourceType":"script"}