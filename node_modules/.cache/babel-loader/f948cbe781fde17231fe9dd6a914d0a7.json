{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _promise = _interopRequireDefault(require(\"promise\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {};\n\n          if (desc.get || desc.set) {\n            Object.defineProperty(newObj, key, desc);\n          } else {\n            newObj[key] = obj[key];\n          }\n        }\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar StepZilla = /*#__PURE__*/function (_Component) {\n  _inherits(StepZilla, _Component);\n\n  function StepZilla(props) {\n    var _this;\n\n    _classCallCheck(this, StepZilla);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(StepZilla).call(this, props));\n    _this.state = {\n      compState: _this.props.startAtStep,\n      navState: _this.getNavStates(_this.props.startAtStep, _this.props.steps.length)\n    };\n    _this.hidden = {\n      display: 'none'\n    }; // if user did not give a custom nextTextOnFinalActionStep, the nextButtonText becomes the default\n\n    _this.nextTextOnFinalActionStep = _this.props.nextTextOnFinalActionStep ? _this.props.nextTextOnFinalActionStep : _this.props.nextButtonText;\n\n    _this.applyValidationFlagsToSteps();\n\n    return _this;\n  } // extend the \"steps\" array with flags to indicate if they have been validated\n\n\n  _createClass(StepZilla, [{\n    key: \"applyValidationFlagsToSteps\",\n    value: function applyValidationFlagsToSteps() {\n      var _this2 = this;\n\n      this.props.steps.map(function (i, idx) {\n        if (_this2.props.dontValidate) {\n          i.validated = true;\n        } else {\n          // check if isValidated was exposed in the step, if yes then set initial state as not validated (false) or vice versa\n          // if HOCValidation is used for the step then mark it as \"requires to be validated. i.e. false\"\n          i.validated = i.component.type && i.component.type.prototype && i.component.type.prototype.isValidated && _this2.isStepAtIndexHOCValidationBased(idx) ? false : true;\n        }\n\n        return i;\n      });\n    } // update the header nav states via classes so they can be styled via css\n\n  }, {\n    key: \"getNavStates\",\n    value: function getNavStates(indx, length) {\n      var styles = [];\n\n      for (var i = 0; i < length; i++) {\n        if (i < indx || !this.props.prevBtnOnLastStep && indx === length - 1) {\n          styles.push('done');\n        } else if (i === indx) {\n          styles.push('doing');\n        } else {\n          styles.push('todo');\n        }\n      }\n\n      return {\n        current: indx,\n        styles: styles\n      };\n    }\n  }, {\n    key: \"getPrevNextBtnLayout\",\n    value: function getPrevNextBtnLayout(currentStep) {\n      // first set default values\n      var showPreviousBtn = true;\n      var showNextBtn = true;\n      var nextStepText = this.props.nextButtonText; // first step hide previous btn\n\n      if (currentStep === 0) {\n        showPreviousBtn = false;\n      } // second to last step change next btn text if supplied as props\n\n\n      if (currentStep === this.props.steps.length - 2) {\n        nextStepText = this.props.nextTextOnFinalActionStep || nextStepText;\n      } // last step hide next btn, hide previous btn if supplied as props\n\n\n      if (currentStep >= this.props.steps.length - 1) {\n        showNextBtn = false;\n        showPreviousBtn = this.props.prevBtnOnLastStep === false ? false : true;\n      }\n\n      return {\n        showPreviousBtn: showPreviousBtn,\n        showNextBtn: showNextBtn,\n        nextStepText: nextStepText\n      };\n    } // which step are we in?\n\n  }, {\n    key: \"checkNavState\",\n    value: function checkNavState(nextStep) {\n      if (this.props.onStepChange) {\n        this.props.onStepChange(nextStep);\n      }\n    } // set the nav state\n\n  }, {\n    key: \"setNavState\",\n    value: function setNavState(next) {\n      this.setState({\n        navState: this.getNavStates(next, this.props.steps.length)\n      });\n\n      if (next < this.props.steps.length) {\n        this.setState({\n          compState: next\n        });\n      }\n\n      this.checkNavState(next);\n    } // handles keydown on enter being pressed in any Child component input area. in this case it goes to the next (ignore textareas as they should allow line breaks)\n\n  }, {\n    key: \"handleKeyDown\",\n    value: function handleKeyDown(evt) {\n      if (evt.which === 13) {\n        if (!this.props.preventEnterSubmission && evt.target.type !== 'textarea') {\n          this.next();\n        } else if (evt.target.type !== 'textarea') {\n          evt.preventDefault();\n        }\n      }\n    } // this utility method lets Child components invoke a direct jump to another step\n\n  }, {\n    key: \"jumpToStep\",\n    value: function jumpToStep(evt) {\n      var _this3 = this;\n\n      if (typeof evt.target === 'undefined') {\n        // a child step wants to invoke a jump between steps. in this case 'evt' is the numeric step number and not the JS event\n        this.setNavState(evt);\n      } else {\n        // the main navigation step ui is invoking a jump between steps\n        // if stepsNavigation is turned off or user clicked on existing step again (on step 2 and clicked on 2 again) then ignore\n        if (!this.props.stepsNavigation || evt.target.value === this.state.compState) {\n          evt.preventDefault();\n          evt.stopPropagation();\n          return;\n        } // evt is a react event so we need to persist it as we deal with aync promises which nullifies these events (https://facebook.github.io/react/docs/events.html#event-pooling)\n\n\n        evt.persist();\n        var movingBack = evt.target.value < this.state.compState; // are we trying to move back or front?\n\n        var passThroughStepsNotValid = false; // if we are jumping forward, only allow that if inbetween steps are all validated. This flag informs the logic...\n\n        var proceed = false; // flag on if we should move on\n\n        this.abstractStepMoveAllowedToPromise(movingBack).then(function () {\n          var valid = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true; // validation was a success (promise or sync validation). In it was a Promise's resolve()\n          // ... then proceed will be undefined, so make it true. Or else 'proceed' will carry the true/false value from sync\n\n          proceed = valid;\n\n          if (!movingBack) {\n            _this3.updateStepValidationFlag(proceed);\n          }\n\n          if (proceed) {\n            if (!movingBack) {\n              // looks like we are moving forward, 'reduce' a new array of step>validated values we need to check and\n              // ... 'some' that to get a decision on if we should allow moving forward\n              passThroughStepsNotValid = _this3.props.steps.reduce(function (a, c, i) {\n                if (i >= _this3.state.compState && i < evt.target.value) {\n                  a.push(c.validated);\n                }\n\n                return a;\n              }, []).some(function (c) {\n                return c === false;\n              });\n            }\n          }\n        }).catch(function () {\n          // Promise based validation was a fail (i.e reject())\n          if (!movingBack) {\n            _this3.updateStepValidationFlag(false);\n          }\n        }).then(function () {\n          // this is like finally(), executes if error no no error\n          if (proceed && !passThroughStepsNotValid) {\n            if (evt.target.value === _this3.props.steps.length - 1 && _this3.state.compState === _this3.props.steps.length - 1) {\n              _this3.setNavState(_this3.props.steps.length);\n            } else {\n              _this3.setNavState(evt.target.value);\n            }\n          }\n        }).catch(function (e) {\n          if (e) {\n            // see note below called \"CatchRethrowing\"\n            // ... plus the finally then() above is what throws the JS Error so we need to catch that here specifically\n            setTimeout(function () {\n              throw e;\n            });\n          }\n        });\n      }\n    } // move next via next button\n\n  }, {\n    key: \"next\",\n    value: function next() {\n      var _this4 = this;\n\n      this.abstractStepMoveAllowedToPromise().then(function () {\n        var proceed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true; // validation was a success (promise or sync validation). In it was a Promise's resolve() then proceed will be undefined,\n        // ... so make it true. Or else 'proceed' will carry the true/false value from sync validation\n\n        _this4.updateStepValidationFlag(proceed);\n\n        if (proceed) {\n          _this4.setNavState(_this4.state.compState + 1);\n        }\n      }).catch(function (e) {\n        if (e) {\n          // CatchRethrowing: as we wrap StepMoveAllowed() to resolve as a Promise, the then() is invoked and the next React Component is loaded.\n          // ... during the render, if there are JS errors thrown (e.g. ReferenceError) it gets swallowed by the Promise library and comes in here (catch)\n          // ... so we need to rethrow it outside the execution stack so it behaves like a notmal JS error (i.e. halts and prints to console)\n          //\n          setTimeout(function () {\n            throw e;\n          });\n        } // Promise based validation was a fail (i.e reject())\n\n\n        _this4.updateStepValidationFlag(false);\n      });\n    } // move behind via previous button\n\n  }, {\n    key: \"previous\",\n    value: function previous() {\n      if (this.state.compState > 0) {\n        this.setNavState(this.state.compState - 1);\n      }\n    } // update step's validation flag\n\n  }, {\n    key: \"updateStepValidationFlag\",\n    value: function updateStepValidationFlag() {\n      var val = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      this.props.steps[this.state.compState].validated = val; // note: if a step component returns 'underfined' then treat as \"true\".\n    } // are we allowed to move forward? via the next button or via jumpToStep?\n\n  }, {\n    key: \"stepMoveAllowed\",\n    value: function stepMoveAllowed() {\n      var skipValidationExecution = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var proceed = false;\n\n      if (this.props.dontValidate) {\n        proceed = true;\n      } else {\n        if (skipValidationExecution) {\n          // we are moving backwards in steps, in this case dont validate as it means the user is not commiting to \"save\"\n          proceed = true;\n        } else if (this.isStepAtIndexHOCValidationBased(this.state.compState)) {\n          // the user is using a higer order component (HOC) for validation (e.g react-validation-mixin), this wraps the StepZilla steps as a HOC,\n          // so use hocValidationAppliedTo to determine if this step needs the aync validation as per react-validation-mixin interface\n          proceed = this.refs.activeComponent.refs.component.isValidated();\n        } else if (Object.keys(this.refs).length === 0 || typeof this.refs.activeComponent.isValidated === 'undefined') {\n          // if its a form component, it should have implemeted a public isValidated class (also pure componenets wont even have refs - i.e. a empty object). If not then continue\n          proceed = true;\n        } else {\n          // user is moving forward in steps, invoke validation as its available\n          proceed = this.refs.activeComponent.isValidated();\n        }\n      }\n\n      return proceed;\n    }\n  }, {\n    key: \"isStepAtIndexHOCValidationBased\",\n    value: function isStepAtIndexHOCValidationBased(stepIndex) {\n      return this.props.hocValidationAppliedTo.length > 0 && this.props.hocValidationAppliedTo.indexOf(stepIndex) > -1;\n    } // a validation method is each step can be sync or async (Promise based), this utility abstracts the wrapper stepMoveAllowed to be Promise driven regardless of validation return type\n\n  }, {\n    key: \"abstractStepMoveAllowedToPromise\",\n    value: function abstractStepMoveAllowedToPromise(movingBack) {\n      return _promise.default.resolve(this.stepMoveAllowed(movingBack));\n    } // get the classmame of steps\n\n  }, {\n    key: \"getClassName\",\n    value: function getClassName(className, i) {\n      var liClassName = \"\".concat(className, \"-\").concat(this.state.navState.styles[i]); // if step ui based navigation is disabled, then dont highlight step\n\n      if (!this.props.stepsNavigation) {\n        liClassName += ' no-hl';\n      }\n\n      return liClassName;\n    } // render the steps as stepsNavigation\n\n  }, {\n    key: \"renderSteps\",\n    value: function renderSteps() {\n      var _this5 = this;\n\n      return this.props.steps.map(function (s, i) {\n        return _react.default.createElement(\"li\", {\n          className: _this5.getClassName('progtrckr', i),\n          onClick: function onClick(evt) {\n            _this5.jumpToStep(evt);\n          },\n          key: i,\n          value: i\n        }, _react.default.createElement(\"em\", null, i + 1), _react.default.createElement(\"span\", null, _this5.props.steps[i].name));\n      });\n    } // main render of stepzilla container\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      var props = this.props;\n\n      var _this$getPrevNextBtnL = this.getPrevNextBtnLayout(this.state.compState),\n          nextStepText = _this$getPrevNextBtnL.nextStepText,\n          showNextBtn = _this$getPrevNextBtnL.showNextBtn,\n          showPreviousBtn = _this$getPrevNextBtnL.showPreviousBtn; // clone the step component dynamically and tag it as activeComponent so we can validate it on next. also bind the jumpToStep piping method\n\n\n      var cloneExtensions = {\n        jumpToStep: function jumpToStep(t) {\n          _this6.jumpToStep(t);\n        }\n      };\n      var componentPointer = this.props.steps[this.state.compState].component; // can only update refs if its a regular React component (not a pure component), so lets check that\n\n      if (componentPointer instanceof _react.Component || componentPointer.type && componentPointer.type.prototype instanceof _react.Component) {\n        // unit test deteceted that instanceof Component can be in either of these locations so test both (not sure why this is the case)\n        cloneExtensions.ref = 'activeComponent';\n      }\n\n      var compToRender = _react.default.cloneElement(componentPointer, cloneExtensions);\n\n      return _react.default.createElement(\"div\", {\n        className: \"multi-step\",\n        onKeyDown: function onKeyDown(evt) {\n          _this6.handleKeyDown(evt);\n        }\n      }, this.props.showSteps ? _react.default.createElement(\"ol\", {\n        className: \"progtrckr\"\n      }, this.renderSteps()) : _react.default.createElement(\"span\", null), compToRender, _react.default.createElement(\"div\", {\n        style: this.props.showNavigation ? {} : this.hidden,\n        className: \"footer-buttons\"\n      }, _react.default.createElement(\"button\", {\n        type: \"button\",\n        style: showPreviousBtn ? {} : this.hidden,\n        className: props.backButtonCls,\n        onClick: function onClick() {\n          _this6.previous();\n        },\n        id: \"prev-button\"\n      }, this.props.backButtonText), _react.default.createElement(\"button\", {\n        type: \"button\",\n        style: showNextBtn ? {} : this.hidden,\n        className: props.nextButtonCls,\n        onClick: function onClick() {\n          _this6.next();\n        },\n        id: \"next-button\"\n      }, nextStepText)));\n    }\n  }]);\n\n  return StepZilla;\n}(_react.Component);\n\nexports.default = StepZilla;\nStepZilla.defaultProps = {\n  showSteps: true,\n  showNavigation: true,\n  stepsNavigation: true,\n  prevBtnOnLastStep: true,\n  dontValidate: false,\n  preventEnterSubmission: false,\n  startAtStep: 0,\n  nextButtonText: 'Next',\n  nextButtonCls: 'btn btn-prev btn-primary btn-lg pull-right',\n  backButtonText: 'Previous',\n  backButtonCls: 'btn btn-next btn-primary btn-lg pull-left',\n  hocValidationAppliedTo: []\n};\nStepZilla.propTypes = {\n  steps: _propTypes.default.arrayOf(_propTypes.default.shape({\n    name: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.object]).isRequired,\n    component: _propTypes.default.element.isRequired\n  })).isRequired,\n  showSteps: _propTypes.default.bool,\n  showNavigation: _propTypes.default.bool,\n  stepsNavigation: _propTypes.default.bool,\n  prevBtnOnLastStep: _propTypes.default.bool,\n  dontValidate: _propTypes.default.bool,\n  preventEnterSubmission: _propTypes.default.bool,\n  startAtStep: _propTypes.default.number,\n  nextButtonText: _propTypes.default.string,\n  nextButtonCls: _propTypes.default.string,\n  backButtonCls: _propTypes.default.string,\n  backButtonText: _propTypes.default.string,\n  hocValidationAppliedTo: _propTypes.default.array,\n  onStepChange: _propTypes.default.func\n};","map":{"version":3,"sources":["/mnt/c/Users/Dell/Desktop/KhanaWeb/khanaweb/node_modules/react-stepzilla/dist/main.js"],"names":["Object","defineProperty","exports","value","default","_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_promise","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","desc","getOwnPropertyDescriptor","get","set","_typeof","Symbol","iterator","constructor","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","_createClass","protoProps","staticProps","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","create","_setPrototypeOf","p","StepZilla","_Component","_this","state","compState","startAtStep","navState","getNavStates","steps","hidden","display","nextTextOnFinalActionStep","nextButtonText","applyValidationFlagsToSteps","_this2","map","idx","dontValidate","validated","component","type","isValidated","isStepAtIndexHOCValidationBased","indx","styles","prevBtnOnLastStep","push","current","getPrevNextBtnLayout","currentStep","showPreviousBtn","showNextBtn","nextStepText","checkNavState","nextStep","onStepChange","setNavState","next","setState","handleKeyDown","evt","which","preventEnterSubmission","preventDefault","jumpToStep","_this3","stepsNavigation","stopPropagation","persist","movingBack","passThroughStepsNotValid","proceed","abstractStepMoveAllowedToPromise","then","valid","arguments","undefined","updateStepValidationFlag","reduce","a","c","some","catch","e","setTimeout","_this4","previous","val","stepMoveAllowed","skipValidationExecution","refs","activeComponent","keys","stepIndex","hocValidationAppliedTo","indexOf","resolve","getClassName","className","liClassName","concat","renderSteps","_this5","s","createElement","onClick","name","render","_this6","_this$getPrevNextBtnL","cloneExtensions","t","componentPointer","Component","ref","compToRender","cloneElement","onKeyDown","showSteps","style","showNavigation","backButtonCls","id","backButtonText","nextButtonCls","defaultProps","propTypes","arrayOf","shape","oneOfType","string","object","isRequired","element","bool","number","array","func"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _promise = _interopRequireDefault(require(\"promise\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar StepZilla =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(StepZilla, _Component);\n\n  function StepZilla(props) {\n    var _this;\n\n    _classCallCheck(this, StepZilla);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(StepZilla).call(this, props));\n    _this.state = {\n      compState: _this.props.startAtStep,\n      navState: _this.getNavStates(_this.props.startAtStep, _this.props.steps.length)\n    };\n    _this.hidden = {\n      display: 'none'\n    }; // if user did not give a custom nextTextOnFinalActionStep, the nextButtonText becomes the default\n\n    _this.nextTextOnFinalActionStep = _this.props.nextTextOnFinalActionStep ? _this.props.nextTextOnFinalActionStep : _this.props.nextButtonText;\n\n    _this.applyValidationFlagsToSteps();\n\n    return _this;\n  } // extend the \"steps\" array with flags to indicate if they have been validated\n\n\n  _createClass(StepZilla, [{\n    key: \"applyValidationFlagsToSteps\",\n    value: function applyValidationFlagsToSteps() {\n      var _this2 = this;\n\n      this.props.steps.map(function (i, idx) {\n        if (_this2.props.dontValidate) {\n          i.validated = true;\n        } else {\n          // check if isValidated was exposed in the step, if yes then set initial state as not validated (false) or vice versa\n          // if HOCValidation is used for the step then mark it as \"requires to be validated. i.e. false\"\n          i.validated = i.component.type && i.component.type.prototype && i.component.type.prototype.isValidated && _this2.isStepAtIndexHOCValidationBased(idx) ? false : true;\n        }\n\n        return i;\n      });\n    } // update the header nav states via classes so they can be styled via css\n\n  }, {\n    key: \"getNavStates\",\n    value: function getNavStates(indx, length) {\n      var styles = [];\n\n      for (var i = 0; i < length; i++) {\n        if (i < indx || !this.props.prevBtnOnLastStep && indx === length - 1) {\n          styles.push('done');\n        } else if (i === indx) {\n          styles.push('doing');\n        } else {\n          styles.push('todo');\n        }\n      }\n\n      return {\n        current: indx,\n        styles: styles\n      };\n    }\n  }, {\n    key: \"getPrevNextBtnLayout\",\n    value: function getPrevNextBtnLayout(currentStep) {\n      // first set default values\n      var showPreviousBtn = true;\n      var showNextBtn = true;\n      var nextStepText = this.props.nextButtonText; // first step hide previous btn\n\n      if (currentStep === 0) {\n        showPreviousBtn = false;\n      } // second to last step change next btn text if supplied as props\n\n\n      if (currentStep === this.props.steps.length - 2) {\n        nextStepText = this.props.nextTextOnFinalActionStep || nextStepText;\n      } // last step hide next btn, hide previous btn if supplied as props\n\n\n      if (currentStep >= this.props.steps.length - 1) {\n        showNextBtn = false;\n        showPreviousBtn = this.props.prevBtnOnLastStep === false ? false : true;\n      }\n\n      return {\n        showPreviousBtn: showPreviousBtn,\n        showNextBtn: showNextBtn,\n        nextStepText: nextStepText\n      };\n    } // which step are we in?\n\n  }, {\n    key: \"checkNavState\",\n    value: function checkNavState(nextStep) {\n      if (this.props.onStepChange) {\n        this.props.onStepChange(nextStep);\n      }\n    } // set the nav state\n\n  }, {\n    key: \"setNavState\",\n    value: function setNavState(next) {\n      this.setState({\n        navState: this.getNavStates(next, this.props.steps.length)\n      });\n\n      if (next < this.props.steps.length) {\n        this.setState({\n          compState: next\n        });\n      }\n\n      this.checkNavState(next);\n    } // handles keydown on enter being pressed in any Child component input area. in this case it goes to the next (ignore textareas as they should allow line breaks)\n\n  }, {\n    key: \"handleKeyDown\",\n    value: function handleKeyDown(evt) {\n      if (evt.which === 13) {\n        if (!this.props.preventEnterSubmission && evt.target.type !== 'textarea') {\n          this.next();\n        } else if (evt.target.type !== 'textarea') {\n          evt.preventDefault();\n        }\n      }\n    } // this utility method lets Child components invoke a direct jump to another step\n\n  }, {\n    key: \"jumpToStep\",\n    value: function jumpToStep(evt) {\n      var _this3 = this;\n\n      if (typeof evt.target === 'undefined') {\n        // a child step wants to invoke a jump between steps. in this case 'evt' is the numeric step number and not the JS event\n        this.setNavState(evt);\n      } else {\n        // the main navigation step ui is invoking a jump between steps\n        // if stepsNavigation is turned off or user clicked on existing step again (on step 2 and clicked on 2 again) then ignore\n        if (!this.props.stepsNavigation || evt.target.value === this.state.compState) {\n          evt.preventDefault();\n          evt.stopPropagation();\n          return;\n        } // evt is a react event so we need to persist it as we deal with aync promises which nullifies these events (https://facebook.github.io/react/docs/events.html#event-pooling)\n\n\n        evt.persist();\n        var movingBack = evt.target.value < this.state.compState; // are we trying to move back or front?\n\n        var passThroughStepsNotValid = false; // if we are jumping forward, only allow that if inbetween steps are all validated. This flag informs the logic...\n\n        var proceed = false; // flag on if we should move on\n\n        this.abstractStepMoveAllowedToPromise(movingBack).then(function () {\n          var valid = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n          // validation was a success (promise or sync validation). In it was a Promise's resolve()\n          // ... then proceed will be undefined, so make it true. Or else 'proceed' will carry the true/false value from sync\n          proceed = valid;\n\n          if (!movingBack) {\n            _this3.updateStepValidationFlag(proceed);\n          }\n\n          if (proceed) {\n            if (!movingBack) {\n              // looks like we are moving forward, 'reduce' a new array of step>validated values we need to check and\n              // ... 'some' that to get a decision on if we should allow moving forward\n              passThroughStepsNotValid = _this3.props.steps.reduce(function (a, c, i) {\n                if (i >= _this3.state.compState && i < evt.target.value) {\n                  a.push(c.validated);\n                }\n\n                return a;\n              }, []).some(function (c) {\n                return c === false;\n              });\n            }\n          }\n        }).catch(function () {\n          // Promise based validation was a fail (i.e reject())\n          if (!movingBack) {\n            _this3.updateStepValidationFlag(false);\n          }\n        }).then(function () {\n          // this is like finally(), executes if error no no error\n          if (proceed && !passThroughStepsNotValid) {\n            if (evt.target.value === _this3.props.steps.length - 1 && _this3.state.compState === _this3.props.steps.length - 1) {\n              _this3.setNavState(_this3.props.steps.length);\n            } else {\n              _this3.setNavState(evt.target.value);\n            }\n          }\n        }).catch(function (e) {\n          if (e) {\n            // see note below called \"CatchRethrowing\"\n            // ... plus the finally then() above is what throws the JS Error so we need to catch that here specifically\n            setTimeout(function () {\n              throw e;\n            });\n          }\n        });\n      }\n    } // move next via next button\n\n  }, {\n    key: \"next\",\n    value: function next() {\n      var _this4 = this;\n\n      this.abstractStepMoveAllowedToPromise().then(function () {\n        var proceed = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n        // validation was a success (promise or sync validation). In it was a Promise's resolve() then proceed will be undefined,\n        // ... so make it true. Or else 'proceed' will carry the true/false value from sync validation\n        _this4.updateStepValidationFlag(proceed);\n\n        if (proceed) {\n          _this4.setNavState(_this4.state.compState + 1);\n        }\n      }).catch(function (e) {\n        if (e) {\n          // CatchRethrowing: as we wrap StepMoveAllowed() to resolve as a Promise, the then() is invoked and the next React Component is loaded.\n          // ... during the render, if there are JS errors thrown (e.g. ReferenceError) it gets swallowed by the Promise library and comes in here (catch)\n          // ... so we need to rethrow it outside the execution stack so it behaves like a notmal JS error (i.e. halts and prints to console)\n          //\n          setTimeout(function () {\n            throw e;\n          });\n        } // Promise based validation was a fail (i.e reject())\n\n\n        _this4.updateStepValidationFlag(false);\n      });\n    } // move behind via previous button\n\n  }, {\n    key: \"previous\",\n    value: function previous() {\n      if (this.state.compState > 0) {\n        this.setNavState(this.state.compState - 1);\n      }\n    } // update step's validation flag\n\n  }, {\n    key: \"updateStepValidationFlag\",\n    value: function updateStepValidationFlag() {\n      var val = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      this.props.steps[this.state.compState].validated = val; // note: if a step component returns 'underfined' then treat as \"true\".\n    } // are we allowed to move forward? via the next button or via jumpToStep?\n\n  }, {\n    key: \"stepMoveAllowed\",\n    value: function stepMoveAllowed() {\n      var skipValidationExecution = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var proceed = false;\n\n      if (this.props.dontValidate) {\n        proceed = true;\n      } else {\n        if (skipValidationExecution) {\n          // we are moving backwards in steps, in this case dont validate as it means the user is not commiting to \"save\"\n          proceed = true;\n        } else if (this.isStepAtIndexHOCValidationBased(this.state.compState)) {\n          // the user is using a higer order component (HOC) for validation (e.g react-validation-mixin), this wraps the StepZilla steps as a HOC,\n          // so use hocValidationAppliedTo to determine if this step needs the aync validation as per react-validation-mixin interface\n          proceed = this.refs.activeComponent.refs.component.isValidated();\n        } else if (Object.keys(this.refs).length === 0 || typeof this.refs.activeComponent.isValidated === 'undefined') {\n          // if its a form component, it should have implemeted a public isValidated class (also pure componenets wont even have refs - i.e. a empty object). If not then continue\n          proceed = true;\n        } else {\n          // user is moving forward in steps, invoke validation as its available\n          proceed = this.refs.activeComponent.isValidated();\n        }\n      }\n\n      return proceed;\n    }\n  }, {\n    key: \"isStepAtIndexHOCValidationBased\",\n    value: function isStepAtIndexHOCValidationBased(stepIndex) {\n      return this.props.hocValidationAppliedTo.length > 0 && this.props.hocValidationAppliedTo.indexOf(stepIndex) > -1;\n    } // a validation method is each step can be sync or async (Promise based), this utility abstracts the wrapper stepMoveAllowed to be Promise driven regardless of validation return type\n\n  }, {\n    key: \"abstractStepMoveAllowedToPromise\",\n    value: function abstractStepMoveAllowedToPromise(movingBack) {\n      return _promise.default.resolve(this.stepMoveAllowed(movingBack));\n    } // get the classmame of steps\n\n  }, {\n    key: \"getClassName\",\n    value: function getClassName(className, i) {\n      var liClassName = \"\".concat(className, \"-\").concat(this.state.navState.styles[i]); // if step ui based navigation is disabled, then dont highlight step\n\n      if (!this.props.stepsNavigation) {\n        liClassName += ' no-hl';\n      }\n\n      return liClassName;\n    } // render the steps as stepsNavigation\n\n  }, {\n    key: \"renderSteps\",\n    value: function renderSteps() {\n      var _this5 = this;\n\n      return this.props.steps.map(function (s, i) {\n        return _react.default.createElement(\"li\", {\n          className: _this5.getClassName('progtrckr', i),\n          onClick: function onClick(evt) {\n            _this5.jumpToStep(evt);\n          },\n          key: i,\n          value: i\n        }, _react.default.createElement(\"em\", null, i + 1), _react.default.createElement(\"span\", null, _this5.props.steps[i].name));\n      });\n    } // main render of stepzilla container\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      var props = this.props;\n\n      var _this$getPrevNextBtnL = this.getPrevNextBtnLayout(this.state.compState),\n          nextStepText = _this$getPrevNextBtnL.nextStepText,\n          showNextBtn = _this$getPrevNextBtnL.showNextBtn,\n          showPreviousBtn = _this$getPrevNextBtnL.showPreviousBtn; // clone the step component dynamically and tag it as activeComponent so we can validate it on next. also bind the jumpToStep piping method\n\n\n      var cloneExtensions = {\n        jumpToStep: function jumpToStep(t) {\n          _this6.jumpToStep(t);\n        }\n      };\n      var componentPointer = this.props.steps[this.state.compState].component; // can only update refs if its a regular React component (not a pure component), so lets check that\n\n      if (componentPointer instanceof _react.Component || componentPointer.type && componentPointer.type.prototype instanceof _react.Component) {\n        // unit test deteceted that instanceof Component can be in either of these locations so test both (not sure why this is the case)\n        cloneExtensions.ref = 'activeComponent';\n      }\n\n      var compToRender = _react.default.cloneElement(componentPointer, cloneExtensions);\n\n      return _react.default.createElement(\"div\", {\n        className: \"multi-step\",\n        onKeyDown: function onKeyDown(evt) {\n          _this6.handleKeyDown(evt);\n        }\n      }, this.props.showSteps ? _react.default.createElement(\"ol\", {\n        className: \"progtrckr\"\n      }, this.renderSteps()) : _react.default.createElement(\"span\", null), compToRender, _react.default.createElement(\"div\", {\n        style: this.props.showNavigation ? {} : this.hidden,\n        className: \"footer-buttons\"\n      }, _react.default.createElement(\"button\", {\n        type: \"button\",\n        style: showPreviousBtn ? {} : this.hidden,\n        className: props.backButtonCls,\n        onClick: function onClick() {\n          _this6.previous();\n        },\n        id: \"prev-button\"\n      }, this.props.backButtonText), _react.default.createElement(\"button\", {\n        type: \"button\",\n        style: showNextBtn ? {} : this.hidden,\n        className: props.nextButtonCls,\n        onClick: function onClick() {\n          _this6.next();\n        },\n        id: \"next-button\"\n      }, nextStepText)));\n    }\n  }]);\n\n  return StepZilla;\n}(_react.Component);\n\nexports.default = StepZilla;\nStepZilla.defaultProps = {\n  showSteps: true,\n  showNavigation: true,\n  stepsNavigation: true,\n  prevBtnOnLastStep: true,\n  dontValidate: false,\n  preventEnterSubmission: false,\n  startAtStep: 0,\n  nextButtonText: 'Next',\n  nextButtonCls: 'btn btn-prev btn-primary btn-lg pull-right',\n  backButtonText: 'Previous',\n  backButtonCls: 'btn btn-next btn-primary btn-lg pull-left',\n  hocValidationAppliedTo: []\n};\nStepZilla.propTypes = {\n  steps: _propTypes.default.arrayOf(_propTypes.default.shape({\n    name: _propTypes.default.oneOfType([_propTypes.default.string, _propTypes.default.object]).isRequired,\n    component: _propTypes.default.element.isRequired\n  })).isRequired,\n  showSteps: _propTypes.default.bool,\n  showNavigation: _propTypes.default.bool,\n  stepsNavigation: _propTypes.default.bool,\n  prevBtnOnLastStep: _propTypes.default.bool,\n  dontValidate: _propTypes.default.bool,\n  preventEnterSubmission: _propTypes.default.bool,\n  startAtStep: _propTypes.default.number,\n  nextButtonText: _propTypes.default.string,\n  nextButtonCls: _propTypes.default.string,\n  backButtonCls: _propTypes.default.string,\n  backButtonText: _propTypes.default.string,\n  hocValidationAppliedTo: _propTypes.default.array,\n  onStepChange: _propTypes.default.func\n};"]},"metadata":{},"sourceType":"script"}