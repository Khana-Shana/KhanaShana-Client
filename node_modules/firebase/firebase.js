!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).firebase=e()}(this,function(){"use strict";!function(t){if(!t.fetch){var e="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,s="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),r="FormData"in t,i="ArrayBuffer"in t;if(i)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=function(t){return t&&DataView.prototype.isPrototypeOf(t)},u=ArrayBuffer.isView||function(t){return t&&-1<o.indexOf(Object.prototype.toString.call(t))};d.prototype.append=function(t,e){t=l(t),e=f(e);var n=this.map[t];this.map[t]=n?n+","+e:e},d.prototype.delete=function(t){delete this.map[l(t)]},d.prototype.get=function(t){return t=l(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(l(t))},d.prototype.set=function(t,e){this.map[l(t)]=f(e)},d.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},d.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),p(n)},d.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),p(e)},d.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),p(n)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},b.call(_.prototype),b.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},E.error=function(){var t=new E(null,{status:0,statusText:""});return t.type="error",t};var h=[301,302,303,307,308];E.redirect=function(t,e){if(-1===h.indexOf(e))throw new RangeError("Invalid status code");return new E(null,{status:e,headers:{location:t}})},t.Headers=d,t.Request=_,t.Response=E,t.fetch=function(n,i){return new Promise(function(r,t){var e=new _(n,i),o=new XMLHttpRequest;o.onload=function(){var t,i,e={status:o.status,statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",i=new d,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":"),n=e.shift().trim();if(n){var r=e.join(":").trim();i.append(n,r)}}),i)};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var n="response"in o?o.response:o.responseText;r(new E(n,e))},o.onerror=function(){t(new TypeError("Network request failed"))},o.ontimeout=function(){t(new TypeError("Network request failed"))},o.open(e.method,e.url,!0),"include"===e.credentials?o.withCredentials=!0:"omit"===e.credentials&&(o.withCredentials=!1),"responseType"in o&&s&&(o.responseType="blob"),e.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send(void 0===e._bodyInit?null:e._bodyInit)})},t.fetch.polyfill=!0}function l(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function f(t){return"string"!=typeof t&&(t=String(t)),t}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function v(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function y(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function g(t){var e=new FileReader,n=y(e);return e.readAsArrayBuffer(t),n}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(s&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(r&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(i&&s&&a(t))this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(t)&&!u(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=m(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var t=v(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var t,e,n,r=v(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=y(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}function _(t,e){var n,r,i=(e=e||{}).body;if(t instanceof _){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),-1<c.indexOf(r)?r:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function w(t){var i=new FormData;return t.trim().split("&").forEach(function(t){if(t){var e=t.split("="),n=e.shift().replace(/\+/g," "),r=e.join("=").replace(/\+/g," ");i.append(decodeURIComponent(n),decodeURIComponent(r))}}),i}function E(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:void 0);var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,e){return t(e={exports:{}},e.exports),e.exports}function n(t){return t&&t.Math==Math&&t}function y(t){try{return!!t()}catch(t){return!0}}function g(t){return"object"==typeof t?null!==t:"function"==typeof t}function r(t){return l?u.createElement(t):{}}function d(t){if(!g(t))throw TypeError(String(t)+" is not an object");return t}function o(t,e){if(!g(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!g(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function _(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function h(e,n){try{w(m,e,n)}catch(t){m[e]=n}return n}function c(t,e){return S.call(t,e)}function a(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++N+C).toString(36)}function i(t){return c(R,t)||(A&&c(O,t)?R[t]=O[t]:R[t]=P("Symbol."+t)),R[t]}var m=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")(),s=!1,f=!y(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),u=m.document,l=g(u)&&g(u.createElement),p=!f&&!y(function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}),v=Object.defineProperty,b={f:f?v:function(t,e,n){if(d(t),e=o(e,!0),d(n),p)try{return v(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},w=f?function(t,e,n){return b.f(t,e,_(1,n))}:function(t,e,n){return t[e]=n,t},E="__core-js_shared__",T=m[E]||h(E,{}),I=e(function(t){(t.exports=function(t,e){return T[t]||(T[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})}),S={}.hasOwnProperty,N=0,C=Math.random(),A=!!Object.getOwnPropertySymbols&&!y(function(){return!String(Symbol())}),k=A&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,R=I("wks"),O=m.Symbol,P=k?O:O&&O.withoutSetter||a,D={};D[i("toStringTag")]="z";var x="[object z]"===String(D),L=Function.toString;"function"!=typeof T.inspectSource&&(T.inspectSource=function(t){return L.call(t)});function M(t){return W[t]||(W[t]=a(t))}var F,U,j,V=T.inspectSource,q=m.WeakMap,B="function"==typeof q&&/native code/.test(V(q)),W=I("keys"),K={},H=m.WeakMap;if(B){var G=new H,z=G.get,Q=G.has,Y=G.set;F=function(t,e){return Y.call(G,t,e),e},U=function(t){return z.call(G,t)||{}},j=function(t){return Q.call(G,t)}}else{var X=M("state");K[X]=!0,F=function(t,e){return w(t,X,e),e},U=function(t){return c(t,X)?t[X]:{}},j=function(t){return c(t,X)}}function J(t){return tt.call(t).slice(8,-1)}var $={set:F,get:U,has:j,enforce:function(t){return j(t)?U(t):F(t,{})},getterFor:function(n){return function(t){var e;if(!g(t)||(e=U(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},Z=e(function(t){var e=$.get,a=$.enforce,u=String(String).split("String");(t.exports=function(t,e,n,r){var i=!!r&&!!r.unsafe,o=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||c(n,"name")||w(n,"name",e),a(n).source=u.join("string"==typeof e?e:"")),t!==m?(i?!s&&t[e]&&(o=!0):delete t[e],o?t[e]=n:w(t,e,n)):o?t[e]=n:h(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||V(this)})}),tt={}.toString,et=i("toStringTag"),nt="Arguments"==J(function(){return arguments}()),rt=x?J:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),et))?n:nt?J(e):"Object"==(r=J(e))&&"function"==typeof e.callee?"Arguments":r},it=x?{}.toString:function(){return"[object "+rt(this)+"]"};x||Z(Object.prototype,"toString",it,{unsafe:!0});function ot(t){return isNaN(t=+t)?0:(0<t?Et:wt)(t)}function st(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function at(a){return function(t,e){var n,r,i=String(st(t)),o=ot(e),s=i.length;return o<0||s<=o?a?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===s||(r=i.charCodeAt(o+1))<56320||57343<r?a?i.charAt(o):n:a?i.slice(o,o+2):r-56320+(n-55296<<10)+65536}}function ut(t){return At(st(t))}function ct(t){return"function"==typeof t?t:void 0}function ht(t,e){return arguments.length<2?ct(Ot[t])||ct(m[t]):Ot[t]&&Ot[t][e]||m[t]&&m[t][e]}function lt(t){return 0<t?Pt(ot(t),9007199254740991):0}function ft(c){return function(t,e,n){var r,i,o,s=ut(t),a=lt(s.length),u=(r=a,(i=ot(n))<0?Dt(i+r,0):xt(i,r));if(c&&e!=e){for(;u<a;)if((o=s[u++])!=o)return!0}else for(;u<a;u++)if((c||u in s)&&s[u]===e)return c||u||0;return!c&&-1}}function pt(t,e){var n,r=ut(t),i=0,o=[];for(n in r)!c(K,n)&&c(r,n)&&o.push(n);for(;e.length>i;)c(r,n=e[i++])&&(~Lt(o,n)||o.push(n));return o}function dt(t,e){for(var n=Vt(e),r=b.f,i=Rt.f,o=0;o<n.length;o++){var s=n[o];c(t,s)||r(t,s,i(e,s))}}function vt(t,e){var n=Wt[Bt(t)];return n==Ht||n!=Kt&&("function"==typeof e?y(e):!!e)}function yt(t,e){var n,r,i,o,s,a=t.target,u=t.global,c=t.stat;if(n=u?m:c?m[a]||h(a,{}):(m[a]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(s=zt(n,r))&&s.value:n[r],!Gt(u?r:a+(c?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;dt(o,i)}(t.sham||i&&i.sham)&&w(o,"sham",!0),Z(n,r,o,t)}}function gt(t){return Object(st(t))}var mt,bt,_t,wt=Math.ceil,Et=Math.floor,Tt={codeAt:at(!1),charAt:at(!0)},It={}.propertyIsEnumerable,St=Object.getOwnPropertyDescriptor,Nt={f:St&&!It.call({1:2},1)?function(t){var e=St(this,t);return!!e&&e.enumerable}:It},Ct="".split,At=y(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==J(t)?Ct.call(t,""):Object(t)}:Object,kt=Object.getOwnPropertyDescriptor,Rt={f:f?kt:function(t,e){if(t=ut(t),e=o(e,!0),p)try{return kt(t,e)}catch(t){}if(c(t,e))return _(!Nt.f.call(t,e),t[e])}},Ot=m,Pt=Math.min,Dt=Math.max,xt=Math.min,Lt={includes:ft(!0),indexOf:ft(!1)}.indexOf,Mt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ft=Mt.concat("length","prototype"),Ut={f:Object.getOwnPropertyNames||function(t){return pt(t,Ft)}},jt={f:Object.getOwnPropertySymbols},Vt=ht("Reflect","ownKeys")||function(t){var e=Ut.f(d(t)),n=jt.f;return n?e.concat(n(t)):e},qt=/#|\.prototype\./,Bt=vt.normalize=function(t){return String(t).replace(qt,".").toLowerCase()},Wt=vt.data={},Kt=vt.NATIVE="N",Ht=vt.POLYFILL="P",Gt=vt,zt=Rt.f,Qt=!y(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Yt=M("IE_PROTO"),Xt=Object.prototype,Jt=Qt?Object.getPrototypeOf:function(t){return t=gt(t),c(t,Yt)?t[Yt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Xt:null},$t=i("iterator"),Zt=!1;[].keys&&("next"in(_t=[].keys())?(bt=Jt(Jt(_t)))!==Object.prototype&&(mt=bt):Zt=!0),null==mt&&(mt={}),c(mt,$t)||w(mt,$t,function(){return this});function te(){}function ee(t){return"<script>"+t+"</"+ue+">"}var ne,re={IteratorPrototype:mt,BUGGY_SAFARI_ITERATORS:Zt},ie=Object.keys||function(t){return pt(t,Mt)},oe=f?Object.defineProperties:function(t,e){d(t);for(var n,r=ie(e),i=r.length,o=0;o<i;)b.f(t,n=r[o++],e[n]);return t},se=ht("document","documentElement"),ae="prototype",ue="script",ce=M("IE_PROTO"),he=function(){try{ne=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;he=ne?function(t){t.write(ee("")),t.close();var e=t.parentWindow.Object;return t=null,e}(ne):((e=r("iframe")).style.display="none",se.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(ee("document.F=Object")),t.close(),t.F);for(var n=Mt.length;n--;)delete he[ae][Mt[n]];return he()};K[ce]=!0;function le(t,e,n){t&&!c(t=n?t:t.prototype,ge)&&ye(t,ge,{configurable:!0,value:e})}function fe(){return this}function pe(){return this}function de(t,e,n,r,i,o,s){var a,u,c;function h(t){if(t===i&&m)return m;if(!Ee&&t in y)return y[t];switch(t){case"keys":case Ie:case Se:return function(){return new n(this,t)}}return function(){return new n(this)}}u=r,c=e+" Iterator",(a=n).prototype=ve(be,{next:_(1,u)}),le(a,c,!1),me[c]=fe;var l,f,p,d=e+" Iterator",v=!1,y=t.prototype,g=y[Te]||y["@@iterator"]||i&&y[i],m=!Ee&&g||h(i),b="Array"==e&&y.entries||g;if(b&&(l=Jt(b.call(new t)),we!==Object.prototype&&l.next&&(Jt(l)!==we&&(_e?_e(l,we):"function"!=typeof l[Te]&&w(l,Te,pe)),le(l,d,!0))),i==Ie&&g&&g.name!==Ie&&(v=!0,m=function(){return g.call(this)}),y[Te]!==m&&w(y,Te,m),me[e]=m,i)if(f={values:h(Ie),keys:o?m:h("keys"),entries:h(Se)},s)for(p in f)!Ee&&!v&&p in y||Z(y,p,f[p]);else yt({target:e,proto:!0,forced:Ee||v},f);return f}var ve=Object.create||function(t,e){var n;return null!==t?(te[ae]=d(t),n=new te,te[ae]=null,n[ce]=t):n=he(),void 0===e?n:oe(n,e)},ye=b.f,ge=i("toStringTag"),me={},be=re.IteratorPrototype,_e=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return d(t),function(t){if(!g(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(e),r?n.call(t,e):t.__proto__=e,t}}():void 0),we=re.IteratorPrototype,Ee=re.BUGGY_SAFARI_ITERATORS,Te=i("iterator"),Ie="values",Se="entries",Ne=Tt.charAt,Ce="String Iterator",Ae=$.set,ke=$.getterFor(Ce);de(String,"String",function(t){Ae(this,{type:Ce,string:String(t),index:0})},function(){var t,e=ke(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Ne(n,r),e.index+=t.length,{value:t,done:!1})});var Re={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Oe=i("unscopables"),Pe=Array.prototype;null==Pe[Oe]&&b.f(Pe,Oe,{configurable:!0,value:ve(null)});function De(t){Pe[Oe][t]=!0}var xe="Array Iterator",Le=$.set,Me=$.getterFor(xe),Fe=de(Array,"Array",function(t,e){Le(this,{type:xe,target:ut(t),index:0,kind:e})},function(){var t=Me(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");me.Arguments=me.Array,De("keys"),De("values"),De("entries");var Ue=i("iterator"),je=i("toStringTag"),Ve=Fe.values;for(var qe in Re){var Be=m[qe],We=Be&&Be.prototype;if(We){if(We[Ue]!==Ve)try{w(We,Ue,Ve)}catch(au){We[Ue]=Ve}if(We[je]||w(We,je,qe),Re[qe])for(var Ke in Fe)if(We[Ke]!==Fe[Ke])try{w(We,Ke,Fe[Ke])}catch(au){We[Ke]=Fe[Ke]}}}function He(t,e,n){for(var r in e)Z(t,r,e[r],n);return t}function Ge(t){var e=ht(t),n=b.f;f&&e&&!e[tn]&&n(e,tn,{configurable:!0,get:function(){return this}})}function ze(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function Qe(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}function Ye(t){return void 0!==t&&(me.Array===t||nn[en]===t)}function Xe(r,i,t){if(ze(r),void 0===i)return r;switch(t){case 0:return function(){return r.call(i)};case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}function Je(t){if(null!=t)return t[rn]||t["@@iterator"]||me[rt(t)]}function $e(e,t,n,r){try{return r?t(d(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&d(i.call(e)),t}}var Ze=m.Promise,tn=i("species"),en=i("iterator"),nn=Array.prototype,rn=i("iterator"),on=e(function(t){function p(t,e){this.stopped=t,this.result=e}(t.exports=function(t,e,n,r,i){var o,s,a,u,c,h,l,f=Xe(e,n,r?2:1);if(i)o=t;else{if("function"!=typeof(s=Je(t)))throw TypeError("Target is not iterable");if(Ye(s)){for(a=0,u=lt(t.length);a<u;a++)if((c=r?f(d(l=t[a])[0],l[1]):f(t[a]))&&c instanceof p)return c;return new p(!1)}o=s.call(t)}for(h=o.next;!(l=h.call(o)).done;)if("object"==typeof(c=$e(o,f,l.value,r))&&c&&c instanceof p)return c;return new p(!1)}).stop=function(t){return new p(!0,t)}}),sn=i("iterator"),an=!1;try{var un=0,cn={next:function(){return{done:!!un++}},return:function(){an=!0}};cn[sn]=function(){return this},Array.from(cn,function(){throw 2})}catch(au){}function hn(t,e){if(!e&&!an)return!1;var n=!1;try{var r={};r[sn]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function ln(t,e){var n,r=d(t).constructor;return void 0===r||null==(n=d(r)[bn])?e:ze(n)}function fn(t){if(kn.hasOwnProperty(t)){var e=kn[t];delete kn[t],e()}}function pn(t){return function(){fn(t)}}function dn(t){fn(t.data)}function vn(t){m.postMessage(t+"",En.protocol+"//"+En.host)}var yn,gn,mn,bn=i("species"),_n=ht("navigator","userAgent")||"",wn=/(iphone|ipod|ipad).*applewebkit/i.test(_n),En=m.location,Tn=m.setImmediate,In=m.clearImmediate,Sn=m.process,Nn=m.MessageChannel,Cn=m.Dispatch,An=0,kn={},Rn="onreadystatechange";Tn&&In||(Tn=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return kn[++An]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},yn(An),An},In=function(t){delete kn[t]},"process"==J(Sn)?yn=function(t){Sn.nextTick(pn(t))}:Cn&&Cn.now?yn=function(t){Cn.now(pn(t))}:Nn&&!wn?(mn=(gn=new Nn).port2,gn.port1.onmessage=dn,yn=Xe(mn.postMessage,mn,1)):!m.addEventListener||"function"!=typeof postMessage||m.importScripts||y(vn)||"file:"===En.protocol?yn=Rn in r("script")?function(t){se.appendChild(r("script"))[Rn]=function(){se.removeChild(this),fn(t)}}:function(t){setTimeout(pn(t),0)}:(yn=vn,m.addEventListener("message",dn,!1)));var On,Pn,Dn,xn,Ln,Mn,Fn,Un,jn={set:Tn,clear:In},Vn=Rt.f,qn=jn.set,Bn=m.MutationObserver||m.WebKitMutationObserver,Wn=m.process,Kn=m.Promise,Hn="process"==J(Wn),Gn=Vn(m,"queueMicrotask"),zn=Gn&&Gn.value;zn||(On=function(){var t,e;for(Hn&&(t=Wn.domain)&&t.exit();Pn;){e=Pn.fn,Pn=Pn.next;try{e()}catch(t){throw Pn?xn():Dn=void 0,t}}Dn=void 0,t&&t.enter()},xn=Hn?function(){Wn.nextTick(On)}:Bn&&!wn?(Ln=!0,Mn=document.createTextNode(""),new Bn(On).observe(Mn,{characterData:!0}),function(){Mn.data=Ln=!Ln}):Kn&&Kn.resolve?(Fn=Kn.resolve(void 0),Un=Fn.then,function(){Un.call(Fn,On)}):function(){qn.call(m,On)});function Qn(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=ze(n),this.reject=ze(r)}function Yn(t,e){if(d(t),g(e)&&e.constructor===t)return e;var n=tr.f(t);return(0,n.resolve)(e),n.promise}function Xn(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}var Jn,$n,Zn=zn||function(t){var e={fn:t,next:void 0};Dn&&(Dn.next=e),Pn||(Pn=e,xn()),Dn=e},tr={f:function(t){return new Qn(t)}},er=m.process,nr=er&&er.versions,rr=nr&&nr.v8;rr?$n=(Jn=rr.split("."))[0]+Jn[1]:_n&&(!(Jn=_n.match(/Edge\/(\d+)/))||74<=Jn[1])&&(Jn=_n.match(/Chrome\/(\d+)/))&&($n=Jn[1]);function ir(t){var e;return!(!g(t)||"function"!=typeof(e=t.then))&&e}function or(l,f,p){if(!f.notified){f.notified=!0;var d=f.reactions;Zn(function(){for(var t=f.value,e=1==f.state,n=0;d.length>n;){var r,i,o,s=d[n++],a=e?s.ok:s.fail,u=s.resolve,c=s.reject,h=s.domain;try{a?(e||(2===f.rejection&&xr(l,f),f.rejection=1),!0===a?r=t:(h&&h.enter(),r=a(t),h&&(h.exit(),o=!0)),r===s.promise?c(wr("Promise-chain cycle")):(i=ir(r))?i.call(r,u,c):u(r)):c(t)}catch(t){h&&!o&&h.exit(),c(t)}}f.reactions=[],f.notified=!1,p&&!f.rejection&&Pr(l,f)})}}function sr(t,e,n){var r,i;Ar?((r=Er.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),m.dispatchEvent(r)):r={promise:e,reason:n},(i=m["on"+t])?i(r):t===kr&&function(t,e){var n=m.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function ar(e,n,r,i){return function(t){e(n,r,t,i)}}function ur(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,or(t,e,!0))}var cr,hr,lr,fr,pr=$n&&+$n,dr=jn.set,vr=i("species"),yr="Promise",gr=$.get,mr=$.set,br=$.getterFor(yr),_r=Ze,wr=m.TypeError,Er=m.document,Tr=m.process,Ir=ht("fetch"),Sr=tr.f,Nr=Sr,Cr="process"==J(Tr),Ar=!!(Er&&Er.createEvent&&m.dispatchEvent),kr="unhandledrejection",Rr=Gt(yr,function(){if(!(V(_r)!==String(_r))){if(66===pr)return!0;if(!Cr&&"function"!=typeof PromiseRejectionEvent)return!0}if(51<=pr&&/native code/.test(_r))return!1;function t(t){t(function(){},function(){})}var e=_r.resolve(1);return(e.constructor={})[vr]=t,!(e.then(function(){})instanceof t)}),Or=Rr||!hn(function(t){_r.all(t).catch(function(){})}),Pr=function(n,r){dr.call(m,function(){var t,e=r.value;if(Dr(r)&&(t=Xn(function(){Cr?Tr.emit("unhandledRejection",e,n):sr(kr,n,e)}),r.rejection=Cr||Dr(r)?2:1,t.error))throw t.value})},Dr=function(t){return 1!==t.rejection&&!t.parent},xr=function(t,e){dr.call(m,function(){Cr?Tr.emit("rejectionHandled",t):sr("rejectionhandled",t,e.value)})},Lr=function(n,r,t,e){if(!r.done){r.done=!0,e&&(r=e);try{if(n===t)throw wr("Promise can't be resolved itself");var i=ir(t);i?Zn(function(){var e={done:!1};try{i.call(t,ar(Lr,n,e,r),ar(ur,n,e,r))}catch(t){ur(n,e,t,r)}}):(r.value=t,r.state=1,or(n,r,!1))}catch(t){ur(n,{done:!1},t,r)}}};Rr&&(_r=function(t){Qe(this,_r,yr),ze(t),cr.call(this);var e=gr(this);try{t(ar(Lr,this,e),ar(ur,this,e))}catch(t){ur(this,e,t)}},(cr=function(){mr(this,{type:yr,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=He(_r.prototype,{then:function(t,e){var n=br(this),r=Sr(ln(this,_r));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Cr?Tr.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&or(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),hr=function(){var t=new cr,e=gr(t);this.promise=t,this.resolve=ar(Lr,t,e),this.reject=ar(ur,t,e)},tr.f=Sr=function(t){return t===_r||t===lr?new hr:Nr(t)},"function"==typeof Ze&&(fr=Ze.prototype.then,Z(Ze.prototype,"then",function(t,e){var n=this;return new _r(function(t,e){fr.call(n,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof Ir&&yt({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return Yn(_r,Ir.apply(m,arguments))}}))),yt({global:!0,wrap:!0,forced:Rr},{Promise:_r}),le(_r,yr,!1),Ge(yr),lr=ht(yr),yt({target:yr,stat:!0,forced:Rr},{reject:function(t){var e=Sr(this);return e.reject.call(void 0,t),e.promise}}),yt({target:yr,stat:!0,forced:Rr},{resolve:function(t){return Yn(this,t)}}),yt({target:yr,stat:!0,forced:Or},{all:function(t){var a=this,e=Sr(a),u=e.resolve,c=e.reject,n=Xn(function(){var r=ze(a.resolve),i=[],o=0,s=1;on(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]=t,--s||u(i))},c)}),--s||u(i)});return n.error&&c(n.value),e.promise},race:function(t){var n=this,r=Sr(n),i=r.reject,e=Xn(function(){var e=ze(n.resolve);on(t,function(t){e.call(n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}}),yt({target:"Promise",stat:!0},{allSettled:function(t){var a=this,e=tr.f(a),u=e.resolve,n=e.reject,r=Xn(function(){var r=ze(a.resolve),i=[],o=0,s=1;on(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]={status:"fulfilled",value:t},--s||u(i))},function(t){n||(n=!0,i[e]={status:"rejected",reason:t},--s||u(i))})}),--s||u(i)});return r.error&&n(r.value),e.promise}});var Mr=!!Ze&&y(function(){Ze.prototype.finally.call({then:function(){}},function(){})});yt({target:"Promise",proto:!0,real:!0,forced:Mr},{finally:function(e){var n=ln(this,ht("Promise")),t="function"==typeof e;return this.then(t?function(t){return Yn(n,e()).then(function(){return t})}:e,t?function(t){return Yn(n,e()).then(function(){throw t})}:e)}}),"function"!=typeof Ze||Ze.prototype.finally||Z(Ze.prototype,"finally",ht("Promise").prototype.finally);Ot.Promise;var Fr=$.set,Ur=$.getterFor("AggregateError"),jr=function(t,e){var n=this;if(!(n instanceof jr))return new jr(t,e);_e&&(n=_e(new Error(e),Jt(n)));var r=[];return on(t,r.push,r),f?Fr(n,{errors:r,type:"AggregateError"}):n.errors=r,void 0!==e&&w(n,"message",String(e)),n};jr.prototype=ve(Error.prototype,{constructor:_(5,jr),message:_(5,""),name:_(5,"AggregateError")}),f&&b.f(jr.prototype,"errors",{get:function(){return Ur(this).errors},configurable:!0}),yt({global:!0},{AggregateError:jr}),yt({target:"Promise",stat:!0},{try:function(t){var e=tr.f(this),n=Xn(t);return(n.error?e.reject:e.resolve)(n.value),e.promise}});var Vr="No one promise resolved";yt({target:"Promise",stat:!0},{any:function(t){var u=this,e=tr.f(u),c=e.resolve,h=e.reject,n=Xn(function(){var r=ze(u.resolve),i=[],o=0,s=1,a=!1;on(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(u,t).then(function(t){n||a||(a=!0,c(t))},function(t){n||a||(n=!0,i[e]=t,--s||h(new(ht("AggregateError"))(i,Vr)))})}),--s||h(new(ht("AggregateError"))(i,Vr))});return n.error&&h(n.value),e.promise}});function qr(t,e){var n;return Hr(t)&&("function"==typeof(n=t.constructor)&&(n===Array||Hr(n.prototype))||g(n)&&null===(n=n[Gr]))&&(n=void 0),new(void 0===n?Array:n)(0===e?0:e)}function Br(p){var d=1==p,v=2==p,y=3==p,g=4==p,m=6==p,b=5==p||m;return function(t,e,n,r){for(var i,o,s=gt(t),a=At(s),u=Xe(e,n,3),c=lt(a.length),h=0,l=r||qr,f=d?l(t,c):v?l(t,0):void 0;h<c;h++)if((b||h in a)&&(o=u(i=a[h],h,s),p))if(d)f[h]=o;else if(o)switch(p){case 3:return!0;case 5:return i;case 6:return h;case 2:zr.call(f,i)}else if(g)return!1;return m?-1:y||g?g:f}}function Wr(t){throw t}function Kr(t,e){if(c(Xr,t))return Xr[t];var n=[][t],r=!!c(e=e||{},"ACCESSORS")&&e.ACCESSORS,i=c(e,0)?e[0]:Wr,o=c(e,1)?e[1]:void 0;return Xr[t]=!!n&&!y(function(){if(r&&!f)return 1;var t={length:-1};r?Yr(t,1,{enumerable:!0,get:Wr}):t[1]=1,n.call(t,i,o)})}var Hr=Array.isArray||function(t){return"Array"==J(t)},Gr=i("species"),zr=[].push,Qr={forEach:Br(0),map:Br(1),filter:Br(2),some:Br(3),every:Br(4),find:Br(5),findIndex:Br(6)},Yr=Object.defineProperty,Xr={},Jr=Qr.find,$r="find",Zr=!0,ti=Kr($r);$r in[]&&Array(1)[$r](function(){Zr=!1}),yt({target:"Array",proto:!0,forced:Zr||!ti},{find:function(t,e){return Jr(this,t,1<arguments.length?e:void 0)}}),De($r);function ei(t,e,n){return Xe(ni,m[t].prototype[e],n)}var ni=Function.call,ri=(ei("Array","find"),Qr.findIndex),ii="findIndex",oi=!0,si=Kr(ii);ii in[]&&Array(1)[ii](function(){oi=!1}),yt({target:"Array",proto:!0,forced:oi||!si},{findIndex:function(t,e){return ri(this,t,1<arguments.length?e:void 0)}}),De(ii);function ai(t,e,n){var r=o(e);r in t?b.f(t,r,_(0,n)):t[r]=n}ei("Array","findIndex");var ui=!hn(function(t){Array.from(t)});yt({target:"Array",stat:!0,forced:ui},{from:function(t,e,n){var r,i,o,s,a,u,c=gt(t),h="function"==typeof this?this:Array,l=arguments.length,f=1<l?e:void 0,p=void 0!==f,d=Je(c),v=0;if(p&&(f=Xe(f,2<l?n:void 0,2)),null==d||h==Array&&Ye(d))for(i=new h(r=lt(c.length));v<r;v++)u=p?f(c[v],v):c[v],ai(i,v,u);else for(a=(s=d.call(c)).next,i=new h;!(o=a.call(s)).done;v++)u=p?$e(s,f,[o.value,v],!0):o.value,ai(i,v,u);return i.length=v,i}});Ot.Array.from;var ci,hi,li=Qr.some,fi=!!(hi=[]["some"])&&y(function(){hi.call(null,ci||function(){throw 1},1)}),pi=Kr("some");yt({target:"Array",proto:!0,forced:!fi||!pi},{some:function(t,e){return li(this,t,1<arguments.length?e:void 0)}});ei("Array","some");function di(t){return g(t)&&c(Ai,rt(t))}var vi,yi="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,gi=b.f,mi=m.Int8Array,bi=mi&&mi.prototype,_i=m.Uint8ClampedArray,wi=_i&&_i.prototype,Ei=mi&&Jt(mi),Ti=bi&&Jt(bi),Ii=Object.prototype,Si=(Ii.isPrototypeOf,i("toStringTag")),Ni=a("TYPED_ARRAY_TAG"),Ci=yi&&!!_e&&"Opera"!==rt(m.opera),Ai={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(vi in Ai)m[vi]||(Ci=!1);if((!Ci||"function"!=typeof Ei||Ei===Function.prototype)&&(Ei=function(){throw TypeError("Incorrect invocation")},Ci))for(vi in Ai)m[vi]&&_e(m[vi],Ei);if((!Ci||!Ti||Ti===Ii)&&(Ti=Ei.prototype,Ci))for(vi in Ai)m[vi]&&_e(m[vi].prototype,Ti);if(Ci&&Jt(wi)!==Ti&&_e(wi,Ti),f&&!c(Ti,Si))for(vi in gi(Ti,Si,{get:function(){return g(this)?this[Ni]:void 0}}),Ai)m[vi]&&w(m[vi],Ni,vi);function ki(){return xi.call(Fi(this))}var Ri=function(t){if(di(t))return t;throw TypeError("Target is not a typed array")},Oi=function(t,e,n){if(f){if(n)for(var r in Ai){var i=m[r];i&&c(i.prototype,t)&&delete i.prototype[t]}Ti[t]&&!n||Z(Ti,t,!n&&Ci&&bi[t]||e)}},Pi=i("iterator"),Di=m.Uint8Array,xi=Fe.values,Li=Fe.keys,Mi=Fe.entries,Fi=Ri,Ui=Oi,ji=Di&&Di.prototype[Pi],Vi=!!ji&&("values"==ji.name||null==ji.name);Ui("entries",function(){return Mi.call(Fi(this))}),Ui("keys",function(){return Li.call(Fi(this))}),Ui("values",ki,!Vi),Ui(Pi,ki,!Vi);var qi=Object.assign,Bi=Object.defineProperty,Wi=!qi||y(function(){if(f&&1!==qi({b:1},qi(Bi({},"a",{enumerable:!0,get:function(){Bi(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=qi({},t)[n]||ie(qi({},e)).join("")!=r})?function(t,e){for(var n=gt(t),r=arguments.length,i=1,o=jt.f,s=Nt.f;i<r;)for(var a,u=At(arguments[i++]),c=o?ie(u).concat(o(u)):ie(u),h=c.length,l=0;l<h;)a=c[l++],f&&!s.call(u,a)||(n[a]=u[a]);return n}:qi;yt({target:"Object",stat:!0,forced:Object.assign!==Wi},{assign:Wi});Ot.Object.assign;function Ki(a){return function(t){for(var e,n=ut(t),r=ie(n),i=r.length,o=0,s=[];o<i;)e=r[o++],f&&!Hi.call(n,e)||s.push(a?[e,n[e]]:n[e]);return s}}var Hi=Nt.f,Gi={entries:Ki(!0),values:Ki(!1)},zi=Gi.entries;yt({target:"Object",stat:!0},{entries:function(t){return zi(t)}});Ot.Object.entries;var Qi=Gi.values;yt({target:"Object",stat:!0},{values:function(t){return Qi(t)}});Ot.Object.values;function Yi(t){if(g(e=t)&&(void 0!==(n=e[Ji])?n:"RegExp"==J(e)))throw TypeError("The method doesn't accept regular expressions");var e,n;return t}function Xi(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[$i]=!1,"/./"[e](n)}catch(t){}}return!1}var Ji=i("match"),$i=i("match");yt({target:"String",proto:!0,forced:!Xi("includes")},{includes:function(t,e){return!!~String(st(this)).indexOf(Yi(t),1<arguments.length?e:void 0)}});ei("String","includes");var Zi,to=Rt.f,eo="".startsWith,no=Math.min,ro=Xi("startsWith"),io=!(ro||(!(Zi=to(String.prototype,"startsWith"))||Zi.writable));yt({target:"String",proto:!0,forced:!io&&!ro},{startsWith:function(t,e){var n=String(st(this));Yi(t);var r=lt(no(1<arguments.length?e:void 0,n.length)),i=String(t);return eo?eo.call(n,i,r):n.slice(r,r+i.length)===i}});ei("String","startsWith");yt({target:"String",proto:!0},{repeat:"".repeat||function(t){var e=String(st(this)),n="",r=ot(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}});ei("String","repeat");function oo(t){if(g(t)){var e=t[uo];return void 0!==e?!!e:Hr(t)}}var so,ao=i("species"),uo=i("isConcatSpreadable"),co=9007199254740991,ho="Maximum allowed index exceeded",lo=51<=pr||!y(function(){var t=[];return t[uo]=!1,t.concat()[0]!==t}),fo=(so="concat",51<=pr||!y(function(){var t=[];return(t.constructor={})[ao]=function(){return{foo:1}},1!==t[so](Boolean).foo}));yt({target:"Array",proto:!0,forced:!lo||!fo},{concat:function(t){var e,n,r,i,o,s=gt(this),a=qr(s,0),u=0;for(e=-1,r=arguments.length;e<r;e++)if(oo(o=-1===e?s:arguments[e])){if(i=lt(o.length),co<u+i)throw TypeError(ho);for(n=0;n<i;n++,u++)n in o&&ai(a,u,o[n])}else{if(co<=u)throw TypeError(ho);ai(a,u++,o)}return a.length=u,a}});function po(t){var e=Ot.Symbol||(Ot.Symbol={});c(e,t)||Io(e,t,{value:To.f(t)})}function vo(t,e){var n=jo[t]=ve(Do[Ao]);return Ro(n,{type:Co,tag:t,description:e}),f||(n.description=e),n}function yo(e,t){d(e);var n=ut(t),r=ie(n).concat(Xo(n));return So(r,function(t){f&&!Yo.call(n,t)||Qo(e,t,n[t])}),e}function go(t,e){var n=ut(t),r=o(e,!0);if(n!==Po||!c(jo,r)||c(Vo,r)){var i=Lo(n,r);return!i||!c(jo,r)||c(n,No)&&n[No][r]||(i.enumerable=!0),i}}function mo(t){var e=Fo(ut(t)),n=[];return So(e,function(t){c(jo,t)||c(K,t)||n.push(t)}),n}var bo=Ut.f,_o={}.toString,wo="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Eo={f:function(t){return wo&&"[object Window]"==_o.call(t)?function(t){try{return bo(t)}catch(t){return wo.slice()}}(t):bo(ut(t))}},To={f:i},Io=b.f,So=Qr.forEach,No=M("hidden"),Co="Symbol",Ao="prototype",ko=i("toPrimitive"),Ro=$.set,Oo=$.getterFor(Co),Po=Object[Ao],Do=m.Symbol,xo=ht("JSON","stringify"),Lo=Rt.f,Mo=b.f,Fo=Eo.f,Uo=Nt.f,jo=I("symbols"),Vo=I("op-symbols"),qo=I("string-to-symbol-registry"),Bo=I("symbol-to-string-registry"),Wo=I("wks"),Ko=m.QObject,Ho=!Ko||!Ko[Ao]||!Ko[Ao].findChild,Go=f&&y(function(){return 7!=ve(Mo({},"a",{get:function(){return Mo(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=Lo(Po,e);r&&delete Po[e],Mo(t,e,n),r&&t!==Po&&Mo(Po,e,r)}:Mo,zo=k?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Do},Qo=function(t,e,n){t===Po&&Qo(Vo,e,n),d(t);var r=o(e,!0);return d(n),c(jo,r)?(n.enumerable?(c(t,No)&&t[No][r]&&(t[No][r]=!1),n=ve(n,{enumerable:_(0,!1)})):(c(t,No)||Mo(t,No,_(1,{})),t[No][r]=!0),Go(t,r,n)):Mo(t,r,n)},Yo=function(t){var e=o(t,!0),n=Uo.call(this,e);return!(this===Po&&c(jo,e)&&!c(Vo,e))&&(!(n||!c(this,e)||!c(jo,e)||c(this,No)&&this[No][e])||n)},Xo=function(t){var e=t===Po,n=Fo(e?Vo:ut(t)),r=[];return So(n,function(t){!c(jo,t)||e&&!c(Po,t)||r.push(jo[t])}),r};if(A||(Z((Do=function(t){if(this instanceof Do)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==t?String(t):void 0,n=a(e),r=function(t){this===Po&&r.call(Vo,t),c(this,No)&&c(this[No],n)&&(this[No][n]=!1),Go(this,n,_(1,t))};return f&&Ho&&Go(Po,n,{configurable:!0,set:r}),vo(n,e)})[Ao],"toString",function(){return Oo(this).tag}),Z(Do,"withoutSetter",function(t){return vo(a(t),t)}),Nt.f=Yo,b.f=Qo,Rt.f=go,Ut.f=Eo.f=mo,jt.f=Xo,To.f=function(t){return vo(i(t),t)},f&&(Mo(Do[Ao],"description",{configurable:!0,get:function(){return Oo(this).description}}),Z(Po,"propertyIsEnumerable",Yo,{unsafe:!0}))),yt({global:!0,wrap:!0,forced:!A,sham:!A},{Symbol:Do}),So(ie(Wo),function(t){po(t)}),yt({target:Co,stat:!0,forced:!A},{for:function(t){var e=String(t);if(c(qo,e))return qo[e];var n=Do(e);return qo[e]=n,Bo[n]=e,n},keyFor:function(t){if(!zo(t))throw TypeError(t+" is not a symbol");if(c(Bo,t))return Bo[t]},useSetter:function(){Ho=!0},useSimple:function(){Ho=!1}}),yt({target:"Object",stat:!0,forced:!A,sham:!f},{create:function(t,e){return void 0===e?ve(t):yo(ve(t),e)},defineProperty:Qo,defineProperties:yo,getOwnPropertyDescriptor:go}),yt({target:"Object",stat:!0,forced:!A},{getOwnPropertyNames:mo,getOwnPropertySymbols:Xo}),yt({target:"Object",stat:!0,forced:y(function(){jt.f(1)})},{getOwnPropertySymbols:function(t){return jt.f(gt(t))}}),xo){var Jo=!A||y(function(){var t=Do();return"[null]"!=xo([t])||"{}"!=xo({a:t})||"{}"!=xo(Object(t))});yt({target:"JSON",stat:!0,forced:Jo},{stringify:function(t,e,n){for(var r,i=[t],o=1;o<arguments.length;)i.push(arguments[o++]);if((g(r=e)||void 0!==t)&&!zo(t))return Hr(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!zo(e))return e}),i[1]=e,xo.apply(null,i)}})}Do[Ao][ko]||w(Do[Ao],ko,Do[Ao].valueOf),le(Do,Co),K[No]=!0,po("asyncIterator");var $o=b.f,Zo=m.Symbol;if(!(!f||"function"!=typeof Zo||"description"in Zo.prototype&&void 0===Zo().description)){var ts={},es=function(t){var e=arguments.length<1||void 0===t?void 0:String(t),n=this instanceof es?new Zo(e):void 0===e?Zo():Zo(e);return""===e&&(ts[n]=!0),n};dt(es,Zo);var ns=es.prototype=Zo.prototype;ns.constructor=es;var rs=ns.toString,is="Symbol(test)"==String(Zo("test")),os=/^Symbol\((.*)\)[^)]+$/;$o(ns,"description",{configurable:!0,get:function(){var t=g(this)?this.valueOf():this,e=rs.call(t);if(c(ts,t))return"";var n=is?e.slice(7,-1):e.replace(os,"$1");return""===n?void 0:n}}),yt({global:!0,forced:!0},{Symbol:es})}po("hasInstance"),po("isConcatSpreadable"),po("iterator"),po("match"),po("matchAll"),po("replace"),po("search"),po("species"),po("split"),po("toPrimitive"),po("toStringTag"),po("unscopables"),le(Math,"Math",!0),le(m.JSON,"JSON",!0);Ot.Symbol;po("asyncDispose"),po("dispose"),po("observable"),po("patternMatch"),po("replaceAll");To.f("iterator");function ss(u,t,e){function n(t){var n=i[t];Z(i,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(r&&!g(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return r&&!g(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return!(r&&!g(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}var c=-1!==u.indexOf("Map"),r=-1!==u.indexOf("Weak"),h=c?"set":"add",l=m[u],i=l&&l.prototype,f=l,o={};if(Gt(u,"function"!=typeof l||!(r||i.forEach&&!y(function(){(new l).entries().next()}))))f=e.getConstructor(t,u,c,h),cs.REQUIRED=!0;else if(Gt(u,!0)){var s=new f,a=s[h](r?{}:-0,1)!=s,p=y(function(){s.has(1)}),d=hn(function(t){new l(t)}),v=!r&&y(function(){for(var t=new l,e=5;e--;)t[h](e,e);return!t.has(-0)});d||(((f=t(function(t,e){Qe(t,f,u);var n,r,i,o,s,a=(n=new l,r=t,i=f,_e&&"function"==typeof(o=r.constructor)&&o!==i&&g(s=o.prototype)&&s!==i.prototype&&_e(n,s),n);return null!=e&&on(e,a[h],a,c),a})).prototype=i).constructor=f),(p||v)&&(n("delete"),n("has"),c&&n("get")),(v||a)&&n(h),r&&i.clear&&delete i.clear}return o[u]=f,yt({global:!0,forced:f!=l},o),le(f,u),r||e.setStrong(f,u,c),f}function as(t,e,n){var r,i,o,s,a=arguments.length,u=1<a?e:void 0;return ze(this),(r=void 0!==u)&&ze(u),null==t?new this:(i=[],r?(o=0,s=Xe(u,2<a?n:void 0,2),on(t,function(t){i.push(s(t,o++))})):on(t,i.push,i),new this(i))}var us=!y(function(){return Object.isExtensible(Object.preventExtensions({}))}),cs=e(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var e=b.f,r=a("meta"),i=0,o=Object.isExtensible||function(){return!0},s=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!g(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!c(t,r)){if(!o(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!c(t,r)){if(!o(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return us&&s.REQUIRED&&o(t)&&!c(t,r)&&n(t),t}};K[r]=!0}),hs=(cs.REQUIRED,cs.fastKey,cs.getWeakData,cs.onFreeze,b.f),ls=cs.fastKey,fs=$.set,ps=$.getterFor,ds={getConstructor:function(t,n,r,i){function o(t,e,n){var r,i,o=a(t),s=u(t,e);return s?s.value=n:(o.last=s={index:i=ls(e,!0),key:e,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=s),r&&(r.next=s),f?o.size++:t.size++,"F"!==i&&(o.index[i]=s)),t}var s=t(function(t,e){Qe(t,s,n),fs(t,{type:n,index:ve(null),first:void 0,last:void 0,size:0}),f||(t.size=0),null!=e&&on(e,t[i],t,r)}),a=ps(n),u=function(t,e){var n,r=a(t),i=ls(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return He(s.prototype,{clear:function(){for(var t=a(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,f?t.size=0:this.size=0},delete:function(t){var e=a(this),n=u(this,t);if(n){var r=n.next,i=n.previous;delete e.index[n.index],n.removed=!0,i&&(i.next=r),r&&(r.previous=i),e.first==n&&(e.first=r),e.last==n&&(e.last=i),f?e.size--:this.size--}return!!n},forEach:function(t,e){for(var n,r=a(this),i=Xe(t,1<arguments.length?e:void 0,3);n=n?n.next:r.first;)for(i(n.value,n.key,this);n&&n.removed;)n=n.previous},has:function(t){return!!u(this,t)}}),He(s.prototype,r?{get:function(t){var e=u(this,t);return e&&e.value},set:function(t,e){return o(this,0===t?0:t,e)}}:{add:function(t){return o(this,t=0===t?0:t,t)}}),f&&hs(s.prototype,"size",{get:function(){return a(this).size}}),s},setStrong:function(t,e,n){var r=e+" Iterator",i=ps(e),o=ps(r);de(t,e,function(t,e){fs(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),Ge(e)}};ss("Map",function(e){return function(t){return e(this,arguments.length?t:void 0)}},ds),Ot.Map;yt({target:"Map",stat:!0},{from:as});function vs(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}yt({target:"Map",stat:!0},{of:vs});function ys(){for(var t,e=d(this),n=ze(e.delete),r=!0,i=0,o=arguments.length;i<o;i++)t=n.call(e,arguments[i]),r=r&&t;return!!r}yt({target:"Map",proto:!0,real:!0,forced:s},{deleteAll:function(){return ys.apply(this,arguments)}});function gs(t){return Map.prototype.entries.call(t)}yt({target:"Map",proto:!0,real:!0,forced:s},{every:function(t,e){var n=d(this),r=gs(n),i=Xe(t,1<arguments.length?e:void 0,3);return!on(r,function(t,e){if(!i(e,t,n))return on.stop()},void 0,!0,!0).stopped}}),yt({target:"Map",proto:!0,real:!0,forced:s},{filter:function(t,e){var n=d(this),r=gs(n),i=Xe(t,1<arguments.length?e:void 0,3),o=new(ln(n,ht("Map"))),s=ze(o.set);return on(r,function(t,e){i(e,t,n)&&s.call(o,t,e)},void 0,!0,!0),o}}),yt({target:"Map",proto:!0,real:!0,forced:s},{find:function(t,e){var n=d(this),r=gs(n),i=Xe(t,1<arguments.length?e:void 0,3);return on(r,function(t,e){if(i(e,t,n))return on.stop(e)},void 0,!0,!0).result}}),yt({target:"Map",proto:!0,real:!0,forced:s},{findKey:function(t,e){var n=d(this),r=gs(n),i=Xe(t,1<arguments.length?e:void 0,3);return on(r,function(t,e){if(i(e,t,n))return on.stop(t)},void 0,!0,!0).result}}),yt({target:"Map",stat:!0},{groupBy:function(t,n){var r=new this;ze(n);var i=ze(r.has),o=ze(r.get),s=ze(r.set);return on(t,function(t){var e=n(t);i.call(r,e)?o.call(r,e).push(t):s.call(r,e,[t])}),r}});yt({target:"Map",proto:!0,real:!0,forced:s},{includes:function(i){return on(gs(d(this)),function(t,e){if((n=e)===(r=i)||n!=n&&r!=r)return on.stop();var n,r},void 0,!0,!0).stopped}}),yt({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;ze(e);var r=ze(n.set);return on(t,function(t){r.call(n,e(t),t)}),n}}),yt({target:"Map",proto:!0,real:!0,forced:s},{keyOf:function(n){return on(gs(d(this)),function(t,e){if(e===n)return on.stop(t)},void 0,!0,!0).result}}),yt({target:"Map",proto:!0,real:!0,forced:s},{mapKeys:function(t,e){var n=d(this),r=gs(n),i=Xe(t,1<arguments.length?e:void 0,3),o=new(ln(n,ht("Map"))),s=ze(o.set);return on(r,function(t,e){s.call(o,i(e,t,n),e)},void 0,!0,!0),o}}),yt({target:"Map",proto:!0,real:!0,forced:s},{mapValues:function(t,e){var n=d(this),r=gs(n),i=Xe(t,1<arguments.length?e:void 0,3),o=new(ln(n,ht("Map"))),s=ze(o.set);return on(r,function(t,e){s.call(o,t,i(e,t,n))},void 0,!0,!0),o}}),yt({target:"Map",proto:!0,real:!0,forced:s},{merge:function(t){for(var e=d(this),n=ze(e.set),r=0;r<arguments.length;)on(arguments[r++],n,e,!0);return e}}),yt({target:"Map",proto:!0,real:!0,forced:s},{reduce:function(n,t){var r=d(this),e=gs(r),i=arguments.length<2,o=i?void 0:t;if(ze(n),on(e,function(t,e){o=i?(i=!1,e):n(o,e,t,r)},void 0,!0,!0),i)throw TypeError("Reduce of empty map with no initial value");return o}}),yt({target:"Map",proto:!0,real:!0,forced:s},{some:function(t,e){var n=d(this),r=gs(n),i=Xe(t,1<arguments.length?e:void 0,3);return on(r,function(t,e){if(i(e,t,n))return on.stop()},void 0,!0,!0).stopped}}),yt({target:"Map",proto:!0,real:!0,forced:s},{update:function(t,e,n){var r=d(this),i=arguments.length;ze(e);var o=r.has(t);if(!o&&i<3)throw TypeError("Updating absent value");var s=o?r.get(t):ze(2<i?n:void 0)(t,r);return r.set(t,e(s,t,r)),r}});function ms(t,e,n){var r,i=d(this),o=2<arguments.length?n:void 0;if("function"!=typeof e&&"function"!=typeof o)throw TypeError("At least one callback required");return i.has(t)?(r=i.get(t),"function"==typeof e&&(r=e(r),i.set(t,r))):"function"==typeof o&&(r=o(),i.set(t,r)),r}yt({target:"Map",proto:!0,real:!0,forced:s},{upsert:ms}),yt({target:"Map",proto:!0,real:!0,forced:s},{updateOrInsert:ms});ss("Set",function(e){return function(t){return e(this,arguments.length?t:void 0)}},ds),Ot.Set;yt({target:"Set",stat:!0},{from:as}),yt({target:"Set",stat:!0},{of:vs});yt({target:"Set",proto:!0,real:!0,forced:s},{addAll:function(){return function(){for(var t=d(this),e=ze(t.add),n=0,r=arguments.length;n<r;n++)e.call(t,arguments[n]);return t}.apply(this,arguments)}}),yt({target:"Set",proto:!0,real:!0,forced:s},{deleteAll:function(){return ys.apply(this,arguments)}});function bs(t){return Set.prototype.values.call(t)}yt({target:"Set",proto:!0,real:!0,forced:s},{every:function(t,e){var n=d(this),r=bs(n),i=Xe(t,1<arguments.length?e:void 0,3);return!on(r,function(t){if(!i(t,t,n))return on.stop()},void 0,!1,!0).stopped}}),yt({target:"Set",proto:!0,real:!0,forced:s},{difference:function(t){var e=d(this),n=new(ln(e,ht("Set")))(e),r=ze(n.delete);return on(t,function(t){r.call(n,t)}),n}}),yt({target:"Set",proto:!0,real:!0,forced:s},{filter:function(t,e){var n=d(this),r=bs(n),i=Xe(t,1<arguments.length?e:void 0,3),o=new(ln(n,ht("Set"))),s=ze(o.add);return on(r,function(t){i(t,t,n)&&s.call(o,t)},void 0,!1,!0),o}}),yt({target:"Set",proto:!0,real:!0,forced:s},{find:function(t,e){var n=d(this),r=bs(n),i=Xe(t,1<arguments.length?e:void 0,3);return on(r,function(t){if(i(t,t,n))return on.stop(t)},void 0,!1,!0).result}}),yt({target:"Set",proto:!0,real:!0,forced:s},{intersection:function(t){var e=d(this),n=new(ln(e,ht("Set"))),r=ze(e.has),i=ze(n.add);return on(t,function(t){r.call(e,t)&&i.call(n,t)}),n}}),yt({target:"Set",proto:!0,real:!0,forced:s},{isDisjointFrom:function(t){var e=d(this),n=ze(e.has);return!on(t,function(t){if(!0===n.call(e,t))return on.stop()}).stopped}}),yt({target:"Set",proto:!0,real:!0,forced:s},{isSubsetOf:function(t){var e=function(t){var e=Je(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return d(e.call(t))}(this),n=d(t),r=n.has;return"function"!=typeof r&&(n=new(ht("Set"))(t),r=ze(n.has)),!on(e,function(t){if(!1===r.call(n,t))return on.stop()},void 0,!1,!0).stopped}}),yt({target:"Set",proto:!0,real:!0,forced:s},{isSupersetOf:function(t){var e=d(this),n=ze(e.has);return!on(t,function(t){if(!1===n.call(e,t))return on.stop()}).stopped}}),yt({target:"Set",proto:!0,real:!0,forced:s},{join:function(t){var e=d(this),n=bs(e),r=void 0===t?",":String(t),i=[];return on(n,i.push,i,!1,!0),i.join(r)}}),yt({target:"Set",proto:!0,real:!0,forced:s},{map:function(t,e){var n=d(this),r=bs(n),i=Xe(t,1<arguments.length?e:void 0,3),o=new(ln(n,ht("Set"))),s=ze(o.add);return on(r,function(t){s.call(o,i(t,t,n))},void 0,!1,!0),o}}),yt({target:"Set",proto:!0,real:!0,forced:s},{reduce:function(e,t){var n=d(this),r=bs(n),i=arguments.length<2,o=i?void 0:t;if(ze(e),on(r,function(t){o=i?(i=!1,t):e(o,t,t,n)},void 0,!1,!0),i)throw TypeError("Reduce of empty set with no initial value");return o}}),yt({target:"Set",proto:!0,real:!0,forced:s},{some:function(t,e){var n=d(this),r=bs(n),i=Xe(t,1<arguments.length?e:void 0,3);return on(r,function(t){if(i(t,t,n))return on.stop()},void 0,!1,!0).stopped}}),yt({target:"Set",proto:!0,real:!0,forced:s},{symmetricDifference:function(t){var e=d(this),n=new(ln(e,ht("Set")))(e),r=ze(n.delete),i=ze(n.add);return on(t,function(t){r.call(n,t)||i.call(n,t)}),n}}),yt({target:"Set",proto:!0,real:!0,forced:s},{union:function(t){var e=d(this),n=new(ln(e,ht("Set")))(e);return on(t,ze(n.add),n),n}});var _s=Math.floor;yt({target:"Number",stat:!0},{isInteger:function(t){return!g(t)&&isFinite(t)&&_s(t)===t}});Ot.Number.isInteger;var ws=function(t,e){return(ws=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Es(t,e){function n(){this.constructor=t}ws(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ts=function(){return(Ts=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Is(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function Ss(n,r){var i,o,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function Ns(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Cs(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function As(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Cs(arguments[e]));return t}function ks(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function Rs(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function Os(t){try{return Ls.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var Ps={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Ds=function(t,e){if(!t)throw xs(e)},xs=function(t){return new Error("Firebase Database ("+Ps.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},Ls={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Rs(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(191<i&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var h=s<<4&240|a>>2;if(r.push(h),64!==u){var l=a<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function Ms(t){return Fs(void 0,t)}function Fs(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=Fs(t[n],e[n]));return t}var Us=(js.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},js);function js(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}function Vs(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function qs(){return"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vs())}function Bs(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ws(){return!0===Ps.NODE_ADMIN}var Ks,Hs=(Es(Gs,Ks=Error),Gs);function Gs(t,e){var n=Ks.call(this,e)||this;return n.code=t,n.name="FirebaseError",Object.setPrototypeOf(n,Gs.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,zs.prototype.create),n}var zs=(Qs.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r,i=e[0]||{},o=this.service+"/"+t,s=this.errors[t],a=s?(r=i,s.replace(Ys,function(t,e){var n=r[e];return null!=n?n.toString():"<"+e+"?>"})):"Error",u=this.serviceName+": "+a+" ("+o+").",c=new Hs(o,u),h=0,l=Object.keys(i);h<l.length;h++){var f=l[h];"_"!==f.slice(-1)&&(f in c&&console.warn('Overwriting FirebaseError base field "'+f+'" can cause unexpected behavior.'),c[f]=i[f])}return c},Qs);function Qs(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var Ys=/\{\$([^}]+)}/g;function Xs(t){return JSON.parse(t)}function Js(t){return JSON.stringify(t)}function $s(t){var e={},n={},r={},i="";try{var o=t.split(".");e=Xs(Os(o[0])||""),n=Xs(Os(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function Zs(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ta(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function ea(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function na(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}var ra=(ia.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},ia.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++)s=r<40?r<20?(o=h^u&(c^h),1518500249):(o=u^c^h,1859775393):r<60?(o=u&c|h&(u|c),2400959708):(o=u^c^h,3395469782),i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},ia.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},ia.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},ia);function ia(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function oa(t,e){var n=new sa(t,e);return n.subscribe.bind(n)}var sa=(aa.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},aa.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},aa.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},aa.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"==typeof t&&null!==t)for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return 1}}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=ua),void 0===r.error&&(r.error=ua),void 0===r.complete&&(r.complete=ua);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},aa.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},aa.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},aa.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},aa.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},aa);function aa(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}function ua(){}function ca(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function ha(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}function la(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(ha(t,e,r)+"must be a valid function.")}function fa(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(ha(t,e,r)+"must be a valid context object.")}function pa(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}var da=(va.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},va.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},va.prototype.setServiceProps=function(t){return this.serviceProps=t,this},va);function va(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var ya="[DEFAULT]",ga=(ma.prototype.get=function(t){void 0===t&&(t=ya);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new Us;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},ma.prototype.getImmediate=function(t){var e=Ts({identifier:ya,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(o)return o;if(r)return null;throw Error("Service "+this.name+" is not available")}catch(t){if(r)return null;throw t}},ma.prototype.getComponent=function(){return this.component},ma.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if("EAGER"===(this.component=t).instantiationMode)try{this.getOrInitializeService(ya)}catch(t){}try{for(var r=Ns(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Cs(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},ma.prototype.clearInstance=function(t){void 0===t&&(t=ya),this.instancesDeferred.delete(t),this.instances.delete(t)},ma.prototype.delete=function(){return Is(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))];case 1:return t.sent(),[2]}})})},ma.prototype.isComponentSet=function(){return null!=this.component},ma.prototype.getOrInitializeService=function(t){var e,n=this.instances.get(t);return!n&&this.component&&(n=this.component.instanceFactory(this.container,(e=t)===ya?void 0:e),this.instances.set(t,n)),n||null},ma.prototype.normalizeInstanceIdentifier=function(t){return!this.component||this.component.multipleInstances?t:ya},ma);function ma(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}var ba,_a=(wa.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},wa.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},wa.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new ga(t,this);return this.providers.set(t,e),e},wa.prototype.getProviders=function(){return Array.from(this.providers.values())},wa);function wa(t){this.name=t,this.providers=new Map}function Ea(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var Ta,Ia,Sa=[];(Ia=Ta=Ta||{})[Ia.DEBUG=0]="DEBUG",Ia[Ia.VERBOSE=1]="VERBOSE",Ia[Ia.INFO=2]="INFO",Ia[Ia.WARN=3]="WARN",Ia[Ia.ERROR=4]="ERROR",Ia[Ia.SILENT=5]="SILENT";function Na(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Ra[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Ea(["["+i+"]  "+t.name+":"],n))}}var Ca,Aa={debug:Ta.DEBUG,verbose:Ta.VERBOSE,info:Ta.INFO,warn:Ta.WARN,error:Ta.ERROR,silent:Ta.SILENT},ka=Ta.INFO,Ra=((ba={})[Ta.DEBUG]="log",ba[Ta.VERBOSE]="log",ba[Ta.INFO]="info",ba[Ta.WARN]="warn",ba[Ta.ERROR]="error",ba),Oa=(Object.defineProperty(Pa.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Ta))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(Pa.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(Pa.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!0,configurable:!0}),Pa.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ea([this,Ta.DEBUG],t)),this._logHandler.apply(this,Ea([this,Ta.DEBUG],t))},Pa.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ea([this,Ta.VERBOSE],t)),this._logHandler.apply(this,Ea([this,Ta.VERBOSE],t))},Pa.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ea([this,Ta.INFO],t)),this._logHandler.apply(this,Ea([this,Ta.INFO],t))},Pa.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ea([this,Ta.WARN],t)),this._logHandler.apply(this,Ea([this,Ta.WARN],t))},Pa.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Ea([this,Ta.ERROR],t)),this._logHandler.apply(this,Ea([this,Ta.ERROR],t))},Pa);function Pa(t){this.name=t,this._logLevel=ka,this._logHandler=Na,this._userLogHandler=null,Sa.push(this)}function Da(t){var e="string"==typeof t?Aa[t]:t;Sa.forEach(function(t){t.logLevel=e})}var xa,La=((Ca={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Ca["bad-app-name"]="Illegal App name: '{$appName}",Ca["duplicate-app"]="Firebase App named '{$appName}' already exists",Ca["app-deleted"]="Firebase App named '{$appName}' already deleted",Ca["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Ca["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Ca),Ma=new zs("app","Firebase",La),Fa="@firebase/app",Ua="[DEFAULT]",ja=((xa={})[Fa]="fire-core",xa["@firebase/analytics"]="fire-analytics",xa["@firebase/auth"]="fire-auth",xa["@firebase/database"]="fire-rtdb",xa["@firebase/functions"]="fire-fn",xa["@firebase/installations"]="fire-iid",xa["@firebase/messaging"]="fire-fcm",xa["@firebase/performance"]="fire-perf",xa["@firebase/remote-config"]="fire-rc",xa["@firebase/storage"]="fire-gcs",xa["@firebase/firestore"]="fire-fst",xa["fire-js"]="fire-js",xa["firebase-wrapper"]="fire-js-all",xa),Va=new Oa("@firebase/app"),qa=(Object.defineProperty(Ba.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(Ba.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(Ba.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),Ba.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(t){return t.delete()}))}).then(function(){e.isDeleted_=!0})},Ba.prototype._getService=function(t,e){return void 0===e&&(e=Ua),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},Ba.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=Ua),this.container.getProvider(t).clearInstance(e)},Ba.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){Va.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},Ba.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},Ba.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Ma.create("app-deleted",{appName:this.name_})},Ba);function Ba(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Ms(t),this.container=new _a(e.name),this._addComponent(new da("app",function(){return o},"PUBLIC"));try{for(var s=Ns(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var u=a.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}qa.prototype.name&&qa.prototype.options||qa.prototype.delete||console.log("dc");var Wa="7.14.1";function Ka(u){var c={},h=new Map,l={__esModule:!0,initializeApp:function(t,e){void 0===e&&(e={});if("object"!=typeof e||null===e){e={name:e}}var n=e;void 0===n.name&&(n.name=Ua);var r=n.name;if("string"!=typeof r||!r)throw Ma.create("bad-app-name",{appName:String(r)});if(Zs(c,r))throw Ma.create("duplicate-app",{appName:r});var i=new u(t,n,l);return c[r]=i},app:f,registerVersion:function(t,e,n){var r,i=null!==(r=ja[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&a.push("and"),s&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Va.warn(a.join(" "))}p(new da(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:Da,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Ma.create("invalid-log-argument",{appName:name});!function(s,e){for(var t=function(t){var o=null;e&&e.level&&(o=Aa[e.level]),t.userLogHandler=null===s?null:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}}).filter(function(t){return t}).join(" ");e>=(null!=o?o:t.logLevel)&&s({level:Ta[e].toLowerCase(),message:i,args:n,type:t.name})}},n=0,r=Sa;n<r.length;n++){t(r[n])}}(t,e)},apps:null,SDK_VERSION:Wa,INTERNAL:{registerComponent:p,removeApp:function(t){delete c[t]},components:h,useAsService:function(t,e){return"serverAuth"!==e?e:null}}};function f(t){if(!Zs(c,t=t||Ua))throw Ma.create("no-app",{appName:t});return c[t]}function p(n){var e,t,r=n.name;if(h.has(r))return Va.debug("There were multiple attempts to register component "+r+"."),"PUBLIC"===n.type?l[r]:null;if(h.set(r,n),"PUBLIC"===n.type){var i=function(t){if(void 0===t&&(t=f()),"function"!=typeof t[r])throw Ma.create("invalid-app-argument",{appName:r});return t[r]()};void 0!==n.serviceProps&&Fs(i,n.serviceProps),l[r]=i,u.prototype[r]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,r).apply(this,n.multipleInstances?t:[])}}try{for(var o=Ns(Object.keys(c)),s=o.next();!s.done;s=o.next()){var a=s.value;c[a]._addComponent(n)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return"PUBLIC"===n.type?l[r]:null}return l.default=l,Object.defineProperty(l,"apps",{get:function(){return Object.keys(c).map(function(t){return c[t]})}}),f.App=u,l}var Ha=function t(){var e=Ka(qa);return e.INTERNAL=Ts(Ts({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Fs(e,t)},createSubscribe:oa,ErrorFactory:zs,deepExtend:Fs}),e}(),Ga=(za.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if("VERSION"!==(null==(e=t.getComponent())?void 0:e.type))return null;var e,n=t.getImmediate();return n.library+"/"+n.version}).filter(function(t){return t}).join(" ")},za);function za(t){this.container=t}if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Va.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Qa=self.firebase.SDK_VERSION;Qa&&0<=Qa.indexOf("LITE")&&Va.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Ya=Ha.initializeApp;Ha.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return}}()&&Va.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),Ya.apply(void 0,t)};var Xa,Ja,zl=Ha;(Xa=zl).INTERNAL.registerComponent(new da("platform-logger",function(t){return new Ga(t)},"PRIVATE")),Xa.registerVersion(Fa,"0.6.2",Ja),Xa.registerVersion("fire-js","");zl.registerVersion("firebase","7.14.1","app");(function(){var t,o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var s=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function c(t){var e,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}!function(t,e){if(e){var n=s;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&o(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",function(t){function a(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.a=null}function u(e){return e instanceof a?e:new a(function(t){t(e)})}if(t)return t;e.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var n=s.setTimeout;e.prototype.c=function(t){n(t,0)},e.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},e.prototype.f=function(t){this.c(function(){throw t})},a.prototype.f=function(){function t(e){return function(t){r||(r=!0,e.call(n,t))}}var n=this,r=!1;return{resolve:t(this.m),reject:t(this.g)}},a.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof a)this.s(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.u(t):this.h(t)}},a.prototype.u=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.w(e,t):this.h(t)},a.prototype.g=function(t){this.i(2,t)},a.prototype.h=function(t){this.i(1,t)},a.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},a.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)i.b(this.a[t]);this.a=null}};var i=new e;return a.prototype.s=function(t){var e=this.f();t.Oa(e.resolve,e.reject)},a.prototype.w=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},a.prototype.then=function(t,e){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(t){i(t)}}:t}var r,i,o=new a(function(t,e){r=t,i=e});return this.Oa(n(t,r),n(e,i)),o},a.prototype.catch=function(t){return this.then(void 0,t)},a.prototype.Oa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?i.b(n):this.a.push(n)},a.resolve=u,a.reject=function(n){return new a(function(t,e){e(n)})},a.race=function(i){return new a(function(t,e){for(var n=c(i),r=n.next();!r.done;r=n.next())u(r.value).Oa(t,e)})},a.all=function(t){var o=c(t),s=o.next();return s.done?u([]):new a(function(n,t){function e(e){return function(t){r[e]=t,0==--i&&n(r)}}for(var r=[],i=0;r.push(void 0),i++,u(s.value).Oa(e(r.length-1),t),!(s=o.next()).done;);})},a});var u=u||{},l=this||self,f=/^[\w+/_-]+[=]{0,2}$/,p=null;function a(){}function n(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function h(t){var e=n(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==n(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var r="closure_uid_"+(1e9*Math.random()>>>0),i=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function g(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function m(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:g).apply(null,arguments)}function b(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var _=Date.now||function(){return+new Date};function e(t,e){function n(){}n.prototype=e.prototype,t.Za=e.prototype,t.prototype=new n,t.prototype.constructor=t}function w(t,e,n){this.code=I+t,this.message=e||S[t]||"",this.a=n||null}function E(t){var e=t&&t.code;return e?new w(e.substring(I.length),t.message,t.serverResponse):null}e(w,Error),w.prototype.v=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},w.prototype.toJSON=function(){return this.v()};var T,I="auth/",S={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},N={hd:{Ra:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},pd:{Ra:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://securetoken.googleapis.com/v1/token",Ua:"https://identitytoolkit.googleapis.com/v2/",id:"p"},rd:{Ra:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},sd:{Ra:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Xa:"https://test-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function C(t){for(var e in N)if(N[e].id===t)return{firebaseEndpoint:(t=N[e]).Ra,secureTokenEndpoint:t.Xa,identityPlatformEndpoint:t.Ua};return null}function A(t){if(t)try{return t.$goog_Thenable}catch(t){return}}function k(t){if(Error.captureStackTrace)Error.captureStackTrace(this,k);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function R(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");k.call(this,n+t[r])}function O(t,e){throw new R("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function P(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function D(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function x(){this.b=this.a=null}T=C("__EID__")?"__EID__":void 0,e(k,Error),k.prototype.name="CustomError",e(R,k),R.prototype.name="AssertionError",P.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var L=new P(function(){return new M},function(t){t.reset()});function M(){this.next=this.b=this.a=null}x.prototype.add=function(t,e){var n=L.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},M.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},M.prototype.reset=function(){this.next=this.b=this.a=null};var F=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},U=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var j=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},V=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},q=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function B(t,e){return 0<=F(t,e)}function W(t,e){var n;return(n=0<=(e=F(t,e)))&&Array.prototype.splice.call(t,e,1),n}function K(n,r){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(n,function(t,e){r.call(void 0,t,e,n)&&1==Array.prototype.splice.call(n,e,1).length&&0})}function H(t){return Array.prototype.concat.apply([],arguments)}function G(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var z,Q=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},Y=/&/g,X=/</g,J=/>/g,$=/"/g,Z=/'/g,tt=/\x00/g,et=/[\x00&<>"']/;function nt(t,e){return-1!=t.indexOf(e)}function rt(t,e){return t<e?-1:e<t?1:0}t:{var it=l.navigator;if(it){var ot=it.userAgent;if(ot){z=ot;break t}}z=""}function st(t){return nt(z,t)}function at(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ut(t){for(var e in t)return;return 1}function ct(t){var e,n={};for(e in t)n[e]=t[e];return n}var ht="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ht.length;o++)n=ht[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ft(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||l).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;O("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function pt(t,e){this.a=t===yt&&e||"",this.b=vt}function dt(t){return t instanceof pt&&t.constructor===pt&&t.b===vt?t.a:(O("expected object of type Const, got '"+t+"'"),"type_error:Const")}pt.prototype.ra=!0,pt.prototype.qa=function(){return this.a},pt.prototype.toString=function(){return"Const{"+this.a+"}"};var vt={},yt={},gt=new pt(yt,"");function mt(t,e){this.a=t===It&&e||"",this.b=Tt}function bt(t){return t instanceof mt&&t.constructor===mt&&t.b===Tt?t.a:(O("expected object of type TrustedResourceUrl, got '"+t+"' of type "+n(t)),"type_error:TrustedResourceUrl")}function _t(t,n){var r=dt(t);if(!Et.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return t=r.replace(wt,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof pt?dt(t):encodeURIComponent(String(t))}),new mt(It,t)}mt.prototype.ra=!0,mt.prototype.qa=function(){return this.a.toString()},mt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var wt=/%{(\w+)}/g,Et=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Tt={},It={};function St(t,e){this.a=t===Rt&&e||"",this.b=kt}function Nt(t){return t instanceof St&&t.constructor===St&&t.b===kt?t.a:(O("expected object of type SafeUrl, got '"+t+"' of type "+n(t)),"type_error:SafeUrl")}St.prototype.ra=!0,St.prototype.qa=function(){return this.a.toString()},St.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ct=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function At(t){return t instanceof St?t:(t="object"==typeof t&&t.ra?t.qa():String(t),Ct.test(t)||(t="about:invalid#zClosurez"),new St(Rt,t))}var kt={},Rt={};function Ot(){this.a="",this.b=Dt}function Pt(t){return t instanceof Ot&&t.constructor===Ot&&t.b===Dt?t.a:(O("expected object of type SafeHtml, got '"+t+"' of type "+n(t)),"type_error:SafeHtml")}Ot.prototype.ra=!0,Ot.prototype.qa=function(){return this.a.toString()},Ot.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Dt={};function xt(t){var e=new Ot;return e.a=t,e}xt("<!DOCTYPE html>");var Lt=xt("");function Mt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ft(t){return et.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(Y,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(X,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(J,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace($,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(Z,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(tt,"&#0;"))),t}function Ut(t){return Ut[" "](t),t}xt("<br>"),Ut[" "]=a;var jt,Vt,qt=st("Opera"),Bt=st("Trident")||st("MSIE"),Wt=st("Edge"),Kt=Wt||Bt,Ht=st("Gecko")&&!(nt(z.toLowerCase(),"webkit")&&!st("Edge"))&&!(st("Trident")||st("MSIE"))&&!st("Edge"),Gt=nt(z.toLowerCase(),"webkit")&&!st("Edge");function zt(){var t=l.document;return t?t.documentMode:void 0}t:{var Qt="",Yt=(Vt=z,Ht?/rv:([^\);]+)(\)|;)/.exec(Vt):Wt?/Edge\/([\d\.]+)/.exec(Vt):Bt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Vt):Gt?/WebKit\/(\S+)/.exec(Vt):qt?/(?:Version)[ \/]?(\S+)/.exec(Vt):void 0);if(Yt&&(Qt=Yt?Yt[1]:""),Bt){var Xt=zt();if(null!=Xt&&Xt>parseFloat(Qt)){jt=String(Xt);break t}}jt=Qt}var Jt,$t={};function Zt(a){return t=a,e=function(){for(var t=0,e=Q(String(jt)).split("."),n=Q(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=rt(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||rt(0==o[2].length,0==s[2].length)||rt(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=$t,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}Jt=l.document&&Bt?zt():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var te=!Bt||9<=Number(Jt);function ee(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ne(n,t){at(t,function(t,e){t&&"object"==typeof t&&t.ra&&(t=t.qa()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:oe.hasOwnProperty(e)?n.setAttribute(oe[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}var re,ie,oe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function se(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!te&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Ft(s.name),'"'),s.type){o.push(' type="',Ft(s.type),'"');var a={};lt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=ae(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ne(o,s)),2<r.length&&function(e,n,t){function r(t){t&&n.appendChild("string"==typeof t?e.createTextNode(t):t)}for(var i=2;i<t.length;i++){var o=t[i];!h(o)||v(o)&&0<o.nodeType?r(o):U(ue(o)?G(o):o,r)}}(i,o,r),o}function ae(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ue(t){if(t&&"number"==typeof t.length){if(v(t))return"function"==typeof t.item||"string"==typeof t.item;if(d(t))return"function"==typeof t.item}}function ce(t){l.setTimeout(function(){throw t},0)}function he(){var t=l.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!st("Presto")&&(t=function(){var t,e,n=ae(document,"IFRAME");n.style.display="none",t=n,e=new mt(It,dt(gt)),ft(t,"HTMLIFrameElement"),t.src=bt(e).toString(),document.documentElement.appendChild(n);var r=n.contentWindow;(n=r.document).open(),n.write(Pt(Lt)),n.close();var i="callImmediate"+Math.random(),o="file:"==r.location.protocol?"*":r.location.protocol+"//"+r.location.host;n=m(function(t){"*"!=o&&t.origin!=o||t.data!=i||this.port1.onmessage()},this),r.addEventListener("message",n,!1),this.port1={},this.port2={postMessage:function(){r.postMessage(i,o)}}}),void 0===t||st("Trident")||st("MSIE"))return function(t){l.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Db;n.Db=null,t()}},function(t){r.next={Db:t},r=r.next,e.port2.postMessage(0)}}function le(t,e){ie||function(){if(l.Promise&&l.Promise.resolve){var t=l.Promise.resolve(void 0);ie=function(){t.then(de)}}else ie=function(){var t=de;!d(l.setImmediate)||l.Window&&l.Window.prototype&&!st("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(re=re||he())(t):l.setImmediate(t)}}(),fe||(ie(),fe=!0),pe.add(t,e)}var fe=!1,pe=new x;function de(){for(var t;n=e=void 0,n=null,(e=pe).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){ce(t)}D(L,t)}var e,n;fe=!1}function ve(t,e){if(this.a=ye,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=a)try{var n=this;t.call(e,function(t){Ae(n,ge,t)},function(t){if(!(t instanceof Le))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Ae(n,me,t)})}catch(t){Ae(this,me,t)}}var ye=0,ge=2,me=3;function be(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}be.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var _e=new P(function(){return new be},function(t){t.reset()});function we(t,e,n){var r=_e.get();return r.g=t,r.b=e,r.f=n,r}function Ee(t){if(t instanceof ve)return t;var e=new ve(a);return Ae(e,ge,t),e}function Te(n){return new ve(function(t,e){e(n)})}function Ie(t,e,n){ke(t,e,n,null)||le(b(e,t))}function Se(n){return new ve(function(r){var i=n.length,o=[];if(i)for(var t=function(t,e,n){i--,o[t]=e?{Mb:!0,value:n}:{Mb:!1,reason:n},0==i&&r(o)},e=0;e<n.length;e++)Ie(n[e],b(t,e,!0),b(t,e,!1));else r(o)})}function Ne(t,e){t.b||t.a!=ge&&t.a!=me||Re(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ce(t,i,o,s){var e=we(null,null,null);return e.a=new ve(function(n,r){e.g=i?function(t){try{var e=i.call(s,t);n(e)}catch(t){r(t)}}:n,e.b=o?function(t){try{var e=o.call(s,t);void 0===e&&t instanceof Le?r(t):n(e)}catch(t){r(t)}}:r}),Ne(e.a.c=t,e),e.a}function Ae(t,e,n){var r,i;t.a==ye&&(t===n&&(e=me,n=new TypeError("Promise cannot resolve to itself")),t.a=1,ke(n,t.Yc,t.Zc,t)||(t.i=n,t.a=e,t.c=null,Re(t),e!=me||n instanceof Le||(i=n,(r=t).g=!0,le(function(){r.g&&xe.call(null,i)}))))}function ke(t,e,n,r){if(t instanceof ve)return Ne(t,we(e||a,n||null,r)),1;if(A(t))return t.then(e,n,r),1;if(v(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),1}catch(t){return n.call(r,t),1}}function Re(t){t.h||(t.h=!0,le(t.ec,t))}function Oe(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Pe(t,e,n,r){if(n==me&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,De(e,n,r);else try{e.c?e.g.call(e.f):De(e,n,r)}catch(t){xe.call(null,t)}D(_e,e)}function De(t,e,n){e==ge?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}ve.prototype.then=function(t,e,n){return Ce(this,d(t)?t:null,d(e)?e:null,n)},ve.prototype.$goog_Thenable=!0,(t=ve.prototype).ma=function(t,e){return(t=we(t,t,e)).c=!0,Ne(this,t),this},t.o=function(t,e){return Ce(this,null,t,e)},t.cancel=function(t){if(this.a==ye){var e=new Le(t);le(function(){!function t(e,n){if(e.a==ye)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==ye&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):Oe(r),Pe(r,o,me,n)))}e.c=null}else Ae(e,me,n)}(this,e)},this)}},t.Yc=function(t){this.a=ye,Ae(this,ge,t)},t.Zc=function(t){this.a=ye,Ae(this,me,t)},t.ec=function(){for(var t;t=Oe(this);)Pe(this,t,this.a,this.i);this.h=!1};var xe=ce;function Le(t){k.call(this,t)}function Me(){this.wa=this.wa,this.na=this.na}e(Le,k);var Fe=0;function Ue(t){if(!t.wa&&(t.wa=!0,t.Ba(),0!=Fe))e=t,Object.prototype.hasOwnProperty.call(e,r)&&e[r]||(e[r]=++i);var e}Me.prototype.wa=!(Le.prototype.name="cancel"),Me.prototype.Ba=function(){if(this.na)for(;this.na.length;)this.na.shift()()};var je=Object.freeze||function(t){return t},Ve=!Bt||9<=Number(Jt),qe=Bt&&!Zt("9"),Be=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",a,e),l.removeEventListener("test",a,e)}catch(t){}return t}();function We(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ke(t,e){if(We.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Ht){t:{try{Ut(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:He[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}We.prototype.preventDefault=function(){this.defaultPrevented=!0},e(Ke,We);var He=je({2:"touch",3:"pen",4:"mouse"});Ke.prototype.preventDefault=function(){Ke.Za.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,qe)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},Ke.prototype.f=function(){return this.a};var Ge="closure_listenable_"+(1e6*Math.random()|0),ze=0;function Qe(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ta=i,this.key=++ze,this.ua=this.Na=!1}function Ye(t){t.ua=!0,t.listener=null,t.proxy=null,t.src=null,t.Ta=null}function Xe(t){this.src=t,this.a={},this.b=0}function Je(t,e){var n=e.type;n in t.a&&W(t.a[n],e)&&(Ye(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function $e(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ua&&o.listener==e&&o.capture==!!n&&o.Ta==r)return i}return-1}Xe.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=$e(t,e,r,i);return-1<s?(e=t[s],n||(e.Na=!1)):((e=new Qe(e,this.src,o,!!r,i)).Na=n,t.push(e)),e};var Ze="closure_lm_"+(1e6*Math.random()|0),tn={};function en(t,e,n,r,i){if(r&&r.once)rn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)en(t,e[o],n,r,i);else n=pn(n),t&&t[Ge]?vn(t,e,n,v(r)?!!r.capture:!!r,i):nn(t,e,n,!1,r,i)}function nn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s,a,u=v(i)?!!i.capture:!!i,c=ln(t);if(c||(t[Ze]=c=new Xe(t)),!(n=c.add(e,n,r,u,o)).proxy)if(s=hn,r=a=Ve?function(t){return s.call(a.src,a.listener,t)}:function(t){if(!(t=s.call(a.src,a.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)Be||(i=u),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(an(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function rn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)rn(t,e[o],n,r,i);else n=pn(n),t&&t[Ge]?yn(t,e,n,v(r)?!!r.capture:!!r,i):nn(t,e,n,!0,r,i)}function on(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)on(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=pn(n),t&&t[Ge]?(t=t.u,(e=String(e).toString())in t.a&&(-1<(n=$e(o=t.a[e],n,r,i))&&(Ye(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):(t=t&&ln(t))&&(e=t.a[e.toString()],t=-1,e&&(t=$e(e,n,r,i)),(n=-1<t?e[t]:null)&&sn(n))}function sn(t){if("number"!=typeof t&&t&&!t.ua){var e=t.src;if(e&&e[Ge])Je(e.u,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(an(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ln(e))?(Je(n,t),0==n.b&&(n.src=null,e[Ze]=null)):Ye(t)}}}function an(t){return t in tn?tn[t]:tn[t]="on"+t}function un(t,e,n,r){var i=!0;if((t=ln(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ua&&(o=cn(o,r),i=i&&!1!==o)}return i}function cn(t,e){var n=t.listener,r=t.Ta||t.src;return t.Na&&sn(t),n.call(r,e)}function hn(t,e){if(t.ua)return!0;if(Ve)return cn(t,new Ke(e,this));if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ke(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=un(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=un(r[i],t,!1,e),n=n&&o}return n}function ln(t){return(t=t[Ze])instanceof Xe?t:null}var fn="__closure_events_fn_"+(1e9*Math.random()>>>0);function pn(e){return d(e)?e:(e[fn]||(e[fn]=function(t){return e.handleEvent(t)}),e[fn])}function dn(){Me.call(this),this.u=new Xe(this),(this.Yb=this).eb=null}function vn(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function yn(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function gn(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ua&&s.capture==n){var a=s.listener,u=s.Ta||s.src;s.Na&&Je(t.u,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function mn(t,e,n){if(d(t))n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function bn(n){var r=null;return new ve(function(t,e){-1==(r=mn(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).o(function(t){throw l.clearTimeout(r),t})}function _n(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function wn(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.V||"function"!=typeof t.V){if(h(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function En(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof En)for(n=t.X(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Tn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];In(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)In(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function In(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e(dn,Me),dn.prototype[Ge]=!0,dn.prototype.addEventListener=function(t,e,n,r){en(this,t,e,n,r)},dn.prototype.removeEventListener=function(t,e,n,r){on(this,t,e,n,r)},dn.prototype.dispatchEvent=function(t){var e,n=this.eb;if(n)for(e=[];n;n=n.eb)e.push(n);n=this.Yb;var r=t.type||t;if("string"==typeof t)t=new We(t,n);else if(t instanceof We)t.target=t.target||n;else{var i=t;lt(t=new We(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=gn(s,r,!0,t)&&i}if(i=gn(s=t.b=n,r,!0,t)&&i,i=gn(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=gn(s=t.b=e[o],r,!1,t)&&i;return i},dn.prototype.Ba=function(){if(dn.Za.Ba.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ye(n[r]);delete e.a[t],e.b--}}this.eb=null},(t=En.prototype).V=function(){Tn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.X=function(){return Tn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return In(this.b,t)?this.b[t]:e},t.set=function(t,e){In(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Sn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Nn(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof Nn?(this.h=void 0!==e?e:t.h,Cn(this,t.f),this.i=t.i,this.b=t.b,An(this,t.l),this.c=t.c,kn(this,Qn(t.a)),this.g=t.g):t&&(n=String(t).match(Sn))?(this.h=!!e,Cn(this,n[1]||"",!0),this.i=xn(n[2]||""),this.b=xn(n[3]||"",!0),An(this,n[4]),this.c=xn(n[5]||"",!0),kn(this,n[6]||"",!0),this.g=xn(n[7]||"")):(this.h=!!e,this.a=new Bn(null,this.h))}function Cn(t,e,n){t.f=n?xn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function An(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.l=e}else t.l=null}function kn(t,e,n){var r,i;e instanceof Bn?(t.a=e,r=t.a,(i=t.h)&&!r.f&&(Wn(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Hn(this,e),zn(this,n,t))},r)),r.f=i):(n||(e=Ln(e,Vn)),t.a=new Bn(e,t.h))}function Rn(t,e,n){t.a.set(e,n)}function On(t,e){return t.a.get(e)}function Pn(t){return t instanceof Nn?new Nn(t):new Nn(t,void 0)}function Dn(t,e){var n=new Nn(null,void 0);return Cn(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function xn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ln(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Mn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Mn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Nn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ln(e,Fn,!0),":");var n=this.b;return!n&&"file"!=e||(t.push("//"),(e=this.i)&&t.push(Ln(e,Fn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ln(n,"/"==n.charAt(0)?jn:Un,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",Ln(n,qn)),t.join("")},Nn.prototype.resolve=function(t){var e=new Nn(this),n=!!t.f;n?Cn(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var r=t.c;if(n)An(e,t.l);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(nt(i,"./")||nt(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.a.toString(),n?kn(e,Qn(t.a)):n=!!t.g,n&&(e.g=t.g),e};var Fn=/[#\/\?@]/g,Un=/[#\?:]/g,jn=/[#\?]/g,Vn=/[#\?@]/g,qn=/#/g;function Bn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Wn(n){n.a||(n.a=new En,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Kn(t){var e=wn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Bn(null,void 0);t=_n(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?zn(n,i,o):n.add(i,o)}return n}function Hn(t,e){Wn(t),e=Yn(t,e),In(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,In((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Tn(t)))}function Gn(t,e){return Wn(t),e=Yn(t,e),In(t.a.b,e)}function zn(t,e,n){Hn(t,e),0<n.length&&(t.c=null,t.a.set(Yn(t,e),G(n)),t.b+=n.length)}function Qn(t){var e=new Bn;return e.c=t.c,t.a&&(e.a=new En(t.a),e.b=t.b),e}function Yn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Xn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&("function"!=typeof(s=n[i])&&(r.push(o),tr(i,r),r.push(":"),t(e,s,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":tr(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Jn,t,e),e.join("")}function Jn(){}(t=Bn.prototype).add=function(t,e){Wn(this),this.c=null,t=Yn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,r){Wn(this),this.a.forEach(function(t,e){U(t,function(t){n.call(r,t,e,this)},this)},this)},t.X=function(){Wn(this);for(var t=this.a.V(),e=this.a.X(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){Wn(this);var e=[];if("string"==typeof t)Gn(this,t)&&(e=H(e,this.a.get(Yn(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=H(e,t[n])}return e},t.set=function(t,e){return Wn(this),this.c=null,Gn(this,t=Yn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.V(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var $n={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Zn=/\uffff/.test("ï¿¿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function tr(t,e){e.push('"',t.replace(Zn,function(t){var e=$n[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),$n[t]=e),e}),'"')}function er(){var t=_r();return Bt&&Jt&&11==Jt||/Edge\/\d+/.test(t)}function nr(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function rr(t,e){e=e||l.window;var n="about:blank";t&&(n=Nt(At(t))),e.location.href=n}function ir(t){return!!((t=(t||_r()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function or(t){t=t||l.window;try{t.close()}catch(t){}}function sr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=_r().toLowerCase(),r&&(e.target=r,nt(n,"crios/")&&(e.target="_blank")),gr(_r())==vr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof St?n:At(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((st("iPhone")&&!st("iPod")&&!st("iPad")||st("iPad")||st("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(ft(s=ae(document,"A"),"HTMLAnchorElement"),e instanceof St||e instanceof St||(e="object"==typeof e&&e.ra?e.qa():String(e),Ct.test(e)||(e="about:invalid#zClosurez"),e=new St(Rt,e)),s.href=Nt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=Nt(e),s&&(Kt&&nt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t=xt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ft(t)+'">'),r=s.document)&&(r.write(Pt(t)),r.close())):(s=r.open(Nt(e),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var ar=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ur=/^[^@]+@[^@]+$/;function cr(){var e=null;return new ve(function(t){"complete"==l.document.readyState?t():(e=function(){t()},rn(window,"load",e))}).o(function(t){throw on(window,"load",e),t})}function hr(t){return t=t||_r(),!("file:"!==Sr()&&"ionic:"!==Sr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function lr(){var t=l.window;try{return t&&t!=t.top}catch(t){return}}function fr(){return void 0!==l.WorkerGlobalScope&&"function"==typeof l.importScripts}function pr(){return zl.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":zl.INTERNAL.hasOwnProperty("node")?"Node":fr()?"Worker":"Browser"}function dr(){var t=pr();return"ReactNative"===t||"Node"===t}var vr="Firefox",yr="Chrome";function gr(t){var e=t.toLowerCase();return nt(e,"opera/")||nt(e,"opr/")||nt(e,"opios/")?"Opera":nt(e,"iemobile")?"IEMobile":nt(e,"msie")||nt(e,"trident/")?"IE":nt(e,"edge/")?"Edge":nt(e,"firefox/")?vr:nt(e,"silk/")?"Silk":nt(e,"blackberry")?"Blackberry":nt(e,"webos")?"Webos":!nt(e,"safari/")||nt(e,"chrome/")||nt(e,"crios/")||nt(e,"android")?!nt(e,"chrome/")&&!nt(e,"crios/")||nt(e,"edge/")?nt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":yr:"Safari"}var mr={jd:"FirebaseCore-web",ld:"FirebaseUI-web"};function br(t,e){e=e||[];var n,r=[],i={};for(n in mr)i[mr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=pr())?r=gr(i=_r()):"Worker"===r&&(r=gr(i=_r())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function _r(){return l.navigator&&l.navigator.userAgent||""}function wr(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Er(){try{var t=l.localStorage,e=Rr();if(t)return t.setItem(e,"1"),t.removeItem(e),!er()||!!l.indexedDB}catch(t){return fr()&&!!l.indexedDB}return!1}function Tr(){return(Ir()||"chrome-extension:"===Sr()||hr())&&!dr()&&Er()&&!fr()}function Ir(){return"http:"===Sr()||"https:"===Sr()}function Sr(){return l.location&&l.location.protocol||null}function Nr(t){return!ir(t=t||_r())&&gr(t)!=vr}function Cr(t){return void 0===t?null:Xn(t)}function Ar(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function kr(t){if(null!==t)return JSON.parse(t)}function Rr(t){return t||Math.floor(1e9*Math.random()).toString()}function Or(t){return"Safari"!=gr(t=t||_r())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Pr(){var t=l.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Dr(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=_r(),e=pr(),this.b=ir(t)||"ReactNative"===e}function xr(){var t=l.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Lr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Mr(){return wr("fireauth.oauthhelper",l)||wr("fireauth.iframe",l)}Dr.prototype.get=function(){var t=l.navigator;return!t||"boolean"!=typeof t.onLine||!Ir()&&"chrome-extension:"!==Sr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Fr,Ur={};function jr(t){Ur[t]||(Ur[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Vr={};Object.defineProperty(Vr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Vr,"abcd",{configurable:!0,enumerable:!0,value:2}),Fr=2==Vr.abcd}catch(t){Fr=!1}function qr(t,e,n){Fr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Br(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&qr(t,n,e[n])}function Wr(t){var e={};return Br(e,t),e}function Kr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)qr(e,n,Kr(t[n]));return e}function Hr(t){var e=t&&(t[Xr]?"phone":null);if(!(e&&t&&t[Yr]))throw new w("internal-error","Internal assert: invalid MultiFactorInfo object");qr(this,"uid",t[Yr]),qr(this,"displayName",t[zr]||null);var n=null;t[Qr]&&(n=new Date(t[Qr]).toUTCString()),qr(this,"enrollmentTime",n),qr(this,"factorId",e)}function Gr(t){try{var e=new Jr(t)}catch(t){e=null}return e}Hr.prototype.v=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var zr="displayName",Qr="enrolledAt",Yr="mfaEnrollmentId",Xr="phoneInfo";function Jr(t){Hr.call(this,t),qr(this,"phoneNumber",t[Xr])}function $r(t){var e={},n=t[ni],r=t[ii],i=t[oi];if(t=Gr(t[ri]),!i||i!=ti&&i!=ei&&!n||i==ei&&!r||i==Zr&&!t)throw Error("Invalid checkActionCode response!");i==ei?(e[ai]=n||null,e[ci]=n||null,e[si]=r):(e[ai]=r||null,e[ci]=r||null,e[si]=n||null),e[ui]=t||null,qr(this,li,i),qr(this,hi,Kr(e))}e(Jr,Hr),Jr.prototype.v=function(){var t=Jr.Za.v.call(this);return t.phoneNumber=this.phoneNumber,t};var Zr="REVERT_SECOND_FACTOR_ADDITION",ti="EMAIL_SIGNIN",ei="VERIFY_AND_CHANGE_EMAIL",ni="email",ri="mfaInfo",ii="newEmail",oi="requestType",si="email",ai="fromEmail",ui="multiFactorInfo",ci="previousEmail",hi="data",li="operation";function fi(t){var e=On(t=Pn(t),pi)||null,n=On(t,di)||null,r=On(t,gi)||null;if(r=r&&bi[r]||null,!e||!n||!r)throw new w("argument-error",pi+", "+di+"and "+gi+" are required in a valid action code URL.");Br(this,{apiKey:e,operation:r,code:n,continueUrl:On(t,vi)||null,languageCode:On(t,yi)||null,tenantId:On(t,mi)||null})}var pi="apiKey",di="oobCode",vi="continueUrl",yi="languageCode",gi="mode",mi="tenantId",bi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Zr,signIn:ti,verifyAndChangeEmail:ei,verifyEmail:"VERIFY_EMAIL"};function _i(t){try{return new fi(t)}catch(t){return null}}function wi(t){var e=t[Ni];if(void 0===e)throw new w("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new w("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ei];if(n&&"object"==typeof n){e=n[ki];var r=n[Ci];if(n=n[Ai],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new w("argument-error",Ci+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new w("argument-error",Ai+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new w("argument-error",ki+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new w("missing-android-pkg-name")}}else if(void 0!==n)throw new w("argument-error",Ei+" property must be a non null object when specified.");if(this.f=null,(e=t[Si])&&"object"==typeof e){if("string"==typeof(e=e[Ri])&&e.length)this.f=e;else if(void 0!==e)throw new w("argument-error",Ri+" property must be a non empty string when specified.")}else if(void 0!==e)throw new w("argument-error",Si+" property must be a non null object when specified.");if(void 0!==(e=t[Ii])&&"boolean"!=typeof e)throw new w("argument-error",Ii+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Ti])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new w("argument-error",Ti+" property must be a non empty string when specified.");this.i=t||null}var Ei="android",Ti="dynamicLinkDomain",Ii="handleCodeInApp",Si="iOS",Ni="url",Ci="installApp",Ai="minimumVersion",ki="packageName",Ri="bundleId";function Oi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Pi=null;function Di(t){var e="";return function(r,t){function e(t){for(;i<r.length;){var e=r.charAt(i++),n=Pi[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!Pi){Pi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Pi[o]&&(Pi[o]=i)}}}();for(var i=0;;){var n=e(-1),o=e(0),s=e(64),a=e(64);if(64===a&&-1===n)break;t(n<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(t,function(t){e+=String.fromCharCode(t)}),e}function xi(t){var e=Mi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Li(t){try{return new xi(t)}catch(t){return null}}function Mi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(Di(t))}catch(t){}return null}xi.prototype.S=function(){return this.f},xi.prototype.i=function(){return this.b},xi.prototype.toString=function(){return this.g};var Fi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Ui=["client_id","response_type","scope","redirect_uri","state"],ji={kd:{Ha:"locale",ta:700,sa:600,ea:"facebook.com",Va:Ui},md:{Ha:null,ta:500,sa:750,ea:"github.com",Va:Ui},nd:{Ha:"hl",ta:515,sa:680,ea:"google.com",Va:Ui},td:{Ha:"lang",ta:485,sa:705,ea:"twitter.com",Va:Fi},gd:{Ha:"locale",ta:600,sa:600,ea:"apple.com",Va:[]}};function Vi(t){for(var e in ji)if(ji[e].ea==t)return ji[e];return null}function qi(t){var e={};e["facebook.com"]=Gi,e["google.com"]=Qi,e["github.com"]=zi,e["twitter.com"]=Yi;var n=t&&t[Wi];try{if(n)return e[n]?new e[n](t):new Hi(t);if(void 0!==t[Bi])return new Ki(t)}catch(t){}return null}var Bi="idToken",Wi="providerId";function Ki(t){var e=t[Wi];if(!e&&t[Bi]){var n=Li(t[Bi]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),qr(this,"providerId",e),qr(this,"isNewUser",n)}function Hi(t){Ki.call(this,t),qr(this,"profile",Kr((t=kr(t.rawUserInfo||"{}"))||{}))}function Gi(t){if(Hi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function zi(t){if(Hi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");qr(this,"username",this.profile&&this.profile.login||null)}function Qi(t){if(Hi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Yi(t){if(Hi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");qr(this,"username",t.screenName||null)}function Xi(t){var e=Pn(t),n=On(e,"link"),r=On(Pn(n),"link");return e=On(e,"deep_link_id"),On(Pn(e),"link")||e||r||n||t}function Ji(t,e){if(!t&&!e)throw new w("internal-error","Internal assert: no raw session string available");if(t&&e)throw new w("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?$i:Zi}e(Hi,Ki),e(Gi,Hi),e(zi,Hi),e(Qi,Hi),e(Yi,Hi);var $i="enroll",Zi="signin";function to(){}function eo(t,n){return t.then(function(t){if(t[Ks]){var e=Li(t[Ks]);if(!e||n!=e.h)throw new w("user-mismatch");return t}throw new w("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==I+"user-not-found"?new w("user-mismatch"):t})}function no(t,e){if(!e)throw new w("internal-error","failed to construct a credential");this.a=e,qr(this,"providerId",t),qr(this,"signInMethod",t)}function ro(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function io(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new no(t.providerId,t.pendingToken)}catch(t){}return null}function oo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&qr(this,"idToken",e.idToken),e.accessToken&&qr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&qr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new w("internal-error","failed to construct a credential");qr(this,"accessToken",e.oauthToken),qr(this,"secret",e.oauthTokenSecret)}qr(this,"providerId",t),qr(this,"signInMethod",n)}function so(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Kn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function ao(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new oo(t.providerId,e,t.signInMethod)}catch(t){}}return null}function uo(t,e){this.Oc=e||[],Br(this,{providerId:t,isOAuthProvider:!0}),this.Fb={},this.lb=(Vi(t)||{}).Ha||null,this.kb=null}function co(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new w("argument-error",'SAML provider IDs must be prefixed with "saml."');uo.call(this,t,[])}function ho(t){uo.call(this,t,Ui),this.a=[]}function lo(){ho.call(this,"facebook.com")}function fo(t){if(!t)throw new w("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new lo).credential({accessToken:e})}function po(){ho.call(this,"github.com")}function vo(t){if(!t)throw new w("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new po).credential({accessToken:e})}function yo(){ho.call(this,"google.com"),this.Aa("profile")}function go(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new yo).credential({idToken:n,accessToken:e})}function mo(){uo.call(this,"twitter.com",Fi)}function bo(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new w("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new oo("twitter.com",n,"twitter.com")}function _o(t,e,n){this.a=t,this.f=e,qr(this,"providerId","password"),qr(this,"signInMethod",n===Eo.EMAIL_LINK_SIGN_IN_METHOD?Eo.EMAIL_LINK_SIGN_IN_METHOD:Eo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function wo(t){return t&&t.email&&t.password?new _o(t.email,t.password,t.signInMethod):null}function Eo(){Br(this,{providerId:"password",isOAuthProvider:!1})}function To(t,e){if(!(e=Io(e)))throw new w("argument-error","Invalid email link!");return new _o(t,e.code,Eo.EMAIL_LINK_SIGN_IN_METHOD)}function Io(t){return(t=_i(t=Xi(t)))&&t.operation===ti?t:null}function So(t){if(!(t.bb&&t.ab||t.Ja&&t.da))throw new w("internal-error");this.a=t,qr(this,"providerId","phone"),this.ea="phone",qr(this,"signInMethod","phone")}function No(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var n={};return U(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(t){e[t]&&(n[t]=e[t])}),new So(n)}return null}function Co(t){return t.a.Ja&&t.a.da?{temporaryProof:t.a.Ja,phoneNumber:t.a.da}:{sessionInfo:t.a.bb,code:t.a.ab}}function Ao(t){try{this.a=t||zl.auth()}catch(t){throw new w("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Br(this,{providerId:"phone",isOAuthProvider:!1})}function ko(t,e){if(!t)throw new w("missing-verification-id");if(!e)throw new w("missing-verification-code");return new So({bb:t,ab:e})}function Ro(t){if(t.temporaryProof&&t.phoneNumber)return new So({Ja:t.temporaryProof,da:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return go(o,n);case"facebook.com":return fo(n);case"github.com":return vo(n);case"twitter.com":return bo(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new no(e,s):new oo(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new ho(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Oo(t){if(!t.isOAuthProvider)throw new w("invalid-oauth-provider")}function Po(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new w("invalid-auth-event");if(this.g&&this.a)throw new w("invalid-auth-event");if(this.g&&!this.f)throw new w("invalid-auth-event")}function Do(t){return(t=t||{}).type?new Po(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&E(t.error),t.postBody,t.tenantId):null}function xo(){this.b=null,this.a=[]}Ji.prototype.Fa=function(){return this.a?Ee(this.a):Ee(this.b)},Ji.prototype.v=function(){return this.type==$i?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},to.prototype.ia=function(){},to.prototype.b=function(){},to.prototype.c=function(){},to.prototype.v=function(){},no.prototype.ia=function(t){return ha(t,ro(this))},no.prototype.b=function(t,e){var n=ro(this);return n.idToken=e,la(t,n)},no.prototype.c=function(t,e){return eo(fa(t,ro(this)),e)},no.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},oo.prototype.ia=function(t){return ha(t,so(this))},oo.prototype.b=function(t,e){var n=so(this);return n.idToken=e,la(t,n)},oo.prototype.c=function(t,e){return eo(fa(t,so(this)),e)},oo.prototype.v=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},uo.prototype.Ia=function(t){return this.Fb=ct(t),this},e(co,uo),e(ho,uo),ho.prototype.Aa=function(t){return B(this.a,t)||this.a.push(t),this},ho.prototype.Nb=function(){return G(this.a)},ho.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new w("argument-error","credential failed: must provide the ID token and/or the access token.");return new oo(this.providerId,n,this.providerId)},e(lo,ho),qr(lo,"PROVIDER_ID","facebook.com"),qr(lo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),e(po,ho),qr(po,"PROVIDER_ID","github.com"),qr(po,"GITHUB_SIGN_IN_METHOD","github.com"),e(yo,ho),qr(yo,"PROVIDER_ID","google.com"),qr(yo,"GOOGLE_SIGN_IN_METHOD","google.com"),e(mo,uo),qr(mo,"PROVIDER_ID","twitter.com"),qr(mo,"TWITTER_SIGN_IN_METHOD","twitter.com"),_o.prototype.ia=function(t){return this.signInMethod==Eo.EMAIL_LINK_SIGN_IN_METHOD?za(t,_a,{email:this.a,oobCode:this.f}):za(t,Ba,{email:this.a,password:this.f})},_o.prototype.b=function(t,e){return this.signInMethod==Eo.EMAIL_LINK_SIGN_IN_METHOD?za(t,wa,{idToken:e,email:this.a,oobCode:this.f}):za(t,xa,{idToken:e,email:this.a,password:this.f})},_o.prototype.c=function(t,e){return eo(this.ia(t),e)},_o.prototype.v=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Br(Eo,{PROVIDER_ID:"password"}),Br(Eo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Br(Eo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),So.prototype.ia=function(t){return t.cb(Co(this))},So.prototype.b=function(t,e){var n=Co(this);return n.idToken=e,za(t,Ka,n)},So.prototype.c=function(t,e){var n=Co(this);return n.operation="REAUTH",eo(t=za(t,Ha,n),e)},So.prototype.v=function(){var t={providerId:"phone"};return this.a.bb&&(t.verificationId=this.a.bb),this.a.ab&&(t.verificationCode=this.a.ab),this.a.Ja&&(t.temporaryProof=this.a.Ja),this.a.da&&(t.phoneNumber=this.a.da),t},Ao.prototype.cb=function(i,n){var o=this.a.b;return Ee(n.verify()).then(function(r){if("string"!=typeof r)throw new w("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(n.type){case"recaptcha":var t=v(i)?i.session:null,e=v(i)?i.phoneNumber:i;return(t&&t.type==$i?t.Fa().then(function(t){return za(o,Ma,{idToken:t,phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r}}).then(function(t){return t.phoneSessionInfo.sessionInfo})}):t&&t.type==Zi?t.Fa().then(function(t){return e=o,n={mfaPendingCredential:t,mfaEnrollmentId:i.multiFactorHint&&i.multiFactorHint.uid||i.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}},za(e,Fa,n).then(function(t){return t.phoneResponseInfo.sessionInfo});var e,n}):za(o,Pa,{phoneNumber:e,recaptchaToken:r})).then(function(t){return"function"==typeof n.reset&&n.reset(),t},function(t){throw"function"==typeof n.reset&&n.reset(),t});default:throw new w("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Br(Ao,{PROVIDER_ID:"phone"}),Br(Ao,{PHONE_SIGN_IN_METHOD:"phone"}),Po.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Po.prototype.S=function(){return this.h},Po.prototype.v=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.v()}};var Lo,Mo=null;function Fo(t){var e="unauthorized-domain",n=void 0,r=Pn(t);t=r.b,"chrome-extension"==(r=r.f)?n=Mt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Mt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",w.call(this,e,n)}function Uo(t,e,n){w.call(this,t,n),(t=e||{}).Gb&&qr(this,"email",t.Gb),t.da&&qr(this,"phoneNumber",t.da),t.credential&&qr(this,"credential",t.credential),t.Wb&&qr(this,"tenantId",t.Wb)}function jo(t){if(t.code){var e=t.code||"";0==e.indexOf(I)&&(e=e.substring(I.length));var n={credential:Ro(t),Wb:t.tenantId};if(t.email)n.Gb=t.email;else if(t.phoneNumber)n.da=t.phoneNumber;else if(!n.credential)return new w(e,t.message||void 0);return new Uo(e,n,t.message)}return null}function Vo(){}function qo(t){return t.c||(t.c=t.b())}function Bo(){}function Wo(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function Ko(){}function Ho(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=m(this.oc,this),this.a.onerror=m(this.Pb,this),this.a.onprogress=m(this.pc,this),this.a.ontimeout=m(this.tc,this)}function Go(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function zo(t,e,n){this.reset(t,e,n,void 0,void 0)}function Qo(t){this.f=t,this.b=this.c=this.a=null}function Yo(t,e){this.name=t,this.value=e}e(Fo,w),e(Uo,w),Uo.prototype.v=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.v();return e&&lt(t,e),t},Uo.prototype.toJSON=function(){return this.v()},Vo.prototype.c=null,e(Bo,Vo),Bo.prototype.a=function(){var t=Wo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Bo.prototype.b=function(){var t={};return Wo(this)&&(t[0]=!0,t[1]=!0),t},Lo=new Bo,e(Ko,Vo),Ko.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Ho;throw Error("Unsupported browser")},Ko.prototype.b=function(){return{}},(t=Ho.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.oc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Go(this,4)},t.Pb=function(){this.status=500,this.response=this.responseText="",Go(this,4)},t.tc=function(){this.Pb()},t.pc=function(){this.status=200,Go(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},zo.prototype.a=null,zo.prototype.reset=function(t,e,n,r,i){delete this.a},Yo.prototype.toString=function(){return this.name};var Xo=new Yo("SEVERE",1e3),Jo=new Yo("WARNING",900),$o=new Yo("CONFIG",700),Zo=new Yo("FINE",500);Qo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(O("Root logger has no level set."),null)}(this).value)for(d(e)&&(e=e()),t=new zo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ts,es={},ns=null;function rs(t){var e;if(ns||(ns=new Qo(""),(es[""]=ns).c=$o),!(e=es[t])){e=new Qo(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=rs(t.substr(0,n))).b||(n.b={}),(n.b[r]=e).a=n,es[t]=e}return e}function is(t,e){t&&t.log(Zo,e,void 0)}function os(t){this.f=t}function ss(t){dn.call(this),this.s=t,this.readyState=as,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=rs("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}e(os,Vo),os.prototype.a=function(){return new ss(this.f)},os.prototype.b=(ts={},function(){return ts}),e(ss,dn);var as=0;function us(t){t.c.read().then(t.nc.bind(t)).catch(t.Sa.bind(t))}function cs(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,hs(t)}function hs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ls(t){dn.call(this),this.headers=new En,this.D=t||null,this.c=!1,this.B=this.a=null,this.h=this.P=this.l="",this.f=this.O=this.i=this.N=!1,this.g=0,this.s=null,this.m=fs,this.w=this.R=!1}(t=ss.prototype).open=function(t,e){if(this.readyState!=as)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,hs(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.s.fetch(new Request(this.g,e)).then(this.sc.bind(this),this.Sa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,cs(this,!1)),this.readyState=as},t.sc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,hs(this)),this.a&&(this.readyState=3,hs(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.qc.bind(this),this.Sa.bind(this)):void 0!==l.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,us(this)):t.text().then(this.rc.bind(this),this.Sa.bind(this)))))},t.nc=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?cs(this,!0):hs(this),3==this.readyState&&us(this)}},t.rc=function(t){this.a&&(this.response=this.responseText=t,cs(this,!0))},t.qc=function(t){this.a&&(this.response=t,cs(this,!0))},t.Sa=function(t){var e=this.h;e&&e.log(Jo,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&cs(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(Jo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(Jo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},e(ls,dn);var fs="";ls.prototype.b=rs("goog.net.XhrIo");var ps=/^https?$/i,ds=["POST","PUT"];function vs(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.P=n,e.N=!1,e.c=!0,e.a=e.D?e.D.a():Lo.a(),e.B=e.D?qo(e.D):qo(Lo),e.a.onreadystatechange=m(e.Sb,e);try{is(e.b,Is(e,"Opening Xhr")),e.O=!0,e.a.open(n,String(t),!0),e.O=!1}catch(t){return is(e.b,Is(e,"Error opening Xhr: "+t.message)),void gs(e,t)}t=r||"";var o,s=new En(e.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||"string"==typeof t)U(t,e,void 0);else for(var n=wn(t),r=_n(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){s.set(e,t)}),i=function(t){t:{for(var e=ys,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(s.X()),r=l.FormData&&t instanceof l.FormData,!B(ds,n)||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.R&&(e.a.withCredentials=e.R);try{ws(e),0<e.g&&(e.w=(o=e.a,Bt&&Zt(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),is(e.b,Is(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.w)),e.w?(e.a.timeout=e.g,e.a.ontimeout=m(e.Ka,e)):e.s=mn(e.Ka,e.g,e)),is(e.b,Is(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){is(e.b,Is(e,"Send error: "+t.message)),gs(e,t)}}function ys(t){return"content-type"==t.toLowerCase()}function gs(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ms(t),_s(t)}function ms(t){t.N||(t.N=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function bs(e){if(e.c&&void 0!==u)if(e.B[1]&&4==Es(e)&&2==Ts(e))is(e.b,Is(e,"Local request error detected and ignored"));else if(e.i&&4==Es(e))mn(e.Sb,0,e);else if(e.dispatchEvent("readystatechange"),4==Es(e)){is(e.b,Is(e,"Request complete")),e.c=!1;try{var t,n=Ts(e);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.l).match(Sn)[1]||null;if(!o&&l.self&&l.self.location){var s=l.self.location.protocol;o=s.substr(0,s.length-1)}i=!ps.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var a=2<Es(e)?e.a.statusText:""}catch(t){is(e.b,"Can not get status: "+t.message),a=""}e.h=a+" ["+Ts(e)+"]",ms(e)}}finally{_s(e)}}}function _s(e,t){if(e.a){ws(e);var n=e.a,r=e.B[0]?a:null;e.a=null,e.B=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(Xo,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function ws(t){t.a&&t.w&&(t.a.ontimeout=null),t.s&&(l.clearTimeout(t.s),t.s=null)}function Es(t){return t.a?t.a.readyState:0}function Ts(t){try{return 2<Es(t)?t.a.status:-1}catch(t){return-1}}function Is(t,e){return e+" ["+t.P+" "+t.l+" "+Ts(t)+"]"}function Ss(t){var e=Ms;this.g=[],this.w=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.i=!1,this.h=0,this.b=null,this.l=0}function Ns(t,e,n){t.a=!0,t.c=n,t.f=!e,Rs(t)}function Cs(t){if(t.a){if(!t.u)throw new Os;t.u=!1}}function As(t,e,n,r){t.g.push([e,n,r]),t.a&&Rs(t)}function ks(t){return q(t.g,function(t){return d(t[1])})}function Rs(e){if(e.h&&e.a&&ks(e)){var n=e.h,r=xs[n];r&&(l.clearTimeout(r.a),delete xs[n]),e.h=0}e.b&&(e.b.l--,delete e.b),n=e.c;for(var t=r=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],s=i[1];if(i=i[2],o=e.f?s:o)try{var a=o.call(i||e.s,n);void 0!==a&&(e.f=e.f&&(a==n||a instanceof Error),e.c=n=a),(A(n)||"function"==typeof l.Promise&&n instanceof l.Promise)&&(t=!0,e.i=!0)}catch(t){n=t,e.f=!0,ks(e)||(r=!0)}}e.c=n,t&&(a=m(e.m,e,!0),t=m(e.m,e,!1),n instanceof Ss?(As(n,a,t),n.B=!0):n.then(a,t)),r&&(n=new Ds(n),xs[n.a]=n,e.h=n.a)}function Os(){k.call(this)}function Ps(){k.call(this)}function Ds(t){this.a=l.setTimeout(m(this.c,this),0),this.b=t}(t=ls.prototype).Ka=function(){void 0!==u&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",is(this.b,Is(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(is(this.b,Is(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),_s(this))},t.Ba=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),_s(this,!0)),ls.Za.Ba.call(this)},t.Sb=function(){this.wa||(this.O||this.i||this.f?bs(this):this.Hc())},t.Hc=function(){bs(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case fs:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Xo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return is(this.b,"Can not get response: "+t.message),null}},Ss.prototype.cancel=function(t){if(this.a)this.c instanceof Ss&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())}this.w?this.w.call(this.s,this):this.u=!0,this.a||(t=new Ps,Cs(this),Ns(this,!1,t))}},Ss.prototype.m=function(t,e){this.i=!1,Ns(this,t,e)},Ss.prototype.then=function(t,e,n){var r,i,o=new ve(function(t,e){r=t,i=e});return As(this,r,function(t){t instanceof Ps?o.cancel():i(t)}),o.then(t,e,n)},Ss.prototype.$goog_Thenable=!0,e(Os,k),Os.prototype.message="Deferred has already fired",Os.prototype.name="AlreadyCalledError",e(Ps,k),Ps.prototype.message="Deferred was canceled",Ps.prototype.name="CanceledError",Ds.prototype.c=function(){throw delete xs[this.a],this.b};var xs={};function Ls(t){var e,n,r,i,o,s=document,a=bt(t).toString(),u=ae(document,"SCRIPT"),c={Tb:u,Ka:void 0},h=new Ss(c);return e=window.setTimeout(function(){Fs(u,!0);var t=new Vs(js,"Timeout reached for loading script "+a);Cs(h),Ns(h,!1,t)},5e3),c.Ka=e,u.onload=u.onreadystatechange=function(){u.readyState&&"loaded"!=u.readyState&&"complete"!=u.readyState||(Fs(u,!1,e),Cs(h),Ns(h,!0,null))},u.onerror=function(){Fs(u,!0,e);var t=new Vs(Us,"Error while loading script "+a);Cs(h),Ns(h,!1,t)},lt(c={},{type:"text/javascript",charset:"UTF-8"}),ne(u,c),r=t,ft(n=u,"HTMLScriptElement"),n.src=bt(r),null===p&&(p=(r=(r=l.document).querySelector&&r.querySelector("script[nonce]"))&&(r=r.nonce||r.getAttribute("nonce"))&&f.test(r)?r:""),(r=p)&&n.setAttribute("nonce",r),((o=((i=s)||document).getElementsByTagName("HEAD"))&&0!=o.length?o[0]:i.documentElement).appendChild(u),h}function Ms(){if(this&&this.Tb){var t=this.Tb;t&&"SCRIPT"==t.tagName&&Fs(t,!0,this.Ka)}}function Fs(t,e,n){null!=n&&l.clearTimeout(n),t.onload=a,t.onerror=a,t.onreadystatechange=a,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Us=0,js=1;function Vs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),k.call(this,n),this.code=t}function qs(t){this.f=t}function Bs(t,e,n){if(this.c=t,t=e||{},this.u=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Hs,this.g=ct(t.secureTokenHeaders||Gs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.l=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.i=t.firebaseTimeout||zs,this.a=ct(t.firebaseHeaders||Qs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==pr(),!(n=l.XMLHttpRequest||n&&zl.INTERNAL.node&&zl.INTERNAL.node.XMLHttpRequest)&&!fr())throw new w("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,fr()?this.f=new os(self):dr()?this.f=new qs(n):this.f=new Ko,this.b=null}e(Vs,k),e(qs,Vo),qs.prototype.a=function(){return new this.f},qs.prototype.b=function(){return{}};var Ws,Ks="idToken",Hs=new Dr(3e4,6e4),Gs={"Content-Type":"application/x-www-form-urlencoded"},zs=new Dr(3e4,6e4),Qs={"Content-Type":"application/json"};function Ys(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Xs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Js(t,e,n,r,i,o,s){var a;(t=!((a=gr(a=_r())==yr&&(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&a<30||Bt&&Jt&&!(9<Jt))||fr()?m(t.w,t):(Ws=Ws||new ve(function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{l[Zs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){As(t,null,e,void 0)}(Ls(_t($s,{onload:Zs})),function(){e(Error("CORS_UNSUPPORTED"))})}}(t,e)}),m(t.s,t)))(e,n,r,i,o,s)}Bs.prototype.S=function(){return this.b},Bs.prototype.w=function(t,n,e,r,i,o){if(fr()&&(void 0===l.fetch||void 0===l.Headers||void 0===l.Request))throw new w("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ls(this.f);if(o){s.g=Math.max(0,o);var a=setTimeout(function(){s.dispatchEvent("timeout")},o)}vn(s,"complete",function(){a&&clearTimeout(a);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return is(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),yn(s,"ready",function(){a&&clearTimeout(a),Ue(this)}),yn(s,"timeout",function(){a&&clearTimeout(a),Ue(this),n&&n(null)}),vs(s,t,e,r,i)};var $s=new pt(yt,"https://apis.google.com/js/client.js?onload=%{onload}"),Zs="__fcb"+Math.floor(1e6*Math.random()).toString();function ta(t,e,n,r,i,o,s){var a=Pn(e+n);Rn(a,"key",t.c),s&&Rn(a,"cb",_().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Rn(a,c,i[c]);return new ve(function(e,n){Js(t,a.toString(),function(t){t?t.error?n(Ya(t,o||{})):e(t):n(new w("network-request-failed"))},r,u?void 0:Xn(Ar(i)),t.a,t.i.get())})}function ea(t){if("string"!=typeof(t=t.email)||!ur.test(t))throw new w("invalid-email")}function na(t){"email"in t&&ea(t)}function ra(t){if(!t[Ks]){if(t.mfaPendingCredential)throw new w("multi-factor-auth-required",null,ct(t));throw new w("internal-error")}}function ia(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new w("internal-error")}else{if(!t.sessionInfo)throw new w("missing-verification-id");if(!t.code)throw new w("missing-verification-code")}}Bs.prototype.s=function(t,n,r,i,o){var s=this;Ws.then(function(){window.gapi.client.setApiKey(s.c);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:r,body:i,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).o(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Bs.prototype.vb=function(){return za(this,La,{})},Bs.prototype.xb=function(t,e){return za(this,Da,{idToken:t,email:e})},Bs.prototype.yb=function(t,e){return za(this,xa,{idToken:t,password:e})};var oa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function sa(t){if(!t.phoneVerificationInfo)throw new w("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new w("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new w("missing-verification-code")}function aa(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new w("internal-error")}function ua(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Gn(t=new Bn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function ca(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=jo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=jo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=jo(t)):t.errorMessage&&(e=Qa(t.errorMessage)),e)throw e;ra(t)}function ha(t,e){return e.returnIdpCredential=!0,za(t,Ua,e)}function la(t,e){return e.returnIdpCredential=!0,za(t,Va,e)}function fa(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,za(t,ja,e)}function pa(t){if(!t.oobCode)throw new w("invalid-action-code")}(t=Bs.prototype).zb=function(t,r){var i={idToken:t},o=[];return at(oa,function(t,e){var n=r[e];null===n?o.push(t):e in r&&(i[e]=n)}),o.length&&(i.deleteAttribute=o),za(this,Da,i)},t.rb=function(t,e){return lt(t={requestType:"PASSWORD_RESET",email:t},e),za(this,Aa,t)},t.sb=function(t,e){return lt(t={requestType:"EMAIL_SIGNIN",email:t},e),za(this,Sa,t)},t.qb=function(t,e){return lt(t={requestType:"VERIFY_EMAIL",idToken:t},e),za(this,Na,t)},t.Ab=function(t,e,n){return lt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),za(this,Ca,t)},t.cb=function(t){return za(this,Wa,t)},t.jb=function(t,e){return za(this,Oa,{oobCode:t,newPassword:e})},t.Pa=function(t){return za(this,va,{oobCode:t})},t.fb=function(t){return za(this,da,{oobCode:t})};var da={endpoint:"setAccountInfo",A:pa,Y:"email",C:!0},va={endpoint:"resetPassword",A:pa,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new w("internal-error")},C:!0},ya={endpoint:"signupNewUser",A:function(t){if(ea(t),!t.password)throw new w("weak-password")},G:ra,U:!0,C:!0},ga={endpoint:"createAuthUri",C:!0},ma={endpoint:"deleteAccount",M:["idToken"]},ba={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],A:function(t){if("array"!=n(t.deleteProvider))throw new w("internal-error")}},_a={endpoint:"emailLinkSignin",M:["email","oobCode"],A:ea,G:ra,U:!0,C:!0},wa={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],A:ea,G:ra,U:!0},Ea={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],A:sa,G:ra,C:!0,La:!0},Ta={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],A:sa,G:ra,C:!0,La:!0},Ia={endpoint:"getAccountInfo"},Sa={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new w("internal-error");ea(t)},Y:"email",C:!0},Na={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new w("internal-error")},Y:"email",C:!0},Ca={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new w("internal-error")},Y:"email",C:!0},Aa={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new w("internal-error");ea(t)},Y:"email",C:!0},ka={hb:!0,endpoint:"getProjectConfig",Rb:"GET"},Ra={hb:!0,endpoint:"getRecaptchaParam",Rb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new w("internal-error")}},Oa={endpoint:"resetPassword",A:pa,Y:"email",C:!0},Pa={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Y:"sessionInfo",C:!0},Da={endpoint:"setAccountInfo",M:["idToken"],A:na,U:!0},xa={endpoint:"setAccountInfo",M:["idToken"],A:function(t){if(na(t),!t.password)throw new w("weak-password")},G:ra,U:!0},La={endpoint:"signupNewUser",G:ra,U:!0,C:!0},Ma={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new w("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new w("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new w("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new w("internal-error")},C:!0,La:!0},Fa={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new w("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new w("internal-error")},C:!0,La:!0},Ua={endpoint:"verifyAssertion",A:aa,Wa:ua,G:ca,U:!0,C:!0},ja={endpoint:"verifyAssertion",A:aa,Wa:ua,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new w("user-not-found");if(t.errorMessage)throw Qa(t.errorMessage);ra(t)},U:!0,C:!0},Va={endpoint:"verifyAssertion",A:function(t){if(aa(t),!t.idToken)throw new w("internal-error")},Wa:ua,G:ca,U:!0},qa={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new w("invalid-custom-token")},G:ra,U:!0,C:!0},Ba={endpoint:"verifyPassword",A:function(t){if(ea(t),!t.password)throw new w("wrong-password")},G:ra,U:!0,C:!0},Wa={endpoint:"verifyPhoneNumber",A:ia,G:ra,C:!0},Ka={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new w("internal-error");ia(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",jo(t);ra(t)}},Ha={Eb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ia,G:ra,C:!0},Ga={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ks]^!!t.refreshToken)throw new w("internal-error")},C:!0,La:!0};function za(t,e,n){if(!function(t,e){if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return}return 1}}(n,e.M))return Te(new w("internal-error"));var r,i=!!e.La,o=e.Rb||"POST";return Ee(n).then(e.A).then(function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),ta(t,i?t.l:t.h,e.endpoint,o,n,e.Eb,e.hb||!1)}).then(function(t){return r=t,e.Wa?e.Wa(n,r):r}).then(e.G).then(function(){if(!e.Y)return r;if(!(e.Y in r))throw new w("internal-error");return r[e.Y]})}function Qa(t){return Ya({error:{errors:[{message:t}],code:400,message:t}})}function Ya(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new w(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",lt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new w(r[i],e);return!e&&t&&(e=Cr(t)),new w("internal-error",e)}function Xa(t){var o;this.b=t,this.a=null,this.nb=(o=this,(tu=tu||new ve(function(t,e){function n(){Pr(),wr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Pr(),e(Error("Network Error"))},timeout:$a.get()})}if(wr("gapi.iframes.Iframe"))t();else if(wr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();l[r]=function(){wr("gapi.load")?n():e(Error("Network Error"))},Ee(Ls(r=_t(Ja,{onload:r}))).o(function(){e(Error("Network Error"))})}}).o(function(t){throw tu=null,t})).then(function(){return new ve(function(r,i){wr("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:wr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),r()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},Za.get());t.ping(e).then(e,function(){i(Error("Network Error"))})})})}))}var Ja=new pt(yt,"https://apis.google.com/js/api.js?onload=%{onload}"),$a=new Dr(3e4,6e4),Za=new Dr(5e3,15e3),tu=null;function eu(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=Dn(this.i,"/__/auth/iframe"),Rn(this.a,"apiKey",this.g),Rn(this.a,"appName",this.h),this.b=null,this.c=[]}function nu(t,e,n,r,i){this.s=t,this.m=e,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function ru(t){try{return zl.app(t).auth().Ea()}catch(t){return[]}}function iu(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.s=this.w=null,this.g=[],this.l=this.a=null}function ou(t){var a=nr();return za(t,ka,{}).then(function(t){return t.authorizedDomains||[]}).then(function(t){t:{var e=Pn(a),n=e.f;e=e.b;for(var r=0;r<t.length;r++){var i=t[r],o=e,s=n;if(o=0==i.indexOf("chrome-extension://")?Pn(i).b==o&&"chrome-extension"==s:("http"==s||"https"==s)&&(ar.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new Fo(nr())})}function su(i){return i.l||(i.l=cr().then(function(){if(!i.s){var t=i.c,e=i.h,n=ru(i.b),r=new eu(i.u,i.f,i.b);r.f=t,r.b=e,r.c=G(n||[]),i.s=r.toString()}i.i=new Xa(i.s),function(r){if(!r.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.nb.then(function(){t.a.register("authEvent",e,wr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(r.i,function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=Do(t.authEvent),e=0;e<r.g.length;e++)n=r.g[e](t)||n;return(e={}).status=n?"ACK":"ERROR",Ee(e)}return e.status="ERROR",Ee(e)})}(i)})),i.l}function au(t){return t.m||(t.w=t.c?br(t.c,ru(t.b)):null,t.m=new Bs(t.f,C(t.h),t.w)),t.m}function uu(t,e,n,r,i,o,s,a,u,c,h){return(t=new nu(t,e,n,r,i)).l=o,t.g=s,t.i=a,t.b=ct(u||null),t.f=c,t.ub(h).toString()}function cu(t){if(this.a=t||zl.INTERNAL.reactNative&&zl.INTERNAL.reactNative.AsyncStorage,!this.a)throw new w("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function hu(t){this.b=t,this.a={},this.f=m(this.c,this)}eu.prototype.toString=function(){return this.f?Rn(this.a,"v",this.f):Hn(this.a.a,"v"),this.b?Rn(this.a,"eid",this.b):Hn(this.a.a,"eid"),this.c.length?Rn(this.a,"fw",this.c.join(",")):Hn(this.a.a,"fw"),this.a.toString()},nu.prototype.ub=function(t){return this.h=t,this},nu.prototype.toString=function(){var t=Dn(this.s,"/__/auth/handler");if(Rn(t,"apiKey",this.m),Rn(t,"appName",this.c),Rn(t,"authType",this.u),this.a.isOAuthProvider){var e=this.a;try{var n=zl.app(this.c).auth().ja()}catch(t){n=null}for(var r in e.kb=n,Rn(t,"providerId",this.a.providerId),n=Ar((e=this.a).Fb))n[r]=n[r].toString();r=e.Oc,n=ct(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}e.lb&&e.kb&&!n[e.lb]&&(n[e.lb]=e.kb),ut(n)||Rn(t,"customParameters",Cr(n))}if("function"==typeof this.a.Nb&&((e=this.a.Nb()).length&&Rn(t,"scopes",e.join(","))),this.l?Rn(t,"redirectUrl",this.l):Hn(t.a,"redirectUrl"),this.g?Rn(t,"eventId",this.g):Hn(t.a,"eventId"),this.i?Rn(t,"v",this.i):Hn(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!On(t,s)&&Rn(t,s,this.b[s]);return this.h?Rn(t,"tid",this.h):Hn(t.a,"tid"),this.f?Rn(t,"eid",this.f):Hn(t.a,"eid"),(s=ru(this.c)).length&&Rn(t,"fw",s.join(",")),t.toString()},(t=iu.prototype).Lb=function(e,n,t){var r=new w("popup-closed-by-user"),i=new w("web-storage-unsupported"),o=this,s=!1;return this.ka().then(function(){var t,r;r={type:"webStorageSupport"},su(t=o).then(function(){return e=t.i,n=r,e.nb.then(function(){return new ve(function(t){e.a.send(n.type,n,t,wr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var e,n}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}).then(function(t){t||(e&&or(e),n(i),s=!0)})}).o(function(){}).then(function(){if(!s)return n=e,new ve(function(e){return function t(){bn(2e3).then(function(){if(n&&!n.closed)return t();e()})}()});var n}).then(function(){if(!s)return bn(t).then(function(){n(r)})})},t.Ub=function(){var t=_r();return!Nr(t)&&!Or(t)},t.Qb=function(){return!1},t.Jb=function(e,t,n,r,i,o,s,a){if(!e)return Te(new w("popup-blocked"));if(s&&!Nr())return this.ka().o(function(t){or(e),i(t)}),r(),Ee();this.a||(this.a=ou(au(this)));var u=this;return this.a.then(function(){var t=u.ka().o(function(t){throw or(e),i(t),t});return r(),t}).then(function(){Oo(n),s||rr(uu(u.u,u.f,u.b,t,n,null,o,u.c,void 0,u.h,a),e)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Kb=function(t,e,n,r){this.a||(this.a=ou(au(this)));var i=this;return this.a.then(function(){Oo(e),rr(uu(i.u,i.f,i.b,t,e,nr(),n,i.c,void 0,i.h,r))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ka=function(){var t=this;return su(this).then(function(){return t.i.nb}).o(function(){throw t.a=null,new w("network-request-failed")})},t.Xb=function(){return!0},t.Ca=function(t){this.g.push(t)},t.Qa=function(e){K(this.g,function(t){return t==e})},(t=cu.prototype).get=function(t){return Ee(this.a.getItem(t)).then(function(t){return t&&kr(t)})},t.set=function(t,e){return Ee(this.a.setItem(t,Cr(e)))},t.T=function(t){return Ee(this.a.removeItem(t))},t.ba=function(){},t.ha=function(){};var lu,fu=[];function pu(t,e,n){ut(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function du(t){this.a=t}function vu(t){this.c=t,this.b=!1,this.a=[]}function yu(r,t,e,n){var i,o,s,a,u=e||{},c=null;if(r.b)return Te(Error("connection_unavailable"));var h=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new ve(function(e,n){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout(function(){n(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),n(Error("invalid_response"))))}},r.a.push(c),l.port1.addEventListener("message",o),r.c.postMessage({eventType:t,eventId:i,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(t){return gu(r,c),t}).o(function(t){throw gu(r,c),t})}function gu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),K(t.a,function(t){return t==e})}}function mu(){if(!wu())throw new w("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=l.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.s=!1,this.h=null;var t,r=this;fr()&&self?(this.l=function(){var e=fr()?self:null;if(U(fu,function(t){t.b==e&&(n=t)}),!n){var n=new hu(e);fu.push(n)}return n}(),pu(this.l,"keyChanged",function(t,n){return Nu(r).then(function(e){return 0<e.length&&U(r.a,function(t){t(e)}),{keyProcessed:B(e,n.key)}})}),pu(this.l,"ping",function(){return Ee(["keyChanged"])})):((t=l.navigator)&&t.serviceWorker?Ee().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):Ee(null)).then(function(t){(r.h=t)&&(r.g=new vu(new du(t)),yu(r.g,"ping",null,!0).then(function(t){t[0].fulfilled&&B(t[0].value,"keyChanged")&&(r.s=!0)}).o(function(){}))})}function bu(i){return new ve(function(e,n){var t=i.u.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){var r;(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):(r=i,new ve(function(t,e){var n=r.u.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}}).then(function(){return bu(i)}).then(function(t){e(t)}).o(function(t){n(t)}))}})}function _u(t){return t.m||(t.m=bu(t)),t.m}function wu(){try{return l.indexedDB}catch(t){return}}function Eu(t){return t.objectStore("firebaseLocalStorage")}function Tu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Iu(t){return new ve(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Su(t,e){return t.g&&t.h&&((n=l.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?yu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):Ee();var n}function Nu(r){return _u(r).then(function(t){var i=Eu(Tu(t,!1));return i.getAll?Iu(i.getAll()):new ve(function(e,n){var r=[],t=i.openCursor();t.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==r.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var r,i=[];for(r in e)r in n&&typeof e[r]==typeof n[r]?"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(r.c,e),r.c=e}return n})}function Cu(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Au(t){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ee().then(function(){if(wu()){var e=Rr(),n="__sak"+e;return lu=lu||new mu,(i=lu).set(n,e).then(function(){return i.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return i.T(n)}).then(function(){return i}).o(function(){return r.c})}return r.c}).then(function(t){return r.type=t.type,t.ba(function(e){U(r.a,function(t){t(e)})}),t})}function ku(){this.a={},this.type="inMemory"}function Ru(){if(!function(){var t="Node"==pr();if(!(t=Ou()||t&&zl.INTERNAL.node&&zl.INTERNAL.node.localStorage))return;try{return t.setItem("__sak","1"),t.removeItem("__sak"),1}catch(t){return}}()){if("Node"==pr())throw new w("internal-error","The LocalStorage compatibility library was not found.");throw new w("web-storage-unsupported")}this.a=Ou()||zl.INTERNAL.node.localStorage,this.type="localStorage"}function Ou(){try{var t=l.localStorage,e=Rr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Pu(){this.type="nullStorage"}function Du(){if(!function(){var t="Node"==pr();if(!(t=xu()||t&&zl.INTERNAL.node&&zl.INTERNAL.node.sessionStorage))return;try{return t.setItem("__sak","1"),t.removeItem("__sak"),1}catch(t){return}}()){if("Node"==pr())throw new w("internal-error","The SessionStorage compatibility library was not found.");throw new w("web-storage-unsupported")}this.a=xu()||zl.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function xu(){try{var t=l.sessionStorage,e=Rr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Lu(){var t={};t.Browser=Uu,t.Node=ju,t.ReactNative=Vu,t.Worker=qu,this.a=t[pr()]}hu.prototype.c=function(n){var r=n.data.eventType,i=n.data.eventId,t=this.a[r];if(t&&0<t.length){n.ports[0].postMessage({status:"ack",eventId:i,eventType:r,response:null});var e=[];U(t,function(t){e.push(Ee().then(function(){return t(n.origin,n.data.data)}))}),Se(e).then(function(t){var e=[];U(t,function(t){e.push({fulfilled:t.Mb,value:t.value,reason:t.reason?t.reason.message:void 0})}),U(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:e})})}},du.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},vu.prototype.close=function(){for(;0<this.a.length;)gu(this,this.a[0]);this.b=!0},(t=mu.prototype).set=function(n,r){var i,o=!1,s=this;return _u(this).then(function(t){return Iu((t=Eu(Tu(i=t,!0))).get(n))}).then(function(t){var e=Eu(Tu(i,!0));return t?(t.value=r,Iu(e.put(t))):(s.b++,o=!0,(t={}).fbase_key=n,t.value=r,Iu(e.add(t)))}).then(function(){return s.c[n]=r,Su(s,n)}).ma(function(){o&&s.b--})},t.get=function(e){return _u(this).then(function(t){return Iu(Eu(Tu(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.T=function(e){var n=!1,r=this;return _u(this).then(function(t){return n=!0,r.b++,Iu(Eu(Tu(t,!0)).delete(e))}).then(function(){return delete r.c[e],Su(r,e)}).ma(function(){n&&r.b--})},t.ba=function(t){var n;0==this.a.length&&(Cu(n=this),function e(){n.f=setTimeout(function(){n.i=Nu(n).then(function(e){0<e.length&&U(n.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(t)},t.ha=function(e){K(this.a,function(t){return t==e}),0==this.a.length&&Cu(this)},(t=Au.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.T=function(e){return this.b.then(function(t){return t.T(e)})},t.ba=function(t){this.a.push(t)},t.ha=function(e){K(this.a,function(t){return t==e})},(t=ku.prototype).get=function(t){return Ee(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ee()},t.T=function(t){return delete this.a[t],Ee()},t.ba=function(){},t.ha=function(){},(t=Ru.prototype).get=function(t){var e=this;return Ee().then(function(){return kr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return Ee().then(function(){var t=Cr(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return Ee().then(function(){e.a.removeItem(t)})},t.ba=function(t){l.window&&en(l.window,"storage",t)},t.ha=function(t){l.window&&on(l.window,"storage",t)},(t=Pu.prototype).get=function(){return Ee(null)},t.set=function(){return Ee()},t.T=function(){return Ee()},t.ba=function(){},t.ha=function(){},(t=Du.prototype).get=function(t){var e=this;return Ee().then(function(){return kr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return Ee().then(function(){var t=Cr(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return Ee().then(function(){e.a.removeItem(t)})},t.ba=function(){},t.ha=function(){};var Mu,Fu,Uu={F:Ru,$a:Du},ju={F:Ru,$a:Du},Vu={F:cu,$a:Pu},qu={F:Ru,$a:Pu},Bu={od:"local",NONE:"none",qd:"session"};function Wu(){var t=!(Or(_r())||!lr()),e=Nr(),n=Er();this.m=t,this.h=e,this.l=n,this.a={},t=Mu=Mu||new Lu;try{this.g=!er()&&Mr()||!l.indexedDB?new t.a.F:new Au(fr()?new ku:new t.a.F)}catch(t){this.g=new ku,this.h=!0}try{this.i=new t.a.$a}catch(t){this.i=new ku}this.u=new ku,this.f=m(this.Vb,this),this.b={}}function Ku(){return Fu=Fu||new Wu}function Hu(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function Gu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function zu(t,e,n){return n=Gu(e,n),"local"==e.F&&(t.b[n]=null),Hu(t,e.F).T(n)}function Qu(t){t.c&&(clearInterval(t.c),t.c=null)}function Yu(t){this.a=t,this.b=Ku()}(t=Wu.prototype).get=function(t,e){return Hu(this,t.F).get(Gu(t,e))},t.set=function(e,t,n){var r=Gu(e,n),i=this,o=Hu(this,e.F);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.F&&(i.b[r]=t)})},t.addListener=function(t,e,n){var r;t=Gu(t,e),this.l&&(this.b[t]=l.localStorage.getItem(t)),ut(this.a)&&(Hu(this,"local").ba(this.f),this.h||(er()||!Mr())&&l.indexedDB||!this.l||(Qu(r=this),r.c=setInterval(function(){for(var t in r.a){var e=l.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new Ke({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Vb(e))}},1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Gu(t,e),this.a[t]&&(K(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),ut(this.a)&&(Hu(this,"local").ha(this.f),Qu(this))},t.Vb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.ib(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Hu(this,"local").ha(this.f):Qu(this),this.m)if(n=l.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?l.localStorage.setItem(e,r):l.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===l.localStorage.getItem(e)||(o.b[e]=l.localStorage.getItem(e),o.ib(e))},Bt&&Jt&&10==Jt&&l.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else U(t,m(this.ib,this))},t.ib=function(t){this.a[t]&&U(this.a[t],function(t){t()})};var Xu,Ju={name:"authEvent",F:"local"};function $u(){this.a=Ku()}function Zu(t,e){this.b=tc,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===Xu&&(Xu=l.Int32Array?new Int32Array(ac):ac),this.reset()}e(Zu,function(){this.b=-1});for(var tc=64,ec=tc-1,nc=[],rc=0;rc<ec;rc++)nc[rc]=0;var ic=H(128,nc);function oc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|Xu[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function sc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(oc(t),i=0);else{if(!h(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(oc(t),i=0)}}t.c=i,t.g+=n}Zu.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):G(this.h)};var ac=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function uc(){Zu.call(this,8,cc)}e(uc,Zu);var cc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function hc(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.s=i||null,this.h=e+":"+n,this.w=new $u,this.g=new Yu(this.h),this.f=null,this.b=[],this.a=this.c=null}function lc(t){return new w("invalid-cordova-configuration",t)}function fc(t){var e=new uc;sc(e,t),t=[];var n=8*e.g;e.c<56?sc(e,ic,56-e.c):sc(e,ic,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(oc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return V(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}function pc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function dc(a){return a.f||(a.f=a.ka().then(function(){return new ve(function(n){function e(r){t=!0,s&&s.cancel(),vc(i).then(function(t){var e=o;if(t&&r&&r.url){var n=null;-1!=(e=Xi(r.url)).indexOf("/__/auth/callback")&&(n=(n="object"==typeof(n=kr(On(n=Pn(e),"firebaseError")||null))?E(n):null)?new Po(t.c,t.b,null,null,n,null,t.S()):new Po(t.c,t.b,e,t.f,null,null,t.S())),e=n||o}pc(i,e)})}var i,o,t,s,r;a.Ca(function t(e){return n(e),a.Qa(t),!1}),i=a,o=new Po("unknown",null,null,null,new w("no-auth-event")),t=!1,s=bn(500).then(function(){return vc(i).then(function(){t||pc(i,o)})}),r=l.handleOpenURL,l.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(wr("BuildInfo.packageName",l).toLowerCase()+"://")&&e({url:t}),"function"==typeof r)try{r(t)}catch(t){console.error(t)}},Mo=Mo||new xo,function(t){var n=Mo;n.a.push(t),n.b||(n.b=function(t){for(var e=0;e<n.a.length;e++)n.a[e](t)},"function"==typeof(t=wr("universalLinks.subscribe",l))&&t(null,n.b))}(e)})})),a.f}function vc(e){var t,n=null;return(t=e.g).b.get(Ju,t.a).then(function(t){return Do(t)}).then(function(t){return n=t,zu((t=e.g).b,Ju,t.a)}).then(function(){return n})}function yc(t){this.a=t,this.b=Ku()}(t=hc.prototype).ka=function(){return this.Ga?this.Ga:this.Ga=(hr(void 0)?cr().then(function(){return new ve(function(t,e){var n=l.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):Te(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof wr("universalLinks.subscribe",l))throw lc("cordova-universal-links-plugin-fix is not installed");if(void 0===wr("BuildInfo.packageName",l))throw lc("cordova-plugin-buildinfo is not installed");if("function"!=typeof wr("cordova.plugins.browsertab.openUrl",l))throw lc("cordova-plugin-browsertab is not installed");if("function"!=typeof wr("cordova.InAppBrowser.open",l))throw lc("cordova-plugin-inappbrowser is not installed")},function(){throw new w("cordova-not-ready")})},t.Lb=function(t,e){return e(new w("operation-not-supported-in-this-environment")),Ee()},t.Jb=function(){return Te(new w("operation-not-supported-in-this-environment"))},t.Xb=function(){return!1},t.Ub=function(){return!0},t.Qb=function(){return!0},t.Kb=function(t,e,n,r){if(this.c)return Te(new w("redirect-operation-pending"));var i=this,o=l.document,s=null,a=null,u=null,c=null;return this.c=Ee().then(function(){return Oo(e),dc(i)}).then(function(){return function(n,t,e,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Po(t,r,null,o,new w("no-auth-event"),null,i),a=wr("BuildInfo.packageName",l);if("string"!=typeof a)throw new w("invalid-cordova-configuration");var u=wr("BuildInfo.displayName",l),c={};if(_r().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=a;else{if(!_r().toLowerCase().match(/android/))return Te(new w("operation-not-supported-in-this-environment"));c.apn=a}u&&(c.appDisplayName=u),o=fc(o),c.sessionId=o;var h=uu(n.u,n.i,n.l,t,e,null,r,n.m,c,n.s,i);return n.ka().then(function(){var t=n.h;return n.w.a.set(Ju,s.v(),t)}).then(function(){var t=wr("cordova.plugins.browsertab.isAvailable",l);if("function"!=typeof t)throw new w("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=wr("cordova.plugins.browsertab.openUrl",l)))throw new w("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=wr("cordova.InAppBrowser.open",l)))throw new w("invalid-cordova-configuration");t=_r(),n.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new ve(function(e,t){a=function(){var t=wr("cordova.plugins.browsertab.close",l);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ca(a),u=function(){s=s||bn(2e3).then(function(){t(new w("redirect-cancelled-by-user"))})},c=function(){xr()&&u()},o.addEventListener("resume",u,!1),_r().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).o(function(t){return vc(i).then(function(){throw t})})}).ma(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),a&&i.Qa(a),i.c=null})},t.Ca=function(e){this.b.push(e),dc(this).o(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Po("unknown",null,null,null,new w("no-auth-event")),e(t))})},t.Qa=function(e){K(this.b,function(t){return t==e})};var gc={name:"pendingRedirect",F:"session"};function mc(t){return zu(t.b,gc,t.a)}function bc(t,e,n){this.i={},this.w=0,this.D=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=m(this.s,this),this.b=new Dc,this.B=new Uc,this.g=new yc(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.B,this.c.linkViaPopup=this.B,this.c.reauthViaPopup=this.B,this.a=_c(this.D,this.u,this.m,T)}function _c(t,e,n,r){var i=zl.SDK_VERSION||null;return new(hr()?hc:iu)(t,e,n,i,r)}function wc(e){e.f||(e.f=!0,e.a.Ca(e.l));var n=e.a;return e.a.ka().o(function(t){throw e.a==n&&e.reset(),t})}function Ec(n){n.a.Ub()&&wc(n).o(function(t){var e=new Po("unknown",null,null,null,new w("operation-not-supported-in-this-environment"));Ac(t)&&n.s(e)}),n.a.Qb()||xc(n.b)}function Tc(n,t){var e;B(n.h,t)||n.h.push(t),n.f||(e=n.g).b.get(gc,e.a).then(function(t){return"pending"==t}).then(function(t){t?mc(n.g).then(function(){wc(n).o(function(t){var e=new Po("unknown",null,null,null,new w("operation-not-supported-in-this-environment"));Ac(t)&&n.s(e)})}):Ec(n)}).o(function(){Ec(n)})}function Ic(t,e){K(t.h,function(t){return t==e})}bc.prototype.reset=function(){this.f=!1,this.a.Qa(this.l),this.a=_c(this.D,this.u,this.m),this.i={}},bc.prototype.s=function(t){if(!t)throw new w("invalid-auth-event");if(6e5<=_()-this.w&&(this.i={},this.w=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Cb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.w=_())),e=!0;break}}return xc(this.b),e};var Sc=new Dr(2e3,1e4),Nc=new Dr(3e4,6e4);function Cc(t,e,n,r,i,o,s){return t.a.Jb(e,n,r,function(){t.f||(t.f=!0,t.a.Ca(t.l))},function(){t.reset()},i,o,s)}function Ac(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function kc(e,t,n,r,i){var o,s;return(s=e.g).b.set(gc,"pending",s.a).then(function(){return e.a.Kb(t,n,r,i).o(function(t){if(Ac(t))throw new w("operation-not-supported-in-this-environment");return o=t,mc(e.g).then(function(){throw o})}).then(function(){return e.a.Xb()?new ve(function(){}):mc(e.g).then(function(){return e.pa()}).then(function(){}).o(function(){})})})}function Rc(t,e,n,r,i){return t.a.Lb(r,function(t){e.la(n,null,t,i)},Sc.get())}bc.prototype.pa=function(){return this.b.pa()};var Oc={};function Pc(t,e,n){var r=e+":"+n;return Oc[r]||(Oc[r]=new bc(t,e,n)),Oc[r]}function Dc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function xc(t){t.g||(t.g=!0,Fc(t,!1,null,null))}function Lc(t){t.g&&!t.i&&Fc(t,!1,null,null)}function Mc(t,e){if(t.b=function(){return Ee(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Fc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Te(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Mc(t,n):Mc(t,{user:null}),t.f=[],t.c=[]}function Uc(){}function jc(){this.Bb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.Bb},set:function(t){this.Bb=t},enumerable:!1})}function Vc(t,e){this.a=e,qr(this,"verificationId",t)}function qc(t,e,n,r){return new Ao(t).cb(e,n).then(function(t){return new Vc(t,r)})}function Bc(t){var e=Mi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new w("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Br(this,{token:t,expirationTime:Lr(1e3*e.exp),authTime:Lr(1e3*e.auth_time),issuedAtTime:Lr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Wc(t,e,n){var r=e&&e[Hc];if(!r)throw new w("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ct(e),this.g=n,this.c=new Ji(null,r),this.b=[];var i=this;U(e[Kc]||[],function(t){(t=Gr(t))&&i.b.push(t)}),qr(this,"auth",this.a),qr(this,"session",this.c),qr(this,"hints",this.b)}Dc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Dc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Fc(this,!0,null,t.a),Ee()):e.Da(n,r)?function(e,t,n){n=n.Da(t.c,t.b);var r=t.g,i=t.f,o=t.i,s=t.S(),a=!!t.c.match(/Redirect$/);n(r,i,s,o).then(function(t){Fc(e,a,t,null)}).o(function(t){Fc(e,a,null,t)})}(this,t,e):Te(new w("invalid-auth-event")):(Fc(this,!1,null,null),Ee())}else Te(new w("invalid-auth-event"))},Dc.prototype.pa=function(){var i=this;return new ve(function(t,e){var n,r;i.b?i.b().then(t,e):(i.f.push(t),i.c.push(e),n=i,r=new w("timeout"),n.a&&n.a.cancel(),n.a=bn(Nc.get()).then(function(){n.b||(n.g=!0,Fc(n,!0,null,r))}))})},Uc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.la(t.c,null,t.a,t.b),Ee()):e.Da(n,r)?(o=e,s=(i=t).b,a=i.c,o.Da(a,s)(i.g,i.f,i.S(),i.i).then(function(t){o.la(a,t,null,s)}).o(function(t){o.la(a,null,t,s)})):Te(new w("invalid-auth-event"))}else Te(new w("invalid-auth-event"));var i,o,s,a},Vc.prototype.confirm=function(t){return t=ko(this.verificationId,t),this.a(t)};var Kc="mfaInfo",Hc="mfaPendingCredential";function Gc(t,e,n,r){w.call(this,"multi-factor-auth-required",r,e),this.b=new Wc(t,e,n),qr(this,"resolver",this.b)}function zc(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Gc(e,t.serverResponse,n,t.message)}catch(t){}return null}function Qc(){}function Yc(t){qr(this,"factorId",t.ea),this.a=t}function Xc(t){if(Yc.call(this,t),this.a.ea!=Ao.PROVIDER_ID)throw new w("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Jc(t,e){for(var n in We.call(this,t),e)this[n]=e[n]}function $c(t,e){this.a=t,this.b=[],this.c=m(this.wc,this),en(this.a,"userReloaded",this.c);var r=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&U(e.multiFactor.enrolledFactors,function(t){var e=null,n={};if(t){t.uid&&(n[Yr]=t.uid),t.displayName&&(n[zr]=t.displayName),t.enrollmentTime&&(n[Qr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(n[Xr]=t.phoneNumber);try{e=new Jr(n)}catch(t){}t=e}else t=null;t&&r.push(t)}),Zc(this,r)}function Zc(t,e){t.b=e,qr(t,"enrolledFactors",e)}function th(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function eh(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function nh(t){this.c=t,this.b=this.a=null}function rh(t){return t.b&&1e3*t.b.c||0}function ih(t,e){var n=e.refreshToken;t.b=Li(e[Ks]||""),t.a=n}function oh(e,t){return r=e.c,i=t,new ve(function(e,n){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?Js(r,r.u+"?key="+encodeURIComponent(r.c),function(t){t?t.error?n(Ya(t)):t.access_token&&t.refresh_token?e(t):n(new w("internal-error")):n(new w("network-request-failed"))},"POST",Kn(i).toString(),r.g,r.m.get()):n(new w("internal-error"))}).then(function(t){return e.b=Li(t.access_token),e.a=t.refresh_token,{accessToken:e.b.toString(),refreshToken:e.a}}).o(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t});var r,i}function sh(t,e){this.a=t||null,this.b=e||null,Br(this,{lastSignInTime:Lr(e||null),creationTime:Lr(t||null)})}function ah(t,e,n,r,i,o){Br(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function uh(t,e,n){var r;this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null,t=zl.SDK_VERSION?br(zl.SDK_VERSION):null,this.a=new Bs(this.l,C(T),t),this.b=new nh(this.a),vh(this,e[Ks]),ih(this.b,e),qr(this,"refreshToken",this.b.a),mh(this,n||{}),dn.call(this),this.P=!1,this.s&&Tr()&&(this.i=Pc(this.s,this.l,this.m)),this.R=[],this.h=null,this.B=(r=this,new th(function(){return r.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=rh(r.b)-_()-3e5;return 0<t?t:0})),this.Z=m(this.Ma,this);var i=this;this.oa=null,this.za=function(t){i.va(t.g)},this.aa=null,this.W=[],this.ya=function(t){hh(i,t.c)},this.$=null,this.O=new $c(this,n),qr(this,"multiFactor",this.O)}function ch(t,e){t.aa&&on(t.aa,"languageCodeChanged",t.za),(t.aa=e)&&en(e,"languageCodeChanged",t.za)}function hh(t,e){t.W=e,Xs(t.a,zl.SDK_VERSION?br(zl.SDK_VERSION,t.W):null)}function lh(t,e){t.$&&on(t.$,"frameworkChanged",t.ya),(t.$=e)&&en(e,"frameworkChanged",t.ya)}function fh(e){try{return zl.app(e.m).auth()}catch(t){throw new w("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function ph(t){t.D||t.B.b||(t.B.start(),on(t,"tokenChanged",t.Z),en(t,"tokenChanged",t.Z))}function dh(t){on(t,"tokenChanged",t.Z),t.B.stop()}function vh(t,e){t.xa=e,qr(t,"_lat",e)}function yh(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Se(e).then(function(){return t})}function gh(t){t.i&&!t.P&&(t.P=!0,Tc(t.i,t))}function mh(t,e){Br(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new sh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function bh(){}function _h(t){return Ee().then(function(){if(t.D)throw new w("app-deleted")})}function wh(t){return V(t.providerData,function(t){return t.providerId})}function Eh(t,e){e&&(Th(t,e.providerId),t.providerData.push(e))}function Th(t,e){K(t.providerData,function(t){return t.providerId==e})}function Ih(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&qr(t,e,n)}function Sh(e,t){var n,r,i;e!=t&&(Br(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?qr(e,"metadata",new sh((i=t.metadata).a,i.b)):qr(e,"metadata",new sh),U(t.providerData,function(t){Eh(e,t)}),n=e.b,r=t.b,n.b=r.b,n.a=r.a,qr(e,"refreshToken",e.b.a),Zc(e.O,t.O.b))}function Nh(i){return i.I().then(function(t){var e,n,r=i.isAnonymous;return n=t,za((e=i).a,Ia,{idToken:n}).then(m(e.Ic,e)).then(function(){return r||Ih(i,"isAnonymous",!1),t})})}function Ch(t,e){e[Ks]&&t.xa!=e[Ks]&&(ih(t.b,e),t.dispatchEvent(new Jc("tokenChanged")),vh(t,e[Ks]),Ih(t,"refreshToken",t.b.a))}function Ah(t,e){return Nh(t).then(function(){if(B(wh(t),e))return yh(t).then(function(){throw new w("provider-already-linked")})})}function kh(t,e,n){return Wr({user:t,credential:Ro(e),additionalUserInfo:e=qi(e),operationType:n})}function Rh(t,e){return Ch(t,e),t.reload().then(function(){return t})}function Oh(n,r,t,e,i){if(!Tr())return Te(new w("operation-not-supported-in-this-environment"));if(n.h&&!i)return Te(n.h);var o=Vi(t.providerId),s=Rr(n.uid+":::"),a=null;(!Nr()||lr())&&n.s&&t.isOAuthProvider&&(a=uu(n.s,n.l,n.m,r,t,null,s,zl.SDK_VERSION||null,null,null,n.tenantId));var u=sr(a,o&&o.ta,o&&o.sa);return e=e().then(function(){if(Dh(n),!i)return n.I().then(function(){})}).then(function(){return Cc(n.i,u,r,t,s,!!a,n.tenantId)}).then(function(){return new ve(function(t,e){n.la(r,null,new w("cancelled-popup-request"),n.g||null),n.f=t,n.w=e,n.g=s,n.c=Rc(n.i,n,r,u,s)})}).then(function(t){return u&&or(u),t?Wr(t):null}).o(function(t){throw u&&or(u),t}),xh(n,e,i)}function Ph(e,t,n,r,i){if(!Tr())return Te(new w("operation-not-supported-in-this-environment"));if(e.h&&!i)return Te(e.h);var o=null,s=Rr(e.uid+":::");return r=r().then(function(){if(Dh(e),!i)return e.I().then(function(){})}).then(function(){return e.fa=s,yh(e)}).then(function(t){return e.ga&&(t=(t=e.ga).b.set(Fh,e.v(),t.a)),t}).then(function(){return kc(e.i,t,n,s,e.tenantId)}).o(function(t){if(o=t,e.ga)return Uh(e.ga);throw o}).then(function(){if(o)throw o}),xh(e,r,i)}function Dh(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new w("internal-error");throw new w("auth-domain-config-required")}}function xh(n,t,e){var r,i,o,s=(i=t,o=e,(r=n).h&&!o?(i.cancel(),Te(r.h)):i.o(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.h||r.dispatchEvent(new Jc("userInvalidated")),r.h=t),t}));return n.N.push(s),s.ma(function(){W(n.N,s)}),s.o(function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=zc(t.v(),fh(n),m(n.hc,n))),e||t})}function Lh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ks]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new uh(e,n,t);return t.providerData&&U(t.providerData,function(t){t&&Eh(r,Wr(t))}),t.redirectEventId&&(r.fa=t.redirectEventId),r}function Mh(t){this.a=t,this.b=Ku()}Wc.prototype.Pc=function(t){var n=this;return t.ob(this.a.b,this.c).then(function(t){var e=ct(n.f);return delete e[Kc],delete e[Hc],lt(e,t),n.g(e)})},e(Gc,w),Qc.prototype.ob=function(t,e,n){return e.type==$i?(o=this,s=t,a=n,e.Fa().then(function(t){return t={idToken:t},void 0!==a&&(t.displayName=a),lt(t,{phoneVerificationInfo:Co(o.a)}),za(s,Ea,t)})):(r=this,i=t,e.Fa().then(function(t){return lt(t={mfaPendingCredential:t},{phoneVerificationInfo:Co(r.a)}),za(i,Ta,t)}));var r,i,o,s,a},e(Yc,Qc),e(Xc,Yc),e(Jc,We),(t=$c.prototype).wc=function(t){var e,n;Zc(this,(e=t.ed,n=[],U(e.mfaInfo||[],function(t){(t=Gr(t))&&n.push(t)}),n))},t.Ob=function(){return this.a.I().then(function(t){return new Ji(t,null)})},t.dc=function(e,n){var r=this,i=this.a.a;return this.Ob().then(function(t){return e.ob(i,t,n)}).then(function(t){return Ch(r.a,t),r.a.reload()})},t.$c=function(t){var n=this,r="string"==typeof t?t:t.uid,e=this.a.a;return this.a.I().then(function(t){return za(e,Ga,{idToken:t,mfaEnrollmentId:r})}).then(function(t){var e=j(n.b,function(t){return t.uid!=r});return Zc(n,e),Ch(n.a,t),n.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.v=function(){return{multiFactor:{enrolledFactors:V(this.b,function(t){return t.v()})}}},th.prototype.start=function(){this.a=this.c,function e(n,t){n.stop();n.b=bn(eh(n,t)).then(function(){return e=l.document,n=null,xr()||!e?Ee():new ve(function(t){n=function(){xr()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).o(function(t){throw e.removeEventListener("visibilitychange",n,!1),t});var e,n}).then(function(){return n.h()}).then(function(){e(n,!0)}).o(function(t){n.i(t)&&e(n,!1)})}(this,!0)},th.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},nh.prototype.v=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:rh(this)}},nh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Te(new w("user-token-expired")):t||!this.b||_()>rh(this)-3e4?this.a?oh(this,{grant_type:"refresh_token",refresh_token:this.a}):Ee(null):Ee({accessToken:this.b.toString(),refreshToken:this.a})},sh.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}},e(uh,dn),uh.prototype.va=function(t){this.oa=t,Ys(this.a,t)},uh.prototype.ja=function(){return this.oa},uh.prototype.Ea=function(){return G(this.W)},uh.prototype.Ma=function(){this.B.b&&(this.B.stop(),this.B.start())},qr(uh.prototype,"providerId","firebase"),(t=uh.prototype).reload=function(){var t=this;return xh(this,_h(this).then(function(){return Nh(t).then(function(){return yh(t)}).then(bh)}))},t.mc=function(t){return this.I(t).then(function(t){return new Bc(t)})},t.I=function(t){var e=this;return xh(this,_h(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new w("internal-error");return t.accessToken!=e.xa&&(vh(e,t.accessToken),e.dispatchEvent(new Jc("tokenChanged"))),Ih(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Ic=function(t){if(!(t=t.users)||!t.length)throw new w("internal-error");mh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=(r=(r=t).providerUserInfo)&&r.length?V(r,function(t){return new ah(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[],n=0;n<e.length;n++)Eh(this,e[n]);var r;Ih(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new Jc("userReloaded",{ed:t}))},t.Jc=function(t){return jr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return xh(this,t.c(this.a,this.uid).then(function(t){return Ch(e,t),n=kh(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.Ac=function(t){return jr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.mb(t)},t.mb=function(e){var n=this,r=null;return xh(this,Ah(this,e.providerId).then(function(){return n.I()}).then(function(t){return e.b(n.a,t)}).then(function(t){return r=kh(n,t,"link"),Rh(n,t)}).then(function(){return r}))},t.Bc=function(t,e){var n=this;return xh(this,Ah(this,"phone").then(function(){return qc(fh(n),t,e,m(n.mb,n))}))},t.Kc=function(t,e){var n=this;return xh(this,Ee().then(function(){return qc(fh(n),t,e,m(n.pb,n))}),!0)},t.xb=function(e){var n=this;return xh(this,this.I().then(function(t){return n.a.xb(t,e)}).then(function(t){return Ch(n,t),n.reload()}))},t.cd=function(e){var n=this;return xh(this,this.I().then(function(t){return e.b(n.a,t)}).then(function(t){return Ch(n,t),n.reload()}))},t.yb=function(e){var n=this;return xh(this,this.I().then(function(t){return n.a.yb(t,e)}).then(function(t){return Ch(n,t),n.reload()}))},t.zb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return _h(this);var n=this;return xh(this,this.I().then(function(t){return n.a.zb(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return Ch(n,t),Ih(n,"displayName",t.displayName||null),Ih(n,"photoURL",t.photoUrl||null),U(n.providerData,function(t){"password"===t.providerId&&(qr(t,"displayName",n.displayName),qr(t,"photoURL",n.photoURL))}),yh(n)}).then(bh))},t.ad=function(e){var n=this;return xh(this,Nh(this).then(function(t){return B(wh(n),e)?za(n.a,ba,{idToken:t,deleteProvider:[e]}).then(function(t){var e={};return U(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),U(wh(n),function(t){e[t]||Th(n,t)}),e[Ao.PROVIDER_ID]||qr(n,"phoneNumber",null),yh(n)}):yh(n).then(function(){throw new w("no-such-provider")})}))},t.delete=function(){var e=this;return xh(this,this.I().then(function(t){return za(e.a,ma,{idToken:t})}).then(function(){e.dispatchEvent(new Jc("userDeleted"))})).then(function(){for(var t=0;t<e.N.length;t++)e.N[t].cancel("app-deleted");ch(e,null),lh(e,null),e.N=[],e.D=!0,dh(e),qr(e,"refreshToken",null),e.i&&Ic(e.i,e)})},t.Cb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.fa||null)==e||"reauthViaRedirect"==t&&(this.fa||null)==e)},t.la=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?m(this.Hb,this):"reauthViaPopup"==t&&e==(this.g||null)?m(this.Ib,this):"linkViaRedirect"==t&&(this.fa||null)==e?m(this.Hb,this):"reauthViaRedirect"==t&&(this.fa||null)==e?m(this.Ib,this):null},t.Cc=function(t){var e=this;return Oh(this,"linkViaPopup",t,function(){return Ah(e,t.providerId).then(function(){return yh(e)})},!1)},t.Lc=function(t){return Oh(this,"reauthViaPopup",t,function(){return Ee()},!0)},t.Dc=function(t){var e=this;return Ph(this,"linkViaRedirect",t,function(){return Ah(e,t.providerId)},!1)},t.Mc=function(t){return Ph(this,"reauthViaRedirect",t,function(){return Ee()},!0)},t.Hb=function(e,n,t,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return t=this.I().then(function(t){return la(i.a,{requestUri:e,postBody:r,sessionId:n,idToken:t})}).then(function(t){return o=kh(i,t,"link"),Rh(i,t)}).then(function(){return o}),xh(this,t)},t.Ib=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return xh(this,Ee().then(function(){return eo(fa(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=kh(i,t,"reauthenticate"),Ch(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},t.qb=function(e){var n=this,r=null;return xh(this,this.I().then(function(t){return r=t,void 0===e||ut(e)?{}:Oi(new wi(e))}).then(function(t){return n.a.qb(r,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.Ab=function(e,n){var r=this,i=null;return xh(this,this.I().then(function(t){return i=t,void 0===n||ut(n)?{}:Oi(new wi(n))}).then(function(t){return r.a.Ab(i,e,t)}).then(function(t){if(r.email!=t)return r.reload()}).then(function(){}))},t.hc=function(t){var e=null,n=this;return xh(this,t=eo(Ee(t),n.uid).then(function(t){return e=kh(n,t,"reauthenticate"),Ch(n,t),n.h=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.v()},t.v=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.v(),redirectEventId:this.fa||null};return this.metadata&&lt(e,this.metadata.v()),U(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),lt(e,this.O.v()),e};var Fh={name:"redirectUser",F:"session"};function Uh(t){return zu(t.b,Fh,t.a)}function jh(t){var e,n,r,i;this.a=t,this.b=Ku(),this.c=null,this.f=(n=Bh("local"),r=Bh("session"),i=Bh("none"),function(n,r,i){var o=Gu(r,i),s=Hu(n,r.F);return n.get(r,i).then(function(t){var e=null;try{e=kr(l.localStorage.getItem(o))}catch(t){}if(e&&!t)return l.localStorage.removeItem(o),n.set(r,e,i);e&&t&&"localStorage"!=s.type&&l.localStorage.removeItem(o)})}((e=this).b,n,e.a).then(function(){return e.b.get(r,e.a)}).then(function(t){return t?r:e.b.get(i,e.a).then(function(t){return t?i:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(qh,e.a).then(function(t){return t?Bh(t):n})})})}).then(function(t){return e.c=t,Vh(e,t.F)}).o(function(){e.c||(e.c=n)})),this.b.addListener(Bh("local"),this.a,m(this.g,this))}function Vh(t,e){var n,a,r=[];for(n in Bu)Bu[n]!==e&&r.push(zu(t.b,Bh(Bu[n]),t.a));return r.push(zu(t.b,qh,t.a)),a=r,new ve(function(n,e){var r=a.length,i=[];if(r)for(var t=function(t,e){r--,i[t]=e,0==r&&n(i)},o=function(t){e(t)},s=0;s<a.length;s++)Ie(a[s],b(t,s),o);else n(i)})}jh.prototype.g=function(){var e=this,n=Bh("local");Gh(this,function(){return Ee().then(function(){return e.c&&"local"!=e.c.F?e.b.get(n,e.a):null}).then(function(t){if(t)return Vh(e,"local").then(function(){e.c=n})})})};var qh={name:"persistence",F:"session"};function Bh(t){return{name:"authUser",F:t}}function Wh(t,e){return Gh(t,function(){return t.b.set(t.c,e.v(),t.a)})}function Kh(t){return Gh(t,function(){return zu(t.b,t.c,t.a)})}function Hh(t,e){return Gh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),Lh(t||{})})})}function Gh(t,e){return t.f=t.f.then(e,e),t.f}function zh(t){if(this.l=!1,qr(this,"settings",new jc),qr(this,"app",t),!el(this).options||!el(this).options.apiKey)throw new w("invalid-api-key");var n,e,r,i,o,s,a,u;t=zl.SDK_VERSION?br(zl.SDK_VERSION):null,this.b=new Bs(el(this).options&&el(this).options.apiKey,C(T),t),this.P=[],this.m=[],this.O=[],this.$b=zl.INTERNAL.createSubscribe(m(this.xc,this)),this.W=void 0,this.ac=zl.INTERNAL.createSubscribe(m(this.yc,this)),Zh(this,null),this.i=new jh(el(this).options.apiKey+":"+el(this).name),this.B=new Mh(el(this).options.apiKey+":"+el(this).name),this.Z=ol(this,(e=el(n=this).options.authDomain,r=function(e){var t=function(t,e){return t.b.get(Fh,t.a).then(function(t){return t&&e&&(t.authDomain=e),Lh(t||{})})}(e.B,el(e).options.authDomain).then(function(t){return(e.D=t)&&(t.ga=e.B),Uh(e.B)});return ol(e,t)}(n).then(function(){return Hh(n.i,e)}).then(function(e){return e?(e.ga=n.B,n.D&&(n.D.fa||null)==(e.fa||null)?e:e.reload().then(function(){return Wh(n.i,e).then(function(){return e})}).o(function(t){return"auth/network-request-failed"==t.code?e:Kh(n.i)})):null}).then(function(t){Zh(n,t||null)}),ol(n,r))),this.h=ol(this,(i=this).Z.then(function(){return Jh(i)}).o(function(){}).then(function(){if(!i.l)return i.oa()}).o(function(){}).then(function(){if(!i.l){i.aa=!0;var t=i.i;t.b.addListener(Bh("local"),t.a,i.oa)}})),this.aa=!1,this.oa=m(this.Xc,this),this.Ma=m(this.ca,this),this.xa=m(this.jc,this),this.ya=m(this.uc,this),this.za=m(this.vc,this),this.a=null,s=el(o=this).options.authDomain,a=el(o).options.apiKey,s&&Tr()&&(o.Zb=o.Z.then(function(){if(!o.l){if(o.a=Pc(s,a,el(o).name),Tc(o.a,o),nl(o)&&gh(nl(o)),o.D){gh(o.D);var t=o.D;t.va(o.ja()),ch(t,o),hh(t=o.D,o.N),lh(t,o),o.D=null}return o.a}})),this.INTERNAL={},this.INTERNAL.delete=m(this.delete,this),this.INTERNAL.logFramework=m(this.Ec,this),this.s=0,dn.call(this),u=this,Object.defineProperty(u,"lc",{get:function(){return this.ja()},set:function(t){this.va(t)},enumerable:!1}),u.$=null,Object.defineProperty(u,"ti",{get:function(){return this.S()},set:function(t){this.ub(t)},enumerable:!1}),u.R=null,this.N=[]}function Qh(t){We.call(this,"languageCodeChanged"),this.g=t}function Yh(t){We.call(this,"frameworkChanged"),this.c=t}function Xh(t){return t.Zb||Te(new w("auth-domain-config-required"))}function Jh(t){if(!Tr())return Te(new w("operation-not-supported-in-this-environment"));var e=Xh(t).then(function(){return t.a.pa()}).then(function(t){return t?Wr(t):null});return ol(t,e)}function $h(o,s){var a={};return a.apiKey=el(o).options.apiKey,a.authDomain=el(o).options.authDomain,a.appName=el(o).name,o.Z.then(function(){return t=a,e=s,n=o.B,r=o.Ea(),i=new uh(t,e),n&&(i.ga=n),r&&hh(i,r),i.reload().then(function(){return i});var t,e,n,r,i}).then(function(t){return nl(o)&&t.uid==nl(o).uid?Sh(nl(o),t):(Zh(o,t),gh(t)),o.ca(t)}).then(function(){il(o)})}function Zh(t,e){var n,r;nl(t)&&(n=nl(t),r=t.Ma,K(n.R,function(t){return t==r}),on(nl(t),"tokenChanged",t.xa),on(nl(t),"userDeleted",t.ya),on(nl(t),"userInvalidated",t.za),dh(nl(t))),e&&(e.R.push(t.Ma),en(e,"tokenChanged",t.xa),en(e,"userDeleted",t.ya),en(e,"userInvalidated",t.za),0<t.s&&ph(e)),qr(t,"currentUser",e),e&&(e.va(t.ja()),ch(e,t),hh(e,t.N),lh(e,t))}function tl(n,t){var e=null,r=null;return ol(n,t.then(function(t){return e=Ro(t),r=qi(t),$h(n,t)},function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=zc(t.v(),n,m(n.ic,n))),e||t}).then(function(){return Wr({user:nl(n),credential:e,additionalUserInfo:r,operationType:"signIn"})}))}function el(t){return t.app}function nl(t){return t.currentUser}function rl(t){return nl(t)&&nl(t)._lat||null}function il(t){if(t.aa){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](rl(t));if(t.W!==t.getUid()&&t.O.length)for(t.W=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](rl(t))}}function ol(t,e){return t.P.push(e),e.ma(function(){W(t.P,e)}),e}function sl(){}function al(){this.a={},this.b=1e12}jh.prototype.tb=function(e){var n=null,r=this;return function(t){var e=new w("invalid-persistence-type"),n=new w("unsupported-persistence-type");t:{for(r in Bu)if(Bu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(pr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!wu()&&"none"!==t)throw n;break;default:if(!Er()&&"none"!==t)throw n}}(e),Gh(this,function(){return e!=r.c.F?r.b.get(r.c,r.a).then(function(t){return n=t,Vh(r,e)}).then(function(){if(r.c=Bh(e),n)return r.b.set(r.c,n,r.a)}):Ee()})},e(zh,dn),e(Qh,We),e(Yh,We),(t=zh.prototype).tb=function(t){return t=this.i.tb(t),ol(this,t)},t.va=function(t){this.$===t||this.l||(this.$=t,Ys(this.b,this.$),this.dispatchEvent(new Qh(this.ja())))},t.ja=function(){return this.$},t.dd=function(){var t=l.navigator;this.va(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.Ec=function(t){this.N.push(t),Xs(this.b,zl.SDK_VERSION?br(zl.SDK_VERSION,this.N):null),this.dispatchEvent(new Yh(this.N))},t.Ea=function(){return G(this.N)},t.ub=function(t){this.R===t||this.l||(this.R=t,this.b.b=this.R)},t.S=function(){return this.R},t.toJSON=function(){return{apiKey:el(this).options.apiKey,authDomain:el(this).options.authDomain,appName:el(this).name,currentUser:nl(this)&&nl(this).v()}},t.Cb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.la=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?m(this.gc,this):null},t.gc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.Z.then(function(){return tl(i,ha(i.b,o))})},t.Vc=function(e){if(!Tr())return Te(new w("operation-not-supported-in-this-environment"));var n=this,t=Vi(e.providerId),r=Rr(),i=null;(!Nr()||lr())&&el(this).options.authDomain&&e.isOAuthProvider&&(i=uu(el(this).options.authDomain,el(this).options.apiKey,el(this).name,"signInViaPopup",e,null,r,zl.SDK_VERSION||null,null,null,this.S()));var o=sr(i,t&&t.ta,t&&t.sa);return ol(this,t=Xh(this).then(function(t){return Cc(t,o,"signInViaPopup",e,r,!!i,n.S())}).then(function(){return new ve(function(t,e){n.la("signInViaPopup",null,new w("cancelled-popup-request"),n.g),n.f=t,n.w=e,n.g=r,n.c=Rc(n.a,n,"signInViaPopup",o,r)})}).then(function(t){return o&&or(o),t?Wr(t):null}).o(function(t){throw o&&or(o),t}))},t.Wc=function(t){if(!Tr())return Te(new w("operation-not-supported-in-this-environment"));var e=this;return ol(this,Xh(this).then(function(){return Gh(t=e.i,function(){return t.b.set(qh,t.c.F,t.a)});var t}).then(function(){return kc(e.a,"signInViaRedirect",t,void 0,e.S())}))},t.pa=function(){var e=this;return Jh(this).then(function(t){return e.a&&Lc(e.a.b),t}).o(function(t){throw e.a&&Lc(e.a.b),t})},t.bd=function(t){if(!t)return Te(new w("null-user"));if(this.R!=t.tenantId)return Te(new w("tenant-id-mismatch"));var e=this,n={};n.apiKey=el(this).options.apiKey,n.authDomain=el(this).options.authDomain,n.appName=el(this).name;var r,i,o,s,a,u,c=(r=t,i=n,o=e.B,s=e.Ea(),a=r.b,(u={})[Ks]=a.b&&a.b.toString(),u.refreshToken=a.a,i=new uh(i||{apiKey:r.l,authDomain:r.s,appName:r.m},u),o&&(i.ga=o),s&&hh(i,s),Sh(i,r),i);return ol(this,this.h.then(function(){if(el(e).options.apiKey!=t.l)return c.reload()}).then(function(){return nl(e)&&t.uid==nl(e).uid?(Sh(nl(e),t),e.ca(t)):(Zh(e,c),gh(c),e.ca(c))}).then(function(){il(e)}))},t.wb=function(){var t=this,e=this.h.then(function(){return t.a&&Lc(t.a.b),nl(t)?(Zh(t,null),Kh(t.i).then(function(){il(t)})):Ee()});return ol(this,e)},t.Xc=function(){var r=this;return Hh(this.i,el(this).options.authDomain).then(function(t){if(!r.l){var e;if(e=nl(r)&&t){e=nl(r).uid;var n=t.uid;e=null!=e&&""!==e&&null!=n&&""!==n&&e==n}if(e)return Sh(nl(r),t),nl(r).I();(nl(r)||t)&&(Zh(r,t),t&&(gh(t),t.ga=r.B),r.a&&Tc(r.a,r),il(r))}})},t.ca=function(t){return Wh(this.i,t)},t.jc=function(){il(this),this.ca(nl(this))},t.uc=function(){this.wb()},t.vc=function(){this.wb()},t.ic=function(t){var e=this;return this.h.then(function(){return tl(e,Ee(t))})},t.xc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(nl(e))})},t.yc=function(t){var e,n,r=this;n=function(){t.next(nl(r))},(e=this).O.push(n),ol(e,e.h.then(function(){!e.l&&B(e.O,n)&&e.W!==e.getUid()&&(e.W=e.getUid(),n(rl(e)))}))},t.Gc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then(function(){d(t)?t(nl(r)):d(t.next)&&t.next(nl(r))}),this.$b(t,e,n)},t.Fc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then(function(){r.W=r.getUid(),d(t)?t(nl(r)):d(t.next)&&t.next(nl(r))}),this.ac(t,e,n)},t.kc=function(t){var e=this,n=this.h.then(function(){return nl(e)?nl(e).I(t).then(function(t){return{accessToken:t}}):null});return ol(this,n)},t.Rc=function(t){var n=this;return this.h.then(function(){return tl(n,za(n.b,qa,{token:t}))}).then(function(t){var e=t.user;return Ih(e,"isAnonymous",!1),n.ca(e),t})},t.Sc=function(t,e){var n=this;return this.h.then(function(){return tl(n,za(n.b,Ba,{email:t,password:e}))})},t.cc=function(t,e){var n=this;return this.h.then(function(){return tl(n,za(n.b,ya,{email:t,password:e}))})},t.Ya=function(t){var e=this;return this.h.then(function(){return tl(e,t.ia(e.b))})},t.Qc=function(t){return jr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ya(t)},t.vb=function(){var n=this;return this.h.then(function(){var t=nl(n);if(t&&t.isAnonymous){var e=Wr({providerId:null,isNewUser:!1});return Wr({user:t,credential:null,additionalUserInfo:e,operationType:"signIn"})}return tl(n,n.b.vb()).then(function(t){var e=t.user;return Ih(e,"isAnonymous",!0),n.ca(e),t})})},t.getUid=function(){return nl(this)&&nl(this).uid||null},t.bc=function(t){this.addAuthTokenListener(t),this.s++,0<this.s&&nl(this)&&ph(nl(this))},t.Nc=function(e){var n=this;U(this.m,function(t){t==e&&n.s--}),this.s<0&&(this.s=0),0==this.s&&nl(this)&&dh(nl(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),ol(this,this.h.then(function(){e.l||B(e.m,t)&&t(rl(e))}))},t.removeAuthTokenListener=function(e){K(this.m,function(t){return t==e})},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(Bh("local"),t.a,this.oa),this.a&&(Ic(this.a,this),Lc(this.a.b)),Promise.resolve()},t.fc=function(t){return ol(this,za(this.b,ga,{identifier:t,continueUri:Ir()?nr():"http://localhost"}).then(function(t){return t.signinMethods||[]}))},t.zc=function(t){return!!Io(t)},t.sb=function(e,n){var r=this;return ol(this,Ee().then(function(){var t=new wi(n);if(!t.c)throw new w("argument-error",Ii+" must be true when sending sign in link to email");return Oi(t)}).then(function(t){return r.b.sb(e,t)}).then(function(){}))},t.fd=function(t){return this.Pa(t).then(function(t){return t.data.email})},t.jb=function(t,e){return ol(this,this.b.jb(t,e).then(function(){}))},t.Pa=function(t){return ol(this,this.b.Pa(t).then(function(t){return new $r(t)}))},t.fb=function(t){return ol(this,this.b.fb(t).then(function(){}))},t.rb=function(e,t){var n=this;return ol(this,Ee().then(function(){return void 0===t||ut(t)?{}:Oi(new wi(t))}).then(function(t){return n.b.rb(e,t)}).then(function(){}))},t.Uc=function(t,e){return ol(this,qc(this,t,e,m(this.Ya,this)))},t.Tc=function(n,r){var i=this;return ol(this,Ee().then(function(){var t=r||nr(),e=To(n,t);if(!(t=Io(t)))throw new w("argument-error","Invalid email link!");if(t.tenantId!==i.S())throw new w("tenant-id-mismatch");return i.Ya(e)}))},sl.prototype.render=function(){},sl.prototype.reset=function(){},sl.prototype.getResponse=function(){},sl.prototype.execute=function(){};var ul=null;function cl(t,e){return(e=hl(e))&&t.a[e]||null}function hl(t){return(t=void 0===t?1e12:t)?t.toString():null}function ll(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ee(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():en(this.f,"click",this.i)}function fl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function pl(){}function dl(){}al.prototype.render=function(t,e){return this.a[this.b.toString()]=new ll(t,e),this.b++},al.prototype.reset=function(t){var e=cl(this,t);t=hl(t),e&&t&&(e.delete(),delete this.a[t])},al.prototype.getResponse=function(t){return(t=cl(this,t))?t.getResponse():null},al.prototype.execute=function(t){(t=cl(this,t))&&t.execute()},ll.prototype.getResponse=function(){return fl(this),this.b},ll.prototype.execute=function(){fl(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},ll.prototype.delete=function(){fl(this),this.g=!0,clearTimeout(this.a),this.a=null,on(this.f,"click",this.i)},qr(pl,"FACTOR_ID","phone"),dl.prototype.g=function(){return Ee(ul=ul||new al)},dl.prototype.c=function(){};var vl=null;function yl(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var gl=new pt(yt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),ml=new Dr(3e4,6e4);yl.prototype.g=function(i){var o=this;return new ve(function(t,e){var r=setTimeout(function(){e(new w("network-request-failed"))},ml.get());!l.grecaptcha||i!==o.f&&!o.b?(l[o.a]=function(){if(l.grecaptcha){o.f=i;var n=l.grecaptcha.render;l.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(r),t(l.grecaptcha)}else clearTimeout(r),e(new w("internal-error"));delete l[o.a]},Ee(Ls(_t(gl,{onload:o.a,hl:i||""}))).o(function(){clearTimeout(r),e(new w("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),t(l.grecaptcha))})},yl.prototype.c=function(){this.b--};var bl=null;function _l(t,e,n,r,i,o,s){if(qr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.u=e,this.g=null,s=s?vl=vl||new dl:bl=bl||new yl,this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Tl])throw new w("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Il],!l.document)throw new w("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ee(e)||!this.i&&ee(e).hasChildNodes())throw new w("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Bs(t,o||null,i||null),this.w=r||function(){return null};var a=this;this.l=[];var u=this.a[wl];this.a[wl]=function(t){if(Sl(a,t),"function"==typeof u)u(t);else if("string"==typeof u){var e=wr(u,l);"function"==typeof e&&e(t)}};var c=this.a[El];this.a[El]=function(){if(Sl(a,null),"function"==typeof c)c();else if("string"==typeof c){var t=wr(c,l);"function"==typeof t&&t()}}}var wl="callback",El="expired-callback",Tl="sitekey",Il="size";function Sl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Nl(t,e){return t.h.push(e),e.ma(function(){W(t.h,e)}),e}function Cl(t){if(t.D)throw new w("internal-error","RecaptchaVerifier instance has been destroyed.")}function Al(t,e,n){var r=!1;try{this.b=n||zl.app()}catch(t){throw new w("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new w("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ea()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=zl.SDK_VERSION?br(zl.SDK_VERSION,o):null,_l.call(this,n,t,e,function(){try{var e=i.b.auth().ja()}catch(t){e=null}return e},o,C(T),r)}function kl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new w("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],i<0||i>=Rl.length)throw new w("internal-error","Argument validator received an unsupported number of arguments.");n=Rl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new w("argument-error",t+" failed: "+r)}(t=_l.prototype).Ga=function(){var e=this;return this.f?this.f:this.f=Nl(this,Ee().then(function(){if(Ir()&&!fr())return cr();throw new w("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.m.g(e.w())}).then(function(t){return e.g=t,za(e.s,Ra,{})}).then(function(t){e.a[Tl]=t.recaptchaSiteKey}).o(function(t){throw e.f=null,t}))},t.render=function(){Cl(this);var n=this;return Nl(this,this.Ga().then(function(){if(null===n.c){var t=n.u;if(!n.i){var e=ee(t);t=se("DIV"),e.appendChild(t)}n.c=n.g.render(t,n.a)}return n.c}))},t.verify=function(){Cl(this);var i=this;return Nl(this,this.render().then(function(e){return new ve(function(n){var t=i.g.getResponse(e);if(t)n(t);else{var r=function(t){var e;t&&(e=r,K(i.l,function(t){return t==e}),n(t))};i.l.push(r),i.i&&i.g.execute(i.c)}})}))},t.reset=function(){Cl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Cl(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ee(this.u);for(var e;e=t.firstChild;)t.removeChild(e)}},e(Al,_l);var Rl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Ol(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Pl(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function Dl(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:v}}function xl(t,e){return{name:t||"",J:"a function",optional:!!e,K:d}}function Ll(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Ml(n){return{name:n?n+"Credential":"credential",J:n?"a valid "+n+" credential":"a valid credential",optional:!1,K:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.ia||!e)}}}function Fl(){return{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.ob}}}function Ul(){return{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function jl(t,e){return v(t)&&"string"==typeof t.type&&t.type===e&&d(t.Fa)}function Vl(t){return v(t)&&"string"==typeof t.uid}function ql(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||!d(t.verify))}}}function Bl(e,n,t,r){return{name:t||"",J:e.J+" or "+n.J,optional:!!r,K:function(t){return e.K(t)||n.K(t)}}}function Wl(t,e){for(var n in e){var r=e[n].name;t[r]=Gl(r,t[n],e[n].j)}}function Kl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:b(function(t){return this[t]},n),set:b(function(t,e,n,r){kl(t,[n],[r],!0),this[e]=r},r,n,e[n].gb),enumerable:!0})}}function Hl(t,e,n,r){t[e]=Gl(e,n,r)}function Gl(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return kl(s,n,t),e.apply(this,t)}if(!n)return e;var i,o,s=(o=(o=t).split("."))[o.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Wl(zh.prototype,{fb:{name:"applyActionCode",j:[Ol("code")]},Pa:{name:"checkActionCode",j:[Ol("code")]},jb:{name:"confirmPasswordReset",j:[Ol("code"),Ol("newPassword")]},cc:{name:"createUserWithEmailAndPassword",j:[Ol("email"),Ol("password")]},fc:{name:"fetchSignInMethodsForEmail",j:[Ol("email")]},pa:{name:"getRedirectResult",j:[]},zc:{name:"isSignInWithEmailLink",j:[Ol("emailLink")]},Fc:{name:"onAuthStateChanged",j:[Bl(Dl(),xl(),"nextOrObserver"),xl("opt_error",!0),xl("opt_completed",!0)]},Gc:{name:"onIdTokenChanged",j:[Bl(Dl(),xl(),"nextOrObserver"),xl("opt_error",!0),xl("opt_completed",!0)]},rb:{name:"sendPasswordResetEmail",j:[Ol("email"),Bl(Dl("opt_actionCodeSettings",!0),Ll(null,!0),"opt_actionCodeSettings",!0)]},sb:{name:"sendSignInLinkToEmail",j:[Ol("email"),Dl("actionCodeSettings")]},tb:{name:"setPersistence",j:[Ol("persistence")]},Qc:{name:"signInAndRetrieveDataWithCredential",j:[Ml()]},vb:{name:"signInAnonymously",j:[]},Ya:{name:"signInWithCredential",j:[Ml()]},Rc:{name:"signInWithCustomToken",j:[Ol("token")]},Sc:{name:"signInWithEmailAndPassword",j:[Ol("email"),Ol("password")]},Tc:{name:"signInWithEmailLink",j:[Ol("email"),Ol("emailLink",!0)]},Uc:{name:"signInWithPhoneNumber",j:[Ol("phoneNumber"),ql()]},Vc:{name:"signInWithPopup",j:[Ul()]},Wc:{name:"signInWithRedirect",j:[Ul()]},bd:{name:"updateCurrentUser",j:[Bl({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof uh)}},Ll(),"user")]},wb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Ol(null,!0)]},dd:{name:"useDeviceLanguage",j:[]},fd:{name:"verifyPasswordResetCode",j:[Ol("code")]}}),Kl(zh.prototype,{lc:{name:"languageCode",gb:Bl(Ol(),Ll(),"languageCode")},ti:{name:"tenantId",gb:Bl(Ol(),Ll(),"tenantId")}}),(zh.Persistence=Bu).LOCAL="local",zh.Persistence.SESSION="session",zh.Persistence.NONE="none",Wl(uh.prototype,{delete:{name:"delete",j:[]},mc:{name:"getIdTokenResult",j:[Pl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Pl("opt_forceRefresh",!0)]},Ac:{name:"linkAndRetrieveDataWithCredential",j:[Ml()]},mb:{name:"linkWithCredential",j:[Ml()]},Bc:{name:"linkWithPhoneNumber",j:[Ol("phoneNumber"),ql()]},Cc:{name:"linkWithPopup",j:[Ul()]},Dc:{name:"linkWithRedirect",j:[Ul()]},Jc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Ml()]},pb:{name:"reauthenticateWithCredential",j:[Ml()]},Kc:{name:"reauthenticateWithPhoneNumber",j:[Ol("phoneNumber"),ql()]},Lc:{name:"reauthenticateWithPopup",j:[Ul()]},Mc:{name:"reauthenticateWithRedirect",j:[Ul()]},reload:{name:"reload",j:[]},qb:{name:"sendEmailVerification",j:[Bl(Dl("opt_actionCodeSettings",!0),Ll(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Ol(null,!0)]},ad:{name:"unlink",j:[Ol("provider")]},xb:{name:"updateEmail",j:[Ol("email")]},yb:{name:"updatePassword",j:[Ol("password")]},cd:{name:"updatePhoneNumber",j:[Ml("phone")]},zb:{name:"updateProfile",j:[Dl("profile")]},Ab:{name:"verifyBeforeUpdateEmail",j:[Ol("email"),Bl(Dl("opt_actionCodeSettings",!0),Ll(null,!0),"opt_actionCodeSettings",!0)]}}),Wl(al.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Wl(sl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Wl(ve.prototype,{ma:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Kl(jc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",gb:Pl("appVerificationDisabledForTesting")}}),Wl(Vc.prototype,{confirm:{name:"confirm",j:[Ol("verificationCode")]}}),Hl(to,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[ao,wo,No,io],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Bl(Ol(),Dl(),"json")]),Hl(Eo,"credential",function(t,e){return new _o(t,e)},[Ol("email"),Ol("password")]),Wl(_o.prototype,{v:{name:"toJSON",j:[Ol(null,!0)]}}),Wl(lo.prototype,{Aa:{name:"addScope",j:[Ol("scope")]},Ia:{name:"setCustomParameters",j:[Dl("customOAuthParameters")]}}),Hl(lo,"credential",fo,[Bl(Ol(),Dl(),"token")]),Hl(Eo,"credentialWithLink",To,[Ol("email"),Ol("emailLink")]),Wl(po.prototype,{Aa:{name:"addScope",j:[Ol("scope")]},Ia:{name:"setCustomParameters",j:[Dl("customOAuthParameters")]}}),Hl(po,"credential",vo,[Bl(Ol(),Dl(),"token")]),Wl(yo.prototype,{Aa:{name:"addScope",j:[Ol("scope")]},Ia:{name:"setCustomParameters",j:[Dl("customOAuthParameters")]}}),Hl(yo,"credential",go,[Bl(Ol(),Bl(Dl(),Ll()),"idToken"),Bl(Ol(),Ll(),"accessToken",!0)]),Wl(mo.prototype,{Ia:{name:"setCustomParameters",j:[Dl("customOAuthParameters")]}}),Hl(mo,"credential",bo,[Bl(Ol(),Dl(),"token"),Ol("secret",!0)]),Wl(ho.prototype,{Aa:{name:"addScope",j:[Ol("scope")]},credential:{name:"credential",j:[Bl(Ol(),Bl(Dl(),Ll()),"optionsOrIdToken"),Bl(Ol(),Ll(),"accessToken",!0)]},Ia:{name:"setCustomParameters",j:[Dl("customOAuthParameters")]}}),Wl(oo.prototype,{v:{name:"toJSON",j:[Ol(null,!0)]}}),Wl(no.prototype,{v:{name:"toJSON",j:[Ol(null,!0)]}}),Hl(Ao,"credential",ko,[Ol("verificationId"),Ol("verificationCode")]),Wl(Ao.prototype,{cb:{name:"verifyPhoneNumber",j:[Bl(Ol(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?jl(t.session,$i)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?jl(t.session,Zi)&&Vl(t.multiFactorHint):t.session&&t.multiFactorUid?jl(t.session,Zi)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),ql()]}}),Wl(So.prototype,{v:{name:"toJSON",j:[Ol(null,!0)]}}),Wl(w.prototype,{toJSON:{name:"toJSON",j:[Ol(null,!0)]}}),Wl(Uo.prototype,{toJSON:{name:"toJSON",j:[Ol(null,!0)]}}),Wl(Fo.prototype,{toJSON:{name:"toJSON",j:[Ol(null,!0)]}}),Wl(Gc.prototype,{toJSON:{name:"toJSON",j:[Ol(null,!0)]}}),Wl(Wc.prototype,{Pc:{name:"resolveSignIn",j:[Fl()]}}),Wl($c.prototype,{Ob:{name:"getSession",j:[]},dc:{name:"enroll",j:[Fl(),Ol("displayName",!0)]},$c:{name:"unenroll",j:[Bl({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Vl},Ol(),"multiFactorInfoIdentifier")]}}),Wl(Al.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Hl(fi,"parseLink",_i,[Ol("link")]),Hl(pl,"assertion",function(t){return new Xc(t)},[Ml("phone")]),function(){if(void 0===zl||!zl.INTERNAL||!zl.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ti,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Zr,VERIFY_AND_CHANGE_EMAIL:ei,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:zh,AuthCredential:to,Error:w};Hl(t,"EmailAuthProvider",Eo,[]),Hl(t,"FacebookAuthProvider",lo,[]),Hl(t,"GithubAuthProvider",po,[]),Hl(t,"GoogleAuthProvider",yo,[]),Hl(t,"TwitterAuthProvider",mo,[]),Hl(t,"OAuthProvider",ho,[Ol("providerId")]),Hl(t,"SAMLAuthProvider",co,[Ol("providerId")]),Hl(t,"PhoneAuthProvider",Ao,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof zh)}}]),Hl(t,"RecaptchaVerifier",Al,[Bl(Ol(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Dl("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof zl.app.App)}}]),Hl(t,"ActionCodeURL",fi,[]),Hl(t,"PhoneMultiFactorGenerator",pl,[]),zl.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new zh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),zl.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:m((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:m(t.kc,t),addAuthTokenListener:m(t.bc,t),removeAuthTokenListener:m(t.Nc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),zl.registerVersion("@firebase/auth","0.14.3"),zl.INTERNAL.extendNamespace({User:uh})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var $a=(Za.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Js(e))},Za.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Xs(e)},Za.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},Za.prototype.prefixedName_=function(t){return this.prefix_+t},Za.prototype.toString=function(){return this.domStorage_.toString()},Za);function Za(t){this.domStorage_=t,this.prefix_="firebase:"}var tu=(eu.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},eu.prototype.get=function(t){return Zs(this.cache_,t)?this.cache_[t]:null},eu.prototype.remove=function(t){delete this.cache_[t]},eu);function eu(){this.cache_={},this.isInMemoryStorage=!0}function nu(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new $a(e)}}catch(t){}return new tu}function ru(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(55296<=i&&i<=56319){var o=i-55296;Ds(++r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(i<65536?e[n++]=i>>12|224:(e[n++]=i>>18|240,e[n++]=i>>12&63|128),e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}(t),n=new ra;n.update(e);var r=n.digest();return Ls.encodeByteArray(r)}function iu(t,e){Ds(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(gu.logLevel=Ta.VERBOSE,_u=gu.log.bind(gu),e&&yu.set("logging_enabled",!0)):"function"==typeof t?_u=t:(_u=null,yu.remove("logging_enabled"))}function ou(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===wu&&(wu=!1,null===_u&&!0===yu.get("logging_enabled")&&iu(!0)),_u){var n=bu.apply(null,t);_u(n)}}function su(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];ou.apply(void 0,As([n],t))}}function au(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+bu.apply(void 0,As(t));gu.error(n)}function uu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+bu.apply(void 0,As(t));throw gu.error(n),new Error(n)}function cu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+bu.apply(void 0,As(t));gu.warn(n)}function hu(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function lu(t,e){return t===e?0:t<e?-1:1}function fu(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Js(e))}function pu(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var du,vu=nu("localStorage"),yu=nu("sessionStorage"),gu=new Oa("@firebase/database"),mu=(du=1,function(){return du++}),bu=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=bu.apply(null,i):n+="object"==typeof i?Js(i):i,n+=" "}return n},_u=null,wu=!0,Eu="[MIN_NAME]",Tu="[MAX_NAME]",Iu=function(t,e){if(t===e)return 0;if(t===Eu||e===Tu)return-1;if(e===Eu||t===Tu)return 1;var n=Ou(t),r=Ou(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null===r&&t<e?-1:1},Su=function(t){if("object"!=typeof t||null===t)return Js(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Js(e[i]),r+=":",r+=Su(t[e[i]]);return r+="}"};function Nu(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function Cu(t){var e,n,r,i,o;Ds(!hu(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));var s=[];for(o=52;o;--o)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;--o)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var a=s.join(""),u="";for(o=0;o<64;o+=8){var c=parseInt(a.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()}function Au(t){try{t()}catch(e){setTimeout(function(){var t=e.stack||"";throw cu("Exception was thrown by user callback.",t),e},Math.floor(0))}}function ku(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n}var Ru=new RegExp("^-?(0*)\\d{1,10}$"),Ou=function(t){if(Ru.test(t)){var e=Number(t);if(-2147483648<=e&&e<=2147483647)return e}return null},Pu=(Object.defineProperty(Du,"Empty",{get:function(){return new Du("")},enumerable:!0,configurable:!0}),Du.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},Du.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},Du.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new Du(this.pieces_,t)},Du.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},Du.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},Du.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},Du.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},Du.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],e=this.pieceNum_;e<this.pieces_.length-1;e++)t.push(this.pieces_[e]);return new Du(t,0)},Du.prototype.child=function(t){for(var e=[],n=this.pieceNum_;n<this.pieces_.length;n++)e.push(this.pieces_[n]);if(t instanceof Du)for(n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else{var r=t.split("/");for(n=0;n<r.length;n++)0<r[n].length&&e.push(r[n])}return new Du(e,0)},Du.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},Du.relativePath=function(t,e){var n=t.getFront(),r=e.getFront();if(null===n)return e;if(n===r)return Du.relativePath(t.popFront(),e.popFront());throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")},Du.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=Iu(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},Du.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},Du.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},Du);function Du(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}var xu=(Object.defineProperty(Lu,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(Lu,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),Lu.prototype.push=function(t){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=pa(t),this.checkValid_()},Lu.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=pa(t),0<this.parts_.length&&--this.byteLength_},Lu.prototype.checkValid_=function(){if(this.byteLength_>Lu.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+Lu.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>Lu.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Lu.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},Lu.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},Lu);function Lu(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=pa(this.parts_[n]);this.checkValid_()}var Mu="firebaseio.com",Fu="websocket",Uu="long_polling",ju=(Vu.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},Vu.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},Vu.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},Vu.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},Vu.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&vu.set("host:"+this.host,this.internalHost))},Vu.prototype.connectionURL=function(t,e){var n;if(Ds("string"==typeof t,"typeof type must == string"),Ds("object"==typeof e,"typeof params must == object"),t===Fu)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==Uu)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return Nu(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},Vu.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},Vu.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},Vu);function Vu(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=vu.get("host:"+t)||this.host}function qu(t){var e=Zu(t),n=e.namespace;"firebase"===e.domain&&uu(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===e.domain||uu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&cu("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new ju(e.host,e.secure,n,r,"",n!==e.subdomain),path:new Pu(e.pathString)}}function Bu(t){return"string"==typeof t&&0!==t.length&&!tc.test(t)}function Wu(t){return"string"==typeof t&&0!==t.length&&!ec.test(t)}function Ku(t){return null===t||"string"==typeof t||"number"==typeof t&&!hu(t)||t&&"object"==typeof t&&Zs(t,".sv")}function Hu(t,e,n,r,i){i&&void 0===n||rc(ha(t,e,i),n,r)}function Gu(t,e,n,r,i){if(!i||void 0!==n){var o=ha(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];Nu(n,function(t,e){var n=new Pu(t);if(rc(o,e,r.child(n)),".priority"===n.getBack()&&!Ku(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!Bu(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Pu.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}}function zu(t,e,n,r){if(!r||void 0!==n){if(hu(n))throw new Error(ha(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ku(n))throw new Error(ha(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function Qu(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(ha(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function Yu(t,e,n,r){if(!(r&&void 0===n||Bu(n)))throw new Error(ha(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function Xu(t,e,n,r){if(!(r&&void 0===n||Wu(n)))throw new Error(ha(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function Ju(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")}function $u(t,e,n){var r,i=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Bu(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==i.length&&(r=(r=i)&&r.replace(/^\/*\.info(\/|$)/,"/"),!Wu(r)))throw new Error(ha(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}var Zu=function(t){var e="",n="",r="",i="",o="",s=!0,a="https",u=443;if("string"==typeof t){var c=t.indexOf("//");0<=c&&(a=t.substring(0,c-1),t=t.substring(c+2));var h=t.indexOf("/");-1===h&&(h=t.length);var l=t.indexOf("?");-1===l&&(l=t.length),e=t.substring(0,Math.min(h,l)),h<l&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(h,l)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Ns(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var a=s.split("=");2===a.length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):cu("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,l)));0<=(c=e.indexOf(":"))?(s="https"===a||"wss"===a,u=parseInt(e.substring(c+1),10)):c=t.length;var p=e.split(".");3===p.length?(n=p[1],o=r=p[0].toLowerCase()):2===p.length?n=p[0]:"localhost"===p[0].slice(0,c).toLowerCase()&&(n="localhost"),"ns"in f&&(o=f.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},tc=/[\[\].#$\/\u0000-\u001F\u007F]/,ec=/[\[\].#$\u0000-\u001F\u007F]/,nc=10485760,rc=function(n,t,e){var r=e instanceof Pu?new xu(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+r.toErrorString());if("function"==typeof t)throw new Error(n+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(hu(t))throw new Error(n+"contains "+t.toString()+" "+r.toErrorString());if("string"==typeof t&&t.length>nc/3&&pa(t)>nc)throw new Error(n+"contains a string greater than "+nc+" utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(Nu(t,function(t,e){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!Bu(t)))throw new Error(n+" contains an invalid key ("+t+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),rc(n,e,r),r.pop()}),i&&o)throw new Error(n+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},ic=(oc.prototype.cancel=function(t){ca("OnDisconnect.cancel",0,1,arguments.length),la("OnDisconnect.cancel",1,t,!0);var e=new Us;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},oc.prototype.remove=function(t){ca("OnDisconnect.remove",0,1,arguments.length),Ju("OnDisconnect.remove",this.path_),la("OnDisconnect.remove",1,t,!0);var e=new Us;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},oc.prototype.set=function(t,e){ca("OnDisconnect.set",1,2,arguments.length),Ju("OnDisconnect.set",this.path_),Hu("OnDisconnect.set",1,t,this.path_,!1),la("OnDisconnect.set",2,e,!0);var n=new Us;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},oc.prototype.setWithPriority=function(t,e,n){ca("OnDisconnect.setWithPriority",2,3,arguments.length),Ju("OnDisconnect.setWithPriority",this.path_),Hu("OnDisconnect.setWithPriority",1,t,this.path_,!1),zu("OnDisconnect.setWithPriority",2,e,!1),la("OnDisconnect.setWithPriority",3,n,!0);var r=new Us;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},oc.prototype.update=function(t,e){if(ca("OnDisconnect.update",1,2,arguments.length),Ju("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,cu("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Gu("OnDisconnect.update",1,t,this.path_,!1),la("OnDisconnect.update",2,e,!0);var i=new Us;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},oc);function oc(t,e){this.repo_=t,this.path_=e}var sc=(ac.prototype.toJSON=function(){return ca("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},ac);function ac(t,e){this.committed=t,this.snapshot=e}var uc,cc,hc,lc=(uc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",cc=0,hc=[],function(t){var e,n=t===cc;cc=t;var r=new Array(8);for(e=7;0<=e;e--)r[e]=uc.charAt(t%64),t=Math.floor(t/64);Ds(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;0<=e&&63===hc[e];e--)hc[e]=0;hc[e]++}else for(e=0;e<12;e++)hc[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=uc.charAt(hc[e]);return Ds(20===i.length,"nextPushId: Length should be 20."),i}),fc=(pc.Wrap=function(t,e){return new pc(t,e)},pc);function pc(t,e){this.name=t,this.node=e}var dc,vc=(yc.prototype.getCompare=function(){return this.compare.bind(this)},yc.prototype.indexedValueChanged=function(t,e){var n=new fc(Eu,t),r=new fc(Eu,e);return 0!==this.compare(n,r)},yc.prototype.minPost=function(){return fc.MIN},yc);function yc(){}var gc,mc=(Es(bc,gc=vc),Object.defineProperty(bc,"__EMPTY_NODE",{get:function(){return dc},set:function(t){dc=t},enumerable:!0,configurable:!0}),bc.prototype.compare=function(t,e){return Iu(t.name,e.name)},bc.prototype.isDefinedOn=function(t){throw xs("KeyIndex.isDefinedOn not expected to be called.")},bc.prototype.indexedValueChanged=function(t,e){return!1},bc.prototype.minPost=function(){return fc.MIN},bc.prototype.maxPost=function(){return new fc(Tu,dc)},bc.prototype.makePost=function(t,e){return Ds("string"==typeof t,"KeyIndex indexValue must always be a string."),new fc(t,dc)},bc.prototype.toString=function(){return".key"},bc);function bc(){return null!==gc&&gc.apply(this,arguments)||this}var _c,wc=new mc;function Ec(t){return"number"==typeof t?"number:"+Cu(t):"string:"+t}function Tc(t){if(t.isLeafNode()){var e=t.val();Ds("string"==typeof e||"number"==typeof e||"object"==typeof e&&Zs(e,".sv"),"Priority must be a string or number.")}else Ds(t===_c||t.isEmpty(),"priority of unexpected type.");Ds(t===_c||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")}var Ic,Sc,Nc,Cc,Ac=(Object.defineProperty(kc,"__childrenNodeConstructor",{get:function(){return Ic},set:function(t){Ic=t},enumerable:!0,configurable:!0}),kc.prototype.isLeafNode=function(){return!0},kc.prototype.getPriority=function(){return this.priorityNode_},kc.prototype.updatePriority=function(t){return new kc(this.value_,t)},kc.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:kc.__childrenNodeConstructor.EMPTY_NODE},kc.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:kc.__childrenNodeConstructor.EMPTY_NODE},kc.prototype.hasChild=function(){return!1},kc.prototype.getPredecessorChildName=function(t,e){return null},kc.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:kc.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},kc.prototype.updateChild=function(t,e){var n=t.getFront();return null===n?e:e.isEmpty()&&".priority"!==n?this:(Ds(".priority"!==n||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,kc.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),e)))},kc.prototype.isEmpty=function(){return!1},kc.prototype.numChildren=function(){return 0},kc.prototype.forEachChild=function(t,e){return!1},kc.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},kc.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Ec(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"==e?Cu(this.value_):this.value_,this.lazyHash_=ru(t)}return this.lazyHash_},kc.prototype.getValue=function(){return this.value_},kc.prototype.compareTo=function(t){return t===kc.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof kc.__childrenNodeConstructor?-1:(Ds(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},kc.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=kc.VALUE_TYPE_ORDER.indexOf(e),i=kc.VALUE_TYPE_ORDER.indexOf(n);return Ds(0<=r,"Unknown leaf type: "+e),Ds(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},kc.prototype.withIndex=function(){return this},kc.prototype.isIndexed=function(){return!0},kc.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))},kc.VALUE_TYPE_ORDER=["object","boolean","number","string"],kc);function kc(t,e){void 0===e&&(e=kc.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,Ds(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Tc(this.priorityNode_)}function Rc(){return null!==Cc&&Cc.apply(this,arguments)||this}var Oc=new(Es(Rc,Cc=vc),Rc.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?Iu(t.name,e.name):i},Rc.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},Rc.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},Rc.prototype.minPost=function(){return fc.MIN},Rc.prototype.maxPost=function(){return new fc(Tu,new Ac("[PRIORITY-POST]",Nc))},Rc.prototype.makePost=function(t,e){var n=Sc(t);return new fc(e,new Ac("[PRIORITY-POST]",n))},Rc.prototype.toString=function(){return".priority"},Rc),Pc=(Dc.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},Dc.prototype.hasNext=function(){return 0<this.nodeStack_.length},Dc.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},Dc);function Dc(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var xc=(Lc.prototype.copy=function(t,e,n,r,i){return new Lc(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Lc.prototype.count=function(){return this.left.count()+1+this.right.count()},Lc.prototype.isEmpty=function(){return!1},Lc.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},Lc.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},Lc.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},Lc.prototype.minKey=function(){return this.min_().key},Lc.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Lc.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},Lc.prototype.removeMin_=function(){if(this.left.isEmpty())return Uc.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},Lc.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Uc.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},Lc.prototype.isRed_=function(){return this.color},Lc.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},Lc.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},Lc.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},Lc.prototype.rotateLeft_=function(){var t=this.copy(null,null,Lc.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Lc.prototype.rotateRight_=function(){var t=this.copy(null,null,Lc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Lc.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Lc.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},Lc.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},Lc.RED=!0,Lc.BLACK=!1,Lc);function Lc(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Lc.RED,this.left=null!=r?r:Uc.EMPTY_NODE,this.right=null!=i?i:Uc.EMPTY_NODE}var Mc=(Fc.prototype.copy=function(t,e,n,r,i){return this},Fc.prototype.insert=function(t,e,n){return new xc(t,e,null)},Fc.prototype.remove=function(t,e){return this},Fc.prototype.count=function(){return 0},Fc.prototype.isEmpty=function(){return!0},Fc.prototype.inorderTraversal=function(t){return!1},Fc.prototype.reverseTraversal=function(t){return!1},Fc.prototype.minKey=function(){return null},Fc.prototype.maxKey=function(){return null},Fc.prototype.check_=function(){return 0},Fc.prototype.isRed_=function(){return!1},Fc);function Fc(){}var Uc=(jc.prototype.insert=function(t,e){return new jc(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,xc.BLACK,null,null))},jc.prototype.remove=function(t){return new jc(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,xc.BLACK,null,null))},jc.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},jc.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},jc.prototype.isEmpty=function(){return this.root_.isEmpty()},jc.prototype.count=function(){return this.root_.count()},jc.prototype.minKey=function(){return this.root_.minKey()},jc.prototype.maxKey=function(){return this.root_.maxKey()},jc.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},jc.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},jc.prototype.getIterator=function(t){return new Pc(this.root_,null,this.comparator_,!1,t)},jc.prototype.getIteratorFrom=function(t,e){return new Pc(this.root_,t,this.comparator_,!1,e)},jc.prototype.getReverseIteratorFrom=function(t,e){return new Pc(this.root_,t,this.comparator_,!0,e)},jc.prototype.getReverseIterator=function(t){return new Pc(this.root_,null,this.comparator_,!0,t)},jc.EMPTY_NODE=new Mc,jc);function jc(t,e){void 0===e&&(e=jc.EMPTY_NODE),this.comparator_=t,this.root_=e}var Vc=Math.log(2),qc=(Bc.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},Bc);function Bc(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Vc,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}var Wc,Kc,Hc=function(c,t,h,e){c.sort(t);var l=function(t,e){var n,r,i=e-t;if(0==i)return null;if(1==i)return n=c[t],r=h?h(n):n,new xc(r,n.node,xc.BLACK,null,null);var o=parseInt(i/2,10)+t,s=l(t,o),a=l(o+1,e);return n=c[o],r=h?h(n):n,new xc(r,n.node,xc.BLACK,s,a)},n=function(t){for(var e=null,n=null,a=c.length,r=function(t,e){var n=a-t,r=a;a-=t;var i=l(1+n,r),o=c[n],s=h?h(o):o;u(new xc(s,o.node,e,null,i))},u=function(t){e=e?e.left=t:n=t},i=0;i<t.count;++i){var o=t.nextBitIsOne(),s=Math.pow(2,t.count-(i+1));o?r(s,xc.BLACK):(r(s,xc.BLACK),r(s,xc.RED))}return n}(new qc(c.length));return new Uc(e||t,n)},Gc={},zc=(Object.defineProperty(Qc,"Default",{get:function(){return Ds(Oc,"ChildrenNode.ts has not been loaded"),Wc=Wc||new Qc({".priority":Gc},{".priority":Oc})},enumerable:!0,configurable:!0}),Qc.prototype.get=function(t){var e=ta(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Uc?e:null},Qc.prototype.hasIndex=function(t){return Zs(this.indexSet_,t.toString())},Qc.prototype.addIndex=function(t,e){Ds(t!==wc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=e.getIterator(fc.Wrap),s=o.getNext();s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();n=i?Hc(r,t.getCompare()):Gc;var a=t.toString(),u=Ts({},this.indexSet_);u[a]=t;var c=Ts({},this.indexes_);return c[a]=n,new Qc(c,u)},Qc.prototype.addToIndexes=function(u,c){var h=this;return new Qc(na(this.indexes_,function(t,e){var n=ta(h.indexSet_,e);if(Ds(n,"Missing index implementation for "+e),t===Gc){if(n.isDefinedOn(u.node)){for(var r=[],i=c.getIterator(fc.Wrap),o=i.getNext();o;)o.name!==u.name&&r.push(o),o=i.getNext();return r.push(u),Hc(r,n.getCompare())}return Gc}var s=c.get(u.name),a=t;return s&&(a=a.remove(new fc(u.name,s))),a.insert(u,u.node)}),this.indexSet_)},Qc.prototype.removeFromIndexes=function(n,r){return new Qc(na(this.indexes_,function(t){if(t===Gc)return t;var e=r.get(n.name);return e?t.remove(new fc(n.name,e)):t}),this.indexSet_)},Qc);function Qc(t,e){this.indexes_=t,this.indexSet_=e}function Yc(t,e){return Iu(t.name,e.name)}function Xc(t,e){return Iu(t,e)}var Jc,$c=(Object.defineProperty(Zc,"EMPTY_NODE",{get:function(){return Kc=Kc||new Zc(new Uc(Xc),null,zc.Default)},enumerable:!0,configurable:!0}),Zc.prototype.isLeafNode=function(){return!1},Zc.prototype.getPriority=function(){return this.priorityNode_||Kc},Zc.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new Zc(this.children_,t,this.indexMap_)},Zc.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Kc:e},Zc.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},Zc.prototype.hasChild=function(t){return null!==this.children_.get(t)},Zc.prototype.updateImmediateChild=function(t,e){if(Ds(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new fc(t,e),r=void 0,i=void 0;i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_));var o=r.isEmpty()?Kc:this.priorityNode_;return new Zc(r,o,i)},Zc.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Ds(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},Zc.prototype.isEmpty=function(){return this.children_.isEmpty()},Zc.prototype.numChildren=function(){return this.children_.count()},Zc.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,s=!0;if(this.forEachChild(Oc,function(t,e){r[t]=e.val(n),i++,s&&Zc.INTEGER_REGEXP_.test(t)?o=Math.max(o,Number(t)):s=!1}),!n&&s&&o<2*i){var t=[];for(var e in r)t[e]=r[e];return t}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},Zc.prototype.hash=function(){if(null===this.lazyHash_){var r="";this.getPriority().isEmpty()||(r+="priority:"+Ec(this.getPriority().val())+":"),this.forEachChild(Oc,function(t,e){var n=e.hash();""!==n&&(r+=":"+t+":"+n)}),this.lazyHash_=""===r?"":ru(r)}return this.lazyHash_},Zc.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new fc(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},Zc.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},Zc.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new fc(e,this.children_.get(e)):null},Zc.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},Zc.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new fc(e,this.children_.get(e)):null},Zc.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},Zc.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},Zc.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,fc.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},Zc.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},Zc.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,fc.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},Zc.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===eh?-1:0},Zc.prototype.withIndex=function(t){if(t===wc||this.indexMap_.hasIndex(t))return this;var e=this.indexMap_.addIndex(t,this.children_);return new Zc(this.children_,this.priorityNode_,e)},Zc.prototype.isIndexed=function(t){return t===wc||this.indexMap_.hasIndex(t)},Zc.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()!==e.children_.count())return!1;for(var n=this.getIterator(Oc),r=e.getIterator(Oc),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1},Zc.prototype.resolveIndex_=function(t){return t===wc?null:this.indexMap_.get(t.toString())},Zc.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,Zc);function Zc(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Tc(this.priorityNode_),this.children_.isEmpty()&&Ds(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function th(){return Jc.call(this,new Uc(Xc),$c.EMPTY_NODE,zc.Default)||this}var eh=new(Es(th,Jc=$c),th.prototype.compareTo=function(t){return t===this?0:1},th.prototype.equals=function(t){return t===this},th.prototype.getPriority=function(){return this},th.prototype.getImmediateChild=function(t){return $c.EMPTY_NODE},th.prototype.isEmpty=function(){return!1},th);Object.defineProperties(fc,{MIN:{value:new fc(Eu,$c.EMPTY_NODE)},MAX:{value:new fc(Tu,eh)}}),mc.__EMPTY_NODE=$c.EMPTY_NODE,Ac.__childrenNodeConstructor=$c,_c=eh,Nc=eh;var nh,rh=!0;function ih(r,t){if(void 0===t&&(t=null),null===r)return $c.EMPTY_NODE;if("object"==typeof r&&".priority"in r&&(t=r[".priority"]),Ds(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof r&&".value"in r&&null!==r[".value"]&&(r=r[".value"]),"object"!=typeof r||".sv"in r)return new Ac(r,ih(t));if(r instanceof Array||!rh){var i=$c.EMPTY_NODE;return Nu(r,function(t,e){if(Zs(r,t)&&"."!==t.substring(0,1)){var n=ih(e);!n.isLeafNode()&&n.isEmpty()||(i=i.updateImmediateChild(t,n))}}),i.updatePriority(ih(t))}var o=[],s=!1;if(Nu(r,function(t,e){if("."!==t.substring(0,1)){var n=ih(e);n.isEmpty()||(s=s||!n.getPriority().isEmpty(),o.push(new fc(t,n)))}}),0===o.length)return $c.EMPTY_NODE;var e=Hc(o,Yc,function(t){return t.name},Xc);if(s){var n=Hc(o,Oc.getCompare());return new $c(e,ih(t),new zc({".priority":n},{".priority":Oc}))}return new $c(e,ih(t),zc.Default)}function oh(){return null!==nh&&nh.apply(this,arguments)||this}Sc=ih;var sh,ah=new(Es(oh,nh=vc),oh.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?Iu(t.name,e.name):n},oh.prototype.isDefinedOn=function(t){return!0},oh.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},oh.prototype.minPost=function(){return fc.MIN},oh.prototype.maxPost=function(){return fc.MAX},oh.prototype.makePost=function(t,e){var n=ih(t);return new fc(e,n)},oh.prototype.toString=function(){return".value"},oh),uh=(Es(ch,sh=vc),ch.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},ch.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},ch.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?Iu(t.name,e.name):i},ch.prototype.makePost=function(t,e){var n=ih(t),r=$c.EMPTY_NODE.updateChild(this.indexPath_,n);return new fc(e,r)},ch.prototype.maxPost=function(){var t=$c.EMPTY_NODE.updateChild(this.indexPath_,eh);return new fc(Tu,t)},ch.prototype.toString=function(){return this.indexPath_.slice().join("/")},ch);function ch(t){var e=sh.call(this)||this;return e.indexPath_=t,Ds(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),e}var hh=(lh.prototype.val=function(){return ca("DataSnapshot.val",0,0,arguments.length),this.node_.val()},lh.prototype.exportVal=function(){return ca("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},lh.prototype.toJSON=function(){return ca("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},lh.prototype.exists=function(){return ca("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},lh.prototype.child=function(t){ca("DataSnapshot.child",0,1,arguments.length),t=String(t),Xu("DataSnapshot.child",1,t,!1);var e=new Pu(t),n=this.ref_.child(e);return new lh(this.node_.getChild(e),n,Oc)},lh.prototype.hasChild=function(t){ca("DataSnapshot.hasChild",1,1,arguments.length),Xu("DataSnapshot.hasChild",1,t,!1);var e=new Pu(t);return!this.node_.getChild(e).isEmpty()},lh.prototype.getPriority=function(){return ca("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},lh.prototype.forEach=function(n){var r=this;return ca("DataSnapshot.forEach",1,1,arguments.length),la("DataSnapshot.forEach",1,n,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(t,e){return n(new lh(e,r.ref_.child(t),Oc))})},lh.prototype.hasChildren=function(){return ca("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(lh.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),lh.prototype.numChildren=function(){return ca("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},lh.prototype.getRef=function(){return ca("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(lh.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),lh);function lh(t,e,n){this.node_=t,this.ref_=e,this.index_=n}var fh=(ph.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},ph.prototype.getEventType=function(){return this.eventType},ph.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},ph.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Js(this.snapshot.exportVal())},ph);function ph(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var dh=(vh.prototype.getPath=function(){return this.path},vh.prototype.getEventType=function(){return"cancel"},vh.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},vh.prototype.toString=function(){return this.path.toString()+":cancel"},vh);function vh(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var yh=(gh.prototype.respondsTo=function(t){return"value"===t},gh.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new fh("value",this,new hh(t.snapshotNode,e.getRef(),n))},gh.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Ds(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},gh.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new dh(this,t,e):null},gh.prototype.matches=function(t){return t instanceof gh&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},gh.prototype.hasAnyCallback=function(){return null!==this.callback_},gh);function gh(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}var mh,bh=(_h.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Zs(this.callbacks_,e)},_h.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new dh(this,t,e):null},_h.prototype.createEvent=function(t,e){Ds(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new fh(t.type,this,new hh(t.snapshotNode,n,r),t.prevName)},_h.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Ds(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},_h.prototype.matches=function(e){var n=this;if(e instanceof _h){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var t=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),i=t.length;if(i===r.length){if(1!==i)return r.every(function(t){return e.callbacks_[t]===n.callbacks_[t]});var o=t[0],s=r[0];return!(s!==o||e.callbacks_[o]&&this.callbacks_[s]&&e.callbacks_[o]!==this.callbacks_[s])}}}return!1},_h.prototype.hasAnyCallback=function(){return null!==this.callbacks_},_h);function _h(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}var wh=(Object.defineProperty(Eh,"__referenceConstructor",{get:function(){return Ds(mh,"Reference.ts has not been loaded"),mh},set:function(t){mh=t},enumerable:!0,configurable:!0}),Eh.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===wc){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Eu)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Tu)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Oc){if(null!=e&&!Ku(e)||null!=n&&!Ku(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ds(t.getIndex()instanceof uh||t.getIndex()===ah,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},Eh.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},Eh.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},Eh.prototype.getQueryParams=function(){return this.queryParams_},Eh.prototype.getRef=function(){return ca("Query.ref",0,0,arguments.length),new Eh.__referenceConstructor(this.repo,this.path)},Eh.prototype.on=function(t,e,n,r){ca("Query.on",2,4,arguments.length),Qu("Query.on",1,t,!1),la("Query.on",2,e,!1);var i=Eh.getCancelAndContextArgs_("Query.on",n,r);if("value"===t)this.onValueEvent(e,i.cancel,i.context);else{var o={};o[t]=e,this.onChildEvent(o,i.cancel,i.context)}return e},Eh.prototype.onValueEvent=function(t,e,n){var r=new yh(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},Eh.prototype.onChildEvent=function(t,e,n){var r=new bh(t,e,n);this.repo.addEventCallbackForQuery(this,r)},Eh.prototype.off=function(t,e,n){ca("Query.off",0,3,arguments.length),Qu("Query.off",1,t,!0),la("Query.off",2,e,!0),fa("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new yh(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new bh(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},Eh.prototype.once=function(e,n,t,r){var i=this;ca("Query.once",1,4,arguments.length),Qu("Query.once",1,e,!1),la("Query.once",2,n,!0);var o=Eh.getCancelAndContextArgs_("Query.once",t,r),s=!0,a=new Us;a.promise.catch(function(){});var u=function(t){s&&(s=!1,i.off(e,u),n&&n.bind(o.context)(t),a.resolve(t))};return this.on(e,u,function(t){i.off(e,u),o.cancel&&o.cancel.bind(o.context)(t),a.reject(t)}),a.promise},Eh.prototype.limitToFirst=function(t){if(ca("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Eh(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},Eh.prototype.limitToLast=function(t){if(ca("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Eh(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},Eh.prototype.orderByChild=function(t){if(ca("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Xu("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var e=new Pu(t);if(e.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var n=new uh(e),r=this.queryParams_.orderBy(n);return Eh.validateQueryEndpoints_(r),new Eh(this.repo,this.path,r,!0)},Eh.prototype.orderByKey=function(){ca("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(wc);return Eh.validateQueryEndpoints_(t),new Eh(this.repo,this.path,t,!0)},Eh.prototype.orderByPriority=function(){ca("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(Oc);return Eh.validateQueryEndpoints_(t),new Eh(this.repo,this.path,t,!0)},Eh.prototype.orderByValue=function(){ca("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(ah);return Eh.validateQueryEndpoints_(t),new Eh(this.repo,this.path,t,!0)},Eh.prototype.startAt=function(t,e){void 0===t&&(t=null),ca("Query.startAt",0,2,arguments.length),Hu("Query.startAt",1,t,this.path,!0),Yu("Query.startAt",2,e,!0);var n=this.queryParams_.startAt(t,e);if(Eh.validateLimit_(n),Eh.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new Eh(this.repo,this.path,n,this.orderByCalled_)},Eh.prototype.endAt=function(t,e){void 0===t&&(t=null),ca("Query.endAt",0,2,arguments.length),Hu("Query.endAt",1,t,this.path,!0),Yu("Query.endAt",2,e,!0);var n=this.queryParams_.endAt(t,e);if(Eh.validateLimit_(n),Eh.validateQueryEndpoints_(n),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new Eh(this.repo,this.path,n,this.orderByCalled_)},Eh.prototype.equalTo=function(t,e){if(ca("Query.equalTo",1,2,arguments.length),Hu("Query.equalTo",1,t,this.path,!1),Yu("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},Eh.prototype.toString=function(){return ca("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},Eh.prototype.toJSON=function(){return ca("Query.toJSON",0,1,arguments.length),this.toString()},Eh.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},Eh.prototype.queryIdentifier=function(){var t=this.queryObject(),e=Su(t);return"{}"===e?"default":e},Eh.prototype.isEqual=function(t){if(ca("Query.isEqual",1,1,arguments.length),!(t instanceof Eh))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var e=this.repo===t.repo,n=this.path.equals(t.path),r=this.queryIdentifier()===t.queryIdentifier();return e&&n&&r},Eh.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,la(t,3,r.cancel,!0),r.context=n,fa(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(ha(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(Eh.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),Eh);function Eh(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}var Th=(Ih.prototype.getImmediateChild=function(t){return new Ih(this.node_.getImmediateChild(t))},Ih.prototype.node=function(){return this.node_},Ih);function Ih(t){this.node_=t}var Sh=(Nh.prototype.getImmediateChild=function(t){var e=this.path_.child(t);return new Nh(this.syncTree_,e)},Nh.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},Nh);function Nh(t,e){this.syncTree_=t,this.path_=e}function Ch(t,e,n,r){return Ph(e,new Sh(n,t),r)}function Ah(t,e,n){return Ph(t,new Th(e),n)}var kh=function(t,e,n){return t&&"object"==typeof t?(Ds(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Rh(t[".sv"],e,n):"object"==typeof t[".sv"]?Oh(t[".sv"],e):void Ds(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Rh=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Ds(!1,"Unexpected server value: "+t)}},Oh=function(t,e,n){t.hasOwnProperty("increment")||Ds(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Ds(!1,"Unexpected increment value: "+r);var i=e.node();if(Ds(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r};function Ph(t,r,i){var o,e=t.getPriority().val(),n=kh(e,r.getImmediateChild(".priority"),i);if(t.isLeafNode()){var s=t,a=kh(s.getValue(),r,i);return a!==s.getValue()||n!==s.getPriority().val()?new Ac(a,ih(n)):t}var u=t;return n!==(o=u).getPriority().val()&&(o=o.updatePriority(new Ac(n))),u.forEachChild(Oc,function(t,e){var n=Ph(e,r.getImmediateChild(t),i);n!==e&&(o=o.updateImmediateChild(t,n))}),o}var Dh,xh,Lh=(Mh.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&0<this.children.size){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},Mh.prototype.remember=function(t,e){if(t.isEmpty())this.value=e,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(t,e);else{var n=t.getFront();this.children.has(n)||this.children.set(n,new Mh);var r=this.children.get(n);t=t.popFront(),r.remember(t,e)}},Mh.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Oc,function(t,e){n.remember(new Pu(t),e)}),this.forget(t)}if(0<this.children.size){var r=t.getFront();return t=t.popFront(),!this.children.has(r)||this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},Mh.prototype.forEachTree=function(r,i){null!==this.value?i(r,this.value):this.forEachChild(function(t,e){var n=new Pu(r.toString()+"/"+t);e.forEachTree(n,i)})},Mh.prototype.forEachChild=function(n){this.children.forEach(function(t,e){n(e,t)})},Mh);function Mh(){this.value=null,this.children=new Map}(xh=Dh=Dh||{})[xh.OVERWRITE=0]="OVERWRITE",xh[xh.MERGE=1]="MERGE",xh[xh.ACK_USER_WRITE=2]="ACK_USER_WRITE",xh[xh.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Fh=(Uh.User=new Uh(!0,!1,null,!1),Uh.Server=new Uh(!1,!0,null,!1),Uh.forServerTaggedQuery=function(t){return new Uh(!1,!0,t,!0)},Uh);function Uh(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Ds(!r||e,"Tagged queries must be from server.")}var jh,Vh=(qh.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Ds(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new Pu(t));return new qh(Pu.Empty,e,this.revert)}return Ds(this.path.getFront()===t,"operationForChild called for unrelated child."),new qh(this.path.popFront(),this.affectedTree,this.revert)},qh);function qh(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Dh.ACK_USER_WRITE,this.source=Fh.User}var Bh=(Wh.fromObject=function(t){var n=Wh.Empty;return Nu(t,function(t,e){n=n.set(new Pu(t),e)}),n},Wh.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},Wh.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Pu.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null===r)return null;var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null==i?null:{path:new Pu(n).child(i.path),value:i.value}},Wh.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},Wh.prototype.subtree=function(t){if(t.isEmpty())return this;var e=t.getFront(),n=this.children.get(e);return null!==n?n.subtree(t.popFront()):Wh.Empty},Wh.prototype.set=function(t,e){if(t.isEmpty())return new Wh(e,this.children);var n=t.getFront(),r=(this.children.get(n)||Wh.Empty).set(t.popFront(),e),i=this.children.insert(n,r);return new Wh(this.value,i)},Wh.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?Wh.Empty:new Wh(null,this.children);var e=t.getFront(),n=this.children.get(e);if(n){var r=n.remove(t.popFront()),i=void 0;return i=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&i.isEmpty()?Wh.Empty:new Wh(this.value,i)}return this},Wh.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},Wh.prototype.setTree=function(t,e){if(t.isEmpty())return e;var n=t.getFront(),r=(this.children.get(n)||Wh.Empty).setTree(t.popFront(),e),i=void 0;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Wh(this.value,i)},Wh.prototype.fold=function(t){return this.fold_(Pu.Empty,t)},Wh.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(t,e){i[t]=e.fold_(n.child(t),r)}),r(n,this.value,i)},Wh.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Pu.Empty,e)},Wh.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},Wh.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Pu.Empty,e)},Wh.prototype.foreachOnPath_=function(t,e,n){if(t.isEmpty())return this;this.value&&n(e,this.value);var r=t.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(t.popFront(),e.child(r),n):Wh.Empty},Wh.prototype.foreach=function(t){this.foreach_(Pu.Empty,t)},Wh.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(t,e){e.foreach_(n.child(t),r)}),this.value&&r(n,this.value)},Wh.prototype.foreachChild=function(n){this.children.inorderTraversal(function(t,e){e.value&&n(t,e.value)})},Wh.Empty=new Wh(null),Wh);function Wh(t,e){void 0===e&&(e=jh=jh||new Uc(lu)),this.value=t,this.children=e}var Kh=(Hh.prototype.operationForChild=function(t){return this.path.isEmpty()?new Hh(this.source,Pu.Empty):new Hh(this.source,this.path.popFront())},Hh);function Hh(t,e){this.source=t,this.path=e,this.type=Dh.LISTEN_COMPLETE}var Gh=(zh.prototype.operationForChild=function(t){return this.path.isEmpty()?new zh(this.source,Pu.Empty,this.snap.getImmediateChild(t)):new zh(this.source,this.path.popFront(),this.snap)},zh);function zh(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Dh.OVERWRITE}var Qh=(Yh.prototype.operationForChild=function(t){if(this.path.isEmpty()){var e=this.children.subtree(new Pu(t));return e.isEmpty()?null:e.value?new Gh(this.source,Pu.Empty,e.value):new Yh(this.source,Pu.Empty,e)}return Ds(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new Yh(this.source,this.path.popFront(),this.children)},Yh.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},Yh);function Yh(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Dh.MERGE}var Xh=(Jh.prototype.isFullyInitialized=function(){return this.fullyInitialized_},Jh.prototype.isFiltered=function(){return this.filtered_},Jh.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},Jh.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},Jh.prototype.getNode=function(){return this.node_},Jh);function Jh(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var $h=(Zh.prototype.updateEventSnap=function(t,e,n){return new Zh(new Xh(t,e,n),this.serverCache_)},Zh.prototype.updateServerSnap=function(t,e,n){return new Zh(this.eventCache_,new Xh(t,e,n))},Zh.prototype.getEventCache=function(){return this.eventCache_},Zh.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},Zh.prototype.getServerCache=function(){return this.serverCache_},Zh.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},Zh.Empty=new Zh(new Xh($c.EMPTY_NODE,!1,!1),new Xh($c.EMPTY_NODE,!1,!1)),Zh);function Zh(t,e){this.eventCache_=t,this.serverCache_=e}var tl=(el.valueChange=function(t){return new el(el.VALUE,t)},el.childAddedChange=function(t,e){return new el(el.CHILD_ADDED,e,t)},el.childRemovedChange=function(t,e){return new el(el.CHILD_REMOVED,e,t)},el.childChangedChange=function(t,e,n){return new el(el.CHILD_CHANGED,e,t,n)},el.childMovedChange=function(t,e){return new el(el.CHILD_MOVED,e,t)},el.CHILD_ADDED="child_added",el.CHILD_REMOVED="child_removed",el.CHILD_CHANGED="child_changed",el.CHILD_MOVED="child_moved",el.VALUE="value",el);function el(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}var nl=(rl.prototype.updateChild=function(t,e,n,r,i,o){Ds(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(tl.childRemovedChange(e,s)):Ds(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(tl.childAddedChange(e,n)):o.trackChildChange(tl.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},rl.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(Oc,function(t,e){n.hasChild(t)||i.trackChildChange(tl.childRemovedChange(t,e))}),n.isLeafNode()||n.forEachChild(Oc,function(t,e){if(r.hasChild(t)){var n=r.getImmediateChild(t);n.equals(e)||i.trackChildChange(tl.childChangedChange(t,e,n))}else i.trackChildChange(tl.childAddedChange(t,e))})),n.withIndex(this.index_)},rl.prototype.updatePriority=function(t,e){return t.isEmpty()?$c.EMPTY_NODE:t.updatePriority(e)},rl.prototype.filtersNodes=function(){return!1},rl.prototype.getIndexedFilter=function(){return this},rl.prototype.getIndex=function(){return this.index_},rl);function rl(t){this.index_=t}var il=(ol.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Ds(e===tl.CHILD_ADDED||e===tl.CHILD_CHANGED||e===tl.CHILD_REMOVED,"Only child changes supported for tracking"),Ds(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===tl.CHILD_ADDED&&i===tl.CHILD_REMOVED)this.changeMap.set(n,tl.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===tl.CHILD_REMOVED&&i===tl.CHILD_ADDED)this.changeMap.delete(n);else if(e===tl.CHILD_REMOVED&&i===tl.CHILD_CHANGED)this.changeMap.set(n,tl.childRemovedChange(n,r.oldSnap));else if(e===tl.CHILD_CHANGED&&i===tl.CHILD_ADDED)this.changeMap.set(n,tl.childAddedChange(n,t.snapshotNode));else{if(e!==tl.CHILD_CHANGED||i!==tl.CHILD_CHANGED)throw xs("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,tl.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},ol.prototype.getChanges=function(){return Array.from(this.changeMap.values())},ol);function ol(){this.changeMap=new Map}function sl(){}var al=new(sl.prototype.getCompleteChild=function(t){return null},sl.prototype.getChildAfterChild=function(t,e,n){return null},sl),ul=(cl.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Xh(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},cl.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},cl);function cl(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}var hl=function(t,e){this.viewCache=t,this.changes=e},ll=(fl.prototype.assertIndexed=function(t){Ds(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Ds(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},fl.prototype.applyOperation=function(t,e,n,r){var i,o,s=new il;if(e.type===Dh.OVERWRITE){var a=e;i=a.source.fromUser?this.applyUserOverwrite_(t,a.path,a.snap,n,r,s):(Ds(a.source.fromServer,"Unknown source."),o=a.source.tagged||t.getServerCache().isFiltered()&&!a.path.isEmpty(),this.applyServerOverwrite_(t,a.path,a.snap,n,r,o,s))}else if(e.type===Dh.MERGE){var u=e;i=u.source.fromUser?this.applyUserMerge_(t,u.path,u.children,n,r,s):(Ds(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.getServerCache().isFiltered(),this.applyServerMerge_(t,u.path,u.children,n,r,o,s))}else if(e.type===Dh.ACK_USER_WRITE){var c=e;i=c.revert?this.revertUserWrite_(t,c.path,n,r,s):this.ackUserWrite_(t,c.path,c.affectedTree,n,r,s)}else{if(e.type!==Dh.LISTEN_COMPLETE)throw xs("Unknown operation type: "+e.type);i=this.listenComplete_(t,e.path,n,s)}var h=s.getChanges();return fl.maybeAddValueEvent_(t,i,h),new hl(i,h)},fl.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(0<n.length||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(tl.valueChange(e.getCompleteEventSnap()))}},fl.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s=void 0,a=void 0;if(e.isEmpty())if(Ds(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=u instanceof $c?u:$c.EMPTY_NODE,h=n.calcCompleteEventChildren(c);s=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var l=n.calcCompleteEventCache(t.getCompleteServerSnap());s=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var f=e.getFront();if(".priority"===f){Ds(1===e.getLength(),"Can't have a priority with additional path components");var p=o.getNode();a=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,p,a);s=null!=d?this.filter_.updatePriority(p,d):o.getNode()}else{var v=e.popFront(),y=void 0;if(o.isCompleteForChild(f)){a=t.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),a);y=null!=g?o.getNode().getImmediateChild(f).updateChild(v,g):o.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,t.getServerCache());s=null!=y?this.filter_.updateChild(o.getNode(),f,y,v,r,i):o.getNode()}}return t.updateEventSnap(s,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},fl.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var h=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),h,null)}else{var l=e.getFront();if(!u.isCompleteForPath(e)&&1<e.getLength())return t;var f=e.popFront(),p=u.getNode().getImmediateChild(l).updateChild(f,n);a=".priority"===l?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),l,p,f,al,null)}var d=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),v=new ul(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,v,s)},fl.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new ul(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var h=e.getFront();if(".priority"===h)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var l=e.popFront(),f=u.getNode().getImmediateChild(h),p=void 0;if(l.isEmpty())p=n;else{var d=c.getCompleteChild(h);p=null!=d?".priority"===l.getBack()&&d.getChild(l.parent()).isEmpty()?d:d.updateChild(l,n):$c.EMPTY_NODE}if(f.equals(p))s=t;else{var v=this.filter_.updateChild(u.getNode(),h,p,l,c,o);s=t.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},fl.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},fl.prototype.applyUserMerge_=function(r,i,t,o,s,a){var u=this,c=r;return t.foreach(function(t,e){var n=i.child(t);fl.cacheHasChild_(r,n.getFront())&&(c=u.applyUserOverwrite_(c,n,e,o,s,a))}),t.foreach(function(t,e){var n=i.child(t);fl.cacheHasChild_(r,n.getFront())||(c=u.applyUserOverwrite_(c,n,e,o,s,a))}),c},fl.prototype.applyMerge_=function(n,t){return t.foreach(function(t,e){n=n.updateChild(t,e)}),n},fl.prototype.applyServerMerge_=function(o,t,e,s,a,u,c){var h=this;if(o.getServerCache().getNode().isEmpty()&&!o.getServerCache().isFullyInitialized())return o;var n,l=o;n=t.isEmpty()?e:Bh.Empty.setTree(t,e);var f=o.getServerCache().getNode();return n.children.inorderTraversal(function(t,e){if(f.hasChild(t)){var n=o.getServerCache().getNode().getImmediateChild(t),r=h.applyMerge_(n,e);l=h.applyServerOverwrite_(l,new Pu(t),r,s,a,u,c)}}),n.children.inorderTraversal(function(t,e){var n=!o.getServerCache().isCompleteForChild(t)&&null==e.value;if(!f.hasChild(t)&&!n){var r=o.getServerCache().getNode().getImmediateChild(t),i=h.applyMerge_(r,e);l=h.applyServerOverwrite_(l,new Pu(t),i,s,a,u,c)}}),l},fl.prototype.ackUserWrite_=function(t,r,e,n,i,o){if(null!=n.shadowingWrite(r))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=e.value){if(r.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(r))return this.applyServerOverwrite_(t,r,a.getNode().getChild(r),n,i,s,o);if(r.isEmpty()){var u=Bh.Empty;return a.getNode().forEachChild(wc,function(t,e){u=u.set(new Pu(t),e)}),this.applyServerMerge_(t,r,u,n,i,s,o)}return t}var c=Bh.Empty;return e.foreach(function(t,e){var n=r.child(t);a.isCompleteForPath(n)&&(c=c.set(t,a.getNode().getChild(n)))}),this.applyServerMerge_(t,r,c,n,i,s,o)},fl.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,al,r)},fl.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s=new ul(n,t,r),a=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Ds(h instanceof $c,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(h)}c=c,u=this.filter_.updateFullNode(a,c,i)}else{var l=e.getFront(),f=n.calcCompleteChild(l,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(l)&&(f=a.getImmediateChild(l)),(u=null!=f?this.filter_.updateChild(a,l,f,e.popFront(),s,i):t.getEventCache().getNode().hasChild(l)?this.filter_.updateChild(a,l,$c.EMPTY_NODE,e.popFront(),s,i):a).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Pu.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},fl);function fl(t){this.filter_=t}var pl=(dl.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===tl.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(tl.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,tl.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,tl.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,tl.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,tl.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,tl.VALUE,t,n,e),i},dl.prototype.generateEventsForType_=function(r,e,t,i,o){var s=this,n=t.filter(function(t){return t.type===e});n.sort(this.compareChanges_.bind(this)),n.forEach(function(e){var n=s.materializeSingleChange_(e,o);i.forEach(function(t){t.respondsTo(e.type)&&r.push(t.createEvent(n,s.query_))})})},dl.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},dl.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw xs("Should only compare child_ events.");var n=new fc(t.childName,t.snapshotNode),r=new fc(e.childName,e.snapshotNode);return this.index_.compare(n,r)},dl);function dl(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}var vl,yl=(gl.prototype.getQuery=function(){return this.query_},gl.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},gl.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},gl.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},gl.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},gl.prototype.removeEventRegistration=function(t,n){var r=[];if(n){Ds(null==t,"A cancel should cancel all event registrations.");var i=this.query_.path;this.eventRegistrations_.forEach(function(t){n=n;var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(t){for(var e=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){e=e.concat(this.eventRegistrations_.slice(o+1));break}}else e.push(s)}this.eventRegistrations_=e}else this.eventRegistrations_=[];return r},gl.prototype.applyOperation=function(t,e,n){t.type===Dh.MERGE&&null!==t.source.queryId&&(Ds(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Ds(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Ds(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},gl.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Oc,function(t,e){n.push(tl.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(tl.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},gl.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},gl);function gl(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new nl(n.getIndex()),i=n.getNodeFilter();this.processor_=new ll(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode($c.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode($c.EMPTY_NODE,s.getNode(),null),c=new Xh(a,o.isFullyInitialized(),r.filtersNodes()),h=new Xh(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new $h(h,c),this.eventGenerator_=new pl(this.query_)}var ml=(Object.defineProperty(bl,"__referenceConstructor",{get:function(){return Ds(vl,"Reference.ts has not been loaded"),vl},set:function(t){Ds(!vl,"__referenceConstructor has already been defined"),vl=t},enumerable:!0,configurable:!0}),bl.prototype.isEmpty=function(){return 0===this.views.size},bl.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return Ds(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var u=Ns(this.views.values()),c=u.next();!c.done;c=u.next())s=c.value,a=a.concat(s.applyOperation(t,e,n))}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},bl.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;u=!!a||(a=r instanceof $c?n.calcCompleteEventChildren(r):$c.EMPTY_NODE,!1);var c=new $h(new Xh(a,u,!1),new Xh(r,i,!1));s=new yl(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},bl.prototype.removeEventRegistration=function(t,e,n){var r,i,o=t.queryIdentifier(),s=[],a=[],u=this.hasCompleteView();if("default"===o)try{for(var c=Ns(this.views.entries()),h=c.next();!h.done;h=c.next()){var l=Cs(h.value,2),f=l[0],p=l[1];a=a.concat(p.removeEventRegistration(e,n)),p.isEmpty()&&(this.views.delete(f),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery()))}}catch(t){r={error:t}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}else(p=this.views.get(o))&&(a=a.concat(p.removeEventRegistration(e,n)),p.isEmpty()&&(this.views.delete(o),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery())));return u&&!this.hasCompleteView()&&s.push(new bl.__referenceConstructor(t.repo,t.path)),{removed:s,events:a}},bl.prototype.getQueryViews=function(){var e,t,n=[];try{for(var r=Ns(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},bl.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=Ns(this.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r||s.getCompleteServerCache(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},bl.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},bl.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},bl.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},bl.prototype.getCompleteView=function(){var e,t;try{for(var n=Ns(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return null},bl);function bl(){this.views=new Map}var _l=(wl.prototype.addWrite=function(t,e){if(t.isEmpty())return new wl(new Bh(e));var n=this.writeTree_.findRootMostValueAndPath(t);if(null!=n){var r=n.path,i=n.value,o=Pu.relativePath(r,t);return i=i.updateChild(o,e),new wl(this.writeTree_.set(r,i))}var s=new Bh(e);return new wl(this.writeTree_.setTree(t,s))},wl.prototype.addWrites=function(n,t){var r=this;return Nu(t,function(t,e){r=r.addWrite(n.child(t),e)}),r},wl.prototype.removeWrite=function(t){return t.isEmpty()?wl.Empty:new wl(this.writeTree_.setTree(t,Bh.Empty))},wl.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},wl.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(Pu.relativePath(e.path,t)):null},wl.prototype.getCompleteChildren=function(){var n=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Oc,function(t,e){n.push(new fc(t,e))}):this.writeTree_.children.inorderTraversal(function(t,e){null!=e.value&&n.push(new fc(t,e.value))}),n},wl.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var e=this.getCompleteNode(t);return new wl(null!=e?new Bh(e):this.writeTree_.subtree(t))},wl.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},wl.prototype.apply=function(t){return function n(r,t,i){if(null!=t.value)return i.updateChild(r,t.value);var o=null;return t.children.inorderTraversal(function(t,e){".priority"===t?(Ds(null!==e.value,"Priority writes must always be leaf nodes"),o=e.value):i=n(r.child(t),e,i)}),i.getChild(r).isEmpty()||null===o||(i=i.updateChild(r.child(".priority"),o)),i}(Pu.Empty,this.writeTree_,t)},wl.Empty=new wl(new Bh(null)),wl);function wl(t){this.writeTree_=t}var El=(Tl.prototype.childWrites=function(t){return new Il(t,this)},Tl.prototype.addOverwrite=function(t,e,n,r){Ds(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},Tl.prototype.addMerge=function(t,e,n){Ds(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},Tl.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},Tl.prototype.removeWrite=function(e){var n=this,t=this.allWrites_.findIndex(function(t){return t.writeId===e});Ds(0<=t,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[t];this.allWrites_.splice(t,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&0<=s;){var a=this.allWrites_[s];a.visible&&(t<=s&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}return!!i&&(o?this.resetTree_():r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):Nu(r.children,function(t){n.visibleWrites_=n.visibleWrites_.removeWrite(r.path.child(t))}),!0)},Tl.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},Tl.prototype.calcCompleteEventCache=function(e,t,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(e);if(!r&&i.isEmpty())return t;if(r||null!=t||i.hasCompleteWrite(Pu.Empty)){var o=Tl.layerTree_(this.allWrites_,function(t){return(t.visible||r)&&(!n||!~n.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e);return u=t||$c.EMPTY_NODE,o.apply(u)}return null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(e);if(a.isEmpty())return t;if(null!=t||a.hasCompleteWrite(Pu.Empty)){var u=t||$c.EMPTY_NODE;return a.apply(u)}return null},Tl.prototype.calcCompleteEventChildren=function(t,e){var r=$c.EMPTY_NODE,n=this.visibleWrites_.getCompleteNode(t);if(n)return n.isLeafNode()||n.forEachChild(Oc,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Oc,function(t,e){var n=i.childCompoundWrite(new Pu(t)).apply(e);r=r.updateImmediateChild(t,n)}),i.getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r},Tl.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Ds(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},Tl.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},Tl.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},Tl.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(Pu.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=o.getCompare(),l=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=l.getNext();f&&c.length<r;)0!==h(f,n)&&c.push(f),f=l.getNext();return c},Tl.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},Tl.prototype.resetTree_=function(){this.visibleWrites_=Tl.layerTree_(this.allWrites_,Tl.DefaultFilter_,Pu.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},Tl.DefaultFilter_=function(t){return t.visible},Tl.layerTree_=function(t,e,n){for(var r=_l.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)n.contains(s)?(a=Pu.relativePath(n,s),r=r.addWrite(a,o.snap)):s.contains(n)&&(a=Pu.relativePath(s,n),r=r.addWrite(Pu.Empty,o.snap.getChild(a)));else{if(!o.children)throw xs("WriteRecord should have .snap or .children");if(n.contains(s))a=Pu.relativePath(n,s),r=r.addWrites(a,o.children);else if(s.contains(n))if((a=Pu.relativePath(s,n)).isEmpty())r=r.addWrites(Pu.Empty,o.children);else{var u=ta(o.children,a.getFront());if(u){var c=u.getChild(a.popFront());r=r.addWrite(Pu.Empty,c)}}}}}return r},Tl);function Tl(){this.visibleWrites_=_l.Empty,this.allWrites_=[],this.lastWriteId_=-1}var Il=(Sl.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},Sl.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},Sl.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},Sl.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},Sl.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},Sl.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},Sl.prototype.child=function(t){return new Sl(this.treePath_.child(t),this.writeTree_)},Sl);function Sl(t,e){this.treePath_=t,this.writeTree_=e}var Nl=(Cl.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Gh(Fh.User,t,e)):[]},Cl.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=Bh.fromObject(e);return this.applyOperationToSyncPoints_(new Qh(Fh.User,t,r))},Cl.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=Bh.Empty;return null!=n.snap?r=r.set(Pu.Empty,!0):Nu(n.children,function(t,e){r=r.set(new Pu(t),e)}),this.applyOperationToSyncPoints_(new Vh(n.path,r,e))}return[]},Cl.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Gh(Fh.Server,t,e))},Cl.prototype.applyServerMerge=function(t,e){var n=Bh.fromObject(e);return this.applyOperationToSyncPoints_(new Qh(Fh.Server,t,n))},Cl.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Kh(Fh.Server,t))},Cl.prototype.applyTaggedQueryOverwrite=function(t,e,n){var r=this.queryKeyForTag_(n);if(null==r)return[];var i=Cl.parseQueryKey_(r),o=i.path,s=i.queryId,a=Pu.relativePath(o,t),u=new Gh(Fh.forServerTaggedQuery(s),a,e);return this.applyTaggedOperation_(o,u)},Cl.prototype.applyTaggedQueryMerge=function(t,e,n){var r=this.queryKeyForTag_(n);if(r){var i=Cl.parseQueryKey_(r),o=i.path,s=i.queryId,a=Pu.relativePath(o,t),u=Bh.fromObject(e),c=new Qh(Fh.forServerTaggedQuery(s),a,u);return this.applyTaggedOperation_(o,c)}return[]},Cl.prototype.applyTaggedListenComplete=function(t,e){var n=this.queryKeyForTag_(e);if(n){var r=Cl.parseQueryKey_(n),i=r.path,o=r.queryId,s=Pu.relativePath(i,t),a=new Kh(Fh.forServerTaggedQuery(o),s);return this.applyTaggedOperation_(i,a)}return[]},Cl.prototype.addEventRegistration=function(t,e){var r=t.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=Pu.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()});var n,s=this.syncPointTree_.get(r);s?(o=o||s.hasCompleteView(),i=i||s.getCompleteServerCache(Pu.Empty)):(s=new ml,this.syncPointTree_=this.syncPointTree_.set(r,s)),null!=i?n=!0:(n=!1,i=$c.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(Pu.Empty);n&&(i=i.updateImmediateChild(t,n))}));var a=s.viewExistsForQuery(t);if(!a&&!t.getQueryParams().loadsAllData()){var u=Cl.makeQueryKey_(t);Ds(!this.queryToTagMap.has(u),"View does not exist, but we have a tag");var c=Cl.getNextQueryTag_();this.queryToTagMap.set(u,c),this.tagToQueryMap.set(c,u)}var h=this.pendingWriteTree_.childWrites(r),l=s.addEventRegistration(t,e,h,i,n);if(!a&&!o){var f=s.viewForQuery(t);l=l.concat(this.setupListener_(t,f))}return l},Cl.prototype.removeEventRegistration=function(t,e,n){var r=this,i=t.path,o=this.syncPointTree_.get(i),s=[];if(o&&("default"===t.queryIdentifier()||o.viewExistsForQuery(t))){var a=o.removeEventRegistration(t,e,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));var u=a.removed;s=a.events;var c=-1!==u.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(i,function(t,e){return e.hasCompleteView()});if(c&&!h){var l=this.syncPointTree_.subtree(i);if(!l.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(l),p=0;p<f.length;++p){var d=f[p],v=d.getQuery(),y=this.createListenerForView_(d);this.listenProvider_.startListening(Cl.queryForListening_(v),this.tagForQuery_(v),y.hashFn,y.onComplete)}}!h&&0<u.length&&!n&&(c?this.listenProvider_.stopListening(Cl.queryForListening_(t),null):u.forEach(function(t){var e=r.queryToTagMap.get(Cl.makeQueryKey_(t));r.listenProvider_.stopListening(Cl.queryForListening_(t),e)})),this.removeTags_(u)}return s},Cl.prototype.calcCompleteEventCache=function(i,t){var e=this.pendingWriteTree_,n=this.syncPointTree_.findOnPath(i,function(t,e){var n=Pu.relativePath(t,i),r=e.getCompleteServerCache(n);if(r)return r});return e.calcCompleteEventCache(i,n,t,!0)},Cl.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),Nu(n,function(t,e){r=r.concat(e)}),r})},Cl.prototype.removeTags_=function(t){for(var e=0;e<t.length;++e){var n=t[e];if(!n.getQueryParams().loadsAllData()){var r=Cl.makeQueryKey_(n),i=this.queryToTagMap.get(r);this.queryToTagMap.delete(r),this.tagToQueryMap.delete(i)}}},Cl.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},Cl.prototype.setupListener_=function(t,e){var n=t.path,r=this.tagForQuery_(t),i=this.createListenerForView_(e),o=this.listenProvider_.startListening(Cl.queryForListening_(t),r,i.hashFn,i.onComplete),s=this.syncPointTree_.subtree(n);if(r)Ds(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var a=s.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),Nu(n,function(t,e){r=r.concat(e)}),r}),u=0;u<a.length;++u){var c=a[u];this.listenProvider_.stopListening(Cl.queryForListening_(c),this.tagForQuery_(c))}return o},Cl.prototype.createListenerForView_=function(t){var n=this,r=t.getQuery(),i=this.tagForQuery_(r);return{hashFn:function(){return(t.getServerCache()||$c.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return i?n.applyTaggedListenComplete(r.path,i):n.applyListenComplete(r.path);var e=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,r);return n.removeEventRegistration(r,null,e)}}},Cl.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},Cl.parseQueryKey_=function(t){var e=t.indexOf("$");return Ds(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Pu(t.substr(0,e))}},Cl.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},Cl.prototype.tagForQuery_=function(t){var e=Cl.makeQueryKey_(t);return this.queryToTagMap.get(e)},Cl.getNextQueryTag_=function(){return Cl.nextQueryTag_++},Cl.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Ds(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},Cl.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Pu.Empty))},Cl.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(Pu.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(Pu.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,h=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,h))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},Cl.prototype.applyOperationDescendantsHelper_=function(o,t,s,a){var u=this,e=t.get(Pu.Empty);null==s&&null!=e&&(s=e.getCompleteServerCache(Pu.Empty));var c=[];return t.children.inorderTraversal(function(t,e){var n=s?s.getImmediateChild(t):null,r=a.child(t),i=o.operationForChild(t);i&&(c=c.concat(u.applyOperationDescendantsHelper_(i,e,n,r)))}),e&&(c=c.concat(e.applyOperation(o,a,s))),c},Cl.nextQueryTag_=1,Cl);function Cl(t){this.listenProvider_=t,this.syncPointTree_=Bh.Empty,this.pendingWriteTree_=new El,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}var Al=(kl.prototype.getNode=function(t){return this.rootNode_.getChild(t)},kl.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},kl);function kl(){this.rootNode_=$c.EMPTY_NODE}var Rl=(Ol.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(ou("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},Ol.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout(function(){return e(null)},0),this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)}))},Ol.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},Ol.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',cu(t)},Ol);function Ol(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}var Pl=(Dl.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Zs(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},Dl.prototype.get=function(){return Ms(this.counters_)},Dl);function Dl(){this.counters_={}}var xl=(Ll.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Pl),this.collections_[e]},Ll.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},Ll.collections_={},Ll.reporters_={},Ll);function Ll(){}var Ml=(Fl.prototype.get=function(){var t=this.collection_.get(),n=Ts({},t);return this.last_&&Nu(this.last_,function(t,e){n[t]=n[t]-e}),this.last_=t,n},Fl);function Fl(t){this.collection_=t,this.last_=null}var Ul=(jl.prototype.includeStat=function(t){this.statsToReport_[t]=!0},jl.prototype.reportStats_=function(){var n=this,t=this.statsListener_.get(),r={},i=!1;Nu(t,function(t,e){0<e&&Zs(n.statsToReport_,t)&&(r[t]=e,i=!0)}),i&&this.server_.reportStats(r),ku(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},jl);function jl(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ml(t);var n=1e4+2e4*Math.random();ku(this.reportStats_.bind(this),Math.floor(n))}var Vl=(ql.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Bl(i)),e.add(r)}e&&this.eventLists_.push(e)},ql.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},ql.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},ql.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},ql);function ql(){this.eventLists_=[],this.recursionDepth_=0}var Bl=(Wl.prototype.add=function(t){this.events_.push(t)},Wl.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();_u&&ou("event: "+e.toString()),Au(n)}}},Wl.prototype.getPath=function(){return this.path_},Wl);function Wl(t){this.path_=t,this.events_=[]}var Kl=(Hl.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=As(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},Hl.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},Hl.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},Hl.prototype.validateEventType_=function(e){Ds(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},Hl);function Hl(t){this.allowedEvents_=t,this.listeners_={},Ds(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var Gl,Ql=(Es(Yl,Gl=Kl),Yl.getInstance=function(){return new Yl},Yl.prototype.getInitialEvent=function(t){return Ds("visible"===t,"Unknown event type: "+t),[this.visible_]},Yl);function Yl(){var e,t,n=Gl.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}var Xl,Jl=(Es($l,Xl=Kl),$l.getInstance=function(){return new $l},$l.prototype.getInitialEvent=function(t){return Ds("online"===t,"Unknown event type: "+t),[this.online_]},$l.prototype.currentlyOnline=function(){return this.online_},$l);function $l(){var t=Xl.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||qs()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}var Zl=(tf.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},tf.prototype.handleResponse=function(t,e){var r=this;this.pendingResponses[t]=e;for(var n=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&Au(function(){r.onMessage_(e[t])})},n=0;n<e.length;++n)t(n);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==n(););},tf);function tf(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var ef=(nf.prototype.open=function(t,e){var s=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Zl(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){s.log_("Timed out trying to connect."),s.onClosed_(),s.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!s.isClosed_){s.scriptTagHolder=new rf(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Cs(t,5),r=n[0],i=n[1],o=n[2];if(n[3],n[4],s.incrementIncomingBytes_(t),s.scriptTagHolder)if(s.connectTimeoutTimer_&&(clearTimeout(s.connectTimeoutTimer_),s.connectTimeoutTimer_=null),s.everConnected_=!0,"start"===r)s.id=i,s.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(s.scriptTagHolder.sendNewPolls=!1,s.myPacketOrderer.closeAfter(i,function(){s.onClosed_()})):s.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Cs(t,2),r=n[0],i=n[1];s.incrementIncomingBytes_(t),s.myPacketOrderer.handleResponse(r,i)},function(){s.onClosed_()},s.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),s.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=s.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",s.transportSessionId&&(t.s=s.transportSessionId),s.lastSessionId&&(t.ls=s.lastSessionId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Mu)&&(t.r="f");var e=s.urlFn(t);s.log_("Connecting via long-poll to "+e),s.scriptTagHolder.addTag(e,function(){})}})},nf.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},nf.forceAllow=function(){nf.forceAllow_=!0},nf.forceDisallow=function(){nf.forceDisallow_=!0},nf.isAvailable=function(){return!!nf.forceAllow_||!(nf.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},nf.prototype.markConnectionHealthy=function(){},nf.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},nf.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},nf.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},nf.prototype.send=function(t){var e=Js(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n,r=(n=Rs(e),Ls.encodeByteArray(n,!0)),i=pu(r,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},nf.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},nf.prototype.incrementIncomingBytes_=function(t){var e=Js(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},nf);function nf(t,e,n,r){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=su(t),this.stats_=xl.getCollection(e),this.urlFn=function(t){return e.connectionURL(Uu,t)}}var rf=(of.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ou("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},of.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},of.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},of.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},of.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},of.prototype.addLongPollTag_=function(t,e){var n=this;function r(){n.outstandingRequests.delete(e),n.newRequest_()}this.outstandingRequests.add(e);var i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},of.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var e=r.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){var t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=function(){ou("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(e)}catch(t){}},Math.floor(1))},of);function of(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=mu(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=of.createIFrame_();var i="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(i='<script>document.domain="'+document.domain+'";<\/script>');var o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(t){ou("frame writing exception"),t.stack&&ou(t.stack),ou(t)}}var sf="";var af=null;"undefined"!=typeof MozWebSocket?af=MozWebSocket:"undefined"!=typeof WebSocket&&(af=WebSocket);var uf=(cf.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Mu)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(Fu,r)},cf.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,vu.set("previous_websocket_failure",!0);try{if(Ws()){var r=Ps.NODE_ADMIN?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+sf+"/"+process.platform+"/"+r}},o=process.env,s=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;s&&(i.proxy={origin:s}),this.mySock=new af(this.connURL,[],i)}else this.mySock=new af(this.connURL)}catch(t){this.log_("Error instantiating WebSocket.");var a=t.message||t.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},cf.prototype.start=function(){},cf.forceDisallow=function(){cf.forceDisallow_=!0},cf.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&1<e.length&&parseFloat(e[1])<4.4&&(t=!0)}return!t&&null!==af&&!cf.forceDisallow_},cf.previouslyFailed=function(){return vu.isInMemoryStorage||!0===vu.get("previous_websocket_failure")},cf.prototype.markConnectionHealthy=function(){vu.remove("previous_websocket_failure")},cf.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Xs(e);this.onMessage(n)}},cf.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},cf.prototype.extractFrameCount_=function(t){if(Ds(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},cf.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},cf.prototype.send=function(t){this.resetKeepAlive();var e=Js(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=pu(e,16384);1<n.length&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},cf.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},cf.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},cf.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},cf.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},cf.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},cf.responsesRequiredToBeHealthy=2,cf.healthyTimeout=3e4,cf);function cf(t,e,n,r){this.connId=t,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=su(this.connId),this.stats_=xl.getCollection(e),this.connURL=cf.connectionURL_(e,n,r)}var hf=(Object.defineProperty(lf,"ALL_TRANSPORTS",{get:function(){return[ef,uf]},enumerable:!0,configurable:!0}),lf.prototype.initTransports_=function(t){var e,n,r=uf&&uf.isAvailable(),i=r&&!uf.previouslyFailed();if(t.webSocketOnly&&(r||cu("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[uf];else{var o=this.transports_=[];try{for(var s=Ns(lf.ALL_TRANSPORTS),a=s.next();!a.done;a=s.next()){var u=a.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},lf.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},lf.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},lf);function lf(t){this.initTransports_(t)}var ff=(pf.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;0<i&&(this.healthyTimeout_=ku(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},pf.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},pf.prototype.disconnReceiver_=function(e){var n=this;return function(t){e===n.conn_?n.onConnectionLost_(t):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},pf.prototype.connReceiver_=function(e){var n=this;return function(t){2!==n.state_&&(e===n.rx_?n.onPrimaryMessageReceived_(t):e===n.secondaryConn_?n.onSecondaryMessageReceived_(t):n.log_("message on old connection"))}},pf.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},pf.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},pf.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},pf.prototype.onSecondaryMessageReceived_=function(t){var e=fu("t",t),n=fu("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},pf.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},pf.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},pf.prototype.onPrimaryMessageReceived_=function(t){var e=fu("t",t),n=fu("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},pf.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},pf.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},pf.prototype.onControl_=function(t){var e=fu("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?au("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):au("Unknown control packet command: "+e)}},pf.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&cu("Protocol version mismatch detected"),this.tryStartUpgrade_())},pf.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},pf.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ku(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},pf.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},pf.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ku(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},pf.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},pf.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},pf.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(vu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},pf.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},pf.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},pf.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},pf.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},pf);function pf(t,e,n,r,i,o,s){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=su("c:"+this.id+":"),this.transportManager_=new hf(e),this.log_("Connection created"),this.start_()}var df=(vf.prototype.put=function(t,e,n,r){},vf.prototype.merge=function(t,e,n,r){},vf.prototype.refreshAuthToken=function(t){},vf.prototype.onDisconnectPut=function(t,e,n){},vf.prototype.onDisconnectMerge=function(t,e,n){},vf.prototype.onDisconnectCancel=function(t,e){},vf.prototype.reportStats=function(t){},vf);function vf(){}var yf,gf=(Es(mf,yf=df),mf.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Js(i)),Ds(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},mf.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Ds(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Ds(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},mf.prototype.sendListen_=function(r){var i=this,o=r.query,s=o.path.toString(),a=o.queryIdentifier();this.log_("Listen on "+s+" for "+a);var t={p:s};r.tag&&(t.q=o.queryObject(),t.t=r.tag),t.h=r.hashFn(),this.sendRequest("q",t,function(t){var e=t.d,n=t.s;mf.warnOnListenWarnings_(e,o),(i.listens.get(s)&&i.listens.get(s).get(a))===r&&(i.log_("listen response",t),"ok"!==n&&i.removeListen_(s,a),r.onComplete&&r.onComplete(n,e))})},mf.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Zs(t,"w")){var n=ta(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();cu("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},mf.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},mf.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==typeof(e=$s(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},mf.prototype.tryAuth=function(){var t,r=this;if(this.connected_&&this.authToken_){var i=this.authToken_,e=(t=$s(i).claims)&&"object"==typeof t&&t.hasOwnProperty("iat")?"auth":"gauth",n={cred:i};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(e,n,function(t){var e=t.s,n=t.d||"error";r.authToken_===i&&("ok"===e?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(e,n))})}},mf.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Ds(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},mf.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},mf.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},mf.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},mf.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},mf.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},mf.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},mf.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},mf.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},mf.prototype.sendPut_=function(e){var n=this,r=this.outstandingPuts_[e].action,t=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,t,function(t){n.log_(r+" response",t),delete n.outstandingPuts_[e],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(t.s,t.d)})},mf.prototype.reportStats=function(t){var n=this;if(this.connected_){var e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,function(t){if("ok"!==t.s){var e=t.d;n.log_("reportStats","Error sending stats: "+e)}})}},mf.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Js(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},mf.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):au("Unrecognized action received from server: "+Js(t)+"\nAre you using the latest client?")},mf.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},mf.prototype.scheduleConnect_=function(t){var e=this;Ds(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},mf.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},mf.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},mf.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},mf.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+mf.nextConnectionId_++,o=this,s=this.lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,r())};this.realtime_={close:c,sendRequest:function(t){Ds(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}};var t=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(t).then(function(t){a?ou("getToken() completed but was canceled"):(ou("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new ff(i,o.repoInfo_,e,n,r,function(t){cu(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},s))}).then(null,function(t){o.log_("Failed to get token: "+t),a||c()})}},mf.prototype.interrupt=function(t){ou("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},mf.prototype.resume=function(t){ou("Resuming connection for reason: "+t),delete this.interruptReasons_[t],ea(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},mf.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},mf.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},mf.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return Su(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},mf.prototype.removeListen_=function(t,e){var n,r=new Pu(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},mf.prototype.onAuthRevoked_=function(t,e){ou("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},mf.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},mf.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth();try{for(var i=Ns(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,Ns(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}},mf.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+sf.replace(/\./g,"-")]=1,qs()?t["framework.cordova"]=1:Bs()&&(t["framework.reactnative"]=1),this.reportStats(t)},mf.prototype.shouldReconnect_=function(){var t=Jl.getInstance().currentlyOnline();return ea(this.interruptReasons_)&&t},mf.nextPersistentConnectionId_=0,mf.nextConnectionId_=0,mf);function mf(t,e,n,r,i,o){var s=yf.call(this)||this;if(s.repoInfo_=t,s.onDataUpdate_=e,s.onConnectStatus_=n,s.onServerInfoUpdate_=r,s.authTokenProvider_=i,s.authOverride_=o,s.id=mf.nextPersistentConnectionId_++,s.log_=su("p:"+s.id+":"),s.interruptReasons_={},s.listens=new Map,s.outstandingPuts_=[],s.outstandingPutCount_=0,s.onDisconnectRequestQueue_=[],s.connected_=!1,s.reconnectDelay_=1e3,s.maxReconnectDelay_=3e5,s.securityDebugCallback_=null,s.lastSessionId=null,s.establishConnectionTimer_=null,s.visible_=!1,s.requestCBHash_={},s.requestNumber_=0,s.realtime_=null,s.authToken_=null,s.forceTokenRefresh_=!1,s.invalidAuthTokenCount_=0,s.firstConnection_=!0,s.lastConnectionAttemptTime_=null,s.lastConnectionEstablishedTime_=null,o&&!Ws())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return s.scheduleConnect_(0),Ql.getInstance().on("visible",s.onVisible_,s),-1===t.host.indexOf("fblocal")&&Jl.getInstance().on("online",s.onOnline_,s),s}var bf,_f=(Es(wf,bf=df),wf.prototype.reportStats=function(t){throw new Error("Method not implemented.")},wf.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Ds(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},wf.prototype.listen=function(t,e,r,i){var o=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var a=wf.getListenId_(t,r),u={};this.listens_[a]=u;var n=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",n,function(t,e){var n=e;404===t&&(t=n=null),null===t&&o.onDataUpdate_(s,n,!1,r),ta(o.listens_,a)===u&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},wf.prototype.unlisten=function(t,e){var n=wf.getListenId_(t,e);delete this.listens_[n]},wf.prototype.refreshAuthToken=function(t){},wf.prototype.restRequest_=function(i,o,s){var a=this;void 0===o&&(o={}),o.format="export",this.authTokenProvider_.getToken(!1).then(function(t){var e=t&&t.accessToken;e&&(o.auth=e);var n=(a.repoInfo_.secure?"https://":"http://")+a.repoInfo_.host+i+"?ns="+a.repoInfo_.namespace+function(t){for(var n=[],e=function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];e(o[0],o[1])}return n.length?"&"+n.join("&"):""}(o);a.log_("Sending REST request for "+n);var r=new XMLHttpRequest;r.onreadystatechange=function(){if(s&&4===r.readyState){a.log_("REST Response for "+n+" received. status:",r.status,"response:",r.responseText);var t=null;if(200<=r.status&&r.status<300){try{t=Xs(r.responseText)}catch(t){cu("Failed to parse JSON response for "+n+": "+r.responseText)}s(null,t)}else 401!==r.status&&404!==r.status&&cu("Got unsuccessful REST response for "+n+" Status: "+r.status),s(r.status);s=null}},r.open("GET",n,!0),r.send()})},wf);function wf(t,e,n){var r=bf.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=su("p:rest:"),r.listens_={},r}var Ef="repo_interrupt",Tf=(If.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},If.prototype.name=function(){return this.repoInfo_.namespace},If.prototype.serverTime=function(){var t=this.infoData_.getNode(new Pu(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},If.prototype.generateServerValues=function(){return(t=t={timestamp:this.serverTime()}).timestamp=t.timestamp||(new Date).getTime(),t;var t},If.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new Pu(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var s=na(e,function(t){return ih(t)});o=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var a=ih(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,a,r)}else if(n){var u=na(e,function(t){return ih(t)});o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=ih(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var h=i;0<o.length&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,o)},If.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},If.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},If.prototype.onServerInfoUpdate_=function(t){var n=this;Nu(t,function(t,e){n.updateInfo_(t,e)})},If.prototype.updateInfo_=function(t,e){var n=new Pu("/.info/"+t),r=ih(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},If.prototype.getNextWriteId_=function(){return this.nextWriteId_++},If.prototype.setWithPriority=function(i,t,e,o){var s=this;this.log_("set",{path:i.toString(),value:t,priority:e});var n=this.generateServerValues(),r=ih(t,e),a=this.serverSyncTree_.calcCompleteEventCache(i),u=Ah(r,a,n),c=this.getNextWriteId_(),h=this.serverSyncTree_.applyUserOverwrite(i,u,c,!0);this.eventQueue_.queueEvents(h),this.server_.put(i.toString(),r.val(!0),function(t,e){var n="ok"===t;n||cu("set at "+i+" failed: "+t);var r=s.serverSyncTree_.ackUserWrite(c,!n);s.eventQueue_.raiseEventsForChangedPath(i,r),s.callOnCompleteCallback(o,t,e)});var l=this.abortTransactions_(i);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},If.prototype.update=function(o,t,s){var a=this;this.log_("update",{path:o.toString(),value:t});var n=!0,r=this.generateServerValues(),i={};if(Nu(t,function(t,e){n=!1,i[t]=Ch(o.child(t),ih(e),a.serverSyncTree_,r)}),n)ou("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(s,"ok");else{var u=this.getNextWriteId_(),e=this.serverSyncTree_.applyUserMerge(o,i,u);this.eventQueue_.queueEvents(e),this.server_.merge(o.toString(),t,function(t,e){var n="ok"===t;n||cu("update at "+o+" failed: "+t);var r=a.serverSyncTree_.ackUserWrite(u,!n),i=0<r.length?a.rerunTransactions_(o):o;a.eventQueue_.raiseEventsForChangedPath(i,r),a.callOnCompleteCallback(s,t,e)}),Nu(t,function(t){var e=a.abortTransactions_(o.child(t));a.rerunTransactions_(e)}),this.eventQueue_.raiseEventsForChangedPath(o,[])}},If.prototype.runOnDisconnectEvents_=function(){var r=this;this.log_("onDisconnectEvents");var i=this.generateServerValues(),o=new Lh;this.onDisconnect_.forEachTree(Pu.Empty,function(t,e){var n=Ch(t,e,r.serverSyncTree_,i);o.remember(t,n)});var s=[];o.forEachTree(Pu.Empty,function(t,e){s=s.concat(r.serverSyncTree_.applyServerOverwrite(t,e));var n=r.abortTransactions_(t);r.rerunTransactions_(n)}),this.onDisconnect_=new Lh,this.eventQueue_.raiseEventsForChangedPath(Pu.Empty,s)},If.prototype.onDisconnectCancel=function(n,r){var i=this;this.server_.onDisconnectCancel(n.toString(),function(t,e){"ok"===t&&i.onDisconnect_.forget(n),i.callOnCompleteCallback(r,t,e)})},If.prototype.onDisconnectSet=function(n,t,r){var i=this,o=ih(t);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},If.prototype.onDisconnectSetWithPriority=function(n,t,e,r){var i=this,o=ih(t,e);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},If.prototype.onDisconnectUpdate=function(r,n,i){var o=this;if(ea(n))return ou("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(i,"ok");this.server_.onDisconnectMerge(r.toString(),n,function(t,e){"ok"===t&&Nu(n,function(t,e){var n=ih(e);o.onDisconnect_.remember(r.child(t),n)}),o.callOnCompleteCallback(i,t,e)})},If.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},If.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},If.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(Ef)},If.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(Ef)},If.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;e=t?(this.statsListener_||(this.statsListener_=new Ml(this.stats_)),this.statsListener_.get()):this.stats_.get();var i=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);Nu(e,function(t,e){for(var n=t,r=t.length;r<i+2;r++)n+=" ";console.log(n+e)})}},If.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},If.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),ou.apply(void 0,As([n],t))},If.prototype.callOnCompleteCallback=function(r,i,o){r&&Au(function(){if("ok"===i)r(null);else{var t=(i||"error").toUpperCase(),e=t;o&&(e+=": "+o);var n=new Error(e);n.code=t,r(n)}})},Object.defineProperty(If.prototype,"database",{get:function(){return this.__database||(this.__database=new Wf(this))},enumerable:!0,configurable:!0}),If);function If(t,e,n,r){var s=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Vl,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Lh,this.persistentConnection_=null;var i=new Rl(n,r);if(this.stats_=xl.getCollection(t),e||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new _f(this.repoInfo_,this.onDataUpdate_.bind(this),i),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if(null!=o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Js(o)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new gf(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),i,o),this.server_=this.persistentConnection_}i.addTokenChangeListener(function(t){s.server_.refreshAuthToken(t)}),this.statsReporter_=xl.getOrCreateReporter(t,function(){return new Ul(s.stats_,s.server_)}),this.transactionsInit_(),this.infoData_=new Al,this.infoSyncTree_=new Nl({startListening:function(t,e,n,r){var i=[],o=s.infoData_.getNode(t.path);return o.isEmpty()||(i=s.infoSyncTree_.applyServerOverwrite(t.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Nl({startListening:function(r,t,e,i){return s.server_.listen(r,e,t,function(t,e){var n=i(t,e);s.eventQueue_.raiseEventsForChangedPath(r.path,n)}),[]},stopListening:function(t,e){s.server_.unlisten(t,e)}})}var Sf=(Nf.prototype.getStartPost=function(){return this.startPost_},Nf.prototype.getEndPost=function(){return this.endPost_},Nf.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},Nf.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new fc(e,n))||(n=$c.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},Nf.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=$c.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority($c.EMPTY_NODE);var i=this;return e.forEachChild(Oc,function(t,e){i.matches(new fc(t,e))||(r=r.updateImmediateChild(t,$c.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},Nf.prototype.updatePriority=function(t,e){return t},Nf.prototype.filtersNodes=function(){return!0},Nf.prototype.getIndexedFilter=function(){return this.indexedFilter_},Nf.prototype.getIndex=function(){return this.index_},Nf.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},Nf.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},Nf);function Nf(t){this.indexedFilter_=new nl(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Nf.getStartPost_(t),this.endPost_=Nf.getEndPost_(t)}var Cf=(Af.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new fc(e,n))||(n=$c.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},Af.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=$c.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=$c.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority($c.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(t,e){return h(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var l=!1;i.hasNext();)s=i.getNext(),!l&&c(a,s)<=0&&(l=!0),l&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,$c.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},Af.prototype.updatePriority=function(t,e){return t},Af.prototype.filtersNodes=function(){return!0},Af.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},Af.prototype.getIndex=function(){return this.index_},Af.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(t,e){return s(e,t)}}else o=this.index_.getCompare();var a=t;Ds(a.numChildren()===this.limit_,"");var u=new fc(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var l=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(h&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange(tl.childChangedChange(e,n,l)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(tl.childRemovedChange(e,l));var d=a.updateImmediateChild(e,$c.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(tl.childAddedChange(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return!n.isEmpty()&&h&&0<=o(c,u)?(null!=i&&(i.trackChildChange(tl.childRemovedChange(c.name,c.node)),i.trackChildChange(tl.childAddedChange(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,$c.EMPTY_NODE)):t},Af);function Af(t){this.rangedFilter_=new Sf(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var kf=(Rf.prototype.hasStart=function(){return this.startSet_},Rf.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===Rf.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},Rf.prototype.getIndexStartValue=function(){return Ds(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},Rf.prototype.getIndexStartName=function(){return Ds(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Eu},Rf.prototype.hasEnd=function(){return this.endSet_},Rf.prototype.getIndexEndValue=function(){return Ds(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},Rf.prototype.getIndexEndName=function(){return Ds(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Tu},Rf.prototype.hasLimit=function(){return this.limitSet_},Rf.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},Rf.prototype.getLimit=function(){return Ds(this.limitSet_,"Only valid if limit has been set"),this.limit_},Rf.prototype.getIndex=function(){return this.index_},Rf.prototype.copy_=function(){var t=new Rf;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},Rf.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},Rf.prototype.limitToFirst=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=Rf.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,e},Rf.prototype.limitToLast=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=Rf.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,e},Rf.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},Rf.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},Rf.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},Rf.prototype.getQueryObject=function(){var t=Rf.WIRE_PROTOCOL_CONSTANTS_,e={};if(this.startSet_&&(e[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(e[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(e[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(e[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){e[t.LIMIT]=this.limit_;var n=this.viewFrom_;""===n&&(n=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),e[t.VIEW_FROM]=n}return this.index_!==Oc&&(e[t.INDEX]=this.index_.toString()),e},Rf.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},Rf.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Oc},Rf.prototype.getNodeFilter=function(){return this.loadsAllData()?new nl(this.getIndex()):new(this.hasLimit()?Cf:Sf)(this)},Rf.prototype.toRestQueryStringParameters=function(){var t,e=Rf.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(t=this.index_===Oc?e.PRIORITY_INDEX:this.index_===ah?e.VALUE_INDEX:this.index_===wc?e.KEY_INDEX:(Ds(this.index_ instanceof uh,"Unrecognized index type!"),this.index_.toString()),n[e.ORDER_BY]=Js(t),this.startSet_&&(n[e.START_AT]=Js(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+Js(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=Js(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+Js(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_)),n},Rf.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},Rf.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},Rf.DEFAULT=new Rf,Rf);function Rf(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Oc}var Of,Pf=(Es(Df,Of=wh),Df.prototype.getKey=function(){return ca("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},Df.prototype.child=function(t){var e,n,r,i;return ca("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof Pu||(null===this.path.getFront()?(e="Reference.child",i=!(n=1),r=(r=t)&&r.replace(/^\/*\.info(\/|$)/,"/"),Xu(e,n,r,i)):Xu("Reference.child",1,t,!1)),new Df(this.repo,this.path.child(t))},Df.prototype.getParent=function(){ca("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new Df(this.repo,t)},Df.prototype.getRoot=function(){ca("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},Df.prototype.databaseProp=function(){return this.repo.database},Df.prototype.set=function(t,e){ca("Reference.set",1,2,arguments.length),Ju("Reference.set",this.path),Hu("Reference.set",1,t,this.path,!1),la("Reference.set",2,e,!0);var n=new Us;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},Df.prototype.update=function(t,e){if(ca("Reference.update",1,2,arguments.length),Ju("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,cu("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Gu("Reference.update",1,t,this.path,!1),la("Reference.update",2,e,!0);var i=new Us;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},Df.prototype.setWithPriority=function(t,e,n){if(ca("Reference.setWithPriority",2,3,arguments.length),Ju("Reference.setWithPriority",this.path),Hu("Reference.setWithPriority",1,t,this.path,!1),zu("Reference.setWithPriority",2,e,!1),la("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new Us;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},Df.prototype.remove=function(t){return ca("Reference.remove",0,1,arguments.length),Ju("Reference.remove",this.path),la("Reference.remove",1,t,!0),this.set(null,t)},Df.prototype.transaction=function(t,r,e){if(ca("Reference.transaction",1,3,arguments.length),Ju("Reference.transaction",this.path),la("Reference.transaction",1,t,!1),la("Reference.transaction",2,r,!0),function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(ha(t,e,r)+"must be a boolean.")}("Reference.transaction",3,e,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===e&&(e=!0);var i=new Us;return"function"==typeof r&&i.promise.catch(function(){}),this.repo.startTransaction(this.path,t,function(t,e,n){t?i.reject(t):i.resolve(new sc(e,n)),"function"==typeof r&&r(t,e,n)},e),i.promise},Df.prototype.setPriority=function(t,e){ca("Reference.setPriority",1,2,arguments.length),Ju("Reference.setPriority",this.path),zu("Reference.setPriority",1,t,!1),la("Reference.setPriority",2,e,!0);var n=new Us;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},Df.prototype.push=function(t,e){ca("Reference.push",0,2,arguments.length),Ju("Reference.push",this.path),Hu("Reference.push",1,t,this.path,!0),la("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=lc(r),o=this.child(i),s=this.child(i);return n=null!=t?o.set(t,e).then(function(){return s}):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),o},Df.prototype.onDisconnect=function(){return Ju("Reference.onDisconnect",this.path),new ic(this.repo,this.path)},Object.defineProperty(Df.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(Df.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(Df.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(Df.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),Df);function Df(t,e){if(!(t instanceof Tf))throw new Error("new Reference() no longer supported - use app.database().");return Of.call(this,t,e,kf.DEFAULT,!1)||this}wh.__referenceConstructor=Pf,ml.__referenceConstructor=Pf;var xf,Lf,Mf=function(){this.children={},this.childCount=0,this.value=null},Ff=(Uf.prototype.subTree=function(t){for(var e=t instanceof Pu?t:new Pu(t),n=this,r=e.getFront();null!==r;)n=new Uf(r,n,ta(n.node_.children,r)||new Mf),r=(e=e.popFront()).getFront();return n},Uf.prototype.getValue=function(){return this.node_.value},Uf.prototype.setValue=function(t){Ds(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},Uf.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},Uf.prototype.hasChildren=function(){return 0<this.node_.childCount},Uf.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},Uf.prototype.forEachChild=function(n){var r=this;Nu(this.node_.children,function(t,e){n(new Uf(t,r,e))})},Uf.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},Uf.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},Uf.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},Uf.prototype.path=function(){return new Pu(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},Uf.prototype.name=function(){return this.name_},Uf.prototype.parent=function(){return this.parent_},Uf.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},Uf.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Zs(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},Uf);function Uf(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Mf),this.name_=t,this.parent_=e,this.node_=n}(Lf=xf=xf||{})[Lf.RUN=0]="RUN",Lf[Lf.SENT=1]="SENT",Lf[Lf.COMPLETED=2]="COMPLETED",Lf[Lf.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",Lf[Lf.NEEDS_ABORT=4]="NEEDS_ABORT",Tf.MAX_TRANSACTION_RETRIES_=25,Tf.prototype.transactionsInit_=function(){this.transactionQueueTree_=new Ff},Tf.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);function i(){}var o=new Pf(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:mu(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=this.getLatestState_(t);s.currentInputSnapshot=a;var u=s.update(a.val());if(void 0===u){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var c=new hh(s.currentInputSnapshot,new Pf(this,s.path),Oc);s.onComplete(null,!1,c)}}else{rc("transaction failed: Data returned ",u,s.path),s.status=xf.RUN;var h=this.transactionQueueTree_.subTree(t),l=h.getValue()||[];l.push(s),h.setValue(l);var f=void 0;if("object"==typeof u&&null!==u&&Zs(u,".priority"))f=ta(u,".priority"),Ds(Ku(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else f=(this.serverSyncTree_.calcCompleteEventCache(t)||$c.EMPTY_NODE).getPriority().val();f=f;var p=this.generateServerValues(),d=ih(u,f),v=Ah(d,a,p);s.currentOutputSnapshotRaw=d,s.currentOutputSnapshotResolved=v,s.currentWriteId=this.getNextWriteId_();var y=this.serverSyncTree_.applyUserOverwrite(t,v,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,y),this.sendReadyTransactions_()}},Tf.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||$c.EMPTY_NODE},Tf.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Ds(0<n.length,"Sending zero length transaction queue"),n.every(function(t){return t.status===xf.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},Tf.prototype.sendTransactionQueue_=function(a,u){for(var c=this,t=u.map(function(t){return t.currentWriteId}),e=this.getLatestState_(a,t),n=e,r=e.hash(),i=0;i<u.length;i++){var o=u[i];Ds(o.status===xf.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),o.status=xf.SENT,o.retryCount++;var s=Pu.relativePath(a,o.path);n=n.updateChild(s,o.currentOutputSnapshotRaw)}var h=n.val(!0),l=a;this.server_.put(l.toString(),h,function(t){c.log_("transaction put response",{path:l.toString(),status:t});var e=[];if("ok"===t){for(var n=[],r=0;r<u.length;r++){if(u[r].status=xf.COMPLETED,e=e.concat(c.serverSyncTree_.ackUserWrite(u[r].currentWriteId)),u[r].onComplete){var i=u[r].currentOutputSnapshotResolved,o=new Pf(c,u[r].path),s=new hh(i,o,Oc);n.push(u[r].onComplete.bind(null,null,!0,s))}u[r].unwatcher()}c.pruneCompletedTransactionsBelowNode_(c.transactionQueueTree_.subTree(a)),c.sendReadyTransactions_(),c.eventQueue_.raiseEventsForChangedPath(a,e);for(r=0;r<n.length;r++)Au(n[r])}else{if("datastale"===t)for(r=0;r<u.length;r++)u[r].status===xf.SENT_NEEDS_ABORT?u[r].status=xf.NEEDS_ABORT:u[r].status=xf.RUN;else{cu("transaction at "+l.toString()+" failed: "+t);for(r=0;r<u.length;r++)u[r].status=xf.NEEDS_ABORT,u[r].abortReason=t}c.rerunTransactions_(a)}},r)},Tf.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},Tf.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter(function(t){return t.status===xf.RUN}).map(function(t){return t.currentWriteId}),s=0;s<t.length;s++){var a=t[s],u=Pu.relativePath(e,a.path),c=!1,h=void 0;if(Ds(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===xf.NEEDS_ABORT)c=!0,h=a.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===xf.RUN)if(a.retryCount>=Tf.MAX_TRANSACTION_RETRIES_)c=!0,h="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var l=this.getLatestState_(a.path,o);a.currentInputSnapshot=l;var f=t[s].update(l.val());if(void 0!==f){rc("transaction failed: Data returned ",f,a.path);var p=ih(f);"object"==typeof f&&null!=f&&Zs(f,".priority")||(p=p.updatePriority(l.getPriority()));var d=a.currentWriteId,v=this.generateServerValues(),y=Ah(p,l,v);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(d),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(a.path,y,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else c=!0,h="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],c&&(t[s].status=xf.COMPLETED,n=t[s].unwatcher,setTimeout(n,Math.floor(0)),t[s].onComplete))if("nodata"===h){var g=new Pf(this,t[s].path),m=t[s].currentInputSnapshot,b=new hh(m,g,Oc);r.push(t[s].onComplete.bind(null,null,!1,b))}else r.push(t[s].onComplete.bind(null,new Error(h),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(s=0;s<r.length;s++)Au(r[s]);this.sendReadyTransactions_()}},Tf.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},Tf.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},Tf.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},Tf.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==xf.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(0<n.length?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},Tf.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},Tf.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)if(e[o].status!==xf.SENT_NEEDS_ABORT)if(e[o].status===xf.SENT)Ds(i===o-1,"All SENT items should be at beginning of queue."),e[i=o].status=xf.SENT_NEEDS_ABORT,e[o].abortReason="set";else if(Ds(e[o].status===xf.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))}-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(o=0;o<n.length;o++)Au(n[o])}};var jf,Vf="databaseURL",qf=(Bf.getInstance=function(){return jf=jf||new Bf},Bf.prototype.interrupt=function(){var e,t,n,r;try{for(var i=Ns(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,Ns(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].interrupt()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},Bf.prototype.resume=function(){var e,t,n,r;try{for(var i=Ns(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,Ns(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].resume()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},Bf.prototype.databaseFromApp=function(t,e,n){var r=n||t.options[Vf];void 0===r&&uu("Can't determine Firebase Database URL.  Be sure to include "+Vf+" option when calling firebase.initializeApp().");var i=qu(r),o=i.repoInfo,s=void 0;return"undefined"!=typeof process&&(s=process.env.FIREBASE_DATABASE_EMULATOR_HOST),s&&(r="http://"+s+"?ns="+o.namespace,o=(i=qu(r)).repoInfo),$u("Invalid Firebase Database URL",1,i),i.path.isEmpty()||uu("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(o,t,e).database},Bf.prototype.deleteRepo=function(t){var e=ta(this.repos_,t.app.name);e&&ta(e,t.repoInfo_.toURLString())===t||uu("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},Bf.prototype.createRepo=function(t,e,n){var r=ta(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=ta(r,t.toURLString());return i&&uu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Tf(t,this.useRestClient_,e,n),r[t.toURLString()]=i},Bf.prototype.forceRestClient=function(t){this.useRestClient_=t},Bf);function Bf(){this.repos_={},this.useRestClient_=!1}var Wf=(Object.defineProperty(Kf.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),Kf.prototype.ref=function(t){return this.checkDeleted_("ref"),ca("database.ref",0,1,arguments.length),t instanceof Pf?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},Kf.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),ca(e,1,1,arguments.length);var n=qu(t);$u(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&uu(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},Kf.prototype.checkDeleted_=function(t){null===this.repo_&&uu("Cannot call "+t+" on a deleted database.")},Kf.prototype.goOffline=function(){ca("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},Kf.prototype.goOnline=function(){ca("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},Kf.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},Kf);function Kf(t){(this.repo_=t)instanceof Tf||uu("Don't call new Database() directly - please use firebase.database()."),this.root_=new Pf(t,Pu.Empty),this.INTERNAL=new Hf(this)}var Hf=(Gf.prototype.delete=function(){return Is(this,void 0,void 0,function(){return Ss(this,function(t){return this.database.checkDeleted_("delete"),qf.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},Gf);function Gf(t){this.database=t}var zf=Object.freeze({__proto__:null,forceLongPolling:function(){uf.forceDisallow(),ef.forceAllow()},forceWebSockets:function(){ef.forceDisallow()},isWebSocketsAvailable:function(){return uf.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),Qf=gf;gf.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},gf.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Yf,Xf,Jf=ff,$f=ju,Zf=Object.freeze({__proto__:null,DataConnection:Qf,RealTimeConnection:Jf,hijackHash:function(i){var o=gf.prototype.put;return gf.prototype.put=function(t,e,n,r){void 0!==r&&(r=i()),o.call(this,t,e,n,r)},function(){gf.prototype.put=o}},ConnectionTarget:$f,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){qf.getInstance().forceRestClient(t)}}),tp=Wf.ServerValue;Xf=(Yf=zl).SDK_VERSION,sf=Xf,Yf.INTERNAL.registerComponent(new da("database",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return qf.getInstance().databaseFromApp(n,r,e)},"PUBLIC").setServiceProps({Reference:Pf,Query:wh,Database:Wf,DataSnapshot:hh,enableLogging:iu,INTERNAL:zf,ServerValue:tp,TEST_ACCESS:Zf}).setMultipleInstances(!0)),Yf.registerVersion("@firebase/database","0.6.1");var ep,np="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},rp=rp||{},ip=np;function op(t){return"string"==typeof t}function sp(t){return"number"==typeof t}function ap(t,e){t=t.split("."),e=e||ip;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function up(){}function cp(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function hp(t){return"array"==cp(t)}function lp(t){var e=cp(t);return"array"==e||"object"==e&&"number"==typeof t.length}function fp(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var pp="closure_uid_"+(1e9*Math.random()>>>0),dp=0;function vp(t,e,n){return t.call.apply(t.bind,arguments)}function yp(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function gp(t,e,n){return(gp=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?vp:yp).apply(null,arguments)}function mp(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var bp=Date.now||function(){return+new Date};function _p(t,o){function e(){}e.prototype=o.prototype,t.N=o.prototype,t.prototype=new e,(t.prototype.constructor=t).yb=function(t,e,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[e].apply(t,r)}}function wp(){this.j=this.j,this.i=this.i}wp.prototype.j=!1,wp.prototype.la=function(){if(!this.j&&(this.j=!0,this.G(),0))this[pp]||(this[pp]=++dp)},wp.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Ep=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(op(t))return op(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Tp=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=op(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Ip(){return Array.prototype.concat.apply([],arguments)}function Sp(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Np(t){return/^[\s\xa0]*$/.test(t)}var Cp,Ap=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function kp(t,e){return-1!=t.indexOf(e)}function Rp(t,e){return t<e?-1:e<t?1:0}t:{var Op=ip.navigator;if(Op){var Pp=Op.userAgent;if(Pp){Cp=Pp;break t}}Cp=""}function Dp(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function xp(t){var e,n={};for(e in t)n[e]=t[e];return n}var Lp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Mp(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<Lp.length;i++)e=Lp[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function Fp(t){return Fp[" "](t),t}Fp[" "]=up;var Up,jp,Vp=kp(Cp,"Opera"),qp=kp(Cp,"Trident")||kp(Cp,"MSIE"),Bp=kp(Cp,"Edge"),Wp=Bp||qp,Kp=kp(Cp,"Gecko")&&!(kp(Cp.toLowerCase(),"webkit")&&!kp(Cp,"Edge"))&&!(kp(Cp,"Trident")||kp(Cp,"MSIE"))&&!kp(Cp,"Edge"),Hp=kp(Cp.toLowerCase(),"webkit")&&!kp(Cp,"Edge");function Gp(){var t=ip.document;return t?t.documentMode:void 0}t:{var zp="",Qp=(jp=Cp,Kp?/rv:([^\);]+)(\)|;)/.exec(jp):Bp?/Edge\/([\d\.]+)/.exec(jp):qp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(jp):Hp?/WebKit\/(\S+)/.exec(jp):Vp?/(?:Version)[ \/]?(\S+)/.exec(jp):void 0);if(Qp&&(zp=Qp?Qp[1]:""),qp){var Yp=Gp();if(null!=Yp&&Yp>parseFloat(zp)){Up=String(Yp);break t}}Up=zp}var Xp,Jp={};function $p(a){return t=a,e=function(){for(var t=0,e=Ap(String(Up)).split("."),n=Ap(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=Rp(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||Rp(0==o[2].length,0==s[2].length)||Rp(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=Jp,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var Zp=ip.document;Xp=Zp&&qp?Gp()||("CSS1Compat"==Zp.compatMode?parseInt(Up,10):5):void 0;var td=!qp||9<=Number(Xp),ed=qp&&!$p("9"),nd=function(){if(!ip.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ip.addEventListener("test",up,e),ip.removeEventListener("test",up,e)}catch(t){}return t}();function rd(t,e){this.type=t,this.a=this.target=e,this.Ia=!0}function id(t,e){if(rd.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Kp){t:{try{Fp(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=op(t.pointerType)?t.pointerType:od[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}rd.prototype.b=function(){this.Ia=!1},_p(id,rd);var od={2:"touch",3:"pen",4:"mouse"};id.prototype.b=function(){id.N.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ed)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var sd="closure_listenable_"+(1e6*Math.random()|0),ad=0;function ud(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++ad,this.X=this.Z=!1}function cd(t){t.X=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function hd(t){this.src=t,this.a={},this.b=0}function ld(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Ep(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(cd(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function fd(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.X&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}hd.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=fd(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ud(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var pd="closure_lm_"+(1e6*Math.random()|0),dd={};function vd(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(hp(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}r=Td(r);return e&&e[sd]?e.Aa(n,r,fp(i)?!!i.capture:!!i,o):yd(e,n,r,!0,i,o)}(t,e,n,r,i);if(hp(e)){for(var o=0;o<e.length;o++)vd(t,e[o],n,r,i);return null}return n=Td(n),t&&t[sd]?t.za(e,n,fp(r)?!!r.capture:!!r,i):yd(t,e,n,!1,r,i)}function yd(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=fp(i)?!!i.capture:!!i;if(s&&!td)return null;var a,u,c=wd(t);if(c||(t[pd]=c=new hd(t)),(n=c.add(e,n,r,s,o)).proxy)return n;if(a=_d,r=u=td?function(t){return a.call(u.src,u.listener,t)}:function(t){if(!(t=a.call(u.src,u.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)nd||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(md(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function gd(t){if(!sp(t)&&t&&!t.X){var e=t.src;if(e&&e[sd])ld(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(md(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=wd(e))?(ld(n,t),0==n.b&&(n.src=null,e[pd]=null)):cd(t)}}}function md(t){return t in dd?dd[t]:dd[t]="on"+t}function bd(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&gd(t),n.call(r,e)}function _d(t,e){return!!t.X||(td?bd(t,new id(e,this)):bd(t,e=new id(e||ap("window.event"),this)))}function wd(t){return(t=t[pd])instanceof hd?t:null}var Ed="__closure_events_fn_"+(1e9*Math.random()>>>0);function Td(e){return"function"==cp(e)?e:(e[Ed]||(e[Ed]=function(t){return e.handleEvent(t)}),e[Ed])}function Id(){wp.call(this),this.c=new hd(this),(this.J=this).B=null}function Sd(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.X&&s.capture==n){var a=s.listener,u=s.da||s.src;s.Z&&ld(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&0!=r.Ia}_p(Id,wp),Id.prototype[sd]=!0,(ep=Id.prototype).addEventListener=function(t,e,n,r){vd(this,t,e,n,r)},ep.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(hp(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=fp(i)?!!i.capture:!!i,r=Td(r),e&&e[sd]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=fd(s=e.a[n],r,i,o))&&(cd(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&wd(e))&&(n=e.a[n.toString()],e=-1,n&&(e=fd(n,r,i,o)),(r=-1<e?n[e]:null)&&gd(r))}(this,t,e,n,r)},ep.dispatchEvent=function(t){var e,n=this.B;if(n)for(e=[];n;n=n.B)e.push(n);n=this.J;var r=t.type||t;if(op(t))t=new rd(t,n);else if(t instanceof rd)t.target=t.target||n;else{var i=t;Mp(t=new rd(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=Sd(s,r,!0,t)&&i}if(i=Sd(s=t.a=n,r,!0,t)&&i,i=Sd(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Sd(s=t.a=e[o],r,!1,t)&&i;return i},ep.G=function(){if(Id.N.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)cd(n[r]);delete e.a[t],e.b--}}this.B=null},ep.za=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},ep.Aa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Nd=ip.JSON.stringify;function Cd(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Ad(){this.b=this.a=null}Cd.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var kd,Rd=new Cd(function(){return new Od},function(t){t.reset()});function Od(){this.next=this.b=this.a=null}function Pd(t){ip.setTimeout(function(){throw t},0)}function Dd(t,e){var n;kd||(n=ip.Promise.resolve(void 0),kd=function(){n.then(Md)}),xd||(kd(),xd=!0),Ld.add(t,e)}Ad.prototype.add=function(t,e){var n=Rd.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Od.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var xd=!(Od.prototype.reset=function(){this.next=this.b=this.a=null}),Ld=new Ad;function Md(){for(var t;r=n=void 0,r=null,(n=Ld).a&&(r=n.a,n.a=n.a.next,n.a||(n.b=null),r.next=null),t=r;){try{t.a.call(t.b)}catch(t){Pd(t)}var e=Rd;e.f(t),e.b<100&&(e.b++,t.next=e.a,e.a=t)}var n,r;xd=!1}function Fd(t,e){Id.call(this),this.b=t||1,this.a=e||ip,this.f=gp(this.gb,this),this.g=bp()}function Ud(t){t.ba=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function jd(t,e,n){if("function"==cp(t))n&&(t=gp(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=gp(t.handleEvent,t)}return 2147483647<Number(e)?-1:ip.setTimeout(t,e||0)}function Vd(t,e,n){wp.call(this),this.f=null!=n?gp(t,n):t,this.c=e,this.b=gp(this.$a,this),this.a=[]}function qd(t){t.U=jd(t.b,t.c),t.f.apply(null,t.a)}function Bd(t){wp.call(this),this.b=t,this.a={}}_p(Fd,Id),(ep=Fd.prototype).ba=!1,ep.L=null,ep.gb=function(){if(this.ba){var t=bp()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(Ud(this),this.start()))}},ep.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=bp())},ep.G=function(){Fd.N.G.call(this),Ud(this),delete this.a},_p(Vd,wp),(ep=Vd.prototype).ea=!1,ep.U=null,ep.Ta=function(t){this.a=arguments,this.U?this.ea=!0:qd(this)},ep.G=function(){Vd.N.G.call(this),this.U&&(ip.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},ep.$a=function(){this.U=null,this.ea&&(this.ea=!1,qd(this))},_p(Bd,wp);var Wd=[];function Kd(t,e,n,r){hp(n)||(n&&(Wd[0]=n.toString()),n=Wd);for(var i=0;i<n.length;i++){var o=vd(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Hd(t){Dp(t.a,function(t,e){this.a.hasOwnProperty(e)&&gd(t)},t),t.a={}}function Gd(){}Bd.prototype.G=function(){Bd.N.G.call(this),Hd(this)},Bd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zd=new Id;function Qd(t){rd.call(this,"serverreachability",t)}function Yd(t){zd.dispatchEvent(new Qd(zd))}function Xd(t){rd.call(this,"statevent",t)}function Jd(t){zd.dispatchEvent(new Xd(zd))}function $d(t){rd.call(this,"timingevent",t)}function Zd(t,e){if("function"!=cp(t))throw Error("Fn must not be null and must be a function");return ip.setTimeout(function(){t()},e)}_p(Qd,rd),_p(Xd,rd),_p($d,rd);var tv={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,La:7,TIMEOUT:8,sb:9},ev={jb:"complete",wb:"success",Ma:"error",La:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function nv(){}function rv(t){var e;return(e=t.a)||(e=t.a={}),e}function iv(){}nv.prototype.a=null;var ov,sv={OPEN:"a",ib:"b",Ma:"c",rb:"d"};function av(){rd.call(this,"d")}function uv(){rd.call(this,"c")}function cv(){}function hv(t,e,n){this.g=t,this.W=e,this.V=n||1,this.I=new Bd(this),this.O=lv,t=Wp?125:void 0,this.P=new Fd(t),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}_p(av,rd),_p(uv,rd),_p(cv,nv),ov=new cv;var lv=45e3,fv={},pv={};function dv(t,e,n){t.F=1,t.f=jv(Pv(e)),t.l=n,t.H=!0,yv(t,null)}function vv(t,e,n,r){t.F=1,t.f=jv(Pv(e)),t.l=null,t.H=n,yv(t,r)}function yv(t,e){t.v=bp(),bv(t),t.D=Pv(t.f),Uv(t.D,"t",t.V),t.A=0,t.a=t.g.$(t.g.Y()?e:null),0<t.J&&(t.B=new Vd(gp(t.Ja,t,t.a),t.J)),Kd(t.I,t.a,"readystatechange",t.cb),e=t.h?xp(t.h):{},t.l?(t.w||(t.w="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ca(t.D,t.w,t.l,e)):(t.w="GET",t.a.ca(t.D,t.w,null,e)),Yd(1)}function gv(t,e,n){for(var r=!0;!t.m&&t.A<n.length;){var i=mv(t,n);if(i==pv){4==e&&(t.c=4,Jd(14),r=!1);break}if(i==fv){t.c=4,Jd(15),r=!1;break}Iv(t,i)}4==e&&0==n.length&&(t.c=1,Jd(16),r=!1),t.b=t.b&&r,r||(Tv(t),Ev(t))}function mv(t,e){var n=t.A,r=e.indexOf("\n",n);return-1==r?pv:(n=Number(e.substring(n,r)),isNaN(n)?fv:(r+=1)+n>e.length?pv:(e=e.substr(r,n),t.A=r+n,e))}function bv(t){t.R=bp()+t.O,_v(t,t.O)}function _v(t,e){if(null!=t.i)throw Error("WatchDog timer not null");t.i=Zd(gp(t.ab,t),e)}function wv(t){t.i&&(ip.clearTimeout(t.i),t.i=null)}function Ev(t){t.g.Ca()||t.m||t.g.na(t)}function Tv(t){wv(t);var e=t.B;e&&"function"==typeof e.la&&e.la(),t.B=null,Ud(t.P),Hd(t.I),t.a&&(e=t.a,t.a=null,e.abort(),e.la())}function Iv(t,e){try{t.g.Fa(t,e),Yd(4)}catch(t){}}function Sv(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(lp(t)||op(t))Tp(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.C&&"function"==typeof t.C)n=void 0;else if(lp(t)||op(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.C&&"function"==typeof t.C)return t.C();if(op(t))return t.split("");if(lp(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Nv(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Nv)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Cv(t,e){kv(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Av(t))}function Av(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];kv(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)kv(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function kv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(ep=hv.prototype).setTimeout=function(t){this.O=t},ep.cb=function(t){t=t.target;var e=this.B;e&&3==Oy(t)?e.Ta():this.Ja(t)},ep.Ja=function(t){try{if(t==this.a)t:{var e=Oy(this.a),n=this.a.ya(),r=this.a.T();if(!(e<3||3==e&&!Wp&&!this.a.aa())){this.m||4!=e||7==n||Yd(8==n||r<=0?3:2),wv(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){e:{if(this.a){var s=Py(this.a,"X-HTTP-Initial-Response");if(s&&!Np(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.c=3,Jd(12),Tv(this),Ev(this);break t}this.s=!0,Iv(this,a)}this.H?(gv(this,e,o),Wp&&this.b&&3==e&&(Kd(this.I,this.P,"tick",this.bb),this.P.start())):Iv(this,o),4==e&&Tv(this),this.b&&!this.m&&(4==e?this.g.na(this):(this.b=!1,bv(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,Jd(12)):(this.c=0,Jd(13)),Tv(this),Ev(this)}}}catch(t){}},ep.bb=function(){if(this.a){var t=Oy(this.a),e=this.a.aa();this.A<e.length&&(wv(this),gv(this,t,e),this.b&&4!=t&&bv(this))}},ep.cancel=function(){this.m=!0,Tv(this)},ep.ab=function(){this.i=null;var t=bp();0<=t-this.R?(2!=this.F&&(Yd(3),Jd(17)),Tv(this),this.c=2,Ev(this)):_v(this,this.R-t)},(ep=Nv.prototype).C=function(){Av(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},ep.K=function(){return Av(this),this.a.concat()},ep.get=function(t,e){return kv(this.b,t)?this.b[t]:e},ep.set=function(t,e){kv(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},ep.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Rv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ov(t,e){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,t instanceof Ov?(this.h=void 0!==e?e:t.h,Dv(this,t.f),this.j=t.j,xv(this,t.b),Lv(this,t.i),this.a=t.a,Mv(this,Zv(t.c)),this.g=t.g):t&&(n=String(t).match(Rv))?(this.h=!!e,Dv(this,n[1]||"",!0),this.j=Vv(n[2]||""),xv(this,n[3]||"",!0),Lv(this,n[4]),this.a=Vv(n[5]||"",!0),Mv(this,n[6]||"",!0),this.g=Vv(n[7]||"")):(this.h=!!e,this.c=new Qv(null,this.h))}function Pv(t){return new Ov(t)}function Dv(t,e,n){t.f=n?Vv(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function xv(t,e,n){t.b=n?Vv(e,!0):e}function Lv(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.i=e}else t.i=null}function Mv(t,e,n){var r,i;e instanceof Qv?(t.c=e,r=t.c,(i=t.h)&&!r.f&&(Yv(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Xv(this,e),$v(this,n,t))},r)),r.f=i):(n||(e=qv(e,Gv)),t.c=new Qv(e,t.h))}function Fv(t,e,n){t.c.set(e,n)}function Uv(t,e,n){hp(n)||(n=[String(n)]),$v(t.c,e,n)}function jv(t){return Fv(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^bp()).toString(36)),t}function Vv(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qv(t,e,n){return op(t)?(t=encodeURI(t).replace(e,Bv),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Bv(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ov.prototype.toString=function(){var t=[],e=this.f;e&&t.push(qv(e,Wv,!0),":");var n=this.b;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(qv(e,Wv,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(qv(n,"/"==n.charAt(0)?Hv:Kv,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",qv(n,zv)),t.join("")},Ov.prototype.resolve=function(t){var e=Pv(this),n=!!t.f;n?Dv(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?xv(e,t.b):n=null!=t.i;var r=t.a;if(n)Lv(e,t.i);else if(n=!!t.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=e.a.lastIndexOf("/");-1!=i&&(r=e.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(kp(i,"./")||kp(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.a=r:n=""!==t.c.toString(),n?Mv(e,Zv(t.c)):n=!!t.g,n&&(e.g=t.g),e};var Wv=/[#\/\?@]/g,Kv=/[#\?:]/g,Hv=/[#\?]/g,Gv=/[#\?@]/g,zv=/#/g;function Qv(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Yv(n){n.a||(n.a=new Nv,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Xv(t,e){Yv(t),e=ty(t,e),kv(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Cv(t.a,e))}function Jv(t,e){return Yv(t),e=ty(t,e),kv(t.a.b,e)}function $v(t,e,n){Xv(t,e),0<n.length&&(t.c=null,t.a.set(ty(t,e),Sp(n)),t.b+=n.length)}function Zv(t){var e=new Qv;return e.c=t.c,t.a&&(e.a=new Nv(t.a),e.b=t.b),e}function ty(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function ey(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function ny(t){var e=t.a.F.a;if(null!=e)Jd(4),e?(Jd(10),Ky(t.a,t,!1)):(Jd(11),Ky(t.a,t,!0));else{t.b=new hv(t,void 0,void 0),t.b.h=t.h,e=Yy(e=t.a,e.Y()?t.f:null,t.i),Jd(4),Uv(e,"TYPE","xmlhttp");var n=t.a.j,r=t.a.I;n&&r&&Fv(e,n,r),vv(t.b,e,!1,t.f)}}function ry(){this.a=this.b=null}function iy(){this.a=new Nv}function oy(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[pp]||(t[pp]=++dp)):e.charAt(0)+t}function sy(t,e){this.b=t,this.a=e}function ay(t){this.g=t||uy,t=ip.PerformanceNavigationTiming?0<(t=ip.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(ip.ka&&ip.ka.Da&&ip.ka.Da()&&ip.ka.Da().zb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new iy),this.b=null,this.c=[]}(ep=Qv.prototype).add=function(t,e){Yv(this),this.c=null,t=ty(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},ep.forEach=function(n,r){Yv(this),this.a.forEach(function(t,e){Tp(t,function(t){n.call(r,t,e,this)},this)},this)},ep.K=function(){Yv(this);for(var t=this.a.C(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},ep.C=function(t){Yv(this);var e=[];if(op(t))Jv(this,t)&&(e=Ip(e,this.a.get(ty(this,t))));else{t=this.a.C();for(var n=0;n<t.length;n++)e=Ip(e,t[n])}return e},ep.set=function(t,e){return Yv(this),this.c=null,Jv(this,t=ty(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},ep.get=function(t,e){return t&&0<(t=this.C(t)).length?String(t[0]):e},ep.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")},_p(function(){},function(){}),(ep=ey.prototype).M=null,ep.$=function(t){return this.a.$(t)},ep.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},ep.Ca=function(){return!1},ep.Fa=function(t,e){if(this.c=t.o,0==this.M){if(!this.a.o&&(t=t.a)){var n=Py(t,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(t=Py(t,"X-HTTP-Session-Id"))&&(this.a.I=t)}if(e){try{var r=this.a.ja.a.parse(e)}catch(t){return(e=this.a).m=this.c,void zy(e,2)}this.f=r[0]}else(e=this.a).m=this.c,zy(e,2)}else 1==this.M&&(this.g?Jd(6):"11111"==e?(Jd(5),this.g=!0,(!qp||10<=Number(Xp))&&(this.c=200,this.b.cancel(),Jd(11),Ky(this.a,this,!0))):(Jd(7),this.g=!1))},ep.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,ny(this)):1==this.M&&(this.g?(Jd(11),Ky(this.a,this,!0)):(Jd(10),Ky(this.a,this,!1)));else{0==this.M?Jd(8):1==this.M&&Jd(9);var t=this.a;t.m=this.c,zy(t,2)}},ep.Y=function(){return this.a.Y()},ep.ma=function(){return this.a.ma()},iy.prototype.add=function(t){this.a.set(oy(t),t)},iy.prototype.C=function(){return this.a.C()};var uy=10;function cy(t,e){!t.a&&(kp(e,"spdy")||kp(e,"quic")||kp(e,"h2"))&&(t.f=t.g,t.a=new iy,t.b&&(py(t,t.b),t.b=null))}function hy(t){return t.b||t.a&&t.a.a.c>=t.f}function ly(t){return t.b?1:t.a?t.a.a.c:0}function fy(t,e){return t=t.b?t.b==e:!!t.a&&(e=oy(e),kv(t.a.a.b,e))}function py(t,e){t.a?t.a.add(e):t.b=e}function dy(t,e){var n;t.b&&t.b==e?t.b=null:((n=t.a)&&(n=oy(e),n=kv(t.a.a.b,n)),n&&Cv(t.a.a,oy(e)))}function vy(t){if(null!=t.b)return t.c.concat(t.b.j);if(null==t.a||0==t.a.a.c)return Sp(t.c);var e=t.c;return Tp(t.a.C(),function(t){e=e.concat(t.j)}),e}function yy(){}function gy(){this.a=new yy}function my(t,r,e){var i=e||"";try{Sv(t,function(t,e){var n=t;fp(t)&&(n=Nd(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}function by(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}ay.prototype.cancel=function(){var t;this.c=vy(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(Tp(this.a.C(),function(t){t.cancel()}),(t=this.a.a).b={},t.a.length=0,t.c=0)},yy.prototype.stringify=function(t){return ip.JSON.stringify(t,void 0)},yy.prototype.parse=function(t){return ip.JSON.parse(t,void 0)};var _y=ip.JSON.parse;function wy(t){Id.call(this),this.headers=new Nv,this.H=t||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Ey,this.D=this.F=!1}_p(wy,Id);var Ey="",Ty=/^https?$/i,Iy=["POST","PUT"];function Sy(t){return"content-type"==t.toLowerCase()}function Ny(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Cy(t),ky(t)}function Cy(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ay(t){if(t.b&&void 0!==rp&&(!t.s[1]||4!=Oy(t)||2!=t.T()))if(t.l&&4==Oy(t))jd(t.Ea,0,t);else if(t.dispatchEvent("readystatechange"),4==Oy(t)){t.b=!1;try{var e,n=t.T();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.A).match(Rv)[1]||null;if(!o&&ip.self&&ip.self.location){var s=ip.self.location.protocol;o=s.substr(0,s.length-1)}i=!Ty.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<Oy(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.T()+"]",Cy(t)}}finally{ky(t)}}}function ky(t,e){if(t.a){Ry(t);var n=t.a,r=t.s[0]?up:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function Ry(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(ip.clearTimeout(t.m),t.m=null)}function Oy(t){return t.a?t.a.readyState:0}function Py(t,e){return t.a?t.a.getResponseHeader(e):null}function Dy(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;var i;if(i="",Dp(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,op(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if((n=t.indexOf("#"))<0&&(n=t.length),(r=t.indexOf("?"))<0||n<r){r=n;var o=""}else o=t.substring(r+1,n);n=(t=[t.substr(0,r),o,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return Fv(t,e,n),t}function xy(t){this.f=[],this.F=new ry,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!ap("internalChannelParams.failFast",t),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=ap("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Ra=ap("internalChannelParams.retryDelaySeedMs",t)||1e4,this.Pa=ap("internalChannelParams.forwardChannelMaxRetries",t)||2,this.qa=ap("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.Ka=t&&t.Ab||void 0,this.D=void 0,this.R=t&&t.supportsCrossDomainXhr||!1,this.H="",this.b=new ay(t&&t.concurrentRequestLimit),this.ja=new gy,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.W=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Ly(t){if(My(t),3==t.u){var e=t.P++,n=Pv(t.B);Fv(n,"SID",t.H),Fv(n,"RID",e),Fv(n,"TYPE","terminate"),Vy(t,n),(e=new hv(t,e,void 0)).F=2,e.f=jv(Pv(n)),n=!1,ip.navigator&&ip.navigator.sendBeacon&&(n=ip.navigator.sendBeacon(e.f.toString(),"")),!n&&ip.Image&&((new Image).src=e.f,n=!0),n||(e.a=e.g.$(null),e.a.ca(e.f)),e.v=bp(),bv(e)}Qy(t)}function My(t){t.w&&(t.w.abort(),t.w=null),t.a&&(t.a.cancel(),t.a=null),t.l&&(ip.clearTimeout(t.l),t.l=null),Hy(t),t.b.cancel(),t.h&&(sp(t.h)&&ip.clearTimeout(t.h),t.h=null)}function Fy(t,e){t.f.push(new sy(t.Qa++,e)),3==t.u&&Uy(t)}function Uy(t){hy(t.b)||t.h||(t.h=!0,Dd(t.Ha,t),t.A=0)}function jy(t,e){var n;n=e?e.W:t.P++;var r=Pv(t.B);Fv(r,"SID",t.H),Fv(r,"RID",n),Fv(r,"AID",t.O),Vy(t,r),t.g&&t.i&&Dy(r,t.g,t.i),n=new hv(t,n,t.A+1),null===t.g&&(n.h=t.i),e&&(t.f=e.j.concat(t.f)),e=qy(t,n,1e3),n.setTimeout(Math.round(.5*t.qa)+Math.round(.5*t.qa*Math.random())),py(t.b,n),dv(n,r,e)}function Vy(t,n){t.c&&Sv({},function(t,e){Fv(n,e,t)})}function qy(t,e,n){n=Math.min(t.f.length,n);var r=t.c?gp(t.c.Sa,t.c,t):null;t:for(var i=t.f,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),a=!1;else try{my(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.f.splice(0,n),e.j=t,r}function By(t){t.a||t.l||(t.S=1,Dd(t.Ga,t),t.v=0)}function Wy(t){return!(t.a||t.l||3<=t.v)&&(t.S++,t.l=Zd(gp(t.Ga,t),Gy(t,t.v)),t.v++,1)}function Ky(t,e,n){var r=e.l;r&&cy(t.b,r),t.ia=t.oa&&n,t.m=e.c,t.B=Yy(t,null,t.ha),Uy(t)}function Hy(t){null!=t.s&&(ip.clearTimeout(t.s),t.s=null)}function Gy(t,e){var n=t.Na+Math.floor(Math.random()*t.Ra);return t.ma()||(n*=2),n*e}function zy(t,e){if(2==e){var n=null;t.c&&(n=null);var r=gp(t.eb,t);n||(n=new Ov("//www.google.com/images/cleardot.gif"),ip.location&&"http"==ip.location.protocol||Dv(n,"https"),jv(n)),function(t,e){var n=new Gd;if(ip.Image){var r=new Image;r.onload=mp(by,n,r,"TestLoadImage: loaded",!0,e),r.onerror=mp(by,n,r,"TestLoadImage: error",!1,e),r.onabort=mp(by,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=mp(by,n,r,"TestLoadImage: timeout",!1,e),ip.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Jd(2);t.u=0,t.c&&t.c.ta(e),Qy(t),My(t)}function Qy(t){t.u=0,t.m=-1,t.c&&(0==vy(t.b).length&&0==t.f.length||(t.b.c.length=0,Sp(t.f),t.f.length=0),t.c.sa())}function Yy(t,e,n){var r,i,o,s,a,u,c=(r=n)instanceof Ov?Pv(r):new Ov(r,void 0);if(""!=c.b)e&&xv(c,e+"."+c.b),Lv(c,c.i);else{var h,l=ip.location;h=e?e+"."+l.hostname:l.hostname,i=l.protocol,o=h,s=+l.port,a=n,u=new Ov(null,void 0),i&&Dv(u,i),o&&xv(u,o),s&&Lv(u,s),a&&(u.a=a),c=u}return t.V&&Dp(t.V,function(t,e){Fv(c,e,t)}),e=t.j,n=t.I,e&&n&&Fv(c,e,n),Fv(c,"VER",t.wa),Vy(t,c),c}function Xy(){}function Jy(){if(qp&&!(10<=Number(Xp)))throw Error("Environmental error: no available transport.")}function $y(t,e){Id.call(this),this.a=new xy(e),this.g=t,this.m=e&&e.fb?e.fb:function(t){for(var e=t,n=1;n<arguments.length;n++){var r,i=arguments[n];if(0==i.lastIndexOf("/",0))e=i;else(r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e+=r?i:"/"+i}return e}(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.xa&&(t?t["X-WebChannel-Client-Profile"]=e.xa:t={"X-WebChannel-Client-Profile":e.xa}),this.a.J=t,(t=e&&e.httpHeadersOverwriteParam)&&!Np(t)&&(this.a.g=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Np(e)&&(this.a.j=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new eg(this)}function Zy(t){av.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function tg(){uv.call(this),this.status=1}function eg(t){this.a=t}(ep=wy.prototype).ca=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+t);e=e?e.toUpperCase():"GET",this.A=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?rv(this.H):rv(ov),this.a.onreadystatechange=gp(this.Ea,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void Ny(this,t)}t=n||"";var i,o=new Nv(this.headers);r&&Sv(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=Sy,n=t.length,r=op(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:op(t)?t.charAt(e):t[e]}(o.K()),n=ip.FormData&&t instanceof ip.FormData,0<=Ep(Iy,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Ry(this),0<this.o&&((this.D=(i=this.a,qp&&$p(9)&&sp(i.timeout)&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=gp(this.Ba,this)):this.m=jd(this.Ba,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Ny(this,t)}},ep.Ba=function(){void 0!==rp&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},ep.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ky(this))},ep.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),ky(this,!0)),wy.N.G.call(this)},ep.Ea=function(){this.j||(this.w||this.l||this.g?Ay(this):this.Za())},ep.Za=function(){Ay(this)},ep.T=function(){try{return 2<Oy(this)?this.a.status:-1}catch(t){return-1}},ep.aa=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},ep.Ua=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),_y(e)}},ep.ya=function(){return this.h},ep.Xa=function(){return op(this.f)?this.f:String(this.f)},(ep=xy.prototype).wa=8,ep.u=1,ep.Ca=function(){return 0==this.u},ep.Ha=function(t){if(this.h)if(this.h=null,1==this.u){if(!t){this.P=Math.floor(1e5*Math.random()),t=this.P++;var e,n=new hv(this,t,void 0),r=this.i;if(this.J&&(r?Mp(r=xp(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if("__data__"in o.a&&op(o=o.a.__data__)?o=o.length:o=void 0,void 0===o)break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=qy(this,n,e),Fv(i=Pv(this.B),"RID",t),Fv(i,"CVER",22),this.o&&this.j&&Fv(i,"X-HTTP-Session-Id",this.j),Vy(this,i),this.g&&r&&Dy(i,this.g,r),py(this.b,n),this.W?(Fv(i,"$req",e),Fv(i,"SID","null"),n.S=!0,dv(n,i,null)):dv(n,i,e),this.u=2}}else 3==this.u&&(t?jy(this,t):0==this.f.length||hy(this.b)||jy(this))},ep.Ga=function(){this.l=null,this.a=new hv(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var t=Pv(this.pa);Fv(t,"RID","rpc"),Fv(t,"SID",this.H),Fv(t,"CI",this.ia?"0":"1"),Fv(t,"AID",this.O),Vy(this,t),Fv(t,"TYPE","xmlhttp"),this.g&&this.i&&Dy(t,this.g,this.i),this.D&&this.a.setTimeout(this.D),vv(this.a,t,!0,this.ga)},ep.Fa=function(t,e){if(0!=this.u&&(this.a==t||fy(this.b,t)))if(this.m=t.o,!t.s&&fy(this.b,t)&&3==this.u){try{var n=this.ja.a.parse(e)}catch(t){n=null}if(hp(n)&&3==n.length){if(0==(e=n)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<t.v))break t;Hy(this),this.a.cancel(),this.a=null}Wy(this),Jd(18)}}else this.ra=e[1],0<this.ra-this.O&&e[2]<37500&&this.ia&&0==this.v&&!this.s&&(this.s=Zd(gp(this.Ya,this),6e3));if(ly(this.b)<=1&&this.fa){try{this.fa()}catch(t){}this.fa=void 0}}else zy(this,11)}else if(!t.s&&this.a!=t||Hy(this),!Np(e))for(e=n=this.ja.a.parse(e),n=0;n<e.length;n++){var r=e[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&sp(r)&&0<r&&(this.D=1.5*r),this.o&&(r=t.a)&&((i=Py(r,"X-Client-Wire-Protocol"))&&cy(this.b,i),this.j&&(r=Py(r,"X-HTTP-Session-Id")))&&(this.I=r,Fv(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=t,this.pa=Yy(this,this.Y()?this.ga:null,this.ha),r.s?(dy(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(wv(r),bv(r)),this.a=r):By(this),0<this.f.length&&Uy(this)}else"stop"!=r[0]&&"close"!=r[0]||zy(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?zy(this,7):Ly(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},ep.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Wy(this),Jd(19))},ep.na=function(t){var e=null;if(this.a==t){Hy(this),this.a=null;var n=2}else{if(!fy(this.b,t))return;e=t.j,dy(this.b,t),n=1}if(this.m=t.o,0!=this.u)if(t.b)1==n?(e=bp()-t.v,zd.dispatchEvent(new $d(zd,t.l&&t.l.length,this.A)),Uy(this)):By(this);else{var r=t.c;if(3==r||0==r&&0<this.m||!(1==n&&function(t,e){if(!(ly(t.b)>=t.b.f-(t.h?1:0))){if(t.h)return t.f=e.j.concat(t.f),1;if(!(1==t.u||2==t.u||t.A>=(t.Oa?0:t.Pa)))return t.h=Zd(gp(t.Ha,t,e),Gy(t,t.A)),t.A++,1}}(this,t)||2==n&&Wy(this)))switch(e&&0<e.length&&(t=this.b,t.c=t.c.concat(e)),r){case 1:zy(this,5);break;case 4:zy(this,10);break;case 3:zy(this,6);break;default:zy(this,2)}}},ep.eb=function(t){Jd(t?2:1)},ep.$=function(t){if(t&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new wy(this.Ka)).F=this.R,t},ep.ma=function(){return!!this.c&&!0},ep.Y=function(){return this.R},(ep=Xy.prototype).va=function(){},ep.ua=function(){},ep.ta=function(){},ep.sa=function(){},ep.Sa=function(){},Jy.prototype.a=function(t,e){return new $y(t,e)},_p($y,Id),(ep=$y.prototype).addEventListener=function(t,e,n,r){$y.N.addEventListener.call(this,t,e,n,r)},ep.removeEventListener=function(t,e,n,r){$y.N.removeEventListener.call(this,t,e,n,r)},ep.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var t=this.a,e=this.m,n=this.g,r=this.b||void 0;Jd(0),t.ha=n,t.V=r||{},t.o&&(t.F.b=[],t.F.a=!1),t.w=new ey(t),null===t.g&&(t.w.h=t.i),n=e,t.g&&t.i&&(n=Dy(e,t.g,t.i)),(t=t.w).i=n,e=Yy(t.a,null,t.i),Jd(3),null!=(n=t.a.F.b)?(t.f=n[0],t.M=1,ny(t)):(Uv(e,"MODE","init"),!t.a.o&&t.a.j&&Uv(e,"X-HTTP-Session-Id",t.a.j),t.b=new hv(t,void 0,void 0),t.b.h=t.h,vv(t.b,e,!1,null),t.M=0)},ep.close=function(){Ly(this.a)},ep.Wa=function(t){if(op(t)){var e={};e.__data__=t,Fy(this.a,e)}else this.h?((e={}).__data__=Nd(t),Fy(this.a,e)):Fy(this.a,t)},ep.G=function(){this.a.c=null,delete this.f,Ly(this.a),delete this.a,$y.N.G.call(this)},_p(Zy,av),_p(tg,uv),_p(eg,Xy),eg.prototype.va=function(){this.a.dispatchEvent("a")},eg.prototype.ua=function(t){this.a.dispatchEvent(new Zy(t))},eg.prototype.ta=function(t){this.a.dispatchEvent(new tg)},eg.prototype.sa=function(){this.a.dispatchEvent("b")};var ng=mp(function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r},Jy);Jy.prototype.createWebChannel=Jy.prototype.a,$y.prototype.send=$y.prototype.Wa,$y.prototype.open=$y.prototype.Va,$y.prototype.close=$y.prototype.close,tv.NO_ERROR=0,tv.TIMEOUT=8,tv.HTTP_ERROR=6,ev.COMPLETE="complete",(iv.EventType=sv).OPEN="a",sv.CLOSE="b",sv.ERROR="c",sv.MESSAGE="d",Id.prototype.listen=Id.prototype.za,wy.prototype.listenOnce=wy.prototype.Aa,wy.prototype.getLastError=wy.prototype.Xa,wy.prototype.getLastErrorCode=wy.prototype.ya,wy.prototype.getStatus=wy.prototype.T,wy.prototype.getResponseJson=wy.prototype.Ua,wy.prototype.getResponseText=wy.prototype.aa,wy.prototype.send=wy.prototype.ca;var rg={createWebChannelTransport:ng,ErrorCode:tv,EventType:ev,WebChannel:iv,XhrIo:wy},ig=rg.createWebChannelTransport,og=rg.ErrorCode,sg=rg.EventType,ag=rg.WebChannel,ug=rg.XhrIo,cg=zl.SDK_VERSION,hg=(lg.prototype.t=function(){return null!=this.uid},lg.prototype.s=function(){return this.t()?"uid:"+this.uid:"anonymous-user"},lg.prototype.isEqual=function(t){return t.uid===this.uid},lg);function lg(t){this.uid=t}hg.UNAUTHENTICATED=new hg(null),hg.i=new hg("google-credentials-uid"),hg.o=new hg("first-party-uid");function fg(t,e){this.user=e,this.type="OAuth",this.h={},this.h.Authorization="Bearer "+t}var pg,dg={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},vg=(Es(Ag,pg=Error),Ag),yg=(Cg.prototype.getToken=function(){return Promise.resolve(null)},Cg.prototype._=function(){},Cg.prototype.l=function(t){(this.u=t)(hg.UNAUTHENTICATED)},Cg.prototype.T=function(){this.u=null},Cg),gg=(Ng.prototype.getToken=function(){var e=this,n=this.R,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){if(e.R!==n)throw new vg(dg.ABORTED,"getToken aborted due to token change.");return t?(Q_("string"==typeof t.accessToken,"Invalid tokenData returned from getToken():"+t),new fg(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},Ng.prototype._=function(){this.forceRefresh=!0},Ng.prototype.l=function(t){this.u=t,this.I&&t(this.currentUser)},Ng.prototype.T=function(){this.auth&&this.auth.removeAuthTokenListener(this.m),this.m=null,this.u=null},Ng.prototype.A=function(){var t=this.auth&&this.auth.getUid();return Q_(null===t||"string"==typeof t,"Received invalid UID: "+t),new hg(t)},Ng),mg=(Object.defineProperty(Sg.prototype,"h",{get:function(){var t={"X-Goog-AuthUser":this.V},e=this.P.auth.g([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),Sg),bg=(Ig.prototype.getToken=function(){return Promise.resolve(new mg(this.P,this.V))},Ig.prototype.l=function(t){t(hg.o)},Ig.prototype.T=function(){},Ig.prototype._=function(){},Ig),_g=(Tg.now=function(){return Tg.fromMillis(Date.now())},Tg.fromDate=function(t){return Tg.fromMillis(t.getTime())},Tg.fromMillis=function(t){var e=Math.floor(t/1e3);return new Tg(e,1e6*(t-1e3*e))},Tg.prototype.toDate=function(){return new Date(this.toMillis())},Tg.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},Tg.prototype.p=function(t){return this.seconds===t.seconds?J_(this.nanoseconds,t.nanoseconds):J_(this.seconds,t.seconds)},Tg.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},Tg.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},Tg.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},Tg),wg=(Eg.v=function(t){return new Eg(t)},Eg.S=function(){return Eg.MIN},Eg.prototype.D=function(t){return this.timestamp.p(t.timestamp)},Eg.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},Eg.prototype.C=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},Eg.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},Eg.prototype.k=function(){return this.timestamp},Eg);function Eg(t){this.timestamp=t}function Tg(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new vg(dg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new vg(dg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new vg(dg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new vg(dg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function Ig(t,e){this.P=t,this.V=e}function Sg(t,e){this.P=t,this.V=e,this.type="FirstParty",this.user=hg.o}function Ng(t){var e=this;this.m=null,this.currentUser=hg.UNAUTHENTICATED,this.I=!1,this.R=0,this.u=null,this.forceRefresh=!1,this.m=function(){e.R++,e.currentUser=e.A(),e.I=!0,e.u&&e.u(e.currentUser)},this.R=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.m):(this.m(null),t.get().then(function(t){e.auth=t,e.m&&e.auth.addAuthTokenListener(e.m)},function(){}))}function Cg(){this.u=null}function Ag(t,e){var n=this;return(n=pg.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}wg.MIN=new wg(new _g(0,0));var kg,Rg=(Object.defineProperty(Dg.prototype,"length",{get:function(){return this.N},enumerable:!0,configurable:!0}),Dg.prototype.isEqual=function(t){return 0===Dg.F(this,t)},Dg.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof Dg?t.forEach(function(t){e.push(t)}):e.push(t),this.$(e)},Dg.prototype.limit=function(){return this.offset+this.length},Dg.prototype.M=function(t){return t=void 0===t?1:t,this.$(this.segments,this.offset+t,this.length-t)},Dg.prototype.L=function(){return this.$(this.segments,this.offset,this.length-1)},Dg.prototype.O=function(){return this.segments[this.offset]},Dg.prototype.B=function(){return this.get(this.length-1)},Dg.prototype.get=function(t){return this.segments[this.offset+t]},Dg.prototype.U=function(){return 0===this.length},Dg.prototype.q=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Dg.prototype.W=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Dg.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},Dg.prototype.j=function(){return this.segments.slice(this.offset,this.limit())},Dg.F=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},Dg),Og=(Es(Pg,kg=Rg),Pg.prototype.$=function(t,e,n){return new Pg(t,e,n)},Pg.prototype.K=function(){return this.j().join("/")},Pg.prototype.toString=function(){return this.K()},Pg.G=function(t){if(0<=t.indexOf("//"))throw new vg(dg.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new Pg(t.split("/").filter(function(t){return 0<t.length}))},Pg);function Pg(){return null!==kg&&kg.apply(this,arguments)||this}function Dg(t,e,n){void 0===e?e=0:e>t.length&&z_("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&z_("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.N=n}Og.H=new Og([]);var xg,Lg=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Mg=(Es(Fg,xg=Rg),Fg.prototype.$=function(t,e,n){return new Fg(t,e,n)},Fg.J=function(t){return Lg.test(t)},Fg.prototype.K=function(){return this.j().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),Fg.J(t)||(t="`"+t+"`"),t}).join(".")},Fg.prototype.toString=function(){return this.K()},Fg.prototype.Y=function(){return 1===this.length&&"__name__"===this.get(0)},Fg.X=function(){return new Fg(["__name__"])},Fg.Z=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new vg(dg.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new vg(dg.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new vg(dg.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new vg(dg.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Fg(e)},Fg);function Fg(){return null!==xg&&xg.apply(this,arguments)||this}Mg.H=new Mg([]);var Ug=(jg.tt=function(t){return new jg(Og.G(t).M(5))},jg.prototype.et=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},jg.prototype.isEqual=function(t){return null!==t&&0===Og.F(this.path,t.path)},jg.prototype.toString=function(){return this.path.toString()},jg.F=function(t,e){return Og.F(t.path,e.path)},jg.st=function(t){return t.length%2==0},jg.nt=function(t){return new jg(new Og(t.slice()))},jg);function jg(t){this.path=t}Ug.EMPTY=new Ug(new Og([]));var Vg=(Hg.prototype.it=function(t,e){return new Hg(this.F,this.root.it(t,e,this.F).rt(null,null,Bg.ot,null,null))},Hg.prototype.remove=function(t){return new Hg(this.F,this.root.remove(t,this.F).rt(null,null,Bg.ot,null,null))},Hg.prototype.get=function(t){for(var e=this.root;!e.U();){var n=this.F(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},Hg.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.U();){var r=this.F(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},Hg.prototype.U=function(){return this.root.U()},Object.defineProperty(Hg.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),Hg.prototype.ht=function(){return this.root.ht()},Hg.prototype.at=function(){return this.root.at()},Hg.prototype.ut=function(t){return this.root.ut(t)},Hg.prototype.forEach=function(n){this.ut(function(t,e){return n(t,e),!1})},Hg.prototype.toString=function(){var n=[];return this.ut(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},Hg.prototype.ct=function(t){return this.root.ct(t)},Hg.prototype._t=function(){return new qg(this.root,null,this.F,!1)},Hg.prototype.lt=function(t){return new qg(this.root,t,this.F,!1)},Hg.prototype.dt=function(){return new qg(this.root,null,this.F,!0)},Hg.prototype.ft=function(t){return new qg(this.root,t,this.F,!0)},Hg),qg=(Kg.prototype.wt=function(){var t=this.Et.pop(),e={key:t.key,value:t.value};if(this.Tt)for(t=t.left;!t.U();)this.Et.push(t),t=t.right;else for(t=t.right;!t.U();)this.Et.push(t),t=t.left;return e},Kg.prototype.It=function(){return 0<this.Et.length},Kg.prototype.Rt=function(){if(0===this.Et.length)return null;var t=this.Et[this.Et.length-1];return{key:t.key,value:t.value}},Kg),Bg=(Wg.prototype.rt=function(t,e,n,r,i){return new Wg(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Wg.prototype.U=function(){return!1},Wg.prototype.ut=function(t){return this.left.ut(t)||t(this.key,this.value)||this.right.ut(t)},Wg.prototype.ct=function(t){return this.right.ct(t)||t(this.key,this.value)||this.left.ct(t)},Wg.prototype.min=function(){return this.left.U()?this:this.left.min()},Wg.prototype.ht=function(){return this.min().key},Wg.prototype.at=function(){return this.right.U()?this.key:this.right.at()},Wg.prototype.it=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.rt(null,null,null,r.left.it(t,e,n),null):0===i?r.rt(null,e,null,null,null):r.rt(null,null,null,null,r.right.it(t,e,n))).At()},Wg.prototype.Pt=function(){if(this.left.U())return Wg.EMPTY;var t=this;return t.left.Vt()||t.left.left.Vt()||(t=t.gt()),(t=t.rt(null,null,null,t.left.Pt(),null)).At()},Wg.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.U()||r.left.Vt()||r.left.left.Vt()||(r=r.gt()),r=r.rt(null,null,null,r.left.remove(t,e),null);else{if(r.left.Vt()&&(r=r.pt()),r.right.U()||r.right.Vt()||r.right.left.Vt()||(r=r.yt()),0===e(t,r.key)){if(r.right.U())return Wg.EMPTY;n=r.right.min(),r=r.rt(n.key,n.value,null,null,r.right.Pt())}r=r.rt(null,null,null,null,r.right.remove(t,e))}return r.At()},Wg.prototype.Vt=function(){return this.color},Wg.prototype.At=function(){var t=this;return t.right.Vt()&&!t.left.Vt()&&(t=t.bt()),t.left.Vt()&&t.left.left.Vt()&&(t=t.pt()),t.left.Vt()&&t.right.Vt()&&(t=t.vt()),t},Wg.prototype.gt=function(){var t=this.vt();return t.right.left.Vt()&&(t=(t=(t=t.rt(null,null,null,null,t.right.pt())).bt()).vt()),t},Wg.prototype.yt=function(){var t=this.vt();return t.left.left.Vt()&&(t=(t=t.pt()).vt()),t},Wg.prototype.bt=function(){var t=this.rt(null,null,Wg.RED,null,this.right.left);return this.right.rt(null,null,this.color,t,null)},Wg.prototype.pt=function(){var t=this.rt(null,null,Wg.RED,this.left.right,null);return this.left.rt(null,null,this.color,null,t)},Wg.prototype.vt=function(){var t=this.left.rt(null,null,!this.left.color,null,null),e=this.right.rt(null,null,!this.right.color,null,null);return this.rt(null,null,!this.color,t,e)},Wg.prototype.St=function(){var t=this.Dt();return Math.pow(2,t)<=this.size+1},Wg.prototype.Dt=function(){if(this.Vt()&&this.left.Vt())throw z_("Red node has red child("+this.key+","+this.value+")");if(this.right.Vt())throw z_("Right child of ("+this.key+","+this.value+") is red");var t=this.left.Dt();if(t!==this.right.Dt())throw z_("Black depths differ");return t+(this.Vt()?0:1)},Wg);function Wg(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Wg.RED,this.left=null!=r?r:Wg.EMPTY,this.right=null!=i?i:Wg.EMPTY,this.size=this.left.size+1+this.right.size}function Kg(t,e,n,r){this.Tt=r,this.Et=[];for(var i=1;!t.U();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Tt?t.left:t.right;else{if(0===i){this.Et.push(t);break}this.Et.push(t),t=this.Tt?t.right:t.left}}function Hg(t,e){this.F=t,this.root=e||Bg.EMPTY}function Gg(){this.size=0}Bg.EMPTY=null,Bg.RED=!0,Bg.ot=!1,Bg.EMPTY=(Object.defineProperty(Gg.prototype,"key",{get:function(){throw z_("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(Gg.prototype,"value",{get:function(){throw z_("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(Gg.prototype,"color",{get:function(){throw z_("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(Gg.prototype,"left",{get:function(){throw z_("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(Gg.prototype,"right",{get:function(){throw z_("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),Gg.prototype.rt=function(t,e,n,r,i){return this},Gg.prototype.it=function(t,e,n){return new Bg(t,e)},Gg.prototype.remove=function(t,e){return this},Gg.prototype.U=function(){return!0},Gg.prototype.ut=function(t){return!1},Gg.prototype.ct=function(t){return!1},Gg.prototype.ht=function(){return null},Gg.prototype.at=function(){return null},Gg.prototype.Vt=function(){return!1},Gg.prototype.St=function(){return!0},Gg.prototype.Dt=function(){return 0},new Gg);var zg=(Xg.prototype.has=function(t){return null!==this.data.get(t)},Xg.prototype.first=function(){return this.data.ht()},Xg.prototype.last=function(){return this.data.at()},Object.defineProperty(Xg.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),Xg.prototype.indexOf=function(t){return this.data.indexOf(t)},Xg.prototype.forEach=function(n){this.data.ut(function(t,e){return n(t),!1})},Xg.prototype.Ct=function(t,e){for(var n=this.data.lt(t[0]);n.It();){var r=n.wt();if(0<=this.F(r.key,t[1]))return;e(r.key)}},Xg.prototype.kt=function(t,e){var n;for(n=void 0!==e?this.data.lt(e):this.data._t();n.It();)if(!t(n.wt().key))return},Xg.prototype.Nt=function(t){var e=this.data.lt(t);return e.It()?e.wt().key:null},Xg.prototype._t=function(){return new Qg(this.data._t())},Xg.prototype.lt=function(t){return new Qg(this.data.lt(t))},Xg.prototype.add=function(t){return this.rt(this.data.remove(t).it(t,!0))},Xg.prototype.delete=function(t){return this.has(t)?this.rt(this.data.remove(t)):this},Xg.prototype.U=function(){return this.data.U()},Xg.prototype.Ft=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},Xg.prototype.isEqual=function(t){if(!(t instanceof Xg))return!1;if(this.size!==t.size)return!1;for(var e=this.data._t(),n=t.data._t();e.It();){var r=e.wt().key,i=n.wt().key;if(0!==this.F(r,i))return!1}return!0},Xg.prototype.j=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},Xg.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},Xg.prototype.rt=function(t){var e=new Xg(this.F);return e.data=t,e},Xg),Qg=(Yg.prototype.wt=function(){return this.$t.wt().key},Yg.prototype.It=function(){return this.$t.It()},Yg);function Yg(t){this.$t=t}function Xg(t){this.F=t,this.data=new Vg(this.F)}function Jg(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $g(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Zg(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var tm=(em.fromBase64String=function(t){return new em(j_.Lt().atob(t))},em.fromUint8Array=function(t){return new em(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},em.prototype.toBase64=function(){return j_.Lt().btoa(this.Mt)},em.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.Mt)},em.prototype.Ot=function(){return 2*this.Mt.length},em.prototype.D=function(t){return J_(this.Mt,t.Mt)},em.prototype.isEqual=function(t){return this.Mt===t.Mt},em);function em(t){this.Mt=t}function nm(t){return null==t}function rm(t){return-0===t&&1/t==-1/0}function im(t){return"number"==typeof t&&Number.isInteger(t)&&!rm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function om(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function sm(t){var e=dm(t.mapValue.fields.__local_write_time__.timestampValue);return new _g(e.seconds,e.nanos)}tm.xt=new tm("");var am=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function um(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?om(t)?4:10:z_("Invalid value type: "+JSON.stringify(t))}function cm(i,t){var e,n,r,o=um(i);if(o!==um(t))return!1;switch(o){case 0:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return sm(i).isEqual(sm(t));case 3:return function(t){if("string"==typeof i.timestampValue&&"string"==typeof t.timestampValue&&i.timestampValue.length===t.timestampValue.length)return i.timestampValue===t.timestampValue;var e=dm(i.timestampValue),n=dm(t.timestampValue);return e.seconds===n.seconds&&e.nanos===n.nanos}(t);case 5:return i.stringValue===t.stringValue;case 6:return r=t,ym(i.bytesValue).isEqual(ym(r.bytesValue));case 7:return i.referenceValue===t.referenceValue;case 8:return n=t,vm((e=i).geoPointValue.latitude)===vm(n.geoPointValue.latitude)&&vm(e.geoPointValue.longitude)===vm(n.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return vm(t.integerValue)===vm(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=vm(t.doubleValue),r=vm(e.doubleValue);return n===r?rm(n)===rm(r):isNaN(n)&&isNaN(r)}return!1}(i,t);case 9:return $_(i.arrayValue.values||[],t.arrayValue.values||[],cm);case 10:return function(t){var e=i.mapValue.fields||{},n=t.mapValue.fields||{};if(Jg(e)!==Jg(n))return!1;for(var r in e)if(e.hasOwnProperty(r)&&(void 0===n[r]||!cm(e[r],n[r])))return!1;return!0}(t);default:return z_("Unexpected value type: "+JSON.stringify(i))}}function hm(t,e){return void 0!==(t.values||[]).find(function(t){return cm(t,e)})}function lm(t,e){var n,r,i,o,s,a,u,c,h,l,f=um(t),p=um(e);if(f!==p)return J_(f,p);switch(f){case 0:return 0;case 1:return J_(t.booleanValue,e.booleanValue);case 2:return c=e,h=vm(t.integerValue||t.doubleValue),l=vm(c.integerValue||c.doubleValue),h<l?-1:l<h?1:h===l?0:isNaN(h)?isNaN(l)?0:-1:1;case 3:return fm(t.timestampValue,e.timestampValue);case 4:return fm(sm(t),sm(e));case 5:return J_(t.stringValue,e.stringValue);case 6:return o=t.bytesValue,s=e.bytesValue,a=ym(o),u=ym(s),a.D(u);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=J_(n[i],r[i]);if(0!==o)return o}return J_(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return n=t.geoPointValue,r=e.geoPointValue,0!==(i=J_(vm(n.latitude),vm(r.latitude)))?i:J_(vm(n.longitude),vm(r.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=lm(n[i],r[i]);if(o)return o}return J_(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=J_(r[s],o[s]);if(0!==a)return a;var u=lm(n[r[s]],i[o[s]]);if(0!==u)return u}return J_(r.length,o.length)}(t.mapValue,e.mapValue);default:throw z_("Invalid value type: "+f)}}function fm(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return J_(t,e);var n=dm(t),r=dm(e),i=J_(n.seconds,r.seconds);return 0!==i?i:J_(n.nanos,r.nanos)}function pm(t){return function s(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?"time("+(t=dm(i.timestampValue)).seconds+","+t.nanos+")":"stringValue"in i?i.stringValue:"bytesValue"in i?ym(i.bytesValue).toBase64():"referenceValue"in i?(n=i.referenceValue,Ug.tt(n).toString()):"geoPointValue"in i?"geo("+(e=i.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in i?function(){for(var t="[",e=!0,n=0,r=i.arrayValue.values||[];n<r.length;n++){e?e=!1:t+=",",t+=s(r[n])}return t+"]"}():"mapValue"in i?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+s(t.fields[o])}return e+"}"}(i.mapValue):z_("Invalid value type: "+JSON.stringify(i));var t,e,n}(t)}function dm(t){if(Q_(!!t,"Cannot normalize null or undefined timestamp."),"string"!=typeof t)return{seconds:vm(t.seconds),nanos:vm(t.nanos)};var e=0,n=am.exec(t);if(Q_(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}function vm(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ym(t){return"string"==typeof t?tm.fromBase64String(t):tm.fromUint8Array(t)}function gm(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.K()}}function mm(t){return t&&"integerValue"in t}function bm(t){return!!t&&"arrayValue"in t}function _m(t){return t&&"nullValue"in t}function wm(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Em(t){return t&&"mapValue"in t}var Tm=(Im.prototype.Bt=function(t,e){return n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}},t&&(n.fields.__previous_value__=t),{mapValue:n};var n},Im.prototype.Ut=function(t,e){return e},Im.prototype.qt=function(t){return null},Im.prototype.isEqual=function(t){return t instanceof Im},Im);function Im(){}Tm.instance=new Tm;var Sm=(Rm.prototype.Bt=function(t,e){return this.apply(t)},Rm.prototype.Ut=function(t,e){return this.apply(t)},Rm.prototype.apply=function(t){for(var n=Om(t),e=function(e){n.some(function(t){return cm(t,e)})||n.push(e)},r=0,i=this.elements;r<i.length;r++)e(i[r]);return{arrayValue:{values:n}}},Rm.prototype.qt=function(t){return null},Rm.prototype.isEqual=function(t){return t instanceof Rm&&$_(this.elements,t.elements,cm)},Rm),Nm=(km.prototype.Bt=function(t,e){return this.apply(t)},km.prototype.Ut=function(t,e){return this.apply(t)},km.prototype.apply=function(t){for(var n=Om(t),e=function(e){n=n.filter(function(t){return!cm(t,e)})},r=0,i=this.elements;r<i.length;r++)e(i[r]);return{arrayValue:{values:n}}},km.prototype.qt=function(t){return null},km.prototype.isEqual=function(t){return t instanceof km&&$_(this.elements,t.elements,cm)},km),Cm=(Am.prototype.Bt=function(t,e){var n=this.qt(t),r=this.asNumber(n)+this.asNumber(this.Qt);return mm(n)&&mm(this.Qt)?this.serializer.Wt(r):this.serializer.jt(r)},Am.prototype.Ut=function(t,e){return e},Am.prototype.qt=function(t){return mm(e=t)||e&&"doubleValue"in e?t:{integerValue:0};var e},Am.prototype.isEqual=function(t){return t instanceof Am&&cm(this.Qt,t.Qt)},Am.prototype.asNumber=function(t){return vm(t.integerValue||t.doubleValue)},Am);function Am(t,e){this.serializer=t,this.Qt=e}function km(t){this.elements=t}function Rm(t){this.elements=t}function Om(t){return bm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Pm(t,e){this.version=t,this.transformResults=e}var Dm=(Um.Kt=function(t){return new Um(t)},Um.Gt=function(t){var e=new zg(Mg.F);return t.forEach(function(t){return e=e.add(t)}),new Um(e)},Um.prototype.zt=function(e){var n=!1;return this.fields.forEach(function(t){t.q(e)&&(n=!0)}),n},Um.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},Um),xm=(Fm.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},Fm),Lm=(Mm.exists=function(t){return new Mm(void 0,t)},Mm.updateTime=function(t){return new Mm(t)},Object.defineProperty(Mm.prototype,"Ht",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),Mm.prototype.Jt=function(t){return void 0!==this.updateTime?t instanceof cb&&t.version.isEqual(this.updateTime):void 0===this.exists||this.exists===t instanceof cb},Mm.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},Mm);function Mm(t,e){this.updateTime=t,this.exists=e}function Fm(t,e){this.field=t,this.transform=e}function Um(t){this.fields=t}Lm.NONE=new Lm;var jm,Vm,qm,Bm,Wm,Km=(rb.prototype.Yt=function(t){},rb.Xt=function(t){return t instanceof cb?t.version:wg.MIN},rb),Hm=(Es(nb,Wm=Km),nb.prototype.Ut=function(t,e){this.Yt(t);var n=e.version;return new cb(this.key,n,this.value,{hasCommittedMutations:!0})},nb.prototype.Bt=function(t,e,n){if(this.Yt(t),!this.Zt.Jt(t))return t;var r=Km.Xt(t);return new cb(this.key,r,this.value,{te:!0})},nb.prototype.ee=function(t){return null},nb.prototype.isEqual=function(t){return t instanceof nb&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.Zt.isEqual(t.Zt)},nb),Gm=(Es(eb,Bm=Km),eb.prototype.Ut=function(t,e){if(this.Yt(t),!this.Zt.Jt(t))return new lb(this.key,e.version);var n=this.ne(t);return new cb(this.key,e.version,n,{hasCommittedMutations:!0})},eb.prototype.Bt=function(t,e,n){if(this.Yt(t),!this.Zt.Jt(t))return t;var r=Km.Xt(t),i=this.ne(t);return new cb(this.key,r,i,{te:!0})},eb.prototype.ee=function(t){return null},eb.prototype.isEqual=function(t){return t instanceof eb&&this.key.isEqual(t.key)&&this.se.isEqual(t.se)&&this.Zt.isEqual(t.Zt)},eb.prototype.ne=function(t){var e;return e=t instanceof cb?t.data():Xm.EMPTY,this.ie(e)},eb.prototype.ie=function(t){var n=this,r=t.re();return this.se.fields.forEach(function(t){if(!t.U()){var e=n.data.field(t);null!==e?r.set(t,e):r.delete(t)}}),r.oe()},eb),zm=(Es(tb,qm=Km),tb.prototype.Ut=function(t,e){if(this.Yt(t),Q_(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.Zt.Jt(t))return new lb(this.key,e.version);var n=this.he(t),r=this.ae(t,e.transformResults),i=e.version,o=this.ue(n.data(),r);return new cb(this.key,i,o,{hasCommittedMutations:!0})},tb.prototype.Bt=function(t,e,n){if(this.Yt(t),!this.Zt.Jt(t))return t;var r=this.he(t),i=this.ce(n,t,e),o=this.ue(r.data(),i);return new cb(this.key,r.version,o,{te:!0})},tb.prototype.ee=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof cb?t.field(i.field):void 0,s=i.transform.qt(o||null);null!=s&&(e=null==e?Xm._e().set(i.field,s):e.set(i.field,s))}return e?e.oe():null},tb.prototype.isEqual=function(t){return t instanceof tb&&this.key.isEqual(t.key)&&$_(this.fieldTransforms,t.fieldTransforms,function(t,e){return t.isEqual(e)})&&this.Zt.isEqual(t.Zt)},tb.prototype.he=function(t){return t},tb.prototype.ae=function(t,e){var n=[];Q_(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,s=null;t instanceof cb&&(s=t.field(i.field)),n.push(o.Ut(s,e[r]))}return n},tb.prototype.ce=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var s=o[i],a=s.transform,u=null;e instanceof cb&&(u=e.field(s.field)),null===u&&n instanceof cb&&(u=n.field(s.field)),r.push(a.Bt(u,t))}return r},tb.prototype.ue=function(t,e){for(var n=t.re(),r=0;r<this.fieldTransforms.length;r++){var i=this.fieldTransforms[r].field;n.set(i,e[r])}return n.oe()},tb),Qm=(Es(Zm,Vm=Km),Zm.prototype.Ut=function(t,e){return this.Yt(t),new hb(this.key,e.version,{hasCommittedMutations:!0})},Zm.prototype.Bt=function(t,e,n){return this.Yt(t),this.Zt.Jt(t)?new hb(this.key,wg.S()):t},Zm.prototype.ee=function(t){return null},Zm.prototype.isEqual=function(t){return t instanceof Zm&&this.key.isEqual(t.key)&&this.Zt.isEqual(t.Zt)},Zm),Ym=(Es($m,jm=Km),$m.prototype.Ut=function(t,e){z_("VerifyMutation should only be used in Transactions.")},$m.prototype.Bt=function(t,e,n){z_("VerifyMutation should only be used in Transactions.")},$m.prototype.ee=function(t){z_("VerifyMutation should only be used in Transactions.")},$m.prototype.isEqual=function(t){return t instanceof $m&&this.key.isEqual(t.key)&&this.Zt.isEqual(t.Zt)},$m),Xm=(Jm._e=function(){return Jm.EMPTY.re()},Jm.prototype.field=function(t){if(t.U())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Em(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.B()])||null},Jm.prototype.se=function(){return this.le(this.proto.mapValue)},Jm.prototype.le=function(t){var i=this,o=new zg(Mg.F);return $g(t.fields||{},function(t,e){var n=new Mg([t]);if(10===um(e)){var r=i.le(e.mapValue).fields;r.U()?o=o.add(n):r.forEach(function(t){o=o.add(n.child(t))})}else o=o.add(n)}),Dm.Kt(o)},Jm.prototype.isEqual=function(t){return cm(this.proto,t.proto)},Jm.prototype.re=function(){return new ab(this)},Jm);function Jm(t){this.proto=t}function $m(t,e){var n=this;return(n=jm.call(this)||this).key=t,n.Zt=e,n.type=4,n}function Zm(t,e){var n=this;return(n=Vm.call(this)||this).key=t,n.Zt=e,n.type=3,n}function tb(t,e){var n=this;return(n=qm.call(this)||this).key=t,n.fieldTransforms=e,n.type=2,n.Zt=Lm.exists(!0),n}function eb(t,e,n,r){var i=this;return(i=Bm.call(this)||this).key=t,i.data=e,i.se=n,i.Zt=r,i.type=1,i}function nb(t,e,n){var r=this;return(r=Wm.call(this)||this).key=t,r.value=e,r.Zt=n,r.type=0,r}function rb(){}Xm.EMPTY=new Xm({mapValue:{}});var ib,ob,sb,ab=(Eb.prototype.set=function(t,e){return this.Te(t,e),this},Eb.prototype.delete=function(t){return this.Te(t,null),this},Eb.prototype.Te=function(t,e){for(var n=this.fe,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map||(o=o&&10===um(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),n=o}n.set(t.B(),e)},Eb.prototype.oe=function(){var t=this.me(Mg.H,this.fe);return null!=t?new Xm(t):this.de},Eb.prototype.me=function(r,t){var i=this,o=!1,e=this.de.field(r),s=Em(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){if(t instanceof Map){var n=i.me(r.child(e),t);null!=n&&(s[e]=n,o=!0)}else null!==t?(s[e]=t,o=!0):s.hasOwnProperty(e)&&(delete s[e],o=!0)}),o?{mapValue:{fields:s}}:null},Eb),ub=(wb.Ee=function(t,e){return Ug.F(t.key,e.key)},wb),cb=(Es(_b,sb=ub),_b.prototype.field=function(t){return this.we.field(t)},_b.prototype.data=function(){return this.we},_b.prototype.Ie=function(){return this.we.proto},_b.prototype.isEqual=function(t){return t instanceof _b&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.te===t.te&&this.hasCommittedMutations===t.hasCommittedMutations&&this.we.isEqual(t.we)},_b.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.we.toString()+", {hasLocalMutations: "+this.te+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(_b.prototype,"hasPendingWrites",{get:function(){return this.te||this.hasCommittedMutations},enumerable:!0,configurable:!0}),_b.Re=function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?lm(r,i):z_("Trying to compare documents on fields that don't exist")},_b),hb=(Es(bb,ob=ub),bb.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(bb.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),bb.prototype.isEqual=function(t){return t instanceof bb&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},bb),lb=(Es(mb,ib=ub),mb.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(mb.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),mb.prototype.isEqual=function(t){return t instanceof mb&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},mb),fb=(gb.prototype.canonicalId=function(){if(null===this.Ae){var t=this.path.K();null!==this.collectionGroup&&(t+="|cg:"+this.collectionGroup),t+="|f:",t+=this.filters.map(function(t){return t.canonicalId()}).join(","),t+="|ob:",t+=this.orderBy.map(function(t){return t.canonicalId()}).join(","),nm(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.Ae=t}return this.Ae},gb.prototype.toString=function(){var t=this.path.K();return null!==this.collectionGroup&&(t+=" collectionGroup="+this.collectionGroup),0<this.filters.length&&(t+=", filters: ["+this.filters.join(", ")+"]"),nm(this.limit)||(t+=", limit: "+this.limit),0<this.orderBy.length&&(t+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),"Target("+t+")"},gb.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(var n=0;n<this.filters.length;n++)if(!this.filters[n].isEqual(t.filters[n]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!!(null!==this.startAt?this.startAt.isEqual(t.startAt):null===t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},gb.prototype.Pe=function(){return Ug.st(this.path)&&null===this.collectionGroup&&0===this.filters.length},gb),pb=(yb.ve=function(t){return new yb(t)},Object.defineProperty(yb.prototype,"orderBy",{get:function(){if(null===this.pe){var t=this.Se(),e=this.De();if(null!==t&&null===e)t.Y()?this.pe=[Qb]:this.pe=[new zb(t),Qb];else{for(var n=!(this.pe=[]),r=0,i=this.Ve;r<i.length;r++){var o=i[r];this.pe.push(o),o.field.Y()&&(n=!0)}if(!n){var s=0<this.Ve.length?this.Ve[this.Ve.length-1].dir:Lb.ASCENDING;this.pe.push(s===Lb.ASCENDING?Qb:Yb)}}}return this.pe},enumerable:!0,configurable:!0}),yb.prototype.Ce=function(t){var e=this.filters.concat([t]);return new yb(this.path,this.collectionGroup,this.Ve.slice(),e,this.limit,this.ge,this.startAt,this.endAt)},yb.prototype.ke=function(t){var e=this.Ve.concat([t]);return new yb(this.path,this.collectionGroup,e,this.filters.slice(),this.limit,this.ge,this.startAt,this.endAt)},yb.prototype.Ne=function(t){return new yb(this.path,this.collectionGroup,this.Ve.slice(),this.filters.slice(),t,"F",this.startAt,this.endAt)},yb.prototype.Fe=function(t){return new yb(this.path,this.collectionGroup,this.Ve.slice(),this.filters.slice(),t,"L",this.startAt,this.endAt)},yb.prototype.$e=function(t){return new yb(this.path,this.collectionGroup,this.Ve.slice(),this.filters.slice(),this.limit,this.ge,t,this.endAt)},yb.prototype.Me=function(t){return new yb(this.path,this.collectionGroup,this.Ve.slice(),this.filters.slice(),this.limit,this.ge,this.startAt,t)},yb.prototype.Le=function(t){return new yb(t,null,this.Ve.slice(),this.filters.slice(),this.limit,this.ge,this.startAt,this.endAt)},yb.prototype.Oe=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.Ve.length||1===this.Ve.length&&this.Ve[0].field.Y())},yb.prototype.canonicalId=function(){return this.xe().canonicalId()+"|lt:"+this.ge},yb.prototype.toString=function(){return"Query(target="+this.xe().toString()+"; limitType="+this.ge+")"},yb.prototype.isEqual=function(t){return this.xe().isEqual(t.xe())&&this.ge===t.ge},yb.prototype.Be=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],s=o.compare(t,e);if(0!==s)return s;n=n||o.field.Y()}return 0},yb.prototype.matches=function(t){return this.Ue(t)&&this.qe(t)&&this.Qe(t)&&this.We(t)},yb.prototype.je=function(){return!nm(this.limit)&&"F"===this.ge},yb.prototype.Ke=function(){return!nm(this.limit)&&"L"===this.ge},yb.prototype.De=function(){return 0<this.Ve.length?this.Ve[0].field:null},yb.prototype.Se=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof kb&&n.Ge())return n.field}return null},yb.prototype.ze=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof kb&&0<=t.indexOf(r.op))return r.op}return null},yb.prototype.Pe=function(){return this.xe().Pe()},yb.prototype.He=function(){return null!==this.collectionGroup},yb.prototype.xe=function(){if(!this.ye)if("F"===this.ge)this.ye=new fb(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e],i=r.dir===Lb.DESCENDING?Lb.ASCENDING:Lb.DESCENDING;t.push(new zb(r.field,i))}var o=this.endAt?new Gb(this.endAt.position,!this.endAt.before):null,s=this.startAt?new Gb(this.startAt.position,!this.startAt.before):null;this.ye=new fb(this.path,this.collectionGroup,t,this.filters,this.limit,o,s)}return this.ye},yb.prototype.Ue=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.et(this.collectionGroup)&&this.path.q(e):Ug.st(this.path)?this.path.isEqual(e):this.path.W(e)},yb.prototype.qe=function(t){for(var e=0,n=this.Ve;e<n.length;e++){var r=n[e];if(!r.field.Y()&&null===t.field(r.field))return!1}return!0},yb.prototype.Qe=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},yb.prototype.We=function(t){return!(this.startAt&&!this.startAt.Je(this.orderBy,t)||this.endAt&&this.endAt.Je(this.orderBy,t))},yb.prototype.be=function(t){},yb),db=(vb.G=function(t){switch(t){case"<":return vb.LESS_THAN;case"<=":return vb.LESS_THAN_OR_EQUAL;case"==":return vb.EQUAL;case">=":return vb.GREATER_THAN_OR_EQUAL;case">":return vb.GREATER_THAN;case"array-contains":return vb.ARRAY_CONTAINS;case"in":return vb.IN;case"array-contains-any":return vb.ARRAY_CONTAINS_ANY;default:return z_("Unknown FieldFilter operator: "+t)}},vb.prototype.toString=function(){return this.name},vb.prototype.isEqual=function(t){return this.name===t.name},vb);function vb(t){this.name=t}function yb(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.Ve=n,this.filters=r,this.limit=i,this.ge=o,this.startAt=s,this.endAt=a,this.pe=null,this.ye=null,this.startAt&&this.be(this.startAt),this.endAt&&this.be(this.endAt)}function gb(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.Ae=null}function mb(){return null!==ib&&ib.apply(this,arguments)||this}function bb(t,e,n){var r=this;return(r=ob.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function _b(t,e,n,r){var i=this;return(i=sb.call(this,t,e)||this).we=n,i.te=!!r.te,i.hasCommittedMutations=!!r.hasCommittedMutations,i}function wb(t,e){this.key=t,this.version=e}function Eb(t){this.de=t,this.fe=new Map}db.LESS_THAN=new db("<"),db.LESS_THAN_OR_EQUAL=new db("<="),db.EQUAL=new db("=="),db.GREATER_THAN=new db(">"),db.GREATER_THAN_OR_EQUAL=new db(">="),db.ARRAY_CONTAINS=new db("array-contains"),db.IN=new db("in"),db.ARRAY_CONTAINS_ANY=new db("array-contains-any");var Tb,Ib,Sb,Nb,Cb,Ab,kb=(Es(Bb,Ab=function(){}),Bb.create=function(t,e,n){if(t.Y())return e===db.IN?new Ob(t,n):new Rb(t,e,n);if(_m(n)){if(e!==db.EQUAL)throw new vg(dg.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new Bb(t,e,n)}if(wm(n)){if(e!==db.EQUAL)throw new vg(dg.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new Bb(t,e,n)}return e===db.ARRAY_CONTAINS?new Pb(t,n):e===db.IN?new Db(t,n):e===db.ARRAY_CONTAINS_ANY?new xb(t,n):new Bb(t,e,n)},Bb.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&um(this.value)===um(e)&&this.Ye(lm(e,this.value))},Bb.prototype.Ye=function(t){switch(this.op){case db.LESS_THAN:return t<0;case db.LESS_THAN_OR_EQUAL:return t<=0;case db.EQUAL:return 0===t;case db.GREATER_THAN:return 0<t;case db.GREATER_THAN_OR_EQUAL:return 0<=t;default:return z_("Unknown FieldFilter operator: "+this.op)}},Bb.prototype.Ge=function(){return 0<=[db.LESS_THAN,db.LESS_THAN_OR_EQUAL,db.GREATER_THAN,db.GREATER_THAN_OR_EQUAL].indexOf(this.op)},Bb.prototype.canonicalId=function(){return this.field.K()+this.op.toString()+pm(this.value)},Bb.prototype.isEqual=function(t){return t instanceof Bb&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&cm(this.value,t.value)},Bb.prototype.toString=function(){return this.field.K()+" "+this.op+" "+pm(this.value)},Bb),Rb=(Es(qb,Cb=kb),qb.prototype.matches=function(t){var e=Ug.F(t.key,this.key);return this.Ye(e)},qb),Ob=(Es(Vb,Nb=kb),Vb.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},Vb),Pb=(Es(jb,Sb=kb),jb.prototype.matches=function(t){var e=t.field(this.field);return bm(e)&&hm(e.arrayValue,this.value)},jb),Db=(Es(Ub,Ib=kb),Ub.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&hm(this.value.arrayValue,e)},Ub),xb=(Es(Fb,Tb=kb),Fb.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!bm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return hm(e.value.arrayValue,t)})},Fb),Lb=(Mb.prototype.toString=function(){return this.name},Mb);function Mb(t){this.name=t}function Fb(t,e){return Tb.call(this,t,db.ARRAY_CONTAINS_ANY,e)||this}function Ub(t,e){return Ib.call(this,t,db.IN,e)||this}function jb(t,e){return Sb.call(this,t,db.ARRAY_CONTAINS,e)||this}function Vb(t,e){var n=this;return(n=Nb.call(this,t,db.IN,e)||this).keys=(e.arrayValue.values||[]).map(function(t){return Ug.tt(t.referenceValue)}),n}function qb(t,e,n){var r=this;return(r=Cb.call(this,t,e,n)||this).key=Ug.tt(n.referenceValue),r}function Bb(t,e,n){var r=this;return(r=Ab.call(this)||this).field=t,r.op=e,r.value=n,r}Lb.ASCENDING=new Lb("asc"),Lb.DESCENDING=new Lb("desc");function Wb(t){this.count=t}var Kb,Hb,Gb=(Zb.prototype.canonicalId=function(){return(this.before?"b":"a")+":"+this.position.map(function(t){return pm(t)}).join(",")},Zb.prototype.Je=function(t,e){for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(n=i.field.Y()?Ug.F(Ug.tt(o.referenceValue),e.key):lm(o,e.field(i.field)),i.dir===Lb.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},Zb.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++)if(!cm(this.position[e],t.position[e]))return!1;return!0},Zb),zb=($b.prototype.compare=function(t,e){var n=this.Xe?cb.Ee(t,e):cb.Re(this.field,t,e);switch(this.dir){case Lb.ASCENDING:return n;case Lb.DESCENDING:return-1*n;default:return z_("Unknown direction: "+this.dir)}},$b.prototype.canonicalId=function(){return this.field.K()+this.dir.toString()},$b.prototype.toString=function(){return this.field.K()+" ("+this.dir+")"},$b.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},$b),Qb=new zb(Mg.X(),Lb.ASCENDING),Yb=new zb(Mg.X(),Lb.DESCENDING),Xb=(Jb.prototype.es=function(t){return new Jb(this.target,this.targetId,this.Ze,t,this.ts,this.lastLimboFreeSnapshotVersion,this.resumeToken)},Jb.prototype.ss=function(t,e){return new Jb(this.target,this.targetId,this.Ze,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},Jb.prototype.ns=function(t){return new Jb(this.target,this.targetId,this.Ze,this.sequenceNumber,this.ts,t,this.resumeToken)},Jb);function Jb(t,e,n,r,i,o,s){void 0===i&&(i=wg.MIN),void 0===o&&(o=wg.MIN),void 0===s&&(s=tm.xt),this.target=t,this.targetId=e,this.Ze=n,this.sequenceNumber=r,this.ts=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function $b(t,e){this.field=t,void 0===e&&(e=Lb.ASCENDING),this.dir=e,this.Xe=t.Y()}function Zb(t,e){this.position=t,this.before=e}function t_(t){switch(t){case dg.OK:return z_("Treated status OK as error");case dg.CANCELLED:case dg.UNKNOWN:case dg.DEADLINE_EXCEEDED:case dg.RESOURCE_EXHAUSTED:case dg.INTERNAL:case dg.UNAVAILABLE:case dg.UNAUTHENTICATED:return;case dg.INVALID_ARGUMENT:case dg.NOT_FOUND:case dg.ALREADY_EXISTS:case dg.PERMISSION_DENIED:case dg.FAILED_PRECONDITION:case dg.ABORTED:case dg.OUT_OF_RANGE:case dg.UNIMPLEMENTED:case dg.DATA_LOSS:return 1;default:return z_("Unknown status code: "+t)}}function e_(t){if(void 0===t)return H_("GRPC error has no .code"),dg.UNKNOWN;switch(t){case Kb.OK:return dg.OK;case Kb.CANCELLED:return dg.CANCELLED;case Kb.UNKNOWN:return dg.UNKNOWN;case Kb.DEADLINE_EXCEEDED:return dg.DEADLINE_EXCEEDED;case Kb.RESOURCE_EXHAUSTED:return dg.RESOURCE_EXHAUSTED;case Kb.INTERNAL:return dg.INTERNAL;case Kb.UNAVAILABLE:return dg.UNAVAILABLE;case Kb.UNAUTHENTICATED:return dg.UNAUTHENTICATED;case Kb.INVALID_ARGUMENT:return dg.INVALID_ARGUMENT;case Kb.NOT_FOUND:return dg.NOT_FOUND;case Kb.ALREADY_EXISTS:return dg.ALREADY_EXISTS;case Kb.PERMISSION_DENIED:return dg.PERMISSION_DENIED;case Kb.FAILED_PRECONDITION:return dg.FAILED_PRECONDITION;case Kb.ABORTED:return dg.ABORTED;case Kb.OUT_OF_RANGE:return dg.OUT_OF_RANGE;case Kb.UNIMPLEMENTED:return dg.UNIMPLEMENTED;case Kb.DATA_LOSS:return dg.DATA_LOSS;default:return z_("Unknown status code: "+t)}}(Hb=Kb=Kb||{})[Hb.OK=0]="OK",Hb[Hb.CANCELLED=1]="CANCELLED",Hb[Hb.UNKNOWN=2]="UNKNOWN",Hb[Hb.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Hb[Hb.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Hb[Hb.NOT_FOUND=5]="NOT_FOUND",Hb[Hb.ALREADY_EXISTS=6]="ALREADY_EXISTS",Hb[Hb.PERMISSION_DENIED=7]="PERMISSION_DENIED",Hb[Hb.UNAUTHENTICATED=16]="UNAUTHENTICATED",Hb[Hb.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Hb[Hb.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Hb[Hb.ABORTED=10]="ABORTED",Hb[Hb.OUT_OF_RANGE=11]="OUT_OF_RANGE",Hb[Hb.UNIMPLEMENTED=12]="UNIMPLEMENTED",Hb[Hb.INTERNAL=13]="INTERNAL",Hb[Hb.UNAVAILABLE=14]="UNAVAILABLE",Hb[Hb.DATA_LOSS=15]="DATA_LOSS";var n_=new Vg(Ug.F);function r_(){return n_}function i_(){return r_()}var o_=new Vg(Ug.F);function s_(){return o_}var a_=new Vg(Ug.F);function u_(){return a_}var c_=new zg(Ug.F);function h_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=c_,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var l_=new zg(J_);function f_(){return l_}function p_(t,e,n,r){this.ps=t,this.removedTargetIds=e,this.key=n,this.ys=r}function d_(t,e){this.targetId=t,this.bs=e}function v_(t,e,n,r){void 0===n&&(n=tm.xt),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}var y_=(k_.hs=function(t){return new k_(t.F)},k_.prototype.has=function(t){return null!=this.rs.get(t)},k_.prototype.get=function(t){return this.rs.get(t)},k_.prototype.first=function(){return this.os.ht()},k_.prototype.last=function(){return this.os.at()},k_.prototype.U=function(){return this.os.U()},k_.prototype.indexOf=function(t){var e=this.rs.get(t);return e?this.os.indexOf(e):-1},Object.defineProperty(k_.prototype,"size",{get:function(){return this.os.size},enumerable:!0,configurable:!0}),k_.prototype.forEach=function(n){this.os.ut(function(t,e){return n(t),!1})},k_.prototype.add=function(t){var e=this.delete(t.key);return e.rt(e.rs.it(t.key,t),e.os.it(t,null))},k_.prototype.delete=function(t){var e=this.get(t);return e?this.rt(this.rs.remove(t),this.os.remove(e)):this},k_.prototype.isEqual=function(t){if(!(t instanceof k_))return!1;if(this.size!==t.size)return!1;for(var e=this.os._t(),n=t.os._t();e.It();){var r=e.wt().key,i=n.wt().key;if(!r.isEqual(i))return!1}return!0},k_.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},k_.prototype.rt=function(t,e){var n=new k_;return n.F=this.F,n.rs=t,n.os=e,n},k_),g_=(A_.prototype.track=function(t){var e=t.doc.key,n=this.as.get(e);!n||0!==t.type&&3===n.type?this.as=this.as.it(e,t):3===t.type&&1!==n.type?this.as=this.as.it(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.as=this.as.it(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.as=this.as.it(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.as=this.as.remove(e):1===t.type&&2===n.type?this.as=this.as.it(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.as=this.as.it(e,{type:2,doc:t.doc}):z_("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n))},A_.prototype.us=function(){var n=[];return this.as.ut(function(t,e){n.push(e)}),n},A_),m_=(C_.fs=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new C_(t,e,y_.hs(e),i,n,r,!0,!1)},Object.defineProperty(C_.prototype,"hasPendingWrites",{get:function(){return!this._s.U()},enumerable:!0,configurable:!0}),C_.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.ls===t.ls&&this._s.isEqual(t._s)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.cs.isEqual(t.cs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},C_),b_=(N_.Is=function(t,e){var n=new Map;return n.set(t,__.Rs(t,e)),new N_(wg.MIN,n,f_(),r_(),h_())},N_),__=(S_.Rs=function(t,e){return new S_(tm.xt,e,h_(),h_(),h_())},S_),w_=(Object.defineProperty(I_.prototype,"As",{get:function(){return this.Cs},enumerable:!0,configurable:!0}),Object.defineProperty(I_.prototype,"resumeToken",{get:function(){return this.Ds},enumerable:!0,configurable:!0}),Object.defineProperty(I_.prototype,"Ns",{get:function(){return 0!==this.vs},enumerable:!0,configurable:!0}),Object.defineProperty(I_.prototype,"Fs",{get:function(){return this.ks},enumerable:!0,configurable:!0}),I_.prototype.$s=function(t){0<t.Ot()&&(this.ks=!0,this.Ds=t)},I_.prototype.Ms=function(){var n=h_(),r=h_(),i=h_();return this.Ss.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:z_("Encountered invalid change type: "+e)}}),new __(this.Ds,this.Cs,n,r,i)},I_.prototype.Ls=function(){this.ks=!1,this.Ss=O_()},I_.prototype.Os=function(t,e){this.ks=!0,this.Ss=this.Ss.it(t,e)},I_.prototype.xs=function(t){this.ks=!0,this.Ss=this.Ss.remove(t)},I_.prototype.Bs=function(){this.vs+=1},I_.prototype.Us=function(){--this.vs},I_.prototype.qs=function(){this.ks=!0,this.Cs=!0},I_),E_=(T_.prototype.zs=function(t){for(var e=0,n=t.ps;e<n.length;e++){var r=n[e];t.ys instanceof cb?this.Hs(r,t.ys):t.ys instanceof hb&&this.Js(r,t.key,t.ys)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.Js(s,t.key,t.ys)}},T_.prototype.Ys=function(n){var r=this;this.Xs(n,function(t){var e=r.Zs(t);switch(n.state){case 0:r.tn(t)&&e.$s(n.resumeToken);break;case 1:e.Us(),e.Ns||e.Ls(),e.$s(n.resumeToken);break;case 2:e.Us(),e.Ns||r.removeTarget(t);break;case 3:r.tn(t)&&(e.qs(),e.$s(n.resumeToken));break;case 4:r.tn(t)&&(r.en(t),e.$s(n.resumeToken));break;default:z_("Unknown target watch change state: "+n.state)}})},T_.prototype.Xs=function(t,n){var r=this;0<t.targetIds.length?t.targetIds.forEach(n):this.Ws.forEach(function(t,e){r.tn(e)&&n(e)})},T_.prototype.sn=function(t){var e=t.targetId,n=t.bs.count,r=this.nn(e);if(r){var i=r.target;if(i.Pe())if(0===n){var o=new Ug(i.path);this.Js(e,o,new hb(o,wg.S()))}else Q_(1===n,"Single document existence filter with count: "+n);else this.in(e)!==n&&(this.en(e),this.Gs=this.Gs.add(e))}},T_.prototype.rn=function(i){var o=this,s=new Map;this.Ws.forEach(function(t,e){var n=o.nn(e);if(n){if(t.As&&n.target.Pe()){var r=new Ug(n.target.path);null!==o.js.get(r)||o.on(e,r)||o.Js(e,r,new hb(r,i))}t.Fs&&(s.set(e,t.Ms()),t.Ls())}});var r=h_();this.Ks.forEach(function(t,e){var n=!0;e.kt(function(t){var e=o.nn(t);return!e||2===e.Ze||(n=!1)}),n&&(r=r.add(t))});var t=new b_(i,s,this.Gs,this.js,r);return this.js=r_(),this.Ks=R_(),this.Gs=new zg(J_),t},T_.prototype.Hs=function(t,e){if(this.tn(t)){var n=this.on(t,e.key)?2:0;this.Zs(t).Os(e.key,n),this.js=this.js.it(e.key,e),this.Ks=this.Ks.it(e.key,this.hn(e.key).add(t))}},T_.prototype.Js=function(t,e,n){if(this.tn(t)){var r=this.Zs(t);this.on(t,e)?r.Os(e,1):r.xs(e),this.Ks=this.Ks.it(e,this.hn(e).delete(t)),n&&(this.js=this.js.it(e,n))}},T_.prototype.removeTarget=function(t){this.Ws.delete(t)},T_.prototype.in=function(t){var e=this.Zs(t).Ms();return this.Qs.an(t).size+e.Ps.size-e.gs.size},T_.prototype.Bs=function(t){this.Zs(t).Bs()},T_.prototype.Zs=function(t){var e=this.Ws.get(t);return e||(e=new w_,this.Ws.set(t,e)),e},T_.prototype.hn=function(t){var e=this.Ks.get(t);return e||(e=new zg(J_),this.Ks=this.Ks.it(t,e)),e},T_.prototype.tn=function(t){var e=null!==this.nn(t);return e||K_("WatchChangeAggregator","Detected inactive target",t),e},T_.prototype.nn=function(t){var e=this.Ws.get(t);return e&&e.Ns?null:this.Qs.un(t)},T_.prototype.en=function(e){var n=this;this.Ws.set(e,new w_),this.Qs.an(e).forEach(function(t){n.Js(e,t,null)})},T_.prototype.on=function(t,e){return this.Qs.an(t).has(e)},T_);function T_(t){this.Qs=t,this.Ws=new Map,this.js=r_(),this.Ks=R_(),this.Gs=new zg(J_)}function I_(){this.vs=0,this.Ss=O_(),this.Ds=tm.xt,this.Cs=!1,this.ks=!0}function S_(t,e,n,r,i){this.resumeToken=t,this.As=e,this.Ps=n,this.Vs=r,this.gs=i}function N_(t,e,n,r,i){this.ts=t,this.Ts=e,this.ms=n,this.Es=r,this.ws=i}function C_(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.cs=n,this.docChanges=r,this._s=i,this.fromCache=o,this.ls=s,this.ds=a}function A_(){this.as=new Vg(Ug.F)}function k_(n){this.F=n?function(t,e){return n(t,e)||Ug.F(t.key,e.key)}:function(t,e){return Ug.F(t.key,e.key)},this.rs=s_(),this.os=new Vg(this.F)}function R_(){return new Vg(Ug.F)}function O_(){return new Vg(Ug.F)}var P_,D_,x_=((D_={})[Lb.ASCENDING.name]="ASCENDING",D_[Lb.DESCENDING.name]="DESCENDING",D_),L_=((P_={})[db.LESS_THAN.name]="LESS_THAN",P_[db.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",P_[db.GREATER_THAN.name]="GREATER_THAN",P_[db.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",P_[db.EQUAL.name]="EQUAL",P_[db.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",P_[db.IN.name]="IN",P_[db.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",P_),M_=(F_.prototype._n=function(t){var e=void 0===t.code?dg.UNKNOWN:e_(t.code);return new vg(e,t.message||"")},F_.prototype.ln=function(t){return this.options.dn||nm(t)?t:{value:t}},F_.prototype.fn=function(t){var e;return nm(e="object"==typeof t?t.value:t)?null:e},F_.prototype.Wt=function(t){return{integerValue:""+t}},F_.prototype.jt=function(t){if(this.options.dn){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rm(t)?"-0":t}},F_.prototype.Tn=function(t){return im(t)?this.Wt(t):this.jt(t)},F_.prototype.k=function(t){return this.options.dn?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}},F_.prototype.v=function(t){var e=dm(t);return new _g(e.seconds,e.nanos)},F_.prototype.mn=function(t){return this.options.dn?t.toBase64():t.toUint8Array()},F_.prototype.En=function(t){return this.options.dn?(Q_(void 0===t||"string"==typeof t,"value must be undefined or a string when using proto3 Json"),tm.fromBase64String(t||"")):(Q_(void 0===t||t instanceof Uint8Array,"value must be undefined or Uint8Array"),tm.fromUint8Array(t||new Uint8Array))},F_.prototype.toVersion=function(t){return this.k(t.k())},F_.prototype.fromVersion=function(t){return Q_(!!t,"Trying to deserialize version that isn't set"),wg.v(this.v(t))},F_.prototype.wn=function(t,e){return this.In(e||this.cn).child("documents").child(t).K()},F_.prototype.Rn=function(t){var e=Og.G(t);return Q_(U_(e),"Tried to deserialize invalid key "+e.toString()),e},F_.prototype.An=function(t){return this.wn(t.path)},F_.prototype.tt=function(t){var e=this.Rn(t);return Q_(e.get(1)===this.cn.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.cn.projectId),Q_(!e.get(3)&&!this.cn.database||e.get(3)===this.cn.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.cn.database),new Ug(this.Pn(e))},F_.prototype.Vn=function(t){return this.wn(t)},F_.prototype.gn=function(t){var e=this.Rn(t);return 4===e.length?Og.H:this.Pn(e)},Object.defineProperty(F_.prototype,"pn",{get:function(){return new Og(["projects",this.cn.projectId,"databases",this.cn.database]).K()},enumerable:!0,configurable:!0}),F_.prototype.In=function(t){return new Og(["projects",t.projectId,"databases",t.database])},F_.prototype.Pn=function(t){return Q_(4<t.length&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.M(5)},F_.prototype.yn=function(t,e){return{name:this.An(t),fields:e.proto.mapValue.fields}},F_.prototype.bn=function(t){return{name:this.An(t.key),fields:t.Ie().mapValue.fields,updateTime:this.k(t.version.k())}},F_.prototype.vn=function(t,e){var n=this.tt(t.name),r=this.fromVersion(t.updateTime),i=new Xm({mapValue:{fields:t.fields}});return new cb(n,r,i,{hasCommittedMutations:!!e})},F_.prototype.Sn=function(t){Q_(!!t.found,"Tried to deserialize a found document from a missing document."),t.found.name,t.found.updateTime;var e=this.tt(t.found.name),n=this.fromVersion(t.found.updateTime),r=new Xm({mapValue:{fields:t.found.fields}});return new cb(e,n,r,{})},F_.prototype.Dn=function(t){Q_(!!t.missing,"Tried to deserialize a missing document from a found document."),Q_(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.tt(t.missing),n=this.fromVersion(t.readTime);return new hb(e,n)},F_.prototype.Cn=function(t){return"found"in t?this.Sn(t):"missing"in t?this.Dn(t):z_("invalid batch get response: "+JSON.stringify(t))},F_.prototype.kn=function(t){var e;if("targetChange"in t){t.targetChange;var n=this.Nn(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],i=this.En(t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&this._n(o);e=new v_(n,r,i,s||null)}else if("documentChange"in t){t.documentChange;var a=t.documentChange;a.document,a.document.name,a.document.updateTime;var u=this.tt(a.document.name),c=this.fromVersion(a.document.updateTime),h=new Xm({mapValue:{fields:a.document.fields}}),l=new cb(u,c,h,{}),f=a.targetIds||[],p=a.removedTargetIds||[];e=new p_(f,p,l.key,l)}else if("documentDelete"in t){t.documentDelete;var d=t.documentDelete;d.document;var v=this.tt(d.document),y=d.readTime?this.fromVersion(d.readTime):wg.S(),g=new hb(v,y),m=d.removedTargetIds||[];e=new p_([],m,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var _=this.tt(b.document),w=b.removedTargetIds||[];e=new p_([],w,_,null)}else{if(!("filter"in t))return z_("Unknown change type "+JSON.stringify(t));t.filter;var E=t.filter;E.targetId;var T=E.count||0,I=new Wb(T),S=E.targetId;e=new d_(S,I)}return e},F_.prototype.Nn=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:z_("Got unexpected TargetChange.state: "+t)},F_.prototype.Fn=function(t){if(!("targetChange"in t))return wg.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length||!e.readTime?wg.MIN:this.fromVersion(e.readTime)},F_.prototype.$n=function(t){var e,n=this;if(t instanceof Hm)e={update:this.yn(t.key,t.value)};else if(t instanceof Qm)e={delete:this.An(t.key)};else if(t instanceof Gm)e={update:this.yn(t.key,t.data),updateMask:this.Mn(t.se)};else if(t instanceof zm)e={transform:{document:this.An(t.key),fieldTransforms:t.fieldTransforms.map(function(t){return n.Ln(t)})}};else{if(!(t instanceof Ym))return z_("Unknown mutation type "+t.type);e={verify:this.An(t.key)}}return t.Zt.Ht||(e.currentDocument=this.On(t.Zt)),e},F_.prototype.xn=function(t){var e=this,n=t.currentDocument?this.Bn(t.currentDocument):Lm.NONE;if(t.update){t.update.name;var r=this.tt(t.update.name),i=new Xm({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=this.Un(t.updateMask);return new Gm(r,i,o,n)}return new Hm(r,i,n)}if(t.delete){var s=this.tt(t.delete);return new Qm(s,n)}if(t.transform){var a=this.tt(t.transform.document),u=t.transform.fieldTransforms.map(function(t){return e.qn(t)});return Q_(!0===n.exists,'Transforms only support precondition "exists == true"'),new zm(a,u)}if(t.verify){var c=this.tt(t.verify);return new Ym(c,n)}return z_("unknown mutation proto: "+JSON.stringify(t))},F_.prototype.On=function(t){return void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:z_("Unknown precondition")},F_.prototype.Bn=function(t){return void 0!==t.updateTime?Lm.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?Lm.exists(t.exists):Lm.NONE},F_.prototype.Qn=function(t,e){var n=t.updateTime?this.fromVersion(t.updateTime):this.fromVersion(e);n.isEqual(wg.MIN)&&(n=this.fromVersion(e));var r=null;return t.transformResults&&0<t.transformResults.length&&(r=t.transformResults),new Pm(n,r)},F_.prototype.Wn=function(t,e){var n=this;return t&&0<t.length?(Q_(void 0!==e,"Received a write result without a commit time"),t.map(function(t){return n.Qn(t,e)})):[]},F_.prototype.Ln=function(t){var e=t.transform;if(e instanceof Tm)return{fieldPath:t.field.K(),setToServerValue:"REQUEST_TIME"};if(e instanceof Sm)return{fieldPath:t.field.K(),appendMissingElements:{values:e.elements}};if(e instanceof Nm)return{fieldPath:t.field.K(),removeAllFromArray:{values:e.elements}};if(e instanceof Cm)return{fieldPath:t.field.K(),increment:e.Qt};throw z_("Unknown transform: "+t.transform)},F_.prototype.qn=function(t){var e=null;if("setToServerValue"in t)Q_("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),e=Tm.instance;else if("appendMissingElements"in t){var n=t.appendMissingElements.values||[];e=new Sm(n)}else if("removeAllFromArray"in t){var r=t.removeAllFromArray.values||[];e=new Nm(r)}else"increment"in t?e=new Cm(this,t.increment):z_("Unknown transform proto: "+JSON.stringify(t));var i=Mg.Z(t.fieldPath);return new xm(i,e)},F_.prototype.jn=function(t){return{documents:[this.Vn(t.path)]}},F_.prototype.Kn=function(t){var e=t.documents.length;Q_(1===e,"DocumentsTarget contained other than 1 document: "+e);var n=t.documents[0];return pb.ve(this.gn(n)).xe()},F_.prototype.Gn=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(e.parent=this.Vn(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=this.Vn(n.L()),e.structuredQuery.from=[{collectionId:n.B()}]);var r=this.zn(t.filters);r&&(e.structuredQuery.where=r);var i=this.Hn(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.ln(t.limit);return null!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.Jn(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.Jn(t.endAt)),e},F_.prototype.Yn=function(t){var e=this.gn(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(0<r){Q_(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=this.Xn(n.where));var a=[];n.orderBy&&(a=this.Zn(n.orderBy));var u=null;n.limit&&(u=this.fn(n.limit));var c=null;n.startAt&&(c=this.ti(n.startAt));var h=null;return n.endAt&&(h=this.ti(n.endAt)),new pb(e,i,a,s,u,"F",c,h).xe()},F_.prototype.ei=function(t){var e=this.si(t.Ze);return null==e?null:{"goog-listen-tags":e}},F_.prototype.si=function(t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return z_("Unrecognized query purpose: "+t)}},F_.prototype.xe=function(t){var e,n=t.target;return(e=n.Pe()?{documents:this.jn(n)}:{query:this.Gn(n)}).targetId=t.targetId,0<t.resumeToken.Ot()&&(e.resumeToken=this.mn(t.resumeToken)),e},F_.prototype.zn=function(t){var e=this;if(0!==t.length){var n=t.map(function(t){return t instanceof kb?e.ni(t):z_("Unrecognized filter: "+JSON.stringify(t))});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},F_.prototype.Xn=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.ii(t)]:void 0!==t.fieldFilter?[this.ri(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e.Xn(t)}).reduce(function(t,e){return t.concat(e)}):z_("Unknown filter: "+JSON.stringify(t)):[]},F_.prototype.Hn=function(t){var e=this;if(0!==t.length)return t.map(function(t){return e.oi(t)})},F_.prototype.Zn=function(t){var e=this;return t.map(function(t){return e.hi(t)})},F_.prototype.Jn=function(t){return{before:t.before,values:t.position}},F_.prototype.ti=function(t){var e=!!t.before,n=t.values||[];return new Gb(n,e)},F_.prototype.ai=function(t){return x_[t.name]},F_.prototype.ui=function(t){switch(t){case"ASCENDING":return Lb.ASCENDING;case"DESCENDING":return Lb.DESCENDING;default:return}},F_.prototype.ci=function(t){return L_[t.name]},F_.prototype._i=function(t){switch(t){case"EQUAL":return db.EQUAL;case"GREATER_THAN":return db.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return db.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return db.LESS_THAN;case"LESS_THAN_OR_EQUAL":return db.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return db.ARRAY_CONTAINS;case"IN":return db.IN;case"ARRAY_CONTAINS_ANY":return db.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return z_("Unspecified operator");default:return z_("Unknown operator")}},F_.prototype.li=function(t){return{fieldPath:t.K()}},F_.prototype.di=function(t){return Mg.Z(t.fieldPath)},F_.prototype.oi=function(t){return{field:this.li(t.field),direction:this.ai(t.dir)}},F_.prototype.hi=function(t){return new zb(this.di(t.field),this.ui(t.direction))},F_.prototype.ri=function(t){return kb.create(this.di(t.fieldFilter.field),this._i(t.fieldFilter.op),t.fieldFilter.value)},F_.prototype.ni=function(t){if(t.op===db.EQUAL){if(wm(t.value))return{unaryFilter:{field:this.li(t.field),op:"IS_NAN"}};if(_m(t.value))return{unaryFilter:{field:this.li(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.li(t.field),op:this.ci(t.op),value:t.value}}},F_.prototype.ii=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.di(t.unaryFilter.field);return kb.create(e,db.EQUAL,{doubleValue:NaN});case"IS_NULL":var n=this.di(t.unaryFilter.field);return kb.create(n,db.EQUAL,{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return z_("Unspecified filter");default:return z_("Unknown filter")}},F_.prototype.Mn=function(t){var e=[];return t.fields.forEach(function(t){return e.push(t.K())}),{fieldPaths:e}},F_.prototype.Un=function(t){var e=(t.fieldPaths||[]).map(function(t){return Mg.Z(t)});return Dm.Gt(e)},F_);function F_(t,e){this.cn=t,this.options=e}function U_(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}var j_=(q_.fi=function(t){q_.platform&&z_("Platform already defined"),q_.platform=t},q_.Lt=function(){return q_.platform||z_("Platform not set"),q_.platform},q_),V_=new Oa("@firebase/firestore");function q_(){}function B_(){return V_.logLevel}function W_(t){V_.logLevel=t}function K_(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(V_.logLevel<=Ta.DEBUG){var r=e.map(G_);V_.debug.apply(V_,ks(["Firestore ("+cg+"): "+t],r))}}function H_(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(V_.logLevel<=Ta.ERROR){var r=e.map(G_);V_.error.apply(V_,ks(["Firestore ("+cg+"): "+t],r))}}function G_(t){if("string"==typeof t)return t;var e=j_.Lt();try{return e.Ti(t)}catch(e){return t}}function z_(t){var e="FIRESTORE ("+cg+") INTERNAL ASSERTION FAILED: "+t;throw H_(e),new Error(e)}function Q_(t,e){t||z_(e)}var Y_=(X_.mi=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},X_);function X_(){}function J_(t,e){return t<e?-1:e<t?1:0}function $_(t,n,r){return t.length===n.length&&t.every(function(t,e){return r(t,n[e])})}function Z_(t){return t+"\0"}function tw(t,e,n,r,i){this.cn=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i}var ew=(Object.defineProperty(Sw.prototype,"Ei",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),Sw.prototype.isEqual=function(t){return t instanceof Sw&&t.projectId===this.projectId&&t.database===this.database},Sw.prototype.D=function(t){return J_(this.projectId,t.projectId)||J_(this.database,t.database)},Sw),nw=(Iw.prototype.get=function(t){var e=this.wi(t),n=this.Ii[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(s.isEqual(t))return a}},Iw.prototype.has=function(t){return void 0!==this.get(t)},Iw.prototype.set=function(t,e){var n=this.wi(t),r=this.Ii[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.Ii[n]=[[t,e]]},Iw.prototype.delete=function(t){var e=this.wi(t),n=this.Ii[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.Ii[e]:n.splice(r,1),!0;return!1},Iw.prototype.forEach=function(a){$g(this.Ii,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],s=i[1];a(o,s)}})},Iw.prototype.U=function(){return Zg(this.Ii)},Iw),rw=(Tw.prototype.Ut=function(t,e,n){for(var r=n.Ai,i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(t)){var s=r[i];e=o.Ut(e,s)}}return e},Tw.prototype.Bt=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=i.Bt(e,e,this.Ri))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=u.Bt(e,o,this.Ri))}return e},Tw.prototype.Pi=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.Bt(t.key,n.get(t.key));e&&(i=i.it(t.key,e))}),i},Tw.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},h_())},Tw.prototype.isEqual=function(t){return this.batchId===t.batchId&&$_(this.mutations,t.mutations,function(t,e){return t.isEqual(e)})&&$_(this.baseMutations,t.baseMutations,function(t,e){return t.isEqual(e)})},Tw),iw=(Ew.from=function(t,e,n,r){Q_(t.mutations.length===n.length,"Mutations sent "+t.mutations.length+" must equal results received "+n.length);for(var i=u_(),o=t.mutations,s=0;s<o.length;s++)i=i.it(o[s].key,n[s].version);return new Ew(t,e,n,r,i)},Ew),ow=(ww.prototype.U=function(){return this.pi.U()},ww.prototype.vi=function(t,e){var n=new sw(t,e);this.pi=this.pi.add(n),this.yi=this.yi.add(n)},ww.prototype.Si=function(t,e){var n=this;t.forEach(function(t){return n.vi(t,e)})},ww.prototype.Di=function(t,e){this.Ci(new sw(t,e))},ww.prototype.ki=function(t,e){var n=this;t.forEach(function(t){return n.Di(t,e)})},ww.prototype.Ni=function(t){var e=this,n=Ug.EMPTY,r=new sw(n,t),i=new sw(n,t+1),o=[];return this.yi.Ct([r,i],function(t){e.Ci(t),o.push(t.key)}),o},ww.prototype.Fi=function(){var e=this;this.pi.forEach(function(t){return e.Ci(t)})},ww.prototype.Ci=function(t){this.pi=this.pi.delete(t),this.yi=this.yi.delete(t)},ww.prototype.$i=function(t){var e=Ug.EMPTY,n=new sw(e,t),r=new sw(e,t+1),i=h_();return this.yi.Ct([n,r],function(t){i=i.add(t.key)}),i},ww.prototype.Mi=function(t){var e=new sw(t,0),n=this.pi.Nt(e);return null!==n&&t.isEqual(n.key)},ww),sw=(_w.Ee=function(t,e){return Ug.F(t.key,e.key)||J_(t.Li,e.Li)},_w.bi=function(t,e){return J_(t.Li,e.Li)||Ug.F(t.key,e.key)},_w),aw=(bw.prototype.catch=function(t){return this.next(void 0,t)},bw.prototype.next=function(r,i){var o=this;return this.Ui&&z_("Called next() or catch() twice for PersistencePromise"),this.Ui=!0,this.Bi?this.error?this.qi(i,this.error):this.Qi(r,this.result):new bw(function(e,n){o.Oi=function(t){o.Qi(r,t).next(e,n)},o.xi=function(t){o.qi(i,t).next(e,n)}})},bw.prototype.Wi=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},bw.prototype.ji=function(t){try{var e=t();return e instanceof bw?e:bw.resolve(e)}catch(t){return bw.reject(t)}},bw.prototype.Qi=function(t,e){return t?this.ji(function(){return t(e)}):bw.resolve(e)},bw.prototype.qi=function(t,e){return t?this.ji(function(){return t(e)}):bw.reject(e)},bw.resolve=function(n){return new bw(function(t,e){t(n)})},bw.reject=function(n){return new bw(function(t,e){e(n)})},bw.Ki=function(t){return new bw(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},bw.Gi=function(t){for(var n=bw.resolve(!1),e=function(e){n=n.next(function(t){return t?bw.resolve(t):e()})},r=0,i=t;r<i.length;r++)e(i[r]);return n},bw.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.Ki(i)},bw),uw=(Object.defineProperty(mw.prototype,"readTime",{get:function(){return this.Ji},set:function(t){this.Ji=t},enumerable:!0,configurable:!0}),mw.prototype.Yi=function(t,e){this.Xi(),this.readTime=e,this.zi.set(t.key,t)},mw.prototype.Zi=function(t,e){this.Xi(),e&&(this.readTime=e),this.zi.set(t,null)},mw.prototype.tr=function(t,e){this.Xi();var n=this.zi.get(e);return void 0!==n?aw.resolve(n):this.er(t,e)},mw.prototype.getEntries=function(t,e){return this.sr(t,e)},mw.prototype.apply=function(t){return this.Xi(),this.Hi=!0,this.nr(t)},mw.prototype.Xi=function(){},mw),cw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",hw=(gw.prototype.rr=function(t){this.ir.push(t)},gw.prototype.or=function(){this.ir.forEach(function(t){return t()})},gw),lw=(yw.prototype.cr=function(e,n){var r=this;return this.ar._r(e,n).next(function(t){return r.lr(e,n,t)})},yw.prototype.lr=function(t,r,i){return this.hr.tr(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].Bt(r,t);return t})},yw.prototype.dr=function(t,e,i){var o=i_();return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].Bt(t,e);o=o.it(t,e)}),o},yw.prototype.Tr=function(e,t){var n=this;return this.hr.getEntries(e,t).next(function(t){return n.mr(e,t)})},yw.prototype.mr=function(r,i){var o=this;return this.ar.Er(r,i).next(function(t){var e=o.dr(r,i,t),n=r_();return e.forEach(function(t,e){e=e||new hb(t,wg.S()),n=n.it(t,e)}),n})},yw.prototype.wr=function(t,e,n){return e.Pe()?this.Ir(t,e.path):e.He()?this.Rr(t,e,n):this.Ar(t,e,n)},yw.prototype.Ir=function(t,e){return this.cr(t,new Ug(e)).next(function(t){var e=s_();return t instanceof cb&&(e=e.it(t.key,t)),e})},yw.prototype.Rr=function(n,r,i){var o=this,s=r.collectionGroup,a=s_();return this.ur.Pr(n,s).next(function(t){return aw.forEach(t,function(t){var e=r.Le(t.child(s));return o.Ar(n,e,i).next(function(t){t.forEach(function(t,e){a=a.it(t,e)})})}).next(function(){return a})})},yw.prototype.Ar=function(e,n,t){var h,l,r=this;return this.hr.wr(e,n,t).next(function(t){return h=t,r.ar.Vr(e,n)}).next(function(t){return l=t,r.gr(e,l,h).next(function(t){h=t;for(var e=0,n=l;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],a=s.key,u=h.get(a),c=s.Bt(u,u,r.Ri);h=c instanceof cb?h.it(a,c):h.remove(a)}})}).next(function(){return h.forEach(function(t,e){n.matches(e)||(h=h.remove(t))}),h})},yw.prototype.gr=function(t,e,n){for(var r=h_(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Gm&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.hr.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof cb&&(c=c.it(t,e))}),c})},yw),fw=(vw.br=function(t,e){for(var n=h_(),r=h_(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new vw(t,e.fromCache,n,r)},vw),pw=(dw.prototype.Sr=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},dw.prototype.next=function(){var t=++this.previousValue;return this.Dr&&this.Dr(t),t},dw);function dw(t,e){var n=this;this.previousValue=t,e&&(e.vr=function(t){return n.Sr(t)},this.Dr=function(t){return e.Cr(t)})}function vw(t,e,n,r){this.targetId=t,this.fromCache=e,this.pr=n,this.yr=r}function yw(t,e,n){this.hr=t,this.ar=e,this.ur=n}function gw(){this.ir=[]}function mw(){this.zi=new nw(function(t){return t.toString()}),this.Hi=!1}function bw(t){var e=this;this.Oi=null,this.xi=null,this.result=void 0,this.error=void 0,this.Bi=!1,this.Ui=!1,t(function(t){e.Bi=!0,e.result=t,e.Oi&&e.Oi(t)},function(t){e.Bi=!0,e.error=t,e.xi&&e.xi(t)})}function _w(t,e){this.key=t,this.Li=e}function ww(){this.pi=new zg(sw.Ee),this.yi=new zg(sw.bi)}function Ew(t,e,n,r,i){this.batch=t,this.Vi=e,this.Ai=n,this.streamToken=r,this.gi=i}function Tw(t,e,n,r){this.batchId=t,this.Ri=e,this.baseMutations=n,this.mutations=r}function Iw(t){this.wi=t,this.Ii={}}function Sw(t,e){this.projectId=t,this.database=e||"(default)"}pw.kr=-1;function Nw(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}var Cw=(Rw.Or=function(t,e,n,r,i){var o=new Rw(t,e,Date.now()+n,r,i);return o.start(n),o},Rw.prototype.start=function(t){var e=this;this.xr=setTimeout(function(){return e.Br()},t)},Rw.prototype.Ur=function(){return this.Br()},Rw.prototype.cancel=function(t){null!==this.xr&&(this.clearTimeout(),this.Lr.reject(new vg(dg.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},Rw.prototype.Br=function(){var e=this;this.Nr.qr(function(){return null!==e.xr?(e.clearTimeout(),e.op().then(function(t){return e.Lr.resolve(t)})):Promise.resolve()})},Rw.prototype.clearTimeout=function(){null!==this.xr&&(this.Mr(this),clearTimeout(this.xr),this.xr=null)},Rw),Aw=(Object.defineProperty(kw.prototype,"Hr",{get:function(){return this.Wr},enumerable:!0,configurable:!0}),kw.prototype.qr=function(t){this.enqueue(t)},kw.prototype.Jr=function(t){this.Yr(),this.Xr(t)},kw.prototype.Zr=function(t){return this.Yr(),this.Xr(t)},kw.prototype.to=function(e){return Is(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.Yr(),this.Wr?[3,2]:(this.Wr=!0,[4,this.Zr(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},kw.prototype.enqueue=function(t){return this.Yr(),this.Wr?new Promise(function(t){}):this.Xr(t)},kw.prototype.Xr=function(t){var e=this,n=this.Qr.then(function(){return e.Gr=!0,t().catch(function(t){throw e.Kr=t,e.Gr=!1,H_("INTERNAL UNHANDLED ERROR: ",t.stack||t.message||""),t}).then(function(t){return e.Gr=!1,t})});return this.Qr=n},kw.prototype.eo=function(t,e,n){var r=this;this.Yr(),-1<this.zr.indexOf(t)&&(e=0);var i=Cw.Or(this,t,e,n,function(t){return r.so(t)});return this.jr.push(i),i},kw.prototype.Yr=function(){this.Kr&&z_("AsyncQueue is already failed: "+(this.Kr.stack||this.Kr.message))},kw.prototype.no=function(){},kw.prototype.io=function(){return Is(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return[4,e=this.Qr];case 1:t.sent(),t.label=2;case 2:if(e!==this.Qr)return[3,0];t.label=3;case 3:return[2]}})})},kw.prototype.ro=function(t){for(var e=0,n=this.jr;e<n.length;e++)if(n[e].Fr===t)return!0;return!1},kw.prototype.oo=function(r){var i=this;return this.io().then(function(){i.jr.sort(function(t,e){return t.$r-e.$r});for(var t=0,e=i.jr;t<e.length;t++){var n=e[t];if(n.Ur(),"all"!==r&&n.Fr===r)break}return i.io()})},kw.prototype.ho=function(t){this.zr.push(t)},kw.prototype.so=function(t){var e=this.jr.indexOf(t);this.jr.splice(e,1)},kw);function kw(){this.Qr=Promise.resolve(),this.Wr=!1,this.jr=[],this.Kr=null,this.Gr=!1,this.zr=[]}function Rw(t,e,n,r,i){this.Nr=t,this.Fr=e,this.$r=n,this.op=r,this.Mr=i,this.Lr=new Nw,this.then=this.Lr.promise.then.bind(this.Lr.promise),this.catch=this.Lr.promise.catch.bind(this.Lr.promise),this.Lr.promise.catch(function(t){})}function Ow(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=J_(n,i);return 0===s?J_(r,o):s}var Pw=(Mw.prototype.co=function(){return++this.uo},Mw.prototype._o=function(t){var e=[t,this.co()];if(this.buffer.size<this.ao)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Ow(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(Mw.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),Mw),Dw={lo:!1,do:0,fo:0,To:0},xw=(Lw.Io=function(t){return new Lw(t,Lw.Ro,Lw.Ao)},Lw);function Lw(t,e,n){this.mo=t,this.Eo=e,this.wo=n}function Mw(t){this.ao=t,this.buffer=new zg(Ow),this.uo=0}xw.Po=-1,xw.Vo=1048576,xw.po=41943040,xw.Ro=10,xw.Ao=1e3,xw.yo=new xw(xw.po,xw.Ro,xw.Ao),xw.DISABLED=new xw(xw.Po,0,0);var Fw=(Bw.prototype.start=function(t){this.bo.Do.mo!==xw.Po&&this.Co(t)},Bw.prototype.stop=function(){this.So&&(this.So.cancel(),this.So=null)},Object.defineProperty(Bw.prototype,"ko",{get:function(){return null!==this.So},enumerable:!0,configurable:!0}),Bw.prototype.Co=function(t){var e=this,n=this.vo?3e5:6e4;K_("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.So=this.Nr.eo("lru_garbage_collection",n,function(){return e.So=null,e.vo=!0,t.No(e.bo).then(function(){return e.Co(t)}).catch(Ww)})},Bw),Uw=(qw.prototype.$o=function(t,e){return this.Fo.Mo(t).next(function(t){return Math.floor(e/100*t)})},qw.prototype.Lo=function(t,e){var n=this;if(0===e)return aw.resolve(pw.kr);var r=new Pw(e);return this.Fo.Xs(t,function(t){return r._o(t.sequenceNumber)}).next(function(){return n.Fo.Oo(t,function(t){return r._o(t)})}).next(function(){return r.maxValue})},qw.prototype.xo=function(t,e,n){return this.Fo.xo(t,e,n)},qw.prototype.Bo=function(t,e){return this.Fo.Bo(t,e)},qw.prototype.Uo=function(e,n){var r=this;return this.Do.mo===xw.Po?(K_("LruGarbageCollector","Garbage collection skipped; disabled"),aw.resolve(Dw)):this.qo(e).next(function(t){return t<r.Do.mo?(K_("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.Do.mo),Dw):r.Qo(e,n)})},qw.prototype.qo=function(t){return this.Fo.qo(t)},qw.prototype.Qo=function(e,n){var r,i,o,s,a,u,c,h=this,l=Date.now();return this.$o(e,this.Do.Eo).next(function(t){return i=t>h.Do.wo?(K_("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.Do.wo+" from "+t),h.Do.wo):t,s=Date.now(),h.Lo(e,i)}).next(function(t){return r=t,a=Date.now(),h.xo(e,r,n)}).next(function(t){return o=t,u=Date.now(),h.Bo(e,r)}).next(function(t){return c=Date.now(),B_()<=Ta.DEBUG&&K_("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+i+" in "+(a-s)+"ms\n\tRemoved "+o+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),aw.resolve({lo:!0,do:i,fo:o,To:t})})},qw),jw=(Vw.prototype.start=function(){return this.rh()},Vw.prototype.oh=function(i){return Is(this,void 0,void 0,function(){var e,m,n,r=this;return Ss(this,function(t){switch(t.label){case 0:return e=this.ar,m=this.sh,[4,this.persistence.runTransaction("Handle user change","readonly",function(y){var g;return r.ar.hh(y).next(function(t){return g=t,e=r.persistence.Yo(i),m=new lw(r.Xo,e,r.persistence.nh()),e.hh(y)}).next(function(t){for(var e=[],n=[],r=h_(),i=0,o=g;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var a=0,u=s.mutations;a<u.length;a++){var c=u[a];r=r.add(c.key)}}for(var h=0,l=t;h<l.length;h++){var f=l[h];n.push(f.batchId);for(var p=0,d=f.mutations;p<d.length;p++){var v=d[p];r=r.add(v.key)}}return m.Tr(y,r).next(function(t){return{ah:t,uh:e,_h:n}})})})];case 1:return n=t.sent(),[2,(this.ar=e,this.sh=m,this.Wo.ih(this.sh),n)]}})})},Vw.prototype.lh=function(a){var u,c=this,h=_g.now(),t=a.reduce(function(t,e){return t.add(e.key)},h_());return this.persistence.runTransaction("Locally write mutations","readwrite",function(s){return c.sh.Tr(s,t).next(function(t){u=t;for(var e=[],n=0,r=a;n<r.length;n++){var i=r[n],o=i.ee(u.get(i.key));null!=o&&e.push(new Gm(i.key,o,o.se(),Lm.exists(!0)))}return c.ar.dh(s,h,e,a)})}).then(function(t){var e=t.Pi(u);return{batchId:t.batchId,zi:e}})},Vw.prototype.fh=function(t){var n=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return n.ar.Th(e,t).next(function(t){return t?n.sh.Tr(e,t):aw.resolve(null)})})},Vw.prototype.mh=function(r){var i=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var e=r.batch.keys(),n=i.Xo.Eh({wh:!0});return i.ar.mh(t,r.batch,r.streamToken).next(function(){return i.Ih(t,r,n)}).next(function(){return n.apply(t)}).next(function(){return i.ar.Rh(t)}).next(function(){return i.sh.Tr(t,e)})})},Vw.prototype.Ah=function(t){var r=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return r.ar.Ph(e,t).next(function(t){return Q_(null!==t,"Attempt to reject nonexistent batch!"),n=t.keys(),r.ar.Vh(e,t)}).next(function(){return r.ar.Rh(e)}).next(function(){return r.sh.Tr(e,n)})})},Vw.prototype.gh=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.ar.gh(t)})},Vw.prototype.ph=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly",function(t){return e.ar.ph(t)})},Vw.prototype.yh=function(e){var n=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(t){return n.ar.yh(t,e)})},Vw.prototype.bh=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.th.bh(t)})},Vw.prototype.vh=function(u){var c=this,h=u.ts,l=this.Ko;return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var i=c.Xo.Eh({wh:!0});l=c.Ko;var s=[];u.Ts.forEach(function(t,e){var n=l.get(e);if(n){s.push(c.th.Sh(o,t.gs,e).next(function(){return c.th.Dh(o,t.Ps,e)}));var r=t.resumeToken;if(0<r.Ot()){var i=n.ss(r,h).es(o.Ch);l=l.it(e,i),Vw.kh(n,i,t)&&s.push(c.th.Nh(o,i))}}});var a=r_(),n=h_();if(u.Es.forEach(function(t,e){n=n.add(t)}),s.push(i.getEntries(o,n).next(function(r){u.Es.forEach(function(t,e){var n=r.get(t);e instanceof hb&&e.version.isEqual(wg.MIN)?(i.Zi(t,h),a=a.it(t,e)):null==n||0<e.version.D(n.version)||0===e.version.D(n.version)&&n.hasPendingWrites?(i.Yi(e,h),a=a.it(t,e)):K_("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version),u.ws.has(t)&&s.push(c.persistence.Jo.Fh(o,t))})})),!h.isEqual(wg.MIN)){var t=c.th.bh(o).next(function(t){return c.th.$h(o,o.Ch,h)});s.push(t)}return aw.Ki(s).next(function(){return i.apply(o)}).next(function(){return c.sh.mr(o,a)})}).then(function(t){return c.Ko=l,t})},Vw.kh=function(t,e,n){return Q_(0<e.resumeToken.Ot(),"Attempted to persist target data with no resume token"),0===t.resumeToken.Ot()||e.ts.C()-t.ts.C()>=this.Mh||0<n.Ps.size+n.Vs.size+n.gs.size},Vw.prototype.Lh=function(t){for(var n=this,e=0,r=t;e<r.length;e++){var i=r[e],o=i.targetId;if(this.jo.Si(i.pr,o),this.jo.ki(i.yr,o),!i.fromCache){var s=this.Ko.get(o),a=s.ts,u=s.ns(a);this.Ko=this.Ko.it(o,u)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(e){return aw.forEach(t,function(t){return aw.forEach(t.yr,function(t){return n.persistence.Jo.Di(e,t)})})})},Vw.prototype.Oh=function(e){var n=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.ar.xh(t,e)})},Vw.prototype.Bh=function(e){var n=this;return this.persistence.runTransaction("read document","readonly",function(t){return n.sh.cr(t,e)})},Vw.prototype.Uh=function(r){var i=this;return this.persistence.runTransaction("Allocate target","readwrite",function(e){var n;return i.th.qh(e,r).next(function(t){return t?(n=t,aw.resolve(n)):i.th.Qh(e).next(function(t){return n=new Xb(r,t,0,e.Ch),i.th.Wh(e,n).next(function(){return n})})})}).then(function(t){return null===i.Ko.get(t.targetId)&&(i.Ko=i.Ko.it(t.targetId,t),i.Go.set(r,t.targetId)),t})},Vw.prototype.qh=function(t,e){var n=this.Go.get(e);return void 0!==n?aw.resolve(this.Ko.get(n)):this.th.qh(t,e)},Vw.prototype.jh=function(n,r){var i=this,o=this.Ko.get(n),t=r?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release target",t,function(e){var t=i.jo.Ni(n);return r?aw.resolve():aw.forEach(t,function(t){return i.persistence.Jo.Di(e,t)}).next(function(){i.persistence.Jo.removeTarget(e,o)})}).then(function(){i.Ko=i.Ko.remove(n),i.Go.delete(o.target)})},Vw.prototype.Kh=function(t,n){var r=this,i=wg.MIN,o=h_();return this.persistence.runTransaction("Execute query","readonly",function(e){return r.qh(e,t.xe()).next(function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.th.Gh(e,t.targetId).next(function(t){o=t})}).next(function(){return r.Wo.wr(e,t,n?i:wg.MIN,n?o:h_())}).next(function(t){return{documents:t,zh:o}})})},Vw.prototype.Hh=function(e){var n=this;return this.persistence.runTransaction("Remote document keys","readonly",function(t){return n.th.Gh(t,e)})},Vw.prototype.Jh=function(){return this.persistence.Jh()},Vw.prototype.Yh=function(t){this.ar.Xh(t)},Vw.prototype.Zh=function(t){this.persistence.Zh(t)},Vw.prototype.Ih=function(t,i,o){var e=this,s=i.batch,n=s.keys(),a=aw.resolve();return n.forEach(function(r){a=a.next(function(){return o.tr(t,r)}).next(function(t){var e=t,n=i.gi.get(r);Q_(null!==n,"ackVersions should contain every doc in the write."),(!e||e.version.D(n)<0)&&(e=s.Ut(r,e,i))&&o.Yi(e,i.Vi)})}),a.next(function(){return e.ar.Vh(t,s)})},Vw.prototype.No=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.Uo(t,n.Ko)})},Vw.prototype.ta=function(e){var n=this,t=this.Ko.get(e);return t?Promise.resolve(t.target):this.persistence.runTransaction("Get target data","readonly",function(t){return n.th.un(t,e).next(function(t){return t?t.target:null})})},Vw.prototype.ea=function(){var r=this;return this.persistence.runTransaction("Get new document changes","readonly",function(t){return r.Xo.ea(t,r.zo)}).then(function(t){var e=t.sa,n=t.readTime;return r.zo=n,e})},Vw.prototype.rh=function(){return Is(this,void 0,void 0,function(){var e,n=this;return Ss(this,function(t){switch(t.label){case 0:return[4,(e=this).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return n.Xo.na(t)})];case 1:return e.zo=t.sent(),[2]}})})},Vw);function Vw(t,e,n){this.persistence=t,this.Wo=e,this.jo=new ow,this.Ko=new Vg(J_),this.Go=new nw(function(t){return t.canonicalId()}),this.zo=wg.MIN,this.persistence.Jo.Ho(this.jo),this.ar=t.Yo(n),this.Xo=t.Zo(),this.th=t.eh(),this.sh=new lw(this.Xo,this.ar,this.persistence.nh()),this.Wo.ih(this.sh)}function qw(t,e){this.Fo=t,this.Do=e}function Bw(t,e){this.bo=t,this.Nr=e,this.vo=!1,this.So=null}function Ww(e){return Is(this,void 0,void 0,function(){return Ss(this,function(t){if(e.code!==dg.FAILED_PRECONDITION||e.message!==cw)throw e;return K_("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Kw(t,e){if(0!==e.length)throw new vg(dg.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+aE(e.length,"argument")+".")}function Hw(t,e,n){if(e.length!==n)throw new vg(dg.INVALID_ARGUMENT,"Function "+t+"() requires "+aE(n,"argument")+", but was called with "+aE(e.length,"argument")+".")}function Gw(t,e,n){if(e.length<n)throw new vg(dg.INVALID_ARGUMENT,"Function "+t+"() requires at least "+aE(n,"argument")+", but was called with "+aE(e.length,"argument")+".")}function zw(t,e,n,r){if(e.length<n||e.length>r)throw new vg(dg.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+aE(e.length,"argument")+".")}function Qw(t,e,n,r){Zw(t,e,sE(n)+" argument",r)}function Yw(t,e,n,r){void 0!==r&&Qw(t,e,n,r)}function Xw(t,e,n,r){Zw(t,e,n+" option",r)}function Jw(t,e,n,r){void 0!==r&&Xw(t,e,n,r)}function $w(t,e,n,r,u){void 0!==r&&function(t,e,n){for(var r=[],i=0,o=u;i<o.length;i++){var s=o[i];if(s===n)return;r.push(eE(s))}var a=eE(n);throw new vg(dg.INVALID_ARGUMENT,"Invalid value "+a+" provided to function "+t+'() for option "'+e+'". Acceptable values: '+r.join(", "))}(t,n,r)}function Zw(t,e,n,r){if(!("object"===e?tE(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=eE(r);throw new vg(dg.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function tE(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function eE(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":z_("Unknown wrong type: "+typeof e);if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function nE(t,e,n){if(void 0===n)throw new vg(dg.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+sE(e)+" argument, but it was undefined.")}function rE(n,t,r){$g(t,function(t,e){if(r.indexOf(t)<0)throw new vg(dg.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+n+"(). Available options: "+r.join(", "))})}function iE(t,e,n,r){var i=eE(r);return new vg(dg.INVALID_ARGUMENT,"Function "+t+"() requires its "+sE(n)+" argument to be a "+e+", but it was: "+i)}function oE(t,e,n){if(n<=0)throw new vg(dg.INVALID_ARGUMENT,'Function "'+t+'()" requires its '+sE(e)+" argument to be a positive number, but it was: "+n+".")}function sE(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function aE(t,e){return t+" "+e+(1===t?"":"s")}function uE(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new vg(dg.INVALID_ARGUMENT,t)}return n.prototype=t.prototype,Object.assign(n,t),n}function cE(){if("undefined"==typeof Uint8Array)throw new vg(dg.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function hE(){if(!j_.Lt().ia)throw new vg(dg.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}jw.Mh=3e8;var lE=(vE.fromBase64String=function(t){Hw("Blob.fromBase64String",arguments,1),Qw("Blob.fromBase64String","string",1,t),hE();try{return new vE(tm.fromBase64String(t))}catch(t){throw new vg(dg.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},vE.fromUint8Array=function(t){if(Hw("Blob.fromUint8Array",arguments,1),cE(),!(t instanceof Uint8Array))throw iE("Blob.fromUint8Array","Uint8Array",1,t);return new vE(tm.fromUint8Array(t))},vE.prototype.toBase64=function(){return Hw("Blob.toBase64",arguments,0),hE(),this.ra.toBase64()},vE.prototype.toUint8Array=function(){return Hw("Blob.toUint8Array",arguments,0),cE(),this.ra.toUint8Array()},vE.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},vE.prototype.isEqual=function(t){return this.ra.isEqual(t.ra)},vE),fE=uE(lE,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),pE=(dE.documentId=function(){return dE.ha},dE.prototype.isEqual=function(t){if(!(t instanceof dE))throw iE("isEqual","FieldPath",1,t);return this.oa.isEqual(t.oa)},dE);function dE(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(){if(!(t instanceof Array)||t.length<1)throw new vg(dg.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least 1 element.")}();for(var n=0;n<t.length;++n)if(Qw("FieldPath","string",n,t[n]),0===t[n].length)throw new vg(dg.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.oa=new Mg(t)}function vE(t){hE(),this.ra=t}pE.ha=new pE(Mg.X().K());var yE,gE=new RegExp("[~\\*/\\[\\]]"),mE=(wE.delete=function(){return Kw("FieldValue.delete",arguments),bE.instance},wE.serverTimestamp=function(){return Kw("FieldValue.serverTimestamp",arguments),TE.instance},wE.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Gw("FieldValue.arrayUnion",arguments,1),new AE(t)},wE.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Gw("FieldValue.arrayRemove",arguments,1),new kE(t)},wE.increment=function(t){return Qw("FieldValue.increment","number",1,t),Hw("FieldValue.increment",arguments,1),new RE(t)},wE.prototype.isEqual=function(t){return this===t},wE),bE=(Es(_E,yE=mE),_E);function _E(){return yE.call(this,"FieldValue.delete")||this}function wE(t){this.aa=t}bE.instance=new bE;var EE,TE=(Es(IE,EE=mE),IE);function IE(){return EE.call(this,"FieldValue.serverTimestamp")||this}TE.instance=new TE;var SE,NE,CE,AE=(Es(qE,CE=mE),qE),kE=(Es(VE,NE=mE),VE),RE=(Es(jE,SE=mE),jE),OE=uE(mE,"Use FieldValue.<field>() instead."),PE=(Object.defineProperty(UE.prototype,"latitude",{get:function(){return this._a},enumerable:!0,configurable:!0}),Object.defineProperty(UE.prototype,"longitude",{get:function(){return this.la},enumerable:!0,configurable:!0}),UE.prototype.isEqual=function(t){return this._a===t._a&&this.la===t.la},UE.prototype.p=function(t){return J_(this._a,t._a)||J_(this.la,t.la)},UE),DE=/^__.*__$/,xE=(FE.prototype.da=function(t,e){var n=[];return null!==this.se?n.push(new Gm(t,this.data,this.se,e)):n.push(new Hm(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new zm(t,this.fieldTransforms)),n},FE),LE=(ME.prototype.da=function(t,e){var n=[new Gm(t,this.data,this.se,e)];return 0<this.fieldTransforms.length&&n.push(new zm(t,this.fieldTransforms)),n},ME);function ME(t,e,n){this.data=t,this.se=e,this.fieldTransforms=n}function FE(t,e,n){this.data=t,this.se=e,this.fieldTransforms=n}function UE(t,e){if(Hw("GeoPoint",arguments,2),Qw("GeoPoint","number",1,t),Qw("GeoPoint","number",2,e),!isFinite(t)||t<-90||90<t)throw new vg(dg.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new vg(dg.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._a=t,this.la=e}function jE(t){var e=this;return(e=SE.call(this,"FieldValue.increment")||this).ca=t,e}function VE(t){var e=this;return(e=NE.call(this,"FieldValue.arrayRemove")||this).ua=t,e}function qE(t){var e=this;return(e=CE.call(this,"FieldValue.arrayUnion")||this).ua=t,e}function BE(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw z_("Unexpected case for UserDataSource: "+t)}}var WE=(zE.prototype.Ea=function(t){var e=null==this.path?null:this.path.child(t),n=new zE(this.fa,this.methodName,e,!1,this.fieldTransforms,this.se);return n.wa(t),n},zE.prototype.Ia=function(t){var e=null==this.path?null:this.path.child(t),n=new zE(this.fa,this.methodName,e,!1,this.fieldTransforms,this.se);return n.ma(),n},zE.prototype.Ra=function(t){return new zE(this.fa,this.methodName,null,!0,this.fieldTransforms,this.se)},zE.prototype.Aa=function(t){var e=null===this.path||this.path.U()?"":" (found in field "+this.path.toString()+")";return new vg(dg.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},zE.prototype.contains=function(e){return void 0!==this.se.find(function(t){return e.q(t)})||void 0!==this.fieldTransforms.find(function(t){return e.q(t.field)})},zE.prototype.ma=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.wa(this.path.get(t))},zE.prototype.wa=function(t){if(0===t.length)throw this.Aa("Document fields must not be empty");if(BE(this.fa)&&DE.test(t))throw this.Aa('Document fields cannot begin and end with "__"')},zE),KE=function(t,e){this.cn=t,this.key=e},HE=(GE.prototype.Va=function(t,e){var n=new WE(0,t,Mg.H);YE("Data must be an object, but it was:",n,e);var r=this.ga(e,n);return new xE(new Xm(r),null,n.fieldTransforms)},GE.prototype.pa=function(t,e,n){var r=new WE(2,t,Mg.H);YE("Data must be an object, but it was:",r,e);var i,o,s=this.ga(e,r);if(n){for(var a=new zg(Mg.F),u=0,c=n;u<c.length;u++){var h=c[u],l=void 0;if(h instanceof pE)l=h.oa;else{if("string"!=typeof h)throw z_("Expected stringOrFieldPath to be a string or a FieldPath");l=JE(t,h)}if(!r.contains(l))throw new vg(dg.INVALID_ARGUMENT,"Field '"+l+"' is specified in your field mask but missing from your input data.");a=a.add(l)}i=Dm.Kt(a),o=r.fieldTransforms.filter(function(t){return i.zt(t.field)})}else i=Dm.Gt(r.se),o=r.fieldTransforms;return new xE(new Xm(s),i,o)},GE.prototype.ya=function(o,t){var s=this,a=new WE(1,o,Mg.H);YE("Data must be an object, but it was:",a,t);var u=new zg(Mg.F),c=Xm._e();$g(t,function(t,e){var n=JE(o,t),r=a.Ia(n);if((e=s.ba(e,r))instanceof bE)u=u.add(n);else{var i=s.va(e,r);null!=i&&(u=u.add(n),c.set(n,i))}});var e=Dm.Kt(u);return new LE(c.oe(),e,a.fieldTransforms)},GE.prototype.Sa=function(t,e,n,r){var i=new WE(1,t,Mg.H),o=[XE(t,e)],s=[n];if(r.length%2!=0)throw new vg(dg.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)o.push(XE(t,r[a])),s.push(r[a+1]);for(var u=new zg(Mg.F),c=Xm._e(),h=0;h<o.length;++h){var l=o[h],f=i.Ia(l),p=this.ba(s[h],f);if(p instanceof bE)u=u.add(l);else{var d=this.va(p,f);null!=d&&(u=u.add(l),c.set(l,d))}}var v=Dm.Kt(u);return new LE(c.oe(),v,i.fieldTransforms)},GE.prototype.Da=function(t,e,n){void 0===n&&(n=!1);var r=new WE(n?4:3,t,Mg.H);return this.va(e,r)},GE.prototype.ba=function(t,e){try{return this.Pa(t)}catch(t){var n=$E(t);throw e.Aa(n)}},GE.prototype.va=function(t,e){if(QE(t=this.ba(t,e)))return YE("Unsupported field value:",e,t),this.ga(t,e);if(t instanceof mE)return this.Ca(t,e),null;if(e.path&&e.se.push(e.path),t instanceof Array){if(e.Ta&&4!==e.fa)throw e.Aa("Nested arrays are not supported");return this.ka(t,e)}return this.Na(t,e)},GE.prototype.ga=function(t,r){var i=this,o={};return Zg(t)?r.path&&0<r.path.length&&r.se.push(r.path):$g(t,function(t,e){var n=i.va(e,r.Ea(t));null!=n&&(o[t]=n)}),{mapValue:{fields:o}}},GE.prototype.ka=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=o[i],a=this.va(s,e.Ra(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}},GE.prototype.Ca=function(t,e){if(!BE(e.fa))throw e.Aa(t.aa+"() can only be used with update() and set()");if(null===e.path)throw e.Aa(t.aa+"() is not currently supported inside arrays");if(t instanceof bE){if(2!==e.fa)throw 1===e.fa?e.Aa("FieldValue.delete() can only appear at the top level of your update data"):e.Aa("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.se.push(e.path)}else if(t instanceof TE)e.fieldTransforms.push(new xm(e.path,Tm.instance));else if(t instanceof AE){var n=this.Fa(t.aa,t.ua),r=new Sm(n);e.fieldTransforms.push(new xm(e.path,r))}else if(t instanceof kE){var i=this.Fa(t.aa,t.ua),o=new Nm(i);e.fieldTransforms.push(new xm(e.path,o))}else if(t instanceof RE){var s=this.Da("FieldValue.increment",t.ca),a=new Cm(this.serializer,s);e.fieldTransforms.push(new xm(e.path,a))}else z_("Unknown FieldValue type: "+t)},GE.prototype.Na=function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return this.serializer.Tn(t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=_g.fromDate(t);return{timestampValue:this.serializer.k(n)}}if(t instanceof _g){var r=new _g(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:this.serializer.k(r)}}if(t instanceof PE)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof lE)return{bytesValue:this.serializer.mn(t)};if(t instanceof KE)return{referenceValue:this.serializer.wn(t.key.path,t.cn)};throw e.Aa("Unsupported field value: "+eE(t))},GE.prototype.Fa=function(r,t){var i=this;return t.map(function(t,e){var n=new WE(3,r,Mg.H);return i.va(t,n.Ra(e))})},GE);function GE(t,e){this.serializer=t,this.Pa=e}function zE(t,e,n,r,i,o){this.fa=t,this.methodName=e,this.path=n,this.Ta=r,void 0===i&&this.ma(),this.Ta=void 0!==r&&r,this.fieldTransforms=i||[],this.se=o||[]}function QE(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof _g||t instanceof PE||t instanceof lE||t instanceof KE||t instanceof mE)}function YE(t,e,n){if(!QE(n)||!tE(n)){var r=eE(n);throw"an object"===r?e.Aa(t+" a custom object"):e.Aa(t+" "+r)}}function XE(t,e){if(e instanceof pE)return e.oa;if("string"==typeof e)return JE(t,e);throw new vg(dg.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function JE(t,e){try{return function(e){if(0<=e.search(gE))throw new vg(dg.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(pE.bind.apply(pE,ks([void 0],e.split("."))))}catch(t){throw new vg(dg.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).oa}catch(e){var n=$E(e);throw new vg(dg.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function $E(t){return t instanceof Error?t.message:t.toString()}var ZE,tT,eT=(yT.prototype.reset=function(){this.xa=0},yT.prototype.qa=function(){this.xa=this.Oa},yT.prototype.Qa=function(t){var e=this;this.cancel();var n=Math.floor(this.xa+this.Wa()),r=Math.max(0,Date.now()-this.Ua),i=Math.max(0,n-r);0<this.xa&&K_("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.xa+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ba=this.$a.eo(this.Fr,i,function(){return e.Ua=Date.now(),t()}),this.xa*=this.La,this.xa<this.Ma&&(this.xa=this.Ma),this.xa>this.Oa&&(this.xa=this.Oa)},yT.prototype.cancel=function(){null!==this.Ba&&(this.Ba.cancel(),this.Ba=null)},yT.prototype.Wa=function(){return(Math.random()-.5)*this.xa},yT),nT=(vT.prototype.Ya=function(){return 1===this.state||2===this.state||4===this.state},vT.prototype.Xa=function(){return 2===this.state},vT.prototype.start=function(){3!==this.state?this.auth():this.Za()},vT.prototype.stop=function(){return Is(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.Ya()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},vT.prototype.tu=function(){this.state=0,this.Ja.reset()},vT.prototype.eu=function(){var t=this;this.Xa()&&null===this.Ha&&(this.Ha=this.$a.eo(this.ja,6e4,function(){return t.su()}))},vT.prototype.nu=function(t){this.iu(),this.stream.send(t)},vT.prototype.su=function(){return Is(this,void 0,void 0,function(){return Ss(this,function(t){return this.Xa()?[2,this.close(0)]:[2]})})},vT.prototype.iu=function(){this.Ha&&(this.Ha.cancel(),this.Ha=null)},vT.prototype.close=function(e,n){return Is(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.iu(),this.Ja.cancel(),this.za++,3!==e?this.Ja.reset():n&&n.code===dg.RESOURCE_EXHAUSTED?(H_(n.toString()),H_("Using maximum backoff delay to prevent overloading the backend."),this.Ja.qa()):n&&n.code===dg.UNAUTHENTICATED&&this.Ga._(),null!==this.stream&&(this.ru(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.ou(n)];case 1:return t.sent(),[2]}})})},vT.prototype.ru=function(){},vT.prototype.auth=function(){var n=this;this.state=1;var t=this.hu(this.za),e=this.za;this.Ga.getToken().then(function(t){n.za===e&&n.au(t)},function(e){t(function(){var t=new vg(dg.UNKNOWN,"Fetching auth token failed: "+e.message);return n.uu(t)})})},vT.prototype.au=function(t){var e=this,n=this.hu(this.za);this.stream=this.cu(t),this.stream._u(function(){n(function(){return e.state=2,e.listener._u()})}),this.stream.ou(function(t){n(function(){return e.uu(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},vT.prototype.Za=function(){var t=this;this.state=4,this.Ja.Qa(function(){return Is(t,void 0,void 0,function(){return Ss(this,function(t){return this.state=0,this.start(),[2]})})})},vT.prototype.uu=function(t){return K_("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},vT.prototype.hu=function(e){var n=this;return function(t){n.$a.qr(function(){return n.za===e?t():(K_("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},vT),rT=(Es(dT,tT=nT),dT.prototype.cu=function(t){return this.Ka.lu("Listen",t)},dT.prototype.onMessage=function(t){this.Ja.reset();var e=this.serializer.kn(t),n=this.serializer.Fn(t);return this.listener.du(e,n)},dT.prototype.fu=function(t){var e={};e.database=this.serializer.pn,e.addTarget=this.serializer.xe(t);var n=this.serializer.ei(t);n&&(e.labels=n),this.nu(e)},dT.prototype.Tu=function(t){var e={};e.database=this.serializer.pn,e.removeTarget=t,this.nu(e)},dT),iT=(Es(pT,ZE=nT),Object.defineProperty(pT.prototype,"Eu",{get:function(){return this.mu},enumerable:!0,configurable:!0}),pT.prototype.start=function(){this.mu=!1,ZE.prototype.start.call(this)},pT.prototype.ru=function(){this.mu&&this.wu([])},pT.prototype.cu=function(t){return this.Ka.lu("Write",t)},pT.prototype.onMessage=function(t){if(Q_(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=this.serializer.En(t.streamToken),this.mu){this.Ja.reset();var e=this.serializer.Wn(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.Iu(n,e)}return Q_(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.mu=!0,this.listener.Ru()},pT.prototype.Au=function(){var t={};t.database=this.serializer.pn,this.nu(t)},pT.prototype.wu=function(t){var e=this,n={streamToken:this.serializer.mn(this.lastStreamToken),writes:t.map(function(t){return e.serializer.$n(t)})};this.nu(n)},pT),oT=(fT.prototype.Pu=function(t){return new iT(this.$a,this.Ka,this.credentials,this.serializer,t)},fT.prototype.Vu=function(t){return new rT(this.$a,this.Ka,this.credentials,this.serializer,t)},fT.prototype.commit=function(t){var e=this,n={database:this.serializer.pn,writes:t.map(function(t){return e.serializer.$n(t)})};return this.gu("Commit",n).then(function(t){return e.serializer.Wn(t.writeResults,t.commitTime)})},fT.prototype.pu=function(e){var i=this,t={database:this.serializer.pn,documents:e.map(function(t){return i.serializer.An(t)})};return this.yu("BatchGetDocuments",t).then(function(t){var n=r_();t.forEach(function(t){var e=i.serializer.Cn(t);n=n.it(e.key,e)});var r=[];return e.forEach(function(t){var e=n.get(t);Q_(!!e,"Missing entity in write response for "+t),r.push(e)}),r})},fT.prototype.gu=function(e,n){var r=this;return this.credentials.getToken().then(function(t){return r.Ka.gu(e,n,t)}).catch(function(t){throw t.code===dg.UNAUTHENTICATED&&r.credentials._(),t})},fT.prototype.yu=function(e,n){var r=this;return this.credentials.getToken().then(function(t){return r.Ka.yu(e,n,t)}).catch(function(t){throw t.code===dg.UNAUTHENTICATED&&r.credentials._(),t})},fT),sT=(lT.prototype.pu=function(r){return Is(this,void 0,void 0,function(){var e,n=this;return Ss(this,function(t){switch(t.label){case 0:if(this.ku(),0<this.mutations.length)throw new vg(dg.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.bu.pu(r)];case 1:return[2,((e=t.sent()).forEach(function(t){t instanceof hb||t instanceof cb?n.Nu(t):z_("Document in a transaction was a "+t.constructor.name)}),e)]}})})},lT.prototype.set=function(t,e){this.write(e.da(t,this.Zt(t))),this.Cu.add(t)},lT.prototype.update=function(t,e){try{this.write(e.da(t,this.Fu(t)))}catch(t){this.Du=t}this.Cu.add(t)},lT.prototype.delete=function(t){this.write([new Qm(t,this.Zt(t))]),this.Cu.add(t)},lT.prototype.commit=function(){return Is(this,void 0,void 0,function(){var e,n=this;return Ss(this,function(t){switch(t.label){case 0:if(this.ku(),this.Du)throw this.Du;return e=this.vu,this.mutations.forEach(function(t){e=e.remove(t.key)}),e.forEach(function(t,e){n.mutations.push(new Ym(t,n.Zt(t)))}),[4,this.bu.commit(this.mutations)];case 1:return t.sent(),this.Su=!0,[2]}})})},lT.prototype.Nu=function(t){var e;if(t instanceof cb)e=t.version;else{if(!(t instanceof hb))throw z_("Document in a transaction was a "+t.constructor.name);e=wg.S()}var n=this.vu.get(t.key);if(null!==n){if(!e.isEqual(n))throw new vg(dg.ABORTED,"Document version changed between two reads.")}else this.vu=this.vu.it(t.key,e)},lT.prototype.Zt=function(t){var e=this.vu.get(t);return!this.Cu.has(t)&&e?Lm.updateTime(e):Lm.NONE},lT.prototype.Fu=function(t){var e=this.vu.get(t);if(this.Cu.has(t)||!e)return Lm.exists(!0);if(e.isEqual(wg.S()))throw new vg(dg.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Lm.updateTime(e)},lT.prototype.write=function(t){this.ku(),this.mutations=this.mutations.concat(t)},lT.prototype.ku=function(){},lT),aT=(hT.prototype.xu=function(){var t=this;0===this.Mu&&(this.Bu("Unknown"),this.Lu=this.Nr.eo("online_state_timeout",1e4,function(){return t.Lu=null,t.Uu("Backend didn't respond within 10 seconds."),t.Bu("Offline"),Promise.resolve()}))},hT.prototype.qu=function(t){"Online"===this.state?this.Bu("Unknown"):(this.Mu++,1<=this.Mu&&(this.Qu(),this.Uu("Connection failed 1 times. Most recent error: "+t.toString()),this.Bu("Offline")))},hT.prototype.set=function(t){this.Qu(),this.Mu=0,"Online"===t&&(this.Ou=!1),this.Bu(t)},hT.prototype.Bu=function(t){t!==this.state&&(this.state=t,this.$u(t))},hT.prototype.Uu=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Ou?(H_(e),this.Ou=!1):K_("OnlineStateTracker",e)},hT.prototype.Qu=function(){null!==this.Lu&&(this.Lu.cancel(),this.Lu=null)},hT),uT=(cT.prototype.start=function(){return this.enableNetwork()},cT.prototype.enableNetwork=function(){return Is(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.Ju()?(e=this.nc,[4,this.Wu.ph()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.hc()?this.ac():this.Xu.set("Unknown"),[4,this.uc()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},cT.prototype.disableNetwork=function(){return Is(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.cc()];case 1:return t.sent(),this.Xu.set("Offline"),[2]}})})},cT.prototype.cc=function(){return Is(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return[4,this.nc.stop()];case 1:return t.sent(),[4,this.Zu.stop()];case 2:return t.sent(),0<this.ju.length&&(K_("RemoteStore","Stopping write stream with "+this.ju.length+" pending writes"),this.ju=[]),this._c(),[2]}})})},cT.prototype.lc=function(){return Is(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return K_("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.cc()];case 1:return t.sent(),this.zu.lc(),this.Xu.set("Unknown"),[2]}})})},cT.prototype.listen=function(t){this.Ku.has(t.targetId)||(this.Ku.set(t.targetId,t),this.hc()?this.ac():this.Zu.Xa()&&this.dc(t))},cT.prototype.fc=function(t){this.Ku.delete(t),this.Zu.Xa()&&this.Tc(t),0===this.Ku.size&&(this.Zu.Xa()?this.Zu.eu():this.Ju()&&this.Xu.set("Unknown"))},cT.prototype.un=function(t){return this.Ku.get(t)||null},cT.prototype.an=function(t){return this.mc.an(t)},cT.prototype.dc=function(t){this.Gu.Bs(t.targetId),this.Zu.fu(t)},cT.prototype.Tc=function(t){this.Gu.Bs(t),this.Zu.Tu(t)},cT.prototype.ac=function(){this.Gu=new E_(this),this.Zu.start(),this.Xu.xu()},cT.prototype.hc=function(){return this.Ju()&&!this.Zu.Ya()&&0<this.Ku.size},cT.prototype.Ju=function(){return this.isPrimary&&this.networkEnabled},cT.prototype._c=function(){this.Gu=null},cT.prototype.tc=function(){return Is(this,void 0,void 0,function(){var n=this;return Ss(this,function(t){return this.Ku.forEach(function(t,e){n.dc(t)}),[2]})})},cT.prototype.ec=function(e){return Is(this,void 0,void 0,function(){return Ss(this,function(t){return this._c(),this.hc()?(this.Xu.qu(e),this.ac()):this.Xu.set("Unknown"),[2]})})},cT.prototype.sc=function(n,r){return Is(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return this.Xu.set("Online"),n instanceof v_&&2===n.state&&n.cause?[2,this.Ec(n)]:(n instanceof p_?this.Gu.zs(n):n instanceof d_?this.Gu.sn(n):this.Gu.Ys(n),r.isEqual(wg.MIN)?[3,4]:[4,this.Wu.bh()]);case 1:return e=t.sent(),0<=r.D(e)?[4,this.wc(r)]:[3,3];case 2:t.sent(),t.label=3;case 3:t.label=4;case 4:return[2]}})})},cT.prototype.wc=function(r){var i=this,t=this.Gu.rn(r);return t.Ts.forEach(function(t,e){if(0<t.resumeToken.Ot()){var n=i.Ku.get(e);n&&i.Ku.set(e,n.ss(t.resumeToken,r))}}),t.ms.forEach(function(t){var e=i.Ku.get(t);if(e){i.Ku.set(t,e.ss(tm.xt,e.ts)),i.Tc(t);var n=new Xb(e.target,t,1,e.sequenceNumber);i.dc(n)}}),this.mc.vh(t)},cT.prototype.Ec=function(t){var n=this,r=t.cause,i=Promise.resolve();return t.targetIds.forEach(function(e){i=i.then(function(){return Is(n,void 0,void 0,function(){return Ss(this,function(t){return this.Ku.has(e)?[2,(this.Ku.delete(e),this.Gu.removeTarget(e),this.mc.Ic(e,r))]:[2]})})})}),i},cT.prototype.uc=function(){return Is(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return this.Rc()?(e=0<this.ju.length?this.ju[this.ju.length-1].batchId:-1,[4,this.Wu.Oh(e)]):[3,5];case 1:return null!==(n=t.sent())?[3,2]:(0===this.ju.length&&this.nc.eu(),[3,4]);case 2:return this.Ac(n),[4,this.uc()];case 3:t.sent(),t.label=4;case 4:t.label=5;case 5:return this.Pc()&&this.Vc(),[2]}})})},cT.prototype.Rc=function(){return this.Ju()&&this.ju.length<10},cT.prototype.gc=function(){return this.ju.length},cT.prototype.Ac=function(t){this.ju.push(t),this.nc.Xa()&&this.nc.Eu&&this.nc.wu(t.mutations)},cT.prototype.Pc=function(){return this.Ju()&&!this.nc.Ya()&&0<this.ju.length},cT.prototype.Vc=function(){this.nc.start()},cT.prototype.ic=function(){return Is(this,void 0,void 0,function(){return Ss(this,function(t){return this.nc.Au(),[2]})})},cT.prototype.oc=function(){var r=this;return this.Wu.yh(this.nc.lastStreamToken).then(function(){for(var t=0,e=r.ju;t<e.length;t++){var n=e[t];r.nc.wu(n.mutations)}}).catch(Ww)},cT.prototype.Iu=function(t,e){var n=this,r=this.ju.shift(),i=iw.from(r,t,e,this.nc.lastStreamToken);return this.mc.pc(i).then(function(){return n.uc()})},cT.prototype.rc=function(n){return Is(this,void 0,void 0,function(){var e=this;return Ss(this,function(t){return n&&0<this.ju.length?[2,(this.nc.Eu?this.yc(n):this.bc(n)).then(function(){e.Pc()&&e.Vc()})]:[2]})})},cT.prototype.bc=function(e){return Is(this,void 0,void 0,function(){return Ss(this,function(t){return t_(e.code)?[2,(K_("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.nc.lastStreamToken),this.nc.lastStreamToken=tm.xt,this.Wu.yh(tm.xt).catch(Ww))]:[2]})})},cT.prototype.yc=function(i){return Is(this,void 0,void 0,function(){var e,n,r=this;return Ss(this,function(t){return t_(n=i.code)&&n!==dg.ABORTED?(e=this.ju.shift(),[2,(this.nc.tu(),this.mc.vc(e.batchId,i).then(function(){return r.uc()}))]):[2]})})},cT.prototype.Sc=function(){return new sT(this.bu)},cT.prototype.Yu=function(){return Is(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.cc()];case 1:return t.sent(),this.Xu.set("Unknown"),[4,this.enableNetwork()];case 2:return t.sent(),[2]}})})},cT.prototype.Dc=function(){return Is(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.Ju()?(K_("RemoteStore","RemoteStore restarting streams for new credential"),[4,this.Yu()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},cT.prototype.Cc=function(e){return Is(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return(this.isPrimary=e)&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,5];case 2:return e?[3,4]:[4,this.cc()];case 3:t.sent(),this.Xu.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})},cT);function cT(t,e,n,r,i){var o=this;this.Wu=t,this.bu=e,this.ju=[],this.Ku=new Map,this.Gu=null,this.networkEnabled=!1,this.isPrimary=!1,this.zu=i,this.zu.Hu(function(t){n.qr(function(){return Is(o,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.Ju()?(K_("RemoteStore","Restarting streams for network reachability change."),[4,this.Yu()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Xu=new aT(n,r),this.Zu=this.bu.Vu({_u:this.tc.bind(this),ou:this.ec.bind(this),du:this.sc.bind(this)}),this.nc=this.bu.Pu({_u:this.ic.bind(this),ou:this.rc.bind(this),Ru:this.oc.bind(this),Iu:this.Iu.bind(this)})}function hT(t,e){this.Nr=t,this.$u=e,this.state="Unknown",this.Mu=0,this.Lu=null,this.Ou=!0}function lT(t){this.bu=t,this.vu=u_(),this.mutations=[],this.Su=!1,this.Du=null,this.Cu=new Set}function fT(t,e,n,r){this.$a=t,this.Ka=e,this.credentials=n,this.serializer=r}function pT(t,e,n,r,i){var o=this;return(o=ZE.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).serializer=r,o.mu=!1,o.lastStreamToken=tm.xt,o}function dT(t,e,n,r,i){var o=this;return(o=tT.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).serializer=r,o}function vT(t,e,n,r,i,o){this.$a=t,this.ja=n,this.Ka=r,this.Ga=i,this.listener=o,this.state=0,this.za=0,this.Ha=null,this.stream=null,this.Ja=new eT(t,e)}function yT(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.$a=t,this.Fr=e,this.Ma=n,this.La=r,this.Oa=i,this.xa=0,this.Ba=null,this.Ua=Date.now(),this.reset()}function gT(t,e){return"firestore_clients_"+t+"_"+e}function mT(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.t()&&(r+="_"+e.uid),r}function bT(t,e){return"firestore_targets_"+t+"_"+e}function _T(t){this.key=t}function wT(t){this.key=t}function ET(t,e,n){this.query=t,this.targetId=e,this.view=n}function TT(t){this.key=t,this.Y_=!1}function IT(){this.kl=null,this.targetId=0,this.Nl=[]}var ST=($T.kc=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new vg(r.error.code,r.error.message)),i?new $T(t,e,r.state,o):(H_("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},$T.prototype.Nc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},$T),NT=(JT.kc=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new vg(n.error.code,n.error.message)),r?new JT(t,n.state,i):(H_("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},JT.prototype.Nc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},JT),CT=(XT.kc=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=f_(),o=0;r&&o<n.activeTargetIds.length;++o)r=im(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new XT(t,i):(H_("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},XT),AT=(YT.kc=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new YT(e.clientId,e.onlineState):(H_("SharedClientState","Failed to parse online state: "+t),null)},YT),kT=(QT.prototype.Fc=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},QT.prototype.$c=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},QT.prototype.Nc=function(){var t={activeTargetIds:this.activeTargetIds.j(),updateTimeMs:Date.now()};return JSON.stringify(t)},QT),RT=(zT.Uc=function(t){return!(!t.window||null==t.window.localStorage)},zT.prototype.start=function(){return Is(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f=this;return Ss(this,function(t){switch(t.label){case 0:return[4,this.mc.Jh()];case 1:for(e=t.sent(),n=0,r=e;n<r.length;n++)(i=r[n])!==this.Mc&&(o=this.getItem(gT(this.persistenceKey,i)))&&(s=CT.kc(i,o))&&(this.Lc[s.clientId]=s);for(this.zc(),(a=this.storage.getItem(this.Gc))&&(u=this.Hc(a))&&this.Jc(u),c=0,h=this.Bc;c<h.length;c++)l=h[c],this.xc(l);return this.Bc=[],this.platform.window.addEventListener("unload",function(){return f.lc()}),this.ko=!0,[2]}})})},zT.prototype.Cr=function(t){this.setItem(this.Qc,JSON.stringify(t))},zT.prototype.Yc=function(){var n=f_();return $g(this.Lc,function(t,e){n=n.Ft(e.activeTargetIds)}),n},zT.prototype.Xc=function(t){for(var e in this.Lc)if(this.Lc.hasOwnProperty(e)&&this.Lc[e].activeTargetIds.has(t))return!0;return!1},zT.prototype.Zc=function(t){this.t_(t,"pending")},zT.prototype.e_=function(t,e,n){this.t_(t,e,n),this.s_(t)},zT.prototype.n_=function(t){var e="not-current";if(this.Xc(t)){var n=this.storage.getItem(bT(this.persistenceKey,t));if(n){var r=NT.kc(t,n);r&&(e=r.state)}}return this.i_.Fc(t),this.zc(),e},zT.prototype.r_=function(t){this.i_.$c(t),this.zc()},zT.prototype.o_=function(t){return this.i_.activeTargetIds.has(t)},zT.prototype.h_=function(t){this.removeItem(bT(this.persistenceKey,t))},zT.prototype.a_=function(t,e,n){this.u_(t,e,n)},zT.prototype.oh=function(t,e,n){var r=this;e.forEach(function(t){r.s_(t)}),this.currentUser=t,n.forEach(function(t){r.Zc(t)})},zT.prototype.c_=function(t){this.__(t)},zT.prototype.lc=function(){this.ko&&(this.platform.window.removeEventListener("storage",this.Oc),this.removeItem(this.qc),this.ko=!1)},zT.prototype.getItem=function(t){var e=this.storage.getItem(t);return K_("SharedClientState","READ",t,e),e},zT.prototype.setItem=function(t,e){K_("SharedClientState","SET",t,e),this.storage.setItem(t,e)},zT.prototype.removeItem=function(t){K_("SharedClientState","REMOVE",t),this.storage.removeItem(t)},zT.prototype.xc=function(a){var t=this;if(a.storageArea===this.storage){if(K_("SharedClientState","EVENT",a.key,a.newValue),a.key===this.qc)return void H_("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.$a.qr(function(){return Is(t,void 0,void 0,function(){var e,n,r,i,o,s;return Ss(this,function(t){if(this.ko){if(null!==a.key)if(this.Wc.test(a.key)){if(null==a.newValue)return e=this.l_(a.key),[2,this.d_(e,null)];if(n=this.f_(a.key,a.newValue))return[2,this.d_(n.clientId,n)]}else if(this.jc.test(a.key)){if(null!==a.newValue&&(r=this.T_(a.key,a.newValue)))return[2,this.m_(r)]}else if(this.Kc.test(a.key)){if(null!==a.newValue&&(i=this.E_(a.key,a.newValue)))return[2,this.w_(i)]}else if(a.key===this.Gc){if(null!==a.newValue&&(o=this.Hc(a.newValue)))return[2,this.Jc(o)]}else a.key===this.Qc&&(s=function(t){var e=pw.kr;if(null!=t)try{var n=JSON.parse(t);Q_("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(t){H_("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(a.newValue))!==pw.kr&&this.vr(s)}else this.Bc.push(a);return[2]})})})}},Object.defineProperty(zT.prototype,"i_",{get:function(){return this.Lc[this.Mc]},enumerable:!0,configurable:!0}),zT.prototype.zc=function(){this.setItem(this.qc,this.i_.Nc())},zT.prototype.t_=function(t,e,n){var r=new ST(this.currentUser,t,e,n),i=mT(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Nc())},zT.prototype.s_=function(t){var e=mT(this.persistenceKey,this.currentUser,t);this.removeItem(e)},zT.prototype.__=function(t){var e={clientId:this.Mc,onlineState:t};this.storage.setItem(this.Gc,JSON.stringify(e))},zT.prototype.u_=function(t,e,n){var r=bT(this.persistenceKey,t),i=new NT(t,e,n);this.setItem(r,i.Nc())},zT.prototype.l_=function(t){var e=this.Wc.exec(t);return e?e[1]:null},zT.prototype.f_=function(t,e){var n=this.l_(t);return CT.kc(n,e)},zT.prototype.T_=function(t,e){var n=this.jc.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return ST.kc(new hg(i),r,e)},zT.prototype.E_=function(t,e){var n=this.Kc.exec(t),r=Number(n[1]);return NT.kc(r,e)},zT.prototype.Hc=function(t){return AT.kc(t)},zT.prototype.m_=function(e){return Is(this,void 0,void 0,function(){return Ss(this,function(t){return e.user.uid===this.currentUser.uid?[2,this.mc.I_(e.batchId,e.state,e.error)]:(K_("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},zT.prototype.w_=function(t){return this.mc.R_(t.targetId,t.state,t.error)},zT.prototype.d_=function(t,e){var n=this,r=this.Yc();e?this.Lc[t]=e:delete this.Lc[t];var i=this.Yc(),o=[],s=[];return i.forEach(function(e){return Is(n,void 0,void 0,function(){return Ss(this,function(t){return r.has(e)||o.push(e),[2]})})}),r.forEach(function(e){return Is(n,void 0,void 0,function(){return Ss(this,function(t){return i.has(e)||s.push(e),[2]})})}),this.mc.A_(o,s)},zT.prototype.Jc=function(t){this.Lc[t.clientId]&&this.$u(t.onlineState)},zT),OT=(GT.prototype.Zc=function(t){},GT.prototype.e_=function(t,e,n){},GT.prototype.n_=function(t){return this.P_.Fc(t),this.V_[t]||"not-current"},GT.prototype.a_=function(t,e,n){this.V_[t]=e},GT.prototype.r_=function(t){this.P_.$c(t)},GT.prototype.o_=function(t){return this.P_.activeTargetIds.has(t)},GT.prototype.h_=function(t){delete this.V_[t]},GT.prototype.Yc=function(){return this.P_.activeTargetIds},GT.prototype.Xc=function(t){return this.P_.activeTargetIds.has(t)},GT.prototype.start=function(){return this.P_=new kT,Promise.resolve()},GT.prototype.oh=function(t,e,n){},GT.prototype.c_=function(t){},GT.prototype.lc=function(){},GT.prototype.Cr=function(t){},GT),PT=(HT.prototype.next=function(){return this.g_+=2,this.g_},HT.p_=function(){return new HT(0)},HT.y_=function(){return new HT(-1)},HT),DT=(Object.defineProperty(KT.prototype,"C_",{get:function(){return this.b_},enumerable:!0,configurable:!0}),KT.prototype.k_=function(t,e){var a=this,u=e?e.N_:new g_,c=e?e.D_:this.D_,h=e?e._s:this._s,l=c,f=!1,p=this.query.je()&&c.size===this.query.limit?c.last():null,d=this.query.Ke()&&c.size===this.query.limit?c.first():null;if(t.ut(function(t,e){var n=c.get(t),r=e instanceof cb?e:null;r=r&&(a.query.matches(r)?r:null);var i=!!n&&a._s.has(n.key),o=!!r&&(r.te||a._s.has(r.key)&&r.hasCommittedMutations),s=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(u.track({type:3,doc:r}),s=!0):a.F_(n,r)||(u.track({type:2,doc:r}),s=!0,(p&&0<a.query.Be(r,p)||d&&a.query.Be(r,d)<0)&&(f=!0)):!n&&r?(u.track({type:0,doc:r}),s=!0):n&&!r&&(u.track({type:1,doc:n}),s=!0,(p||d)&&(f=!0)),s&&(h=r?(l=l.add(r),o?h.add(t):h.delete(t)):(l=l.delete(t),h.delete(t)))}),this.query.je()||this.query.Ke())for(;l.size>this.query.limit;){var n=this.query.je()?l.last():l.first();l=l.delete(n.key),h=h.delete(n.key),u.track({type:1,doc:n})}return{D_:l,N_:u,M_:f,_s:h}},KT.prototype.F_=function(t,e){return t.te&&e.hasCommittedMutations&&!e.te},KT.prototype.nr=function(t,e,n){var o=this,r=this.D_;this.D_=t.D_,this._s=t._s;var i=t.N_.us();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.query.Be(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z_("Unknown ChangeType: "+t)}}var r,i}),this.L_(n);var s=e?this.O_():[],a=0===this.S_.size&&this.As?1:0,u=a!==this.v_;return this.v_=a,0!==i.length||u?{snapshot:new m_(this.query,t.D_,r,i,t._s,0==a,u,!1),x_:s}:{x_:s}},KT.prototype.B_=function(t){return this.As&&"Offline"===t?(this.As=!1,this.nr({D_:this.D_,N_:new g_,_s:this._s,M_:!1},!1)):{x_:[]}},KT.prototype.U_=function(t){return!this.b_.has(t)&&!!this.D_.has(t)&&!this.D_.get(t).te},KT.prototype.L_=function(t){var e=this;t&&(t.Ps.forEach(function(t){return e.b_=e.b_.add(t)}),t.Vs.forEach(function(t){}),t.gs.forEach(function(t){return e.b_=e.b_.delete(t)}),this.As=t.As)},KT.prototype.O_=function(){var e=this;if(!this.As)return[];var n=this.S_;this.S_=h_(),this.D_.forEach(function(t){e.U_(t.key)&&(e.S_=e.S_.add(t.key))});var r=[];return n.forEach(function(t){e.S_.has(t)||r.push(new wT(t))}),this.S_.forEach(function(t){n.has(t)||r.push(new _T(t))}),r},KT.prototype.q_=function(t){this.b_=t.zh,this.S_=h_();var e=this.k_(t.documents);return this.nr(e,!0)},KT.prototype.Q_=function(){return m_.fs(this.query,this.D_,this._s,0===this.v_)},KT),xT=(WT.prototype.K_=function(){this.G_()},WT.prototype.G_=function(){var t=this;this.Ja.Qa(function(){return Is(t,void 0,void 0,function(){var e,n,r=this;return Ss(this,function(t){return e=this.W_.Sc(),(n=this.z_(e))&&n.then(function(t){r.Nr.qr(function(){return e.commit().then(function(){r.Lr.resolve(t)}).catch(function(t){r.H_(t)})})}).catch(function(t){r.H_(t)}),[2]})})})},WT.prototype.z_=function(t){try{var e=this.updateFunction(t);return!nm(e)&&e.catch&&e.then?e:(this.Lr.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Lr.reject(t),null}},WT.prototype.H_=function(t){var e=this;0<this.j_&&this.J_(t)?(--this.j_,this.Nr.qr(function(){return e.G_(),Promise.resolve()})):this.Lr.reject(t)},WT.prototype.J_=function(t){if("FirebaseError"!==t.name)return!1;var e=t.code;return"aborted"===e||"failed-precondition"===e||!t_(e)},WT),LT=(Object.defineProperty(BT.prototype,"cl",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),BT.prototype.subscribe=function(t){this.tl=t},BT.prototype.listen=function(s){return Is(this,void 0,void 0,function(){var e,n,r,i,o;return Ss(this,function(t){switch(t.label){case 0:return this._l("listen()"),(r=this.el.get(s))?(e=r.targetId,this.X_.n_(e),n=r.view.Q_(),[3,4]):[3,1];case 1:return[4,this.Wu.Uh(s.xe())];case 2:return i=t.sent(),o=this.X_.n_(i.targetId),e=i.targetId,[4,this.ll(s,e,"current"===o)];case 3:n=t.sent(),this.isPrimary&&this.W_.listen(i),t.label=4;case 4:return[2,(this.tl.du([n]),e)]}})})},BT.prototype.ll=function(a,u,c){return Is(this,void 0,void 0,function(){var e,n,r,i,o,s;return Ss(this,function(t){switch(t.label){case 0:return[4,this.Wu.Kh(a,!0)];case 1:return e=t.sent(),n=new DT(a,e.zh),r=n.k_(e.documents),i=__.Rs(u,c&&"Offline"!==this.onlineState),o=n.nr(r,!0===this.isPrimary,i),s=new ET(a,u,n),[2,(this.el.set(a,s),this.sl.has(u)?this.sl.get(u).push(a):this.sl.set(u,[a]),o.snapshot)]}})})},BT.prototype.dl=function(r){return Is(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,this.Wu.Kh(r.query,!0)];case 1:return e=t.sent(),n=r.view.q_(e),[2,(this.isPrimary&&this.fl(r.targetId,n.x_),n)]}})})},BT.prototype.fc=function(i){return Is(this,void 0,void 0,function(){var e,n,r=this;return Ss(this,function(t){switch(t.label){case 0:return this._l("unlisten()"),e=this.el.get(i),1<(n=this.sl.get(e.targetId)).length?[2,(this.sl.set(e.targetId,n.filter(function(t){return!t.isEqual(i)})),void this.el.delete(i))]:this.isPrimary?(this.X_.r_(e.targetId),this.X_.Xc(e.targetId)?[3,2]:[4,this.Wu.jh(e.targetId,!1).then(function(){r.X_.h_(e.targetId),r.W_.fc(e.targetId),r.Tl(e.targetId)}).catch(Ww)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return this.Tl(e.targetId),[4,this.Wu.jh(e.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})},BT.prototype.write=function(n,r){return Is(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return this._l("write()"),[4,this.Wu.lh(n)];case 1:return e=t.sent(),this.X_.Zc(e.batchId),this.ml(e.batchId,r),[4,this.El(e.zi)];case 2:return t.sent(),[4,this.W_.uc()];case 3:return t.sent(),[2]}})})},BT.prototype.runTransaction=function(t,e,n){new xT(t,this.W_,e,n).K_()},BT.prototype.vh=function(n){return Is(this,void 0,void 0,function(){var e,r=this;return Ss(this,function(t){switch(t.label){case 0:this._l("applyRemoteEvent()"),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.Wu.vh(n)];case 2:return e=t.sent(),n.Ts.forEach(function(t,e){var n=r.rl.get(e);n&&(Q_(t.Ps.size+t.Vs.size+t.gs.size<=1,"Limbo resolution for single document contains multiple changes."),0<t.Ps.size?n.Y_=!0:0<t.Vs.size?Q_(n.Y_,"Received change for limbo target document without add."):0<t.gs.size&&(Q_(n.Y_,"Received remove for limbo target document without add."),n.Y_=!1))}),[4,this.El(e,n)];case 3:return t.sent(),[3,6];case 4:return[4,Ww(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},BT.prototype.B_=function(r,t){if(this.isPrimary&&0===t||!this.isPrimary&&1===t){this._l("applyOnlineStateChange()");var i=[];this.el.forEach(function(t,e){var n=e.view.B_(r);n.snapshot&&i.push(n.snapshot)}),this.tl.wl(r),this.tl.du(i),this.onlineState=r,this.isPrimary&&this.X_.c_(r)}},BT.prototype.Ic=function(a,u){return Is(this,void 0,void 0,function(){var e,n,r,i,o,s=this;return Ss(this,function(t){switch(t.label){case 0:return this._l("rejectListens()"),this.X_.a_(a,"rejected",u),e=this.rl.get(a),(n=e&&e.key)?(this.il=this.il.remove(n),this.rl.delete(a),this.Il(),r=(r=new Vg(Ug.F)).it(n,new hb(n,wg.S())),i=h_().add(n),o=new b_(wg.MIN,new Map,new zg(J_),r,i),[2,this.vh(o)]):[4,this.Wu.jh(a,!1).then(function(){return s.Tl(a,u)}).catch(Ww)];case 1:return t.sent(),[2]}})})},BT.prototype.I_=function(n,r,i){return Is(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return this._l("applyBatchState()"),[4,this.Wu.fh(n)];case 1:return null===(e=t.sent())?[3,6]:"pending"!==r?[3,3]:[4,this.W_.uc()];case 2:return t.sent(),[3,4];case 3:"acknowledged"===r||"rejected"===r?(this.Rl(n,i||null),this.Wu.Yh(n)):z_("Unknown batchState: "+r),t.label=4;case 4:return[4,this.El(e)];case 5:return t.sent(),[3,7];case 6:K_("SyncEngine","Cannot apply mutation batch with id: "+n),t.label=7;case 7:return[2]}})})},BT.prototype.pc=function(r){return Is(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:this._l("applySuccessfulWrite()"),e=r.batch.batchId,this.Rl(e,null),this.Al(e),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.Wu.mh(r)];case 2:return n=t.sent(),this.X_.e_(e,"acknowledged"),[4,this.El(n)];case 3:return t.sent(),[3,6];case 4:return[4,Ww(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},BT.prototype.vc=function(n,r){return Is(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:this._l("rejectFailedWrite()"),this.Rl(n,r),this.Al(n),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.Wu.Ah(n)];case 2:return e=t.sent(),this.X_.e_(n,"rejected",r),[4,this.El(e)];case 3:return t.sent(),[3,6];case 4:return[4,Ww(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},BT.prototype.Pl=function(r){return Is(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return this.W_.Ju()||K_("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.Wu.gh()];case 1:return-1===(e=t.sent())?[2,void r.resolve()]:((n=this.al.get(e)||[]).push(r),this.al.set(e,n),[2])}})})},BT.prototype.Al=function(t){(this.al.get(t)||[]).forEach(function(t){t.resolve()}),this.al.delete(t)},BT.prototype.Vl=function(e){this.al.forEach(function(t){t.forEach(function(t){t.reject(new vg(dg.CANCELLED,e))})}),this.al.clear()},BT.prototype.ml=function(t,e){var n=this.hl[this.currentUser.s()];n=(n=n||new Vg(J_)).it(t,e),this.hl[this.currentUser.s()]=n},BT.prototype.Rl=function(t,e){var n=this.hl[this.currentUser.s()];if(n){var r=n.get(t);r&&(e?r.reject(e):r.resolve(),n=n.remove(t)),this.hl[this.currentUser.s()]=n}},BT.prototype.Tl=function(t,e){var n=this;void 0===e&&(e=null),this.X_.r_(t);for(var r=0,i=this.sl.get(t);r<i.length;r++){var o=i[r];this.el.delete(o),e&&this.tl.gl(o,e)}if(this.sl.delete(t),this.isPrimary){var s=this.ol.$i(t);this.ol.Ni(t),s.forEach(function(t){n.ol.Mi(t)||n.pl(t)})}},BT.prototype.pl=function(t){var e=this.il.get(t);null!==e&&(this.W_.fc(e),this.il=this.il.remove(t),this.rl.delete(e),this.Il())},BT.prototype.fl=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof _T?(this.ol.vi(i.key,t),this.yl(i)):i instanceof wT?(K_("SyncEngine","Document no longer in limbo: "+i.key),this.ol.Di(i.key,t),this.ol.Mi(i.key)||this.pl(i.key)):z_("Unknown limbo change: "+JSON.stringify(i))}},BT.prototype.yl=function(t){var e=t.key;this.il.get(e)||(K_("SyncEngine","New document in limbo: "+e),this.nl.push(e),this.Il())},BT.prototype.Il=function(){for(;0<this.nl.length&&this.il.size<this.Z_;){var t=this.nl.shift(),e=this.ul.next();this.rl.set(e,new TT(t)),this.il=this.il.it(t,e),this.W_.listen(new Xb(pb.ve(t.path).xe(),e,2,pw.kr))}},BT.prototype.bl=function(){return this.il},BT.prototype.vl=function(){return this.nl},BT.prototype.El=function(r,u){return Is(this,void 0,void 0,function(){var o,s,e,a=this;return Ss(this,function(t){switch(t.label){case 0:return o=[],s=[],e=[],this.el.forEach(function(t,i){e.push(Promise.resolve().then(function(){var n=i.view.k_(r);return n.M_?a.Wu.Kh(i.query,!1).then(function(t){var e=t.documents;return i.view.k_(e,n)}):n}).then(function(t){var e=u&&u.Ts.get(i.targetId),n=i.view.nr(t,!0===a.isPrimary,e);if(a.fl(i.targetId,n.x_),n.snapshot){a.isPrimary&&a.X_.a_(i.targetId,n.snapshot.fromCache?"not-current":"current"),o.push(n.snapshot);var r=fw.br(i.targetId,n.snapshot);s.push(r)}}))}),[4,Promise.all(e)];case 1:return t.sent(),this.tl.du(o),[4,this.Wu.Lh(s)];case 2:return t.sent(),[2]}})})},BT.prototype._l=function(t){},BT.prototype.Dc=function(r){return Is(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return e=!this.currentUser.isEqual(r),this.currentUser=r,e?(this.Vl("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.Wu.oh(r)]):[3,3];case 1:return n=t.sent(),this.X_.oh(r,n.uh,n._h),[4,this.El(n.ah)];case 2:t.sent(),t.label=3;case 3:return[4,this.W_.Dc()];case 4:return t.sent(),[2]}})})},BT.prototype.Cc=function(c){return Is(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u=this;return Ss(this,function(t){switch(t.label){case 0:return!0!==c||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.W_.Cc(!0)]);case 1:return t.sent(),e=this.X_.Yc(),[4,this.Sl(e.j())];case 2:for(n=t.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.W_.listen(o);return[3,7];case 3:return!1!==c||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,s=[],a=Promise.resolve(),this.sl.forEach(function(t,e){u.X_.o_(e)?s.push(e):a=a.then(function(){return u.Tl(e),u.Wu.jh(e,!0)}),u.W_.fc(e)}),[4,a]);case 4:return t.sent(),[4,this.Sl(s)];case 5:return t.sent(),this.Dl(),[4,this.W_.Cc(!1)];case 6:t.sent(),t.label=7;case 7:return[2]}})})},BT.prototype.Dl=function(){var n=this;this.rl.forEach(function(t,e){n.W_.fc(e)}),this.ol.Fi(),this.rl=new Map,this.il=new Vg(Ug.F)},BT.prototype.Sl=function(d){return Is(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f,p;return Ss(this,function(t){switch(t.label){case 0:e=[],n=[],r=0,i=d,t.label=1;case 1:return r<i.length?(o=i[r],s=void 0,(a=this.sl.get(o))&&0!==a.length?[4,this.Wu.jh(o,!0)]:[3,8]):[3,14];case 2:return t.sent(),[4,this.Wu.Uh(a[0].xe())];case 3:s=t.sent(),u=0,c=a,t.label=4;case 4:return u<c.length?(h=c[u],l=this.el.get(h),[4,this.dl(l)]):[3,7];case 5:(f=t.sent()).snapshot&&n.push(f.snapshot),t.label=6;case 6:return u++,[3,4];case 7:return[3,12];case 8:return[4,this.Wu.ta(o)];case 9:return p=t.sent(),[4,this.Wu.Uh(p)];case 10:return s=t.sent(),[4,this.ll(this.Cl(p),o,!1)];case 11:t.sent(),t.label=12;case 12:e.push(s),t.label=13;case 13:return r++,[3,1];case 14:return[2,(this.tl.du(n),e)]}})})},BT.prototype.Cl=function(t){return new pb(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)},BT.prototype.Jh=function(){return this.Wu.Jh()},BT.prototype.R_=function(r,i,o){return Is(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return this.isPrimary?(K_("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!this.sl.has(r))return[3,8];switch(i){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,this.Wu.ea()];case 3:return e=t.sent(),n=b_.Is(r,"current"===i),[4,this.El(e,n)];case 4:return t.sent(),[3,8];case 5:return[4,this.Wu.jh(r,!0)];case 6:return t.sent(),this.Tl(r,o),[3,8];case 7:z_("Unexpected target state: "+i),t.label=8;case 8:return[2]}})})},BT.prototype.A_=function(f,p){return Is(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l=this;return Ss(this,function(t){switch(t.label){case 0:if(!this.isPrimary)return[3,10];e=0,n=f,t.label=1;case 1:return e<n.length?(r=n[e],[4,this.Wu.ta(r)]):[3,6];case 2:return i=t.sent(),[4,this.Wu.Uh(i)];case 3:return o=t.sent(),[4,this.ll(this.Cl(i),o.targetId,!1)];case 4:t.sent(),this.W_.listen(o),t.label=5;case 5:return e++,[3,1];case 6:s=function(e){return Ss(this,function(t){switch(t.label){case 0:return a.sl.has(e)?[4,a.Wu.jh(e,!1).then(function(){l.W_.fc(e),l.Tl(e)}).catch(Ww)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},a=this,u=0,c=p,t.label=7;case 7:return u<c.length?(h=c[u],[5,s(h)]):[3,10];case 8:t.sent(),t.label=9;case 9:return u++,[3,7];case 10:return[2]}})})},BT.prototype.enableNetwork=function(){return this.Wu.Zh(!0),this.W_.enableNetwork()},BT.prototype.disableNetwork=function(){return this.Wu.Zh(!1),this.W_.disableNetwork()},BT.prototype.an=function(t){var e=this.rl.get(t);if(e&&e.Y_)return h_().add(e.key);var n=h_(),r=this.sl.get(t);if(!r)return n;for(var i=0,o=r;i<o.length;i++){var s=o[i],a=this.el.get(s);n=n.Ft(a.view.C_)}return n},BT),MT=(qT.prototype.listen=function(t){var e=t.query,n=!1,r=this.Fl.get(e);return r||(n=!0,r=new IT,this.Fl.set(e,r)),r.Nl.push(t),t.B_(this.onlineState),r.kl&&t.Ml(r.kl)&&this.Ll(),n?this.mc.listen(e).then(function(t){return r.targetId=t}):Promise.resolve(r.targetId)},qT.prototype.fc=function(o){return Is(this,void 0,void 0,function(){var e,n,r,i;return Ss(this,function(t){return e=o.query,n=!1,(r=this.Fl.get(e))&&0<=(i=r.Nl.indexOf(o))&&(r.Nl.splice(i,1),n=0===r.Nl.length),n?[2,(this.Fl.delete(e),this.mc.fc(e))]:[2]})})},qT.prototype.du=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,s=this.Fl.get(o);if(s){for(var a=0,u=s.Nl;a<u.length;a++)u[a].Ml(i)&&(e=!0);s.kl=i}}e&&this.Ll()},qT.prototype.gl=function(t,e){var n=this.Fl.get(t);if(n)for(var r=0,i=n.Nl;r<i.length;r++)i[r].onError(e);this.Fl.delete(t)},qT.prototype.wl=function(i){this.onlineState=i;var o=!1;this.Fl.forEach(function(t,e){for(var n=0,r=e.Nl;n<r.length;n++)r[n].B_(i)&&(o=!0)}),o&&this.Ll()},qT.prototype.Ol=function(t){this.$l.add(t),t.next()},qT.prototype.xl=function(t){this.$l.delete(t)},qT.prototype.Ll=function(){this.$l.forEach(function(t){t.next()})},qT),FT=(VT.prototype.Ml=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new m_(t.query,t.docs,t.cs,e,t._s,t.fromCache,t.ls,!0)}var o=!1;return this.Ul?this.Ql(t)&&(this.Bl.next(t),o=!0):this.Wl(t,this.onlineState)&&(this.jl(t),o=!0),this.ql=t,o},VT.prototype.onError=function(t){this.Bl.error(t)},VT.prototype.B_=function(t){this.onlineState=t;var e=!1;return this.ql&&!this.Ul&&this.Wl(this.ql,t)&&(this.jl(this.ql),e=!0),e},VT.prototype.Wl=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Kl&&n||t.docs.U()&&"Offline"!==e)},VT.prototype.Ql=function(t){if(0<t.docChanges.length)return!0;var e=this.ql&&this.ql.hasPendingWrites!==t.hasPendingWrites;return!(!t.ls&&!e)&&!0===this.options.includeMetadataChanges},VT.prototype.jl=function(t){t=m_.fs(t.query,t.docs,t._s,t.fromCache),this.Ul=!0,this.Bl.next(t)},VT),UT=(jT.prototype.ih=function(t){this.Gl=t},jT.prototype.wr=function(e,r,i,o){var s=this;return r.Oe()||i.isEqual(wg.MIN)?this.zl(e,r):this.Gl.Tr(e,o).next(function(t){var n=s.Hl(r,t);return(r.je()||r.Ke())&&s.M_(r.ge,n,o,i)?s.zl(e,r):(B_()<=Ta.DEBUG&&K_("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),r.toString()),s.Gl.wr(e,r,i).next(function(e){return n.forEach(function(t){e=e.it(t.key,t)}),e}))})},jT.prototype.Hl=function(n,t){var r=new zg(function(t,e){return n.Be(t,e)});return t.forEach(function(t,e){e instanceof cb&&n.matches(e)&&(r=r.add(e))}),r},jT.prototype.M_=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||0<i.version.D(r))},jT.prototype.zl=function(t,e){return B_()<=Ta.DEBUG&&K_("IndexFreeQueryEngine","Using full collection scan to execute query: %s",e.toString()),this.Gl.wr(t,e,wg.MIN)},jT);function jT(){}function VT(t,e,n){this.query=t,this.Bl=e,this.Ul=!1,this.ql=null,this.onlineState="Unknown",this.options=n||{}}function qT(t){this.mc=t,this.Fl=new nw(function(t){return t.canonicalId()}),this.onlineState="Unknown",this.$l=new Set,this.mc.subscribe(this)}function BT(t,e,n,r,i){this.Wu=t,this.W_=e,this.X_=n,this.currentUser=r,this.Z_=i,this.tl=null,this.el=new nw(function(t){return t.canonicalId()}),this.sl=new Map,this.nl=[],this.il=new Vg(Ug.F),this.rl=new Map,this.ol=new ow,this.hl={},this.al=new Map,this.ul=PT.y_(),this.isPrimary=void 0,this.onlineState="Unknown"}function WT(t,e,n,r){this.Nr=t,this.W_=e,this.updateFunction=n,this.Lr=r,this.j_=5,this.Ja=new eT(this.Nr,"retry_transaction")}function KT(t,e){this.query=t,this.b_=e,this.v_=null,this.As=!1,this.S_=h_(),this._s=h_(),this.D_=new y_(t.Be.bind(t))}function HT(t){this.g_=t}function GT(){this.P_=new kT,this.V_={},this.mc=null,this.$u=null,this.vr=null}function zT(t,e,n,r,i){if(this.$a=t,this.platform=e,this.persistenceKey=n,this.Mc=r,this.mc=null,this.$u=null,this.vr=null,this.Lc={},this.Oc=this.xc.bind(this),this.ko=!1,this.Bc=[],!zT.Uc(this.platform))throw new vg(dg.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=i,this.qc=gT(this.persistenceKey,this.Mc),this.Qc="firestore_sequence_number_"+this.persistenceKey,this.Lc[this.Mc]=new kT,this.Wc=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.jc=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Kc=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Gc="firestore_online_state_"+this.persistenceKey,this.platform.window.addEventListener("storage",this.Oc)}function QT(){this.activeTargetIds=f_()}function YT(t,e){this.clientId=t,this.onlineState=e}function XT(t,e){this.clientId=t,this.activeTargetIds=e}function JT(t,e,n){this.targetId=t,this.state=e,this.error=n}function $T(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function ZT(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=eI(e)),e=tI(t.get(n),e);return eI(e)}function tI(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function eI(t){return t+""}function nI(t){var e=t.length;if(Q_(2<=e,"Invalid path "+t),2===e)return Q_(""===t.charAt(0)&&""===t.charAt(1),"Non-empty path "+t+" had length 2"),Og.H;for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||n<s)&&z_('Invalid encoded resource path: "'+t+'"'),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:z_('Invalid encoded resource path: "'+t+'"')}o=s+2}return new Og(r)}var rI=(hI.Yl=function(o,t,s){return K_("SimpleDb","Opening database:",o),new aw(function(n,r){var i=window.indexedDB.open(o,t);i.onsuccess=function(t){var e=t.target.result;n(new hI(e))},i.onblocked=function(){r(new vg(dg.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var e=t.target.error;"VersionError"===e.name?r(new vg(dg.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(e)},i.onupgradeneeded=function(t){K_("SimpleDb",'Database "'+o+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;s.createOrUpgrade(e,i.transaction,t.oldVersion,UI).next(function(){K_("SimpleDb","Database upgrade to version "+UI+" complete")})}}).Wi()},hI.delete=function(t){return K_("SimpleDb","Removing database:",t),lI(window.indexedDB.deleteDatabase(t)).Wi()},hI.Uc=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(hI.Xl())return!0;if(void 0===window.navigator)return!1;var t=Vs(),e=hI.Jl(t),n=0<e&&e<10,r=hI.Zl(t),i=0<r&&r<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||i)},hI.Xl=function(){var t;return"undefined"!=typeof __PRIVATE_process&&"YES"===(null===(t=__PRIVATE_process.__PRIVATE_env)||void 0===t?void 0:t.td)},hI.ed=function(t,e){return t.store(e)},hI.Jl=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},hI.Zl=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},hI.prototype.sd=function(e){this.db.onversionchange=function(t){return e(t)}},hI.prototype.runTransaction=function(r,c,h){return Is(this,void 0,void 0,function(){var s,a,e,u,n;return Ss(this,function(t){switch(t.label){case 0:s="readonly"===r,a=0,e=function(){var e,n,r,i,o;return Ss(this,function(t){switch(t.label){case 0:++a,e=oI.open(u.db,s?"readonly":"readwrite",c),t.label=1;case 1:return t.trys.push([1,3,,4]),n=h(e).catch(function(t){return e.abort(t),aw.reject(t)}).Wi(),r={},n.catch(function(){}),[4,e.nd];case 2:return[2,(r.value=(t.sent(),n),r)];case 3:return i=t.sent(),o="FirebaseError"!==i.name&&a<3,K_("SimpleDb","Transaction failed with error: %s. Retrying: %s.",i.message,o),o?[3,4]:[2,{value:Promise.reject(i)}];case 4:return[2]}})},u=this,t.label=1;case 1:return[5,e()];case 2:if("object"==typeof(n=t.sent()))return[2,n.value];t.label=3;case 3:return[3,1];case 4:return[2]}})})},hI.prototype.close=function(){this.db.close()},hI),iI=(Object.defineProperty(cI.prototype,"Bi",{get:function(){return this.od},enumerable:!0,configurable:!0}),Object.defineProperty(cI.prototype,"ad",{get:function(){return this.hd},enumerable:!0,configurable:!0}),Object.defineProperty(cI.prototype,"cursor",{set:function(t){this.rd=t},enumerable:!0,configurable:!0}),cI.prototype.done=function(){this.od=!0},cI.prototype.ud=function(t){this.hd=t},cI.prototype.delete=function(){return lI(this.rd.delete())},cI),oI=(uI.open=function(t,e,n){return new uI(t.transaction(n,e))},Object.defineProperty(uI.prototype,"nd",{get:function(){return this._d.promise},enumerable:!0,configurable:!0}),uI.prototype.abort=function(t){t&&this._d.reject(t),this.aborted||(K_("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},uI.prototype.store=function(t){var e=this.transaction.objectStore(t);return new sI(e)},uI),sI=(aI.prototype.put=function(t,e){return lI(void 0!==e?(K_("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(K_("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t)))},aI.prototype.add=function(t){return K_("SimpleDb","ADD",this.store.name,t,t),lI(this.store.add(t))},aI.prototype.get=function(e){var n=this;return lI(this.store.get(e)).next(function(t){return void 0===t&&(t=null),K_("SimpleDb","GET",n.store.name,e,t),t})},aI.prototype.delete=function(t){return K_("SimpleDb","DELETE",this.store.name,t),lI(this.store.delete(t))},aI.prototype.count=function(){return K_("SimpleDb","COUNT",this.store.name),lI(this.store.count())},aI.prototype.ld=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.dd(n,function(t,e){r.push(e)}).next(function(){return r})},aI.prototype.fd=function(t,e){K_("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Td=!1;var r=this.cursor(n);return this.dd(r,function(t,e,n){return n.delete()})},aI.prototype.md=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.dd(r,e)},aI.prototype.Ed=function(i){var t=this.cursor({});return new aw(function(n,r){t.onerror=function(t){var e=pI(t.target.error);r(e)},t.onsuccess=function(t){var e=t.target.result;e?i(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},aI.prototype.dd=function(t,s){var a=[];return new aw(function(o,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e=t.target.result;if(e){var n=new iI(e),r=s(e.primaryKey,e.value,n);if(r instanceof aw){var i=r.catch(function(t){return n.done(),aw.reject(t)});a.push(i)}n.Bi?o():null===n.ad?e.continue():e.continue(n.ad)}else o()}}).next(function(){return aw.Ki(a)})},aI.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},aI.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Td?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},aI);function aI(t){this.store=t}function uI(t){var n=this;this.transaction=t,this.aborted=!1,this._d=new Nw,this.transaction.oncomplete=function(){n._d.resolve()},this.transaction.onabort=function(){t.error?n._d.reject(t.error):n._d.resolve()},this.transaction.onerror=function(t){var e=pI(t.target.error);n._d.reject(e)}}function cI(t){this.rd=t,this.od=!1,this.hd=null}function hI(t){this.db=t,12.2===hI.Jl(Vs())&&H_("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function lI(t){return new aw(function(n,r){t.onsuccess=function(t){var e=t.target.result;n(e)},t.onerror=function(t){var e=pI(t.target.error);r(e)}})}var fI=!1;function pI(t){var e=rI.Jl(Vs());if(12.2<=e&&e<13){var n="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(n)){var r=new vg("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return fI||(fI=!0,setTimeout(function(){throw r},0)),r}}return t}var dI=(vI.Id=function(t,e,n,r){return Q_(""!==t.uid,"UserID must not be an empty string."),new vI(t.t()?t.uid:"",e,n,r)},vI.prototype.Rd=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return mI(t).md({index:HI.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},vI.prototype.mh=function(e,t,n){return this.Ad(e).next(function(t){return t.lastStreamToken=n.toBase64(),_I(e).put(t)})},vI.prototype.ph=function(t){return this.Ad(t).next(function(t){return tm.fromBase64String(t.lastStreamToken)})},vI.prototype.yh=function(e,n){return this.Ad(e).next(function(t){return t.lastStreamToken=n.toBase64(),_I(e).put(t)})},vI.prototype.dh=function(c,h,l,f){var p=this,d=bI(c),v=mI(c);return v.add({}).next(function(t){Q_("number"==typeof t,"Auto-generated key is not a number");for(var e=new rw(t,h,l,f),n=p.serializer.Pd(p.userId,e),r=[],i=new zg(function(t,e){return J_(t.K(),e.K())}),o=0,s=f;o<s.length;o++){var a=s[o],u=GI.key(p.userId,a.key.path,t);i=i.add(a.key.path.L()),r.push(v.put(n)),r.push(d.put(u,GI.PLACEHOLDER))}return i.forEach(function(t){r.push(p.ur.Vd(c,t))}),c.rr(function(){p.wd[t]=e.keys()}),aw.Ki(r).next(function(){return e})})},vI.prototype.Ph=function(t,e){var n=this;return mI(t).get(e).next(function(t){return t?(Q_(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.gd(t)):null})},vI.prototype.Th=function(t,n){var r=this;return this.wd[n]?aw.resolve(this.wd[n]):this.Ph(t,n).next(function(t){if(t){var e=t.keys();return r.wd[n]=e}return null})},vI.prototype.xh=function(t,e){var r=this,i=e+1,n=IDBKeyRange.lowerBound([this.userId,i]),o=null;return mI(t).md({index:HI.userMutationsIndex,range:n},function(t,e,n){e.userId===r.userId&&(Q_(e.batchId>=i,"Should have found mutation after "+i),o=r.serializer.gd(e)),n.done()}).next(function(){return o})},vI.prototype.gh=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return mI(t).md({index:HI.userMutationsIndex,range:e,reverse:!0},function(t,e,n){r=e.batchId,n.done()}).next(function(){return r})},vI.prototype.hh=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return mI(t).ld(HI.userMutationsIndex,n).next(function(t){return t.map(function(t){return e.serializer.gd(t)})})},vI.prototype._r=function(a,u){var c=this,t=GI.prefixForPath(this.userId,u.path),e=IDBKeyRange.lowerBound(t),h=[];return bI(a).md({range:e},function(e,t,n){var r=e[0],i=e[1],o=e[2],s=nI(i);if(r===c.userId&&u.path.isEqual(s))return mI(a).get(o).next(function(t){if(!t)throw z_("Dangling document-mutation reference found: "+e+" which points to "+o);Q_(t.userId===c.userId,"Unexpected user '"+t.userId+"' for mutation batch "+o),h.push(c.serializer.gd(t))});n.done()}).next(function(){return h})},vI.prototype.Er=function(r,t){var u=this,c=new zg(J_),i=[];return t.forEach(function(a){var t=GI.prefixForPath(u.userId,a.path),e=IDBKeyRange.lowerBound(t),n=bI(r).md({range:e},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=nI(i);r===u.userId&&a.path.isEqual(s)?c=c.add(o):n.done()});i.push(n)}),aw.Ki(i).next(function(){return u.pd(r,c)})},vI.prototype.Vr=function(t,e){var a=this,u=e.path,c=u.length+1,n=GI.prefixForPath(this.userId,u),r=IDBKeyRange.lowerBound(n),h=new zg(J_);return bI(t).md({range:r},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=nI(i);r===a.userId&&u.q(s)?s.length===c&&(h=h.add(o)):n.done()}).next(function(){return a.pd(t,h)})},vI.prototype.pd=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(mI(t).get(e).next(function(t){if(null===t)throw z_("Dangling document-mutation reference found, which points to "+e);Q_(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.gd(t))}))}),aw.Ki(i).next(function(){return r})},vI.prototype.Vh=function(e,n){var r=this;return gI(e.yd,this.userId,n).next(function(t){return e.rr(function(){r.Xh(n.batchId)}),aw.forEach(t,function(t){return r.Jo.bd(e,t)})})},vI.prototype.Xh=function(t){delete this.wd[t]},vI.prototype.Rh=function(n){var o=this;return this.Rd(n).next(function(t){if(!t)return aw.resolve();var e=IDBKeyRange.lowerBound(GI.prefixForUser(o.userId)),i=[];return bI(n).md({range:e},function(t,e,n){if(t[0]===o.userId){var r=nI(t[1]);i.push(r)}else n.done()}).next(function(){Q_(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(t){return t.K()}))})})},vI.prototype.Mi=function(t,e){return yI(t,this.userId,e)},vI.prototype.Ad=function(t){var e=this;return _I(t).get(this.userId).next(function(t){return t||new KI(e.userId,-1,"")})},vI);function vI(t,e,n,r){this.userId=t,this.serializer=e,this.ur=n,this.Jo=r,this.wd={}}function yI(t,o,e){var n=GI.prefixForPath(o,e.path),s=n[1],r=IDBKeyRange.lowerBound(n),a=!1;return bI(t).md({range:r,Td:!0},function(t,e,n){var r=t[0],i=t[1];t[2],r===o&&i===s&&(a=!0),n.done()}).next(function(){return a})}function gI(t,e,n){var r=t.store(HI.store),i=t.store(GI.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.md({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Q_(1===a,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=GI.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return aw.Ki(o).next(function(){return c})}function mI(t){return fS.ed(t,HI.store)}function bI(t){return fS.ed(t,GI.store)}function _I(t){return fS.ed(t,KI.store)}var wI=(EI.prototype.Qh=function(n){var r=this;return this.vd(n).next(function(t){var e=new PT(t.highestTargetId);return t.highestTargetId=e.next(),r.Sd(n,t).next(function(){return t.highestTargetId})})},EI.prototype.bh=function(t){return this.vd(t).next(function(t){return wg.v(new _g(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},EI.prototype.Dd=function(t){return SI(t.yd)},EI.prototype.$h=function(e,n,r){var i=this;return this.vd(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.k()),n>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=n),i.Sd(e,t)})},EI.prototype.Wh=function(e,n){var r=this;return this.Cd(e,n).next(function(){return r.vd(e).next(function(t){return t.targetCount+=1,r.kd(n,t),r.Sd(e,t)})})},EI.prototype.Nh=function(t,e){return this.Cd(t,e)},EI.prototype.Nd=function(e,t){var n=this;return this.Fd(e,t.targetId).next(function(){return TI(e).delete(t.targetId)}).next(function(){return n.vd(e)}).next(function(t){return Q_(0<t.targetCount,"Removing from an empty target cache"),--t.targetCount,n.Sd(e,t)})},EI.prototype.xo=function(r,i,o){var s=this,a=0,u=[];return TI(r).md(function(t,e){var n=s.serializer.$d(e);n.sequenceNumber<=i&&null===o.get(n.targetId)&&(a++,u.push(s.Nd(r,n)))}).next(function(){return aw.Ki(u)}).next(function(){return a})},EI.prototype.Xs=function(t,r){var i=this;return TI(t).md(function(t,e){var n=i.serializer.$d(e);r(n)})},EI.prototype.vd=function(t){return II(t.yd)},EI.prototype.Sd=function(t,e){return fS.ed(t,tS.store).put(tS.key,e)},EI.prototype.Cd=function(t,e){return TI(t).put(this.serializer.Md(e))},EI.prototype.kd=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},EI.prototype.Ld=function(t){return this.vd(t).next(function(t){return t.targetCount})},EI.prototype.qh=function(t,i){var o=this,e=i.canonicalId(),n=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),s=null;return TI(t).md({range:n,index:$I.queryTargetsIndexName},function(t,e,n){var r=o.serializer.$d(e);i.isEqual(r.target)&&(s=r,n.done())}).next(function(){return s})},EI.prototype.Dh=function(n,t,r){var i=this,o=[],s=NI(n);return t.forEach(function(t){var e=ZT(t.path);o.push(s.put(new ZI(r,e))),o.push(i.Jo.vi(n,t))}),aw.Ki(o)},EI.prototype.Sh=function(n,t,r){var i=this,o=NI(n);return aw.forEach(t,function(t){var e=ZT(t.path);return aw.Ki([o.delete([r,e]),i.Jo.Di(n,t)])})},EI.prototype.Fd=function(t,e){var n=NI(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},EI.prototype.Gh=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=NI(t),o=h_();return r.md({range:n,Td:!0},function(t,e,n){var r=nI(t[1]),i=new Ug(r);o=o.add(i)}).next(function(){return o})},EI.prototype.Mi=function(t,e){var n=ZT(e.path),r=IDBKeyRange.bound([n],[Z_(n)],!1,!0),i=0;return NI(t).md({index:ZI.documentTargetsIndex,Td:!0,range:r},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},EI.prototype.un=function(t,e){var n=this;return TI(t).get(e).next(function(t){return t?n.serializer.$d(t):null})},EI);function EI(t,e){this.Jo=t,this.serializer=e}function TI(t){return fS.ed(t,$I.store)}function II(t){return rI.ed(t,tS.store).get(tS.key).next(function(t){return Q_(null!==t,"Missing metadata row."),t})}function SI(t){return II(t).next(function(t){return t.highestListenSequenceNumber})}function NI(t){return fS.ed(t,ZI.store)}var CI,AI=(kI.prototype.Yi=function(t,e,n){return OI(t).put(PI(e),n)},kI.prototype.Zi=function(t,e){var n=OI(t),r=PI(e);return n.delete(r)},kI.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(t){return t.byteSize+=n,r.Od(e,t)})},kI.prototype.tr=function(t,e){var n=this;return OI(t).get(PI(e)).next(function(t){return n.xd(t)})},kI.prototype.Bd=function(t,e){var n=this;return OI(t).get(PI(e)).next(function(t){var e=n.xd(t);return e?{Ud:e,size:DI(t)}:null})},kI.prototype.getEntries=function(t,e){var r=this,i=i_();return this.qd(t,e,function(t,e){var n=r.xd(e);i=i.it(t,n)}).next(function(){return i})},kI.prototype.Qd=function(t,e){var r=this,i=i_(),o=new Vg(Ug.F);return this.qd(t,e,function(t,e){var n=r.xd(e);o=n?(i=i.it(t,n),o.it(t,DI(e))):(i=i.it(t,null),o.it(t,0))}).next(function(){return{Wd:i,jd:o}})},kI.prototype.qd=function(t,e,i){if(e.U())return aw.resolve();var n=IDBKeyRange.bound(e.first().path.j(),e.last().path.j()),o=e._t(),s=o.wt();return OI(t).md({range:n},function(t,e,n){for(var r=Ug.nt(t);s&&Ug.F(s,r)<0;)i(s,null),s=o.wt();s&&s.isEqual(r)&&(i(s,e),s=o.It()?o.wt():null),s?n.ud(s.path.j()):n.done()}).next(function(){for(;s;)i(s,null),s=o.It()?o.wt():null})},kI.prototype.wr=function(t,i,e){var o=this,s=s_(),a=i.path.length+1,n={};if(e.isEqual(wg.MIN)){var r=i.path.j();n.range=IDBKeyRange.lowerBound(r)}else{var u=i.path.j(),c=this.serializer.Kd(e);n.range=IDBKeyRange.lowerBound([u,c],!0),n.index=XI.collectionReadTimeIndex}return OI(t).md(n,function(t,e,n){if(t.length===a){var r=o.serializer.Gd(e);i.path.q(r.key.path)?r instanceof cb&&i.matches(r)&&(s=s.it(r.key,r)):n.done()}}).next(function(){return s})},kI.prototype.ea=function(t,e){var r=this,i=r_(),o=this.serializer.Kd(e),n=OI(t),s=IDBKeyRange.lowerBound(o,!0);return n.md({index:XI.readTimeIndex,range:s},function(t,e){var n=r.serializer.Gd(e);i=i.it(n.key,n),o=e.readTime}).next(function(){return{sa:i,readTime:r.serializer.zd(o)}})},kI.prototype.na=function(t){var r=this,e=OI(t),i=wg.MIN;return e.md({index:XI.readTimeIndex,reverse:!0},function(t,e,n){e.readTime&&(i=r.serializer.zd(e.readTime)),n.done()}).next(function(){return i})},kI.prototype.Eh=function(t){return new kI.Hd(this,!!t&&t.wh)},kI.prototype.Jd=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},kI.prototype.getMetadata=function(t){return RI(t).get(JI.key).next(function(t){return Q_(!!t,"Missing document cache metadata"),t})},kI.prototype.Od=function(t,e){return RI(t).put(JI.key,e)},kI.prototype.xd=function(t){if(t){var e=this.serializer.Gd(t);return e instanceof hb&&e.version.isEqual(wg.S())?null:e}return null},kI);function kI(t,e){this.serializer=t,this.ur=e}function RI(t){return fS.ed(t,JI.store)}function OI(t){return fS.ed(t,XI.store)}function PI(t){return t.path.j()}function DI(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw z_("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}function xI(t,e){var n=this;return(n=CI.call(this)||this).Yd=t,n.wh=e,n.Xd=new nw(function(t){return t.toString()}),n}AI.Hd=(Es(xI,CI=uw),xI.prototype.nr=function(s){var a=this,u=[],c=0,h=new zg(function(t,e){return J_(t.K(),e.K())});return this.zi.forEach(function(t,e){var n=a.Xd.get(t);if(e){var r=a.Yd.serializer.Zd(e,a.readTime);h=h.add(t.path.L());var i=DI(r);c+=i-n,u.push(a.Yd.Yi(s,t,r))}else if(c-=n,a.wh){var o=a.Yd.serializer.Zd(new hb(t,wg.S()),a.readTime);u.push(a.Yd.Yi(s,t,o))}else u.push(a.Yd.Zi(s,t))}),h.forEach(function(t){u.push(a.Yd.ur.Vd(s,t))}),u.push(this.Yd.updateMetadata(s,c)),aw.Ki(u)},xI.prototype.er=function(t,e){var n=this;return this.Yd.Bd(t,e).next(function(t){return null===t?(n.Xd.set(e,0),null):(n.Xd.set(e,t.size),t.Ud)})},xI.prototype.sr=function(t,e){var n=this;return this.Yd.Qd(t,e).next(function(t){var e=t.Wd;return t.jd.forEach(function(t,e){n.Xd.set(t,e)}),e})},xI);function LI(t,e){this.seconds=t,this.nanoseconds=e}var MI=(WI.prototype.Vd=function(t,e){return this.tf.add(e),aw.resolve()},WI.prototype.Pr=function(t,e){return aw.resolve(this.tf.getEntries(e))},WI),FI=(BI.prototype.add=function(t){var e=t.B(),n=t.L(),r=this.index[e]||new zg(Og.F),i=!r.has(n);return this.index[e]=r.add(n),i},BI.prototype.has=function(t){var e=t.B(),n=t.L(),r=this.index[e];return r&&r.has(n)},BI.prototype.getEntries=function(t){return(this.index[t]||new zg(Og.F)).j()},BI),UI=10,jI=(qI.prototype.createOrUpgrade=function(n,r,t,e){var i=this;Q_(t<e&&0<=t&&e<=UI,"Unexpected schema upgrade from v"+t+" to v"+e+".");var o,s=new oI(r);t<1&&1<=e&&(n.createObjectStore(VI.store),(o=n).createObjectStore(KI.store,{keyPath:KI.keyPath}),o.createObjectStore(HI.store,{keyPath:HI.keyPath,autoIncrement:!0}).createIndex(HI.userMutationsIndex,HI.userMutationsKeyPath,{unique:!0}),o.createObjectStore(GI.store),nS(n),n.createObjectStore(XI.store));var a,u=aw.resolve();return t<3&&3<=e&&(0!==t&&((a=n).deleteObjectStore(ZI.store),a.deleteObjectStore($I.store),a.deleteObjectStore(tS.store),nS(n)),u=u.next(function(){return t=s.store(tS.store),e=new tS(0,0,wg.MIN.k(),0),t.put(tS.key,e);var t,e})),t<4&&4<=e&&(0!==t&&(u=u.next(function(){return r=n,(i=s).store(HI.store).ld().next(function(t){r.deleteObjectStore(HI.store),r.createObjectStore(HI.store,{keyPath:HI.keyPath,autoIncrement:!0}).createIndex(HI.userMutationsIndex,HI.userMutationsKeyPath,{unique:!0});var e=i.store(HI.store),n=t.map(function(t){return e.put(t)});return aw.Ki(n)});var r,i})),u=u.next(function(){n.createObjectStore(rS.store,{keyPath:rS.keyPath})})),t<5&&5<=e&&(u=u.next(function(){return i.removeAcknowledgedMutations(s)})),t<6&&6<=e&&(u=u.next(function(){return n.createObjectStore(JI.store),i.addDocumentGlobal(s)})),t<7&&7<=e&&(u=u.next(function(){return i.ensureSequenceNumbers(s)})),t<8&&8<=e&&(u=u.next(function(){return i.createCollectionParentIndex(n,s)})),t<9&&9<=e&&(u=u.next(function(){var t,e;(e=n).objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges"),(t=r.objectStore(XI.store)).createIndex(XI.readTimeIndex,XI.readTimeIndexPath,{unique:!1}),t.createIndex(XI.collectionReadTimeIndex,XI.collectionReadTimeIndexPath,{unique:!1})})),t<10&&10<=e&&(u=u.next(function(){return i.rewriteCanonicalIds(s)})),u},qI.prototype.addDocumentGlobal=function(e){var n=0;return e.store(XI.store).md(function(t,e){n+=DI(e)}).next(function(){var t=new JI(n);return e.store(JI.store).put(JI.key,t)})},qI.prototype.removeAcknowledgedMutations=function(r){var i=this,t=r.store(KI.store),e=r.store(HI.store);return t.ld().next(function(t){return aw.forEach(t,function(n){var t=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return e.ld(HI.userMutationsIndex,t).next(function(t){return aw.forEach(t,function(t){Q_(t.userId===n.userId,"Cannot process batch "+t.batchId+" from unexpected user");var e=i.serializer.gd(t);return gI(r,n.userId,e).next(function(){})})})})})},qI.prototype.ensureSequenceNumbers=function(t){var s=t.store(ZI.store),e=t.store(XI.store);return SI(t).next(function(i){var o=[];return e.md(function(t,e){var n=new Og(t),r=[0,ZT(n)];o.push(s.get(r).next(function(t){return t?aw.resolve():(e=n,s.put(new ZI(0,ZT(e),i)));var e}))}).next(function(){return aw.Ki(o)})})},qI.prototype.createCollectionParentIndex=function(t,e){function i(t){if(o.add(t)){var e=t.B(),n=t.L();return r.put({collectionId:e,parent:ZT(n)})}}t.createObjectStore(eS.store,{keyPath:eS.keyPath});var r=e.store(eS.store),o=new FI;return e.store(XI.store).md({Td:!0},function(t,e){var n=new Og(t);return i(n.L())}).next(function(){return e.store(GI.store).md({Td:!0},function(t,e){t[0];var n=t[1],r=(t[2],nI(n));return i(r.L())})})},qI.prototype.rewriteCanonicalIds=function(t){var i=this,o=t.store($I.store);return o.md(function(t,e){var n=i.serializer.$d(e),r=i.serializer.Md(n);return o.put(r)})},qI),VI=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};function qI(t){this.serializer=t}function BI(){this.index={}}function WI(){this.tf=new FI}VI.store="owner",VI.key="owner";var KI=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};KI.store="mutationQueues",KI.keyPath="userId";var HI=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};HI.store="mutations",HI.keyPath="batchId",HI.userMutationsIndex="userMutationsIndex",HI.userMutationsKeyPath=["userId","batchId"];var GI=(zI.prefixForUser=function(t){return[t]},zI.prefixForPath=function(t,e){return[t,ZT(e)]},zI.key=function(t,e,n){return[t,ZT(e),n]},zI);function zI(){}GI.store="documentMutations",GI.PLACEHOLDER=new GI;function QI(t,e){this.path=t,this.readTime=e}function YI(t,e){this.path=t,this.version=e}var XI=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};XI.store="remoteDocuments",XI.readTimeIndex="readTimeIndex",XI.readTimeIndexPath="readTime",XI.collectionReadTimeIndex="collectionReadTimeIndex",XI.collectionReadTimeIndexPath=["parentPath","readTime"];var JI=function(t){this.byteSize=t};JI.store="remoteDocumentGlobal",JI.key="remoteDocumentGlobalKey";var $I=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};$I.store="targets",$I.keyPath="targetId",$I.queryTargetsIndexName="queryTargetsIndex",$I.queryTargetsKeyPath=["canonicalId","targetId"];var ZI=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};ZI.store="targetDocuments",ZI.keyPath=["targetId","path"],ZI.documentTargetsIndex="documentTargetsIndex",ZI.documentTargetsKeyPath=["path","targetId"];var tS=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};tS.key="targetGlobalKey",tS.store="targetGlobal";var eS=function(t,e){this.collectionId=t,this.parent=e};function nS(t){t.createObjectStore(ZI.store,{keyPath:ZI.keyPath}).createIndex(ZI.documentTargetsIndex,ZI.documentTargetsKeyPath,{unique:!0}),t.createObjectStore($I.store,{keyPath:$I.keyPath}).createIndex($I.queryTargetsIndexName,$I.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(tS.store)}eS.store="collectionParents",eS.keyPath=["collectionId","parent"];var rS=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};rS.store="clientMetadata",rS.keyPath="clientId";var iS=ks(ks(ks([KI.store,HI.store,GI.store,XI.store,$I.store,VI.store,tS.store,ZI.store],[rS.store]),[JI.store]),[eS.store]),oS=(sS.prototype.Vd=function(t,e){var n=this;if(this.ef.has(e))return aw.resolve();var r=e.B(),i=e.L();t.rr(function(){n.ef.add(e)});var o={collectionId:r,parent:ZT(i)};return aS(t).put(o)},sS.prototype.Pr=function(t,i){var o=[],e=IDBKeyRange.bound([i,""],[Z_(i),""],!1,!0);return aS(t).ld(e).next(function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r.collectionId!==i)break;o.push(nI(r.parent))}return o})},sS);function sS(){this.ef=new FI}function aS(t){return fS.ed(t,eS.store)}var uS,cS=(vS.prototype.Gd=function(t){if(t.document)return this.sf.vn(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=Ug.nt(t.noDocument.path),n=this.nf(t.noDocument.readTime);return new hb(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){var r=Ug.nt(t.unknownDocument.path),i=this.nf(t.unknownDocument.version);return new lb(r,i)}return z_("Unexpected DbRemoteDocument")},vS.prototype.Zd=function(t,e){var n=this.Kd(e),r=t.key.path.L().j();if(t instanceof cb){var i=this.sf.bn(t),o=t.hasCommittedMutations;return new XI(null,null,i,o,n,r)}if(t instanceof hb){var s=t.key.path.j(),a=this.if(t.version),u=t.hasCommittedMutations;return new XI(null,new QI(s,a),null,u,n,r)}if(t instanceof lb){var c=t.key.path.j(),h=this.if(t.version);return new XI(new YI(c,h),null,null,!0,n,r)}return z_("Unexpected MaybeDocument")},vS.prototype.Kd=function(t){var e=t.k();return[e.seconds,e.nanoseconds]},vS.prototype.zd=function(t){var e=new _g(t[0],t[1]);return wg.v(e)},vS.prototype.if=function(t){var e=t.k();return new LI(e.seconds,e.nanoseconds)},vS.prototype.nf=function(t){var e=new _g(t.seconds,t.nanoseconds);return wg.v(e)},vS.prototype.Pd=function(t,e){var n=this,r=e.baseMutations.map(function(t){return n.sf.$n(t)}),i=e.mutations.map(function(t){return n.sf.$n(t)});return new HI(t,e.batchId,e.Ri.toMillis(),r,i)},vS.prototype.gd=function(t){var e=this,n=(t.baseMutations||[]).map(function(t){return e.sf.xn(t)}),r=t.mutations.map(function(t){return e.sf.xn(t)}),i=_g.fromMillis(t.localWriteTimeMs);return new rw(t.batchId,i,n,r)},vS.prototype.$d=function(t){var e,n=this.nf(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?this.nf(t.lastLimboFreeSnapshotVersion):wg.MIN;return e=void 0!==t.query.documents?this.sf.Kn(t.query):this.sf.Yn(t.query),new Xb(e,t.targetId,0,t.lastListenSequenceNumber,n,r,tm.fromBase64String(t.resumeToken))},vS.prototype.Md=function(t){var e,n=this.if(t.ts),r=this.if(t.lastLimboFreeSnapshotVersion);e=t.target.Pe()?this.sf.jn(t.target):this.sf.Gn(t.target);var i=t.resumeToken.toBase64();return new $I(t.targetId,t.target.canonicalId(),n,i,t.sequenceNumber,r,e)},vS),hS="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",lS=(Es(dS,uS=hw),dS),fS=(pS.ed=function(t,e){if(t instanceof lS)return rI.ed(t.yd,e);throw z_("IndexedDbPersistence must use instances of IndexedDbTransaction")},pS.mf=function(t){if(!pS.Uc())throw new vg(dg.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return new pS(t.allowTabSynchronization,t.persistenceKey,t.clientId,t.platform,t.Ef,t.$a,t.serializer,t.rf)},pS.prototype.start=function(){var e=this;return rI.Yl(this.df,UI,new jI(this.serializer)).then(function(t){return e.wf=t,e.If()}).then(function(){return e.Rf(),e.Af(),e.Pf(),e.wf.runTransaction("readonly",[tS.store],function(t){return SI(t)})}).then(function(t){e.Vf=new pw(t,e.rf)}).then(function(){e.hf=!0}).catch(function(t){return e.wf&&e.wf.close(),Promise.reject(t)})},pS.prototype.gf=function(n){var t=this;return this.lf=function(e){return Is(t,void 0,void 0,function(){return Ss(this,function(t){return this.ko?[2,n(e)]:[2]})})},n(this.isPrimary)},pS.prototype.pf=function(n){var t=this;this.wf.sd(function(e){return Is(t,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return null===e.newVersion?[4,n()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},pS.prototype.Zh=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.$a.qr(function(){return Is(e,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.ko?[4,this.If()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},pS.prototype.If=function(){var n=this;return this.wf.runTransaction("readwrite",iS,function(e){return gS(e).put(new rS(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n.yf(e).next(function(t){t||(n.isPrimary=!1,n.$a.qr(function(){return n.lf(!1)}))})}).next(function(){return n.bf(e)}).next(function(t){return n.isPrimary&&!t?n.vf(e).next(function(){return!1}):!!t&&n.Sf(e).next(function(){return!0})})}).catch(function(t){if(!n.allowTabSynchronization)throw t;return K_("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){n.isPrimary!==t&&n.$a.qr(function(){return n.lf(t)}),n.isPrimary=t})},pS.prototype.yf=function(t){var e=this;return yS(t).get(VI.key).next(function(t){return aw.resolve(e.Df(t))})},pS.prototype.Cf=function(t){return gS(t).delete(this.clientId)},pS.prototype.kf=function(){return Is(this,void 0,void 0,function(){var i=this;return Ss(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.Nf(this._f,18e5)?[3,2]:(this._f=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var r=pS.ed(t,rS.store);return r.ld().next(function(t){var e=i.Ff(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)});return aw.forEach(n,function(t){return r.delete(t.clientId)}).next(function(){return n})})}).catch(function(){return[]})]);case 1:t.sent().forEach(function(t){i.window.localStorage.removeItem(i.$f(t.clientId))}),t.label=2;case 2:return[2]}})})},pS.prototype.Pf=function(){var t=this;this.cf=this.$a.eo("client_metadata_refresh",4e3,function(){return t.If().then(function(){return t.kf()}).then(function(){return t.Pf()})})},pS.prototype.Df=function(t){return!!t&&t.ownerId===this.clientId},pS.prototype.bf=function(e){var i=this;return yS(e).get(VI.key).next(function(t){if(null!==t&&i.Nf(t.leaseTimestampMs,5e3)&&!i.Mf(t.ownerId)){if(i.Df(t)&&i.networkEnabled)return!0;if(!i.Df(t)){if(!t.allowTabSynchronization)throw new vg(dg.FAILED_PRECONDITION,hS);return!1}}return!(!i.networkEnabled||!i.inForeground)||gS(e).ld().next(function(t){return void 0===i.Ff(t,5e3).find(function(t){if(i.clientId!==t.clientId){var e=!i.networkEnabled&&t.networkEnabled,n=!i.inForeground&&t.inForeground,r=i.networkEnabled===t.networkEnabled;if(e||n&&r)return!0}return!1})})}).next(function(t){return i.isPrimary!==t&&K_("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},pS.prototype.lc=function(){return Is(this,void 0,void 0,function(){var e=this;return Ss(this,function(t){switch(t.label){case 0:return this.hf=!1,this.Lf(),this.cf&&(this.cf.cancel(),this.cf=null),this.Of(),this.xf(),[4,this.wf.runTransaction("readwrite",[VI.store,rS.store],function(t){return e.vf(t).next(function(){return e.Cf(t)})})];case 1:return t.sent(),this.wf.close(),this.Bf(),[2]}})})},pS.prototype.Ff=function(t,e){var n=this;return t.filter(function(t){return n.Nf(t.updateTimeMs,e)&&!n.Mf(t.clientId)})},pS.prototype.Jh=function(){var e=this;return this.wf.runTransaction("readonly",[rS.store],function(t){return gS(t).ld().next(function(t){return e.Ff(t,18e5).map(function(t){return t.clientId})})})},pS.clearPersistence=function(n){return Is(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return pS.Uc()?(e=n+pS.ff,[4,rI.delete(e)]):[2,Promise.resolve()];case 1:return t.sent(),[2]}})})},Object.defineProperty(pS.prototype,"ko",{get:function(){return this.hf},enumerable:!0,configurable:!0}),pS.prototype.Yo=function(t){return dI.Id(t,this.serializer,this.ur,this.Jo)},pS.prototype.eh=function(){return this.th},pS.prototype.Zo=function(){return this.hr},pS.prototype.nh=function(){return this.ur},pS.prototype.runTransaction=function(n,t,r){var i=this;K_("IndexedDbPersistence","Starting transaction:",n);var o,e="readonly"===t?"readonly":"readwrite";return this.wf.runTransaction(e,iS,function(e){return o=new lS(e,i.Vf.next()),"readwrite-primary"===t?i.yf(e).next(function(t){return!!t||i.bf(e)}).next(function(t){if(!t)throw H_("Failed to obtain primary lease for action '"+n+"'."),i.isPrimary=!1,i.$a.qr(function(){return i.lf(!1)}),new vg(dg.FAILED_PRECONDITION,cw);return r(o)}).next(function(t){return i.Sf(e).next(function(){return t})}):i.Uf(e).next(function(){return r(o)})}).then(function(t){return o.or(),t})},pS.prototype.Uf=function(t){var e=this;return yS(t).get(VI.key).next(function(t){if(null!==t&&e.Nf(t.leaseTimestampMs,5e3)&&!e.Mf(t.ownerId)&&!e.Df(t)&&!t.allowTabSynchronization)throw new vg(dg.FAILED_PRECONDITION,hS)})},pS.prototype.Sf=function(t){var e=new VI(this.clientId,this.allowTabSynchronization,Date.now());return yS(t).put(VI.key,e)},pS.Uc=function(){return rI.Uc()},pS.qf=function(t){var e=t.cn.projectId;return t.cn.Ei||(e+="."+t.cn.database),"firestore/"+t.persistenceKey+"/"+e+"/"},pS.prototype.vf=function(t){var e=this,n=yS(t);return n.get(VI.key).next(function(t){return e.Df(t)?(K_("IndexedDbPersistence","Releasing primary lease."),n.delete(VI.key)):aw.resolve()})},pS.prototype.Nf=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(H_("Detected an update time that is in the future: "+t+" > "+n),1))},pS.prototype.Rf=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.uf=function(){t.$a.qr(function(){return t.inForeground="visible"===t.document.visibilityState,t.If()})},this.document.addEventListener("visibilitychange",this.uf),this.inForeground="visible"===this.document.visibilityState)},pS.prototype.Of=function(){this.uf&&(this.document.removeEventListener("visibilitychange",this.uf),this.uf=null)},pS.prototype.Af=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.af=function(){t.Lf(),t.$a.qr(function(){return t.lc()})},this.window.addEventListener("unload",this.af))},pS.prototype.xf=function(){this.af&&(this.window.removeEventListener("unload",this.af),this.af=null)},pS.prototype.Mf=function(t){try{var e=null!==this.Tf.getItem(this.$f(t));return K_("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return H_("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},pS.prototype.Lf=function(){try{this.Tf.setItem(this.$f(this.clientId),String(Date.now()))}catch(t){H_("Failed to set zombie client id.",t)}},pS.prototype.Bf=function(){try{this.Tf.removeItem(this.$f(this.clientId))}catch(t){}},pS.prototype.$f=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},pS);function pS(t,e,n,r,i,o,s,a){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.$a=o,this.rf=a,this.hf=!1,this.isPrimary=!1,this.networkEnabled=!0,this.af=null,this.inForeground=!1,this.uf=null,this.cf=null,this._f=Number.NEGATIVE_INFINITY,this.lf=function(t){return Promise.resolve()},this.Jo=new mS(this,i),this.df=e+pS.ff,this.serializer=new cS(s),this.document=r.document,this.th=new wI(this.Jo,this.serializer),this.ur=new oS,this.hr=new AI(this.serializer,this.ur),!r.window||!r.window.localStorage)throw new vg(dg.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.Tf=this.window.localStorage}function dS(t,e){var n=this;return(n=uS.call(this)||this).yd=t,n.Ch=e,n}function vS(t){this.sf=t}function yS(t){return t.store(VI.store)}function gS(t){return t.store(rS.store)}fS.ff="main";var mS=(bS.prototype.Mo=function(t){var n=this.Wf(t);return this.db.eh().Ld(t).next(function(e){return n.next(function(t){return e+t})})},bS.prototype.Wf=function(t){var e=0;return this.Oo(t,function(t){e++}).next(function(){return e})},bS.prototype.Xs=function(t,e){return this.db.eh().Xs(t,e)},bS.prototype.Oo=function(t,n){return this.jf(t,function(t,e){return n(e)})},bS.prototype.Ho=function(t){this.Qf=t},bS.prototype.vi=function(t,e){return _S(t,e)},bS.prototype.Di=function(t,e){return _S(t,e)},bS.prototype.xo=function(t,e,n){return this.db.eh().xo(t,e,n)},bS.prototype.bd=function(t,e){return _S(t,e)},bS.prototype.Kf=function(t,e){return this.Qf.Mi(e)?aw.resolve(!0):(r=e,i=!1,_I(n=t).Ed(function(t){return yI(n,t,r).next(function(t){return t&&(i=!0),aw.resolve(!t)})}).next(function(){return i}));var n,r,i},bS.prototype.Bo=function(r,i){var o=this,s=this.db.Zo().Eh(),a=[],u=0;return this.jf(r,function(e,t){if(t<=i){var n=o.Kf(r,e).next(function(t){if(!t)return u++,s.tr(r,e).next(function(){return s.Zi(e),NI(r).delete([0,ZT(e.path)])})});a.push(n)}}).next(function(){return aw.Ki(a)}).next(function(){return s.apply(r)}).next(function(){return u})},bS.prototype.removeTarget=function(t,e){var n=e.es(t.Ch);return this.db.eh().Nh(t,n)},bS.prototype.Fh=function(t,e){return _S(t,e)},bS.prototype.jf=function(t,o){var s,e=NI(t),a=pw.kr;return e.md({index:ZI.documentTargetsIndex},function(t,e){var n=t[0],r=(t[1],e.path),i=e.sequenceNumber;0===n?(a!==pw.kr&&o(new Ug(nI(s)),a),a=i,s=r):a=pw.kr}).next(function(){a!==pw.kr&&o(new Ug(nI(s)),a)})},bS.prototype.qo=function(t){return this.db.Zo().Jd(t)},bS);function bS(t,e){this.db=t,this.Qf=null,this.bo=new Uw(this,e)}function _S(t,e){return NI(t).put((n=e,r=t.Ch,new ZI(0,ZT(n.path),r)));var n,r}var wS,ES=(SS.prototype.Rd=function(t){return aw.resolve(0===this.ar.length)},SS.prototype.mh=function(t,e,n){var r=e.batchId,i=this.Hf(r,"acknowledged");return Q_(0===i,"Can only acknowledge the first batch in the mutation queue"),this.ar[i],this.lastStreamToken=n,aw.resolve()},SS.prototype.ph=function(t){return aw.resolve(this.lastStreamToken)},SS.prototype.yh=function(t,e){return this.lastStreamToken=e,aw.resolve()},SS.prototype.dh=function(t,e,n,r){var i=this.Gf;this.Gf++,0<this.ar.length&&this.ar[this.ar.length-1];var o=new rw(i,e,n,r);this.ar.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.zf=this.zf.add(new sw(u.key,i)),this.ur.Vd(t,u.key.path.L())}return aw.resolve(o)},SS.prototype.Ph=function(t,e){return aw.resolve(this.Jf(e))},SS.prototype.Th=function(t,e){var n=this.Jf(e);return aw.resolve(n.keys())},SS.prototype.xh=function(t,e){var n=e+1,r=this.Yf(n),i=r<0?0:r;return aw.resolve(this.ar.length>i?this.ar[i]:null)},SS.prototype.gh=function(){return aw.resolve(0===this.ar.length?-1:this.Gf-1)},SS.prototype.hh=function(t){return aw.resolve(this.ar.slice())},SS.prototype._r=function(t,e){var n=this,r=new sw(e,0),i=new sw(e,Number.POSITIVE_INFINITY),o=[];return this.zf.Ct([r,i],function(t){var e=n.Jf(t.Li);o.push(e)}),aw.resolve(o)},SS.prototype.Er=function(t,e){var r=this,i=new zg(J_);return e.forEach(function(t){var e=new sw(t,0),n=new sw(t,Number.POSITIVE_INFINITY);r.zf.Ct([e,n],function(t){i=i.add(t.Li)})}),aw.resolve(this.Xf(i))},SS.prototype.Vr=function(t,e){var n=e.path,r=n.length+1,i=n;Ug.st(i)||(i=i.child(""));var o=new sw(new Ug(i),0),s=new zg(J_);return this.zf.kt(function(t){var e=t.key.path;return!!n.q(e)&&(e.length===r&&(s=s.add(t.Li)),!0)},o),aw.resolve(this.Xf(s))},SS.prototype.Xf=function(t){var n=this,r=[];return t.forEach(function(t){var e=n.Jf(t);null!==e&&r.push(e)}),r},SS.prototype.Vh=function(n,r){var i=this;Q_(0===this.Hf(r.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.ar.shift();var o=this.zf;return aw.forEach(r.mutations,function(t){var e=new sw(t.key,r.batchId);return o=o.delete(e),i.Jo.bd(n,t.key)}).next(function(){i.zf=o})},SS.prototype.Xh=function(t){},SS.prototype.Mi=function(t,e){var n=new sw(e,0),r=this.zf.Nt(n);return aw.resolve(e.isEqual(r&&r.key))},SS.prototype.Rh=function(t){return this.ar.length,aw.resolve()},SS.prototype.Hf=function(t,e){return this.Yf(t)},SS.prototype.Yf=function(t){return 0===this.ar.length?0:t-this.ar[0].batchId},SS.prototype.Jf=function(t){var e=this.Yf(t);return e<0||e>=this.ar.length?null:this.ar[e]},SS),TS=(IS.prototype.Yi=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Zf(e);return this.docs=this.docs.it(r,{Ud:e,size:s,readTime:n}),this.size+=s-o,this.ur.Vd(t,r.path.L())},IS.prototype.Zi=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},IS.prototype.tr=function(t,e){var n=this.docs.get(e);return aw.resolve(n?n.Ud:null)},IS.prototype.getEntries=function(t,e){var n=this,r=i_();return e.forEach(function(t){var e=n.docs.get(t);r=r.it(t,e?e.Ud:null)}),aw.resolve(r)},IS.prototype.wr=function(t,e,n){for(var r=s_(),i=new Ug(e.path.child("")),o=this.docs.lt(i);o.It();){var s=o.wt(),a=s.key,u=s.value,c=u.Ud,h=u.readTime;if(!e.path.q(a.path))break;h.D(n)<=0||c instanceof cb&&e.matches(c)&&(r=r.it(c.key,c))}return aw.resolve(r)},IS.prototype.tT=function(t,e){return aw.forEach(this.docs,function(t){return e(t)})},IS.prototype.ea=function(t,e){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},IS.prototype.na=function(t){return aw.resolve(wg.MIN)},IS.prototype.Eh=function(t){return new IS.Hd(this)},IS.prototype.Jd=function(t){return aw.resolve(this.size)},IS);function IS(t,e){this.ur=t,this.Zf=e,this.docs=new Vg(Ug.F),this.size=0}function SS(t,e){this.ur=t,this.Jo=e,this.ar=[],this.Gf=1,this.lastStreamToken=tm.xt,this.zf=new zg(sw.Ee)}function NS(t){var e=this;return(e=wS.call(this)||this).Yd=t,e}TS.Hd=(Es(NS,wS=uw),NS.prototype.nr=function(n){var r=this,i=[];return this.zi.forEach(function(t,e){e?i.push(r.Yd.Yi(n,e,r.readTime)):r.Yd.Zi(t)}),aw.Ki(i)},NS.prototype.er=function(t,e){return this.Yd.tr(t,e)},NS.prototype.sr=function(t,e){return this.Yd.getEntries(t,e)},NS);var CS,AS,kS=(KS.prototype.Xs=function(t,n){return this.eT.forEach(function(t,e){return n(e)}),aw.resolve()},KS.prototype.bh=function(t){return aw.resolve(this.lastRemoteSnapshotVersion)},KS.prototype.Dd=function(t){return aw.resolve(this.sT)},KS.prototype.Qh=function(t){return this.highestTargetId=this.iT.next(),aw.resolve(this.highestTargetId)},KS.prototype.$h=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.sT&&(this.sT=e),aw.resolve()},KS.prototype.Cd=function(t){this.eT.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.iT=new PT(e),this.highestTargetId=e),t.sequenceNumber>this.sT&&(this.sT=t.sequenceNumber)},KS.prototype.Wh=function(t,e){return this.Cd(e),this.targetCount+=1,aw.resolve()},KS.prototype.Nh=function(t,e){return this.Cd(e),aw.resolve()},KS.prototype.Nd=function(t,e){return this.eT.delete(e.target),this.nT.Ni(e.targetId),--this.targetCount,aw.resolve()},KS.prototype.xo=function(n,r,i){var o=this,s=0,a=[];return this.eT.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.eT.delete(t),a.push(o.Fd(n,e.targetId)),s++)}),aw.Ki(a).next(function(){return s})},KS.prototype.Ld=function(t){return aw.resolve(this.targetCount)},KS.prototype.qh=function(t,e){var n=this.eT.get(e)||null;return aw.resolve(n)},KS.prototype.un=function(t,e){return z_("Not yet implemented.")},KS.prototype.Dh=function(e,t,n){this.nT.Si(t,n);var r=this.persistence.Jo,i=[];return r&&t.forEach(function(t){i.push(r.vi(e,t))}),aw.Ki(i)},KS.prototype.Sh=function(e,t,n){this.nT.ki(t,n);var r=this.persistence.Jo,i=[];return r&&t.forEach(function(t){i.push(r.Di(e,t))}),aw.Ki(i)},KS.prototype.Fd=function(t,e){return this.nT.Ni(e),aw.resolve()},KS.prototype.Gh=function(t,e){var n=this.nT.$i(e);return aw.resolve(n)},KS.prototype.Mi=function(t,e){return aw.resolve(this.nT.Mi(e))},KS),RS=(WS.prototype.start=function(){return Promise.resolve()},WS.prototype.lc=function(){return this.hf=!1,Promise.resolve()},Object.defineProperty(WS.prototype,"ko",{get:function(){return this.hf},enumerable:!0,configurable:!0}),WS.prototype.Jh=function(){return Is(this,void 0,void 0,function(){return Ss(this,function(t){return[2,[this.clientId]]})})},WS.prototype.gf=function(t){return t(!0)},WS.prototype.pf=function(){},WS.prototype.Zh=function(t){},WS.prototype.nh=function(){return this.ur},WS.prototype.Yo=function(t){var e=this.rT[t.s()];return e||(e=new ES(this.ur,this.Jo),this.rT[t.s()]=e),e},WS.prototype.eh=function(){return this.th},WS.prototype.Zo=function(){return this.hr},WS.prototype.runTransaction=function(t,e,n){var r=this;K_("MemoryPersistence","Starting transaction:",t);var i=new OS(this.Vf.next());return this.Jo.hT(),n(i).next(function(t){return r.Jo.aT(i).next(function(){return t})}).Wi().then(function(t){return i.or(),t})},WS.prototype.uT=function(e,n){return aw.Gi(Object.values(this.rT).map(function(t){return function(){return t.Mi(e,n)}}))},WS),OS=(Es(BS,AS=hw),BS),PS=(qS._T=function(t){return new qS(t)},Object.defineProperty(qS.prototype,"lT",{get:function(){if(this.cT)return this.cT;throw z_("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),qS.prototype.Ho=function(t){this.Qf=t},qS.prototype.vi=function(t,e){return this.lT.delete(e),aw.resolve()},qS.prototype.Di=function(t,e){return this.lT.add(e),aw.resolve()},qS.prototype.bd=function(t,e){return this.lT.add(e),aw.resolve()},qS.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.eh();return r.Gh(t,e.targetId).next(function(t){t.forEach(function(t){return n.lT.add(t)})}).next(function(){return r.Nd(t,e)})},qS.prototype.hT=function(){this.cT=new Set},qS.prototype.aT=function(t){var n=this,r=this.persistence.Zo().Eh();return aw.forEach(this.lT,function(e){return n.dT(t,e).next(function(t){t||r.Zi(e)})}).next(function(){return n.cT=null,r.apply(t)})},qS.prototype.Fh=function(t,e){var n=this;return this.dT(t,e).next(function(t){t?n.lT.delete(e):n.lT.add(e)})},qS.prototype.oT=function(t){return 0},qS.prototype.dT=function(t,e){var n=this;return aw.Gi([function(){return n.persistence.eh().Mi(t,e)},function(){return n.persistence.uT(t,e)},function(){return aw.resolve(n.Qf.Mi(e))}])},qS),DS=(VS.prototype.initialize=function(e){return Is(this,void 0,void 0,function(){var n=this;return Ss(this,function(t){switch(t.label){case 0:return this.X_=this.fT(e),this.persistence=this.TT(e),[4,this.persistence.start()];case 1:return t.sent(),this.mT=this.ET(e),this.Wu=this.wT(e),this.W_=this.IT(e),this.mc=this.RT(e),this.AT=this.PT(e),this.X_.$u=function(t){return n.mc.B_(t,1)},this.W_.mc=this.mc,this.X_.mc=this.mc,[4,this.X_.start()];case 2:return t.sent(),[4,this.W_.start()];case 3:return t.sent(),[4,this.Wu.start()];case 4:return t.sent(),[4,this.persistence.gf(function(e){return Is(n,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return[4,this.mc.Cc(e)];case 1:return t.sent(),this.mT&&(e&&!this.mT.ko?this.mT.start(this.Wu):e||this.mT.stop()),[2]}})})})];case 5:return t.sent(),[2]}})})},VS.prototype.PT=function(t){return new MT(this.mc)},VS.prototype.ET=function(t){return null},VS.prototype.wT=function(t){return new jw(this.persistence,new UT,t.VT)},VS.prototype.TT=function(t){return new RS(t.clientId,PS._T)},VS.prototype.IT=function(t){var e=this;return new uT(this.Wu,t.bu,t.Nr,function(t){return e.mc.B_(t,0)},t.platform.gT())},VS.prototype.fT=function(t){return new OT},VS.prototype.RT=function(t){return new LT(this.Wu,this.W_,this.X_,t.VT,t.Z_)},VS.prototype.clearPersistence=function(t){throw new vg(dg.FAILED_PRECONDITION,"You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.")},VS),xS=(Es(jS,CS=DS),jS.prototype.ET=function(t){var e=this.persistence.Jo.bo;return new Fw(e,t.Nr)},jS.prototype.TT=function(t){var e=fS.qf(t.pT),n=t.platform.yT(t.pT.cn);return fS.mf({allowTabSynchronization:t.bT.synchronizeTabs,persistenceKey:e,clientId:t.clientId,platform:t.platform,$a:t.Nr,serializer:n,Ef:xw.Io(t.bT.cacheSizeBytes),rf:this.X_})},jS.prototype.fT=function(t){if(t.bT.synchronizeTabs){if(!RT.Uc(t.platform))throw new vg(dg.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var e=fS.qf(t.pT);return new RT(t.Nr,t.platform,e,t.clientId,t.VT)}return new OT},jS.prototype.clearPersistence=function(t){var e=fS.qf(t);return fS.clearPersistence(e)},jS),LS=(US.prototype.start=function(e,n){var r=this;this.vT();var i=new Nw,o=new Nw,s=!1;return this.credentials.l(function(t){if(!s)return s=!0,K_("FirestoreClient","Initializing. user=",t.uid),r.ST(e,n,t,o).then(i.resolve,i.reject);r.Nr.qr(function(){return r.Dc(t)})}),this.Nr.qr(function(){return i.promise}),o.promise},US.prototype.enableNetwork=function(){var t=this;return this.vT(),this.Nr.enqueue(function(){return t.mc.enableNetwork()})},US.prototype.ST=function(s,a,u,c){return Is(this,void 0,void 0,function(){var e,n,r,i,o=this;return Ss(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,this.platform.DT(this.pT)];case 1:return e=t.sent(),n=this.platform.yT(this.pT.cn),r=new oT(this.Nr,e,this.credentials,n),[4,s.initialize({Nr:this.Nr,pT:this.pT,platform:this.platform,bu:r,clientId:this.clientId,VT:u,Z_:100,bT:a})];case 2:return t.sent(),this.persistence=s.persistence,this.X_=s.X_,this.Wu=s.Wu,this.W_=s.W_,this.mc=s.mc,this.mT=s.mT,this.CT=s.AT,this.persistence.pf(function(){return Is(o,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}})})}),c.resolve(),[3,4];case 3:if(i=t.sent(),c.reject(i),!this.kT(i))throw i;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),this.ST(new DS,{NT:!1},u,c))];case 4:return[2]}})})},US.prototype.kT=function(t){return"FirebaseError"===t.name?t.code===dg.FAILED_PRECONDITION||t.code===dg.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},US.prototype.vT=function(){if(this.Nr.Hr)throw new vg(dg.FAILED_PRECONDITION,"The client has already been terminated.")},US.prototype.Dc=function(t){return this.Nr.no(),K_("FirestoreClient","Credential Changed. Current user: "+t.uid),this.mc.Dc(t)},US.prototype.disableNetwork=function(){var t=this;return this.vT(),this.Nr.enqueue(function(){return t.mc.disableNetwork()})},US.prototype.terminate=function(){var t=this;return this.Nr.to(function(){return Is(t,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.mT&&this.mT.stop(),[4,this.W_.lc()];case 1:return t.sent(),[4,this.X_.lc()];case 2:return t.sent(),[4,this.persistence.lc()];case 3:return t.sent(),this.credentials.T(),[2]}})})})},US.prototype.waitForPendingWrites=function(){var t=this;this.vT();var e=new Nw;return this.Nr.qr(function(){return t.mc.Pl(e)}),e.promise},US.prototype.listen=function(t,e,n){var r=this;this.vT();var i=new FT(t,e,n);return this.Nr.qr(function(){return r.CT.listen(i)}),i},US.prototype.fc=function(t){var e=this;this.FT||this.Nr.qr(function(){return e.CT.fc(t)})},US.prototype.$T=function(t){var e=this;return this.vT(),this.Nr.enqueue(function(){return e.Wu.Bh(t)}).then(function(t){if(t instanceof cb)return t;if(t instanceof hb)return null;throw new vg(dg.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},US.prototype.MT=function(i){var t=this;return this.vT(),this.Nr.enqueue(function(){return Is(t,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return[4,this.Wu.Kh(i,!0)];case 1:return e=t.sent(),n=new DT(i,e.zh),r=n.k_(e.documents),[2,n.nr(r,!1).snapshot]}})})})},US.prototype.write=function(t){var e=this;this.vT();var n=new Nw;return this.Nr.qr(function(){return e.mc.write(t,n)}),n.promise},US.prototype.cn=function(){return this.pT.cn},US.prototype.Ol=function(t){var e=this;this.vT(),this.Nr.qr(function(){return e.CT.Ol(t),Promise.resolve()})},US.prototype.xl=function(t){this.FT||this.CT.xl(t)},Object.defineProperty(US.prototype,"FT",{get:function(){return this.Nr.Hr},enumerable:!0,configurable:!0}),US.prototype.transaction=function(t){var e=this;this.vT();var n=new Nw;return this.Nr.qr(function(){return e.mc.runTransaction(e.Nr,t,n),Promise.resolve()}),n.promise},US),MS=(FS.prototype.next=function(t){this.LT(this.observer.next,t)},FS.prototype.error=function(t){this.LT(this.observer.error,t)},FS.prototype.OT=function(){this.muted=!0},FS.prototype.LT=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},FS);function FS(t){this.observer=t,this.muted=!1}function US(t,e,n,r){this.platform=t,this.pT=e,this.credentials=n,this.Nr=r,this.clientId=Y_.mi()}function jS(){return null!==CS&&CS.apply(this,arguments)||this}function VS(){}function qS(t){this.persistence=t,this.Qf=null,this.cT=null}function BS(t){var e=this;return(e=AS.call(this)||this).Ch=t,e}function WS(t,e){var n=this;this.clientId=t,this.rT={},this.Vf=new pw(0),this.hf=!1,this.hf=!0,this.Jo=e(this),this.th=new kS(this),this.ur=new MI,this.hr=new TS(this.ur,function(t){return n.Jo.oT(t)})}function KS(t){this.persistence=t,this.eT=new nw(function(t){return t.canonicalId()}),this.lastRemoteSnapshotVersion=wg.MIN,this.highestTargetId=0,this.sT=0,this.nT=new ow,this.targetCount=0,this.iT=PT.p_()}function HS(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}var GS,zS,QS=(mN.prototype.BT=function(t){switch(um(t)){case 0:return null;case 1:return t.booleanValue;case 2:return vm(t.integerValue||t.doubleValue);case 3:return this.UT(t.timestampValue);case 4:return this.qT(t);case 5:return t.stringValue;case 6:return new lE(ym(t.bytesValue));case 7:return this.QT(t.referenceValue);case 8:return new PE(t.geoPointValue.latitude,t.geoPointValue.longitude);case 9:return this.WT(t.arrayValue);case 10:return this.jT(t.mapValue);default:throw z_("Invalid value type: "+JSON.stringify(t))}},mN.prototype.jT=function(t){var n=this,r={};return $g(t.fields||{},function(t,e){r[t]=n.BT(e)}),r},mN.prototype.WT=function(t){var e=this;return(t.values||[]).map(function(t){return e.BT(t)})},mN.prototype.qT=function(t){switch(this.xT){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return om(n)?t(n):n}(t);return null==e?null:this.BT(e);case"estimate":return this.UT(sm(t));default:return null}},mN.prototype.UT=function(t){var e=dm(t),n=new _g(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},mN.prototype.QT=function(t){var e=Og.G(t);Q_(U_(e),"ReferenceValue is not valid "+t);var n=new ew(e.get(1),e.get(3)),r=new Ug(e.M(5));return n.isEqual(this.firestore.KT)||H_("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.firestore.KT.projectId+"/"+this.firestore.KT.database+") instead."),new tN(r,this.firestore,this.converter)},mN),YS=xw.Po,XS=(gN.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},gN),JS=(yN.prototype.settings=function(t){Hw("Firestore.settings",arguments,1),Qw("Firestore.settings","object",1,t);var e=new XS(t);if(this.JT&&!this.em.isEqual(e))throw new vg(dg.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this.em=e).credentials&&(this.ZT=function(t){if(!t)return new yg;switch(t.type){case"gapi":var e=t.im;return Q_(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new bg(e,t.V||"0");case"provider":return t.im;default:throw new vg(dg.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},yN.prototype.enableNetwork=function(){return this.HT(),this.JT.enableNetwork()},yN.prototype.disableNetwork=function(){return this.HT(),this.JT.disableNetwork()},yN.prototype.enablePersistence=function(t){var e,n;if(this.JT)throw new vg(dg.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1;return t&&(void 0!==t.experimentalTabSynchronization&&H_("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n),this.rm(this.tm,{NT:!0,cacheSizeBytes:this.em.cacheSizeBytes,synchronizeTabs:r})},yN.prototype.clearPersistence=function(){return Is(this,void 0,void 0,function(){var r,e=this;return Ss(this,function(t){if(void 0!==this.JT&&!this.JT.FT)throw new vg(dg.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return r=new Nw,[2,(this.zT.Jr(function(){return Is(e,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=this.om(),[4,this.tm.clearPersistence(e)];case 1:return t.sent(),r.resolve(),[3,3];case 2:return n=t.sent(),r.reject(n),[3,3];case 3:return[2]}})})}),r.promise)]})})},yN.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(yN.prototype,"hm",{get:function(){return this.HT(),this.JT.FT},enumerable:!0,configurable:!0}),yN.prototype.waitForPendingWrites=function(){return this.HT(),this.JT.waitForPendingWrites()},yN.prototype.onSnapshotsInSync=function(t){if(this.HT(),HS(t))return this.am(t);Qw("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.am(e)},yN.prototype.am=function(t){var e=this,n=new MS({next:function(){t.next&&t.next()},error:function(t){throw z_("Uncaught Error in onSnapshotsInSync")}});return this.JT.Ol(n),function(){n.OT(),e.JT.xl(n)}},yN.prototype.HT=function(){return this.JT||this.rm(new DS,{NT:!1}),this.JT},yN.prototype.om=function(){return new tw(this.KT,this.XT,this.em.host,this.em.ssl,this.em.forceLongPolling)},yN.prototype.rm=function(t,e){var n=this.om();return this.JT=new LS(j_.Lt(),n,this.ZT,this.zT),this.JT.start(t,e)},yN.prototype.nm=function(r){var t=new M_(r,{dn:j_.Lt().dn});return new HE(t,function(t){if(t instanceof tN){var e=r,n=t.firestore.KT;if(!n.isEqual(e))throw new vg(dg.INVALID_ARGUMENT,"Document reference is for database "+n.projectId+"/"+n.database+" but should be for database "+e.projectId+"/"+e.database);return new KE(r,t.um)}return t})},yN.YT=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new vg(dg.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;if(!n||"string"!=typeof n)throw new vg(dg.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new ew(n)},Object.defineProperty(yN.prototype,"app",{get:function(){if(!this.GT)throw new vg(dg.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.GT},enumerable:!0,configurable:!0}),yN.prototype.collection=function(t){return Hw("Firestore.collection",arguments,1),Qw("Firestore.collection","non-empty string",1,t),this.HT(),new sN(Og.G(t),this)},yN.prototype.doc=function(t){return Hw("Firestore.doc",arguments,1),Qw("Firestore.doc","non-empty string",1,t),this.HT(),tN.cm(Og.G(t),this)},yN.prototype.collectionGroup=function(t){if(Hw("Firestore.collectionGroup",arguments,1),Qw("Firestore.collectionGroup","non-empty string",1,t),0<=t.indexOf("/"))throw new vg(dg.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.HT(),new iN(new pb(Og.H,t),this)},yN.prototype.runTransaction=function(e){var n=this;return Hw("Firestore.runTransaction",arguments,1),Qw("Firestore.runTransaction","function",1,e),this.HT().transaction(function(t){return e(new $S(n,t))})},yN.prototype.batch=function(){return this.HT(),new ZS(this)},Object.defineProperty(yN,"logLevel",{get:function(){switch(B_()){case Ta.DEBUG:return"debug";case Ta.SILENT:return"silent";default:return"error"}},enumerable:!0,configurable:!0}),yN.setLogLevel=function(t){switch(Hw("Firestore.setLogLevel",arguments,1),Qw("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":W_(Ta.DEBUG);break;case"error":W_(Ta.ERROR);break;case"silent":W_(Ta.SILENT);break;default:throw new vg(dg.INVALID_ARGUMENT,"Invalid log level: "+t)}},yN.prototype._m=function(){return this.em.timestampsInSnapshots},yN),$S=(vN.prototype.get=function(t){var n=this;Hw("Transaction.get",arguments,1);var r=EN("Transaction.get",t,this.lm);return this.dm.pu([r.um]).then(function(t){if(!t||1!==t.length)return z_("Mismatch in docs returned from document lookup.");var e=t[0];if(e instanceof hb)return new nN(n.lm,r.um,null,!1,!1,r.fm);if(e instanceof cb)return new nN(n.lm,r.um,e,!1,!1,r.fm);throw z_("BatchGetDocumentsRequest returned unexpected document type: "+e.constructor.name)})},vN.prototype.set=function(t,e,n){zw("Transaction.set",arguments,2,3);var r=EN("Transaction.set",t,this.lm);n=bN("Transaction.set",n);var i=TN(r.fm,e,"Transaction.set"),o=i[0],s=i[1],a=n.merge||n.mergeFields?this.lm.sm.pa(s,o,n.mergeFields):this.lm.sm.Va(s,o);return this.dm.set(r.um,a),this},vN.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return i="string"==typeof e||e instanceof pE?(Gw("Transaction.update",arguments,3),r=EN("Transaction.update",t,this.lm),this.lm.sm.Sa("Transaction.update",e,n,o)):(Hw("Transaction.update",arguments,2),r=EN("Transaction.update",t,this.lm),this.lm.sm.ya("Transaction.update",e)),this.dm.update(r.um,i),this},vN.prototype.delete=function(t){Hw("Transaction.delete",arguments,1);var e=EN("Transaction.delete",t,this.lm);return this.dm.delete(e.um),this},vN),ZS=(dN.prototype.set=function(t,e,n){zw("WriteBatch.set",arguments,2,3),this.Em();var r=EN("WriteBatch.set",t,this.lm);n=bN("WriteBatch.set",n);var i=TN(r.fm,e,"WriteBatch.set"),o=i[0],s=i[1],a=n.merge||n.mergeFields?this.lm.sm.pa(s,o,n.mergeFields):this.lm.sm.Va(s,o);return this.Tm=this.Tm.concat(a.da(r.um,Lm.NONE)),this},dN.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.Em(),i="string"==typeof e||e instanceof pE?(Gw("WriteBatch.update",arguments,3),r=EN("WriteBatch.update",t,this.lm),this.lm.sm.Sa("WriteBatch.update",e,n,o)):(Hw("WriteBatch.update",arguments,2),r=EN("WriteBatch.update",t,this.lm),this.lm.sm.ya("WriteBatch.update",e)),this.Tm=this.Tm.concat(i.da(r.um,Lm.exists(!0))),this},dN.prototype.delete=function(t){Hw("WriteBatch.delete",arguments,1),this.Em();var e=EN("WriteBatch.delete",t,this.lm);return this.Tm=this.Tm.concat(new Qm(e.um,Lm.NONE)),this},dN.prototype.commit=function(){return this.Em(),this.mm=!0,0<this.Tm.length?this.lm.HT().write(this.Tm):Promise.resolve()},dN.prototype.Em=function(){if(this.mm)throw new vg(dg.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},dN),tN=(pN.cm=function(t,e,n){if(t.length%2!=0)throw new vg(dg.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.K()+" has "+t.length);return new pN(new Ug(t),e,n)},Object.defineProperty(pN.prototype,"id",{get:function(){return this.um.path.B()},enumerable:!0,configurable:!0}),Object.defineProperty(pN.prototype,"parent",{get:function(){return new sN(this.um.path.L(),this.firestore,this.fm)},enumerable:!0,configurable:!0}),Object.defineProperty(pN.prototype,"path",{get:function(){return this.um.path.K()},enumerable:!0,configurable:!0}),pN.prototype.collection=function(t){if(Hw("DocumentReference.collection",arguments,1),Qw("DocumentReference.collection","non-empty string",1,t),!t)throw new vg(dg.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=Og.G(t);return new sN(this.um.path.child(e),this.firestore)},pN.prototype.isEqual=function(t){if(!(t instanceof pN))throw iE("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.um.isEqual(t.um)&&this.fm===t.fm},pN.prototype.set=function(t,e){zw("DocumentReference.set",arguments,1,2),e=bN("DocumentReference.set",e);var n=TN(this.fm,t,"DocumentReference.set"),r=n[0],i=n[1],o=e.merge||e.mergeFields?this.firestore.sm.pa(i,r,e.mergeFields):this.firestore.sm.Va(i,r);return this.JT.write(o.da(this.um,Lm.NONE))},pN.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof t||t instanceof pE?(Gw("DocumentReference.update",arguments,2),this.firestore.sm.Sa("DocumentReference.update",t,e,r)):(Hw("DocumentReference.update",arguments,1),this.firestore.sm.ya("DocumentReference.update",t)),this.JT.write(n.da(this.um,Lm.exists(!0)))},pN.prototype.delete=function(){return Hw("DocumentReference.delete",arguments,0),this.JT.write([new Qm(this.um,Lm.NONE)])},pN.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];zw("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||HS(t[i])||(rE("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),Jw("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return n=HS(t[i])?t[i]:(Qw("DocumentReference.onSnapshot","function",i,t[i]),Yw("DocumentReference.onSnapshot","function",i+1,t[i+1]),Yw("DocumentReference.onSnapshot","function",i+2,t[i+2]),{next:t[i],error:t[i+1],complete:t[i+2]}),this.wm(o,n)},pN.prototype.wm=function(t,n){var r=this,e=function(t){console.error("Uncaught Error in onSnapshot:",t)};n.error&&(e=n.error.bind(n));var i=new MS({next:function(t){if(n.next){var e=t.docs.get(r.um);n.next(new nN(r.firestore,r.um,e,t.fromCache,t.hasPendingWrites,r.fm))}},error:e}),o=this.JT.listen(pb.ve(this.um.path),i,t);return function(){i.OT(),r.JT.fc(o)}},pN.prototype.get=function(n){var r=this;return zw("DocumentReference.get",arguments,0,1),wN("DocumentReference.get",n),new Promise(function(e,t){n&&"cache"===n.source?r.firestore.HT().$T(r.um).then(function(t){e(new nN(r.firestore,r.um,t,!0,t instanceof cb&&t.te,r.fm))},t):r.Im(e,t,n)})},pN.prototype.Im=function(e,n,r){var i=this.wm({includeMetadataChanges:!0,Kl:!0},{next:function(t){i(),!t.exists&&t.metadata.fromCache?n(new vg(dg.UNAVAILABLE,"Failed to get document because the client is offline.")):t.exists&&t.metadata.fromCache&&r&&"server"===r.source?n(new vg(dg.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(t)},error:n})},pN.prototype.withConverter=function(t){return new pN(this.um,this.firestore,t)},pN),eN=(fN.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},fN),nN=(lN.prototype.data=function(t){if(zw("DocumentSnapshot.data",arguments,0,1),t=_N("DocumentSnapshot.data",t),this.Rm){if(this.fm){var e=new rN(this.lm,this.um,this.Rm,this.Am,this.Pm);return this.fm.fromFirestore(e,t)}return new QS(this.lm,this.lm._m(),t.serverTimestamps,void 0).BT(this.Rm.Ie())}},lN.prototype.get=function(t,e){if(zw("DocumentSnapshot.get",arguments,1,2),e=_N("DocumentSnapshot.get",e),this.Rm){var n=this.Rm.data().field(XE("DocumentSnapshot.get",t));if(null!==n)return new QS(this.lm,this.lm._m(),e.serverTimestamps,this.fm).BT(n)}},Object.defineProperty(lN.prototype,"id",{get:function(){return this.um.path.B()},enumerable:!0,configurable:!0}),Object.defineProperty(lN.prototype,"ref",{get:function(){return new tN(this.um,this.lm,this.fm)},enumerable:!0,configurable:!0}),Object.defineProperty(lN.prototype,"exists",{get:function(){return null!==this.Rm},enumerable:!0,configurable:!0}),Object.defineProperty(lN.prototype,"metadata",{get:function(){return new eN(this.Pm,this.Am)},enumerable:!0,configurable:!0}),lN.prototype.isEqual=function(t){if(!(t instanceof lN))throw iE("isEqual","DocumentSnapshot",1,t);return this.lm===t.lm&&this.Am===t.Am&&this.um.isEqual(t.um)&&(null===this.Rm?null===t.Rm:this.Rm.isEqual(t.Rm))&&this.fm===t.fm},lN),rN=(Es(hN,zS=nN),hN.prototype.data=function(t){return zS.prototype.data.call(this,t)},hN),iN=(cN.prototype.where=function(t,e,n){var r;Hw("Query.where",arguments,3),nE("Query.where",3,n),function(t,e){if(!t.some(function(t){return t===e}))throw new vg(dg.INVALID_ARGUMENT,"Invalid value "+eE(e)+" provided to function Query.where() for its "+sE(2)+" argument. Acceptable values: "+t.join(", "))}(["<","<=","==",">=",">","array-contains","in","array-contains-any"],e);var i=XE("Query.where",t),o=db.G(e);if(i.Y()){if(o===db.ARRAY_CONTAINS||o===db.ARRAY_CONTAINS_ANY)throw new vg(dg.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o.toString()+"' queries on FieldPath.documentId().");if(o===db.IN){this.gm(n,o);for(var s=[],a=0,u=n;a<u.length;a++){var c=u[a];s.push(this.pm(c))}r={arrayValue:{values:s}}}else r=this.pm(n)}else o!==db.IN&&o!==db.ARRAY_CONTAINS_ANY||this.gm(n,o),r=this.firestore.sm.Da("Query.where",n,o===db.IN);var h=kb.create(i,o,r);return this.ym(h),new cN(this.Vm.Ce(h),this.firestore,this.fm)},cN.prototype.orderBy=function(t,e){var n;if(zw("Query.orderBy",arguments,1,2),Yw("Query.orderBy","non-empty string",2,e),void 0===e||"asc"===e)n=Lb.ASCENDING;else{if("desc"!==e)throw new vg(dg.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n=Lb.DESCENDING}if(null!==this.Vm.startAt)throw new vg(dg.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.Vm.endAt)throw new vg(dg.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var r=XE("Query.orderBy",t),i=new zb(r,n);return this.bm(i),new cN(this.Vm.ke(i),this.firestore,this.fm)},cN.prototype.limit=function(t){return Hw("Query.limit",arguments,1),Qw("Query.limit","number",1,t),oE("Query.limit",1,t),new cN(this.Vm.Ne(t),this.firestore,this.fm)},cN.prototype.limitToLast=function(t){return Hw("Query.limitToLast",arguments,1),Qw("Query.limitToLast","number",1,t),oE("Query.limitToLast",1,t),new cN(this.Vm.Fe(t),this.firestore,this.fm)},cN.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Gw("Query.startAt",arguments,1);var r=this.vm("Query.startAt",t,e,!0);return new cN(this.Vm.$e(r),this.firestore,this.fm)},cN.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Gw("Query.startAfter",arguments,1);var r=this.vm("Query.startAfter",t,e,!1);return new cN(this.Vm.$e(r),this.firestore,this.fm)},cN.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Gw("Query.endBefore",arguments,1);var r=this.vm("Query.endBefore",t,e,!0);return new cN(this.Vm.Me(r),this.firestore,this.fm)},cN.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Gw("Query.endAt",arguments,1);var r=this.vm("Query.endAt",t,e,!1);return new cN(this.Vm.Me(r),this.firestore,this.fm)},cN.prototype.isEqual=function(t){if(!(t instanceof cN))throw iE("isEqual","Query",1,t);return this.firestore===t.firestore&&this.Vm.isEqual(t.Vm)},cN.prototype.withConverter=function(t){return new cN(this.Vm,this.firestore,t)},cN.prototype.vm=function(t,e,n,r){if(nE(t,1,e),e instanceof nN){if(0<n.length)throw new vg(dg.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new vg(dg.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.Sm(i.Rm,r)}var o=[e].concat(n);return this.Dm(t,o,r)},cN.prototype.Sm=function(t,e){for(var n=[],r=0,i=this.Vm.orderBy;r<i.length;r++){var o=i[r];if(o.field.Y())n.push(gm(this.firestore.KT,t.key));else{var s=t.field(o.field);if(om(s))throw new vg(dg.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var a=o.field.K();throw new vg(dg.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+a+"' (used as the orderBy) does not exist.")}n.push(s)}}return new Gb(n,e)},cN.prototype.Dm=function(t,e,n){var r=this.Vm.Ve;if(e.length>r.length)throw new vg(dg.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var s=e[o];if(r[o].field.Y()){if("string"!=typeof s)throw new vg(dg.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(!this.Vm.He()&&-1!==s.indexOf("/"))throw new vg(dg.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+s+"' contains a slash.");var a=this.Vm.path.child(Og.G(s));if(!Ug.st(a))throw new vg(dg.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+a+"' is not because it contains an odd number of segments.");var u=new Ug(a);i.push(gm(this.firestore.KT,u))}else{var c=this.firestore.sm.Da(t,s);i.push(c)}}return new Gb(i,n)},cN.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];zw("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||HS(t[i])||(rE("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),Jw("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),n=HS(t[i])?t[i]:(Qw("Query.onSnapshot","function",i,t[i]),Yw("Query.onSnapshot","function",i+1,t[i+1]),Yw("Query.onSnapshot","function",i+2,t[i+2]),{next:t[i],error:t[i+1],complete:t[i+2]}),this.Cm(this.Vm),this.wm(r,n)},cN.prototype.wm=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new MS({next:function(t){e.next&&e.next(new oN(n.firestore,n.Vm,t,n.fm))},error:r}),o=this.firestore.HT(),s=o.listen(this.Vm,i,t);return function(){i.OT(),o.fc(s)}},cN.prototype.Cm=function(t){if(t.Ke()&&0===t.Ve.length)throw new vg(dg.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},cN.prototype.get=function(n){var r=this;return zw("Query.get",arguments,0,1),wN("Query.get",n),this.Cm(this.Vm),new Promise(function(e,t){n&&"cache"===n.source?r.firestore.HT().MT(r.Vm).then(function(t){e(new oN(r.firestore,r.Vm,t,r.fm))},t):r.Im(e,t,n)})},cN.prototype.Im=function(e,n,r){var i=this.wm({includeMetadataChanges:!0,Kl:!0},{next:function(t){i(),t.metadata.fromCache&&r&&"server"===r.source?n(new vg(dg.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(t)},error:n})},cN.prototype.pm=function(t){if("string"==typeof t){if(""===t)throw new vg(dg.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.Vm.He()&&-1!==t.indexOf("/"))throw new vg(dg.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.Vm.path.child(Og.G(t));if(!Ug.st(e))throw new vg(dg.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return gm(this.firestore.KT,new Ug(e))}if(t instanceof tN){var n=t;return gm(this.firestore.KT,n.um)}throw new vg(dg.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+eE(t)+".")},cN.prototype.gm=function(t,e){if(!Array.isArray(t)||0===t.length)throw new vg(dg.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new vg(dg.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(0<=t.indexOf(null))throw new vg(dg.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(0<t.filter(function(t){return Number.isNaN(t)}).length)throw new vg(dg.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},cN.prototype.ym=function(t){if(t instanceof kb){var e=[db.ARRAY_CONTAINS,db.ARRAY_CONTAINS_ANY],n=[db.IN,db.ARRAY_CONTAINS_ANY],r=0<=e.indexOf(t.op),i=0<=n.indexOf(t.op);if(t.Ge()){var o=this.Vm.Se();if(null!==o&&!o.isEqual(t.field))throw new vg(dg.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var s=this.Vm.De();null!==s&&this.km(t.field,s)}else if(i||r){var a=null;if(i&&(a=this.Vm.ze(n)),null===a&&r&&(a=this.Vm.ze(e)),null!=a)throw a===t.op?new vg(dg.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new vg(dg.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+a.toString()+"' filters.")}}},cN.prototype.bm=function(t){if(null===this.Vm.De()){var e=this.Vm.Se();null!==e&&this.km(e,t.field)}},cN.prototype.km=function(t,e){if(!e.isEqual(t))throw new vg(dg.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},cN),oN=(Object.defineProperty(uN.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(uN.prototype,"empty",{get:function(){return this.Fm.docs.U()},enumerable:!0,configurable:!0}),Object.defineProperty(uN.prototype,"size",{get:function(){return this.Fm.docs.size},enumerable:!0,configurable:!0}),uN.prototype.forEach=function(e,n){var r=this;zw("QuerySnapshot.forEach",arguments,1,2),Qw("QuerySnapshot.forEach","function",1,e),this.Fm.docs.forEach(function(t){e.call(n,r.Lm(t))})},Object.defineProperty(uN.prototype,"query",{get:function(){return new iN(this.Nm,this.lm,this.fm)},enumerable:!0,configurable:!0}),uN.prototype.docChanges=function(t){t&&(rE("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),Jw("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.Fm.ds)throw new vg(dg.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.$m&&this.Mm===e||(this.$m=function(i,e,o,s){if(o.cs.U()){var n=0;return o.docChanges.map(function(t){var e=new rN(i,t.doc.key,t.doc,o.fromCache,o._s.has(t.doc.key),s);return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var a=o.cs;return o.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=new rN(i,t.doc.key,t.doc,o.fromCache,o._s.has(t.doc.key),s),n=-1,r=-1;return 0!==t.type&&(n=a.indexOf(t.doc.key),a=a.delete(t.doc.key)),1!==t.type&&(r=(a=a.add(t.doc)).indexOf(t.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z_("Unknown change type: "+t)}}(t.type),doc:e,oldIndex:n,newIndex:r}})}(this.lm,e,this.Fm,this.fm),this.Mm=e),this.$m},uN.prototype.isEqual=function(t){if(!(t instanceof uN))throw iE("isEqual","QuerySnapshot",1,t);return this.lm===t.lm&&this.Nm.isEqual(t.Nm)&&this.Fm.isEqual(t.Fm)&&this.fm===t.fm},uN.prototype.Lm=function(t){return new rN(this.lm,t.key,t,this.metadata.fromCache,this.Fm._s.has(t.key),this.fm)},uN),sN=(Es(aN,GS=iN),Object.defineProperty(aN.prototype,"id",{get:function(){return this.Vm.path.B()},enumerable:!0,configurable:!0}),Object.defineProperty(aN.prototype,"parent",{get:function(){var t=this.Vm.path.L();return t.U()?null:new tN(new Ug(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(aN.prototype,"path",{get:function(){return this.Vm.path.K()},enumerable:!0,configurable:!0}),aN.prototype.doc=function(t){if(zw("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=Y_.mi()),Qw("CollectionReference.doc","non-empty string",1,t),""===t)throw new vg(dg.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=Og.G(t);return tN.cm(this.Vm.path.child(e),this.firestore,this.fm)},aN.prototype.add=function(t){Hw("CollectionReference.add",arguments,1),Qw("CollectionReference.add","object",1,this.fm?this.fm.toFirestore(t):t);var e=this.doc();return e.set(t).then(function(){return e})},aN.prototype.withConverter=function(t){return new aN(this.Om,this.firestore,t)},aN);function aN(t,e,n){var r=this;if(((r=GS.call(this,pb.ve(t),e,n)||this).Om=t).length%2!=1)throw new vg(dg.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.K()+" has "+t.length);return r}function uN(t,e,n,r){this.lm=t,this.Nm=e,this.Fm=n,this.fm=r,this.$m=null,this.Mm=null,this.metadata=new eN(n.hasPendingWrites,n.fromCache)}function cN(t,e,n){this.Vm=t,this.firestore=e,this.fm=n}function hN(){return null!==zS&&zS.apply(this,arguments)||this}function lN(t,e,n,r,i,o){this.lm=t,this.um=e,this.Rm=n,this.Am=r,this.Pm=i,this.fm=o}function fN(t,e){this.hasPendingWrites=t,this.fromCache=e}function pN(t,e,n){this.um=t,this.firestore=e,this.fm=n,this.JT=this.firestore.HT()}function dN(t){this.lm=t,this.Tm=[],this.mm=!1}function vN(t,e){this.lm=t,this.dm=e}function yN(t,e,n){var r=this;if(void 0===n&&(n=new DS),this.GT=null,this.zT=new Aw,this.INTERNAL={delete:function(){return Is(r,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.HT(),[4,this.JT.terminate()];case 1:return t.sent(),[2]}})})}},"object"==typeof t.options){var i=t;this.GT=i,this.KT=yN.YT(i),this.XT=i.name,this.ZT=new gg(e)}else{var o=t;if(!o.projectId)throw new vg(dg.INVALID_ARGUMENT,"Must provide projectId");this.KT=new ew(o.projectId,o.database),this.XT="[DEFAULT]",this.ZT=new yg}this.tm=n,this.em=new XS({}),this.sm=this.nm(this.KT)}function gN(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new vg(dg.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else Xw("settings","non-empty string","host",t.host),this.host=t.host,Jw("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(rE("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),Jw("settings","object","credentials",t.credentials),this.credentials=t.credentials,Jw("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?H_("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&H_("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,Jw("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=xw.po;else{if(t.cacheSizeBytes!==YS&&t.cacheSizeBytes<xw.Vo)throw new vg(dg.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+xw.Vo);this.cacheSizeBytes=t.cacheSizeBytes}Jw("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0!==t.experimentalForceLongPolling&&t.experimentalForceLongPolling}function mN(t,e,n,r){this.firestore=t,this.timestampsInSnapshots=e,this.xT=n,this.converter=r}function bN(t,e){if(void 0===e)return{merge:!1};if(rE(t,e,["merge","mergeFields"]),Jw(t,"boolean","merge",e.merge),n=t,void 0!==(r=e.mergeFields)&&function(t,e,n,r){if(!(n instanceof Array))throw new vg(dg.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+eE(n));for(var i=0;i<n.length;++i)if(!r(n[i]))throw new vg(dg.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+i+" was: "+eE(n[i]))}(n,"mergeFields",r,function(t){return"string"==typeof t||t instanceof pE}),void 0!==e.mergeFields&&void 0!==e.merge)throw new vg(dg.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');var n,r;return e}function _N(t,e){return void 0===e?{}:(rE(t,e,["serverTimestamps"]),$w(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function wN(t,e){Yw(t,"object",1,e),e&&(rE(t,e,["source"]),$w(t,0,"source",e.source,["default","server","cache"]))}function EN(t,e,n){if(e instanceof tN){if(e.firestore!==n)throw new vg(dg.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw iE(t,"DocumentReference",1,e)}function TN(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}var IN,SN=uE(JS,"Use firebase.firestore() instead."),NN=uE($S,"Use firebase.firestore().runTransaction() instead."),CN=uE(ZS,"Use firebase.firestore().batch() instead."),AN=uE(tN,"Use firebase.firestore().doc() instead."),kN=uE(nN),RN=uE(rN),ON=uE(iN),PN=uE(oN),DN=uE(sN,"Use firebase.firestore().collection() instead."),xN={Firestore:SN,GeoPoint:PE,Timestamp:_g,Blob:fE,Transaction:NN,WriteBatch:CN,DocumentReference:AN,DocumentSnapshot:kN,Query:ON,QueryDocumentSnapshot:RN,QuerySnapshot:PN,CollectionReference:DN,FieldPath:pE,FieldValue:OE,setLogLevel:JS.setLogLevel,CACHE_SIZE_UNLIMITED:YS},LN=(KN.prototype.Hu=function(t){},KN.prototype.lc=function(){},KN),MN=(WN.prototype.Hu=function(t){this.Qm.push(t)},WN.prototype.lc=function(){window.removeEventListener("online",this.xm),window.removeEventListener("offline",this.Um)},WN.prototype.Wm=function(){window.addEventListener("online",this.xm),window.addEventListener("offline",this.Um)},WN.prototype.Bm=function(){K_("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Qm;t<e.length;t++)(0,e[t])(0)},WN.prototype.qm=function(){K_("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Qm;t<e.length;t++)(0,e[t])(1)},WN.Uc=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},WN),FN=(BN.prototype._u=function(t){this.Gm=t},BN.prototype.ou=function(t){this.zm=t},BN.prototype.onMessage=function(t){this.Hm=t},BN.prototype.close=function(){this.Km()},BN.prototype.send=function(t){this.jm(t)},BN.prototype.Jm=function(){this.Gm()},BN.prototype.Ym=function(t){this.zm(t)},BN.prototype.Xm=function(t){this.Hm(t)},BN),UN={BatchGetDocuments:"batchGet",Commit:"commit"},jN="gl-js/ fire/"+cg,VN=(qN.prototype.tE=function(t,e){if(e)for(var n in e.h)e.h.hasOwnProperty(n)&&(t[n]=e.h[n]);t["X-Goog-Api-Client"]=jN},qN.prototype.gu=function(u,r,i){var c=this,h=this.eE(u);return new Promise(function(o,s){var a=new ug;a.listenOnce(sg.COMPLETE,function(){try{switch(a.getLastErrorCode()){case og.NO_ERROR:var t=a.getResponseJson();K_("Connection","XHR received:",JSON.stringify(t)),o(t);break;case og.TIMEOUT:K_("Connection",'RPC "'+u+'" timed out'),s(new vg(dg.DEADLINE_EXCEEDED,"Request time out"));break;case og.HTTP_ERROR:var e=a.getStatus();if(K_("Connection",'RPC "'+u+'" failed with status:',e,"response text:",a.getResponseText()),0<e){var n=a.getResponseJson().error;if(n&&n.status&&n.message){var r=(i=n.status.toLowerCase().replace("_","-"),0<=Object.values(dg).indexOf(i)?i:dg.UNKNOWN);s(new vg(r,n.message))}else s(new vg(dg.UNKNOWN,"Server responded with status "+a.getStatus()))}else K_("Connection",'RPC "'+u+'" failed'),s(new vg(dg.UNAVAILABLE,"Connection failed."));break;default:z_('RPC "'+u+'" failed with unanticipated webchannel error '+a.getLastErrorCode()+": "+a.getLastError()+", giving up.")}}finally{K_("Connection",'RPC "'+u+'" completed.')}var i});var t=Object.assign({},r);delete t.database;var e=JSON.stringify(t);K_("Connection","XHR sending: ",h+" "+e);var n={"Content-Type":"text/plain"};c.tE(n,i),a.send(h,"POST",e,n,15)})},qN.prototype.yu=function(t,e,n){return this.gu(t,e,n)},qN.prototype.lu=function(t,e){var n,r,i=[this.Zm,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=ig(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.cn.projectId+"/databases/"+this.cn.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.tE(s.initMessageHeaders,e),qs()||Bs()||0<=Vs().indexOf("Electron/")||0<=(r=Vs()).indexOf("MSIE ")||0<=r.indexOf("Trident/")||0<=Vs().indexOf("MSAppHost/")||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var a=i.join("");function u(t,e){c.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})}K_("Connection","Creating WebChannel: "+a+" "+s);var c=o.createWebChannel(a,s),h=!1,l=!1,f=new FN({jm:function(t){l?K_("Connection","Not sending because WebChannel is closed:",t):(h||(K_("Connection","Opening WebChannel transport."),c.open(),h=!0),K_("Connection","WebChannel sending:",t),c.send(t))},Km:function(){return c.close()}});return u(ag.EventType.OPEN,function(){l||K_("Connection","WebChannel transport opened.")}),u(ag.EventType.CLOSE,function(){l||(l=!0,K_("Connection","WebChannel transport closed"),f.Ym())}),u(ag.EventType.ERROR,function(t){l||(l=!0,K_("Connection","WebChannel transport errored:",t),f.Ym(new vg(dg.UNAVAILABLE,"The operation could not be completed")))}),u(ag.EventType.MESSAGE,function(t){var e;if(!l){var n=t.data[0];Q_(!!n,"Got a webchannel message without data.");var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){K_("Connection","WebChannel received error:",r);var i=r.status,o=function(){var t=Kb[i];if(void 0!==t)return e_(t)}(),s=r.message;void 0===o&&(o=dg.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),l=!0,f.Ym(new vg(o,s)),c.close()}else K_("Connection","WebChannel received:",n),f.Xm(n)}}),setTimeout(function(){f.Jm()},0),f},qN.prototype.eE=function(t){var e=UN[t];return this.Zm+"/v1/projects/"+this.cn.projectId+"/databases/"+this.cn.database+"/documents:"+e},qN);function qN(t){this.cn=t.cn;var e=t.ssl?"https":"http";this.Zm=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}function BN(t){this.jm=t.jm,this.Km=t.Km}function WN(){var t=this;this.xm=function(){return t.Bm()},this.Um=function(){return t.qm()},this.Qm=[],this.Wm()}function KN(){}function HN(){this.dn=!0,this.ia="undefined"!=typeof atob}j_.fi((Object.defineProperty(HN.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(HN.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),HN.prototype.DT=function(t){return Promise.resolve(new VN(t))},HN.prototype.gT=function(){return new(MN.Uc()?MN:LN)},HN.prototype.yT=function(t){return new M_(t,{dn:!0})},HN.prototype.Ti=function(t){return JSON.stringify(t)},HN.prototype.atob=function(t){return atob(t)},HN.prototype.btoa=function(t){return btoa(t)},new HN)),(IN=zl).INTERNAL.registerComponent(new da("firestore",function(t){return e=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),new JS(e,n,new xS);var e,n},"PUBLIC").setServiceProps(Object.assign({},xN))),IN.registerVersion("@firebase/firestore","1.14.1");var GN,zN={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},QN=(Es(YN,GN=Error),YN);function YN(t,e,n){var r=GN.call(this,e)||this;return Object.setPrototypeOf(r,YN.prototype),r.code=t,r.details=n,r}function XN(t,e,n){var r=function(t){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!zN[a])return new QN("internal","internal");r=zN[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new QN(r,i,o)}var JN=($N.prototype.getAuthToken=function(){return Is(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},$N.prototype.getInstanceIdToken=function(){return Is(this,void 0,void 0,function(){return Ss(this,function(t){if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]})})},$N.prototype.getContext=function(){return Is(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,this.getAuthToken()];case 1:return e=t.sent(),[4,this.getInstanceIdToken()];case 2:return n=t.sent(),[2,{authToken:e,instanceIdToken:n}]}})})},$N);function $N(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}function ZN(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var tC=(eC.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return ZN(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},eC.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?ZN(t,function(t){return e.decode(t)}):t},eC);function eC(){}var nC=(Object.defineProperty(rC.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),rC.prototype._url=function(t){var e=this.app_.options.projectId,n=this.region_;return null===this.emulatorOrigin?"https://"+n+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+n+"/"+t},rC.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},rC.prototype.httpsCallable=function(e,n){var r=this;return function(t){return r.call(e,t,n||{})}},rC.prototype.postJSON=function(r,i,o){return Is(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:o.append("Content-Type","application/json"),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,fetch(r,{method:"POST",body:JSON.stringify(i),headers:o})];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{status:0,json:null}];case 4:n=null,t.label=5;case 5:return t.trys.push([5,7,,8]),[4,e.json()];case 6:return n=t.sent(),[3,8];case 7:return t.sent(),[3,8];case 8:return[2,{status:e.status,json:n}]}})})},rC.prototype.call=function(h,l,f){return Is(this,void 0,void 0,function(){var e,r,i,o,s,a,u,c;return Ss(this,function(t){switch(t.label){case 0:return e=this._url(h),l=this.serializer.encode(l),r={data:l},i=new Headers,[4,this.contextProvider.getContext()];case 1:return(o=t.sent()).authToken&&i.append("Authorization","Bearer "+o.authToken),o.instanceIdToken&&i.append("Firebase-Instance-ID-Token",o.instanceIdToken),s=f.timeout||7e4,[4,Promise.race([this.postJSON(e,r,i),(n=s,new Promise(function(t,e){setTimeout(function(){e(new QN("deadline-exceeded","deadline-exceeded"))},n)})),this.cancelAllRequests])];case 2:if(!(a=t.sent()))throw new QN("cancelled","Firebase Functions instance was deleted.");if(u=XN(a.status,a.json,this.serializer))throw u;if(!a.json)throw new QN("internal","Response is not valid JSON object.");if(void 0===(c=a.json.data)&&(c=a.json.result),void 0===c)throw new QN("internal","Response is missing data field.");return[2,{data:this.serializer.decode(c)}]}var n})})},rC);function rC(t,e,n,r){var i=this;void 0===r&&(r="us-central1"),this.app_=t,this.region_=r,this.serializer=new tC,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return i.deleteService()}},this.contextProvider=new JN(e,n),this.cancelAllRequests=new Promise(function(t){i.deleteService=function(){return t()}})}function iC(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new nC(n,r,i,e)}var oC;function sC(n){return new Promise(function(t,e){n.onsuccess=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function aC(n,r,i){var o,t=new Promise(function(t,e){sC(o=n[r].apply(n,i)).then(t,e)});return t.request=o,t}function uC(t,n,e){e.forEach(function(e){Object.defineProperty(t.prototype,e,{get:function(){return this[n][e]},set:function(t){this[n][e]=t}})})}function cC(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return aC(this[n],t,arguments)})})}function hC(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return this[n][t].apply(this[n],arguments)})})}function lC(t,r,e,n){n.forEach(function(n){n in e.prototype&&(t.prototype[n]=function(){return t=this[r],(e=aC(t,n,arguments)).then(function(t){if(t)return new pC(t,e.request)});var t,e})})}function fC(t){this._index=t}function pC(t,e){this._cursor=t,this._request=e}function dC(t){this._store=t}function vC(n){this._tx=n,this.complete=new Promise(function(t,e){n.oncomplete=function(){t()},n.onerror=function(){e(n.error)},n.onabort=function(){e(n.error)}})}function yC(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new vC(n)}function gC(t){this._db=t}function mC(t,e,n){var r=aC(indexedDB,"open",[t,e]),i=r.request;return i&&(i.onupgradeneeded=function(t){n&&n(new yC(i.result,t.oldVersion,i.transaction))}),r.then(function(t){return new gC(t)})}function bC(t){return aC(indexedDB,"deleteDatabase",[t])}oC={Functions:nC},zl.INTERNAL.registerComponent(new da("functions",iC,"PUBLIC").setServiceProps(oC).setMultipleInstances(!0)),zl.registerVersion("@firebase/functions","0.4.41"),uC(fC,"_index",["name","keyPath","multiEntry","unique"]),cC(fC,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),lC(fC,"_index",IDBIndex,["openCursor","openKeyCursor"]),uC(pC,"_cursor",["direction","key","primaryKey","value"]),cC(pC,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(pC.prototype[n]=function(){var e=this,t=arguments;return Promise.resolve().then(function(){return e._cursor[n].apply(e._cursor,t),sC(e._request).then(function(t){if(t)return new pC(t,e._request)})})})}),dC.prototype.createIndex=function(){return new fC(this._store.createIndex.apply(this._store,arguments))},dC.prototype.index=function(){return new fC(this._store.index.apply(this._store,arguments))},uC(dC,"_store",["name","keyPath","indexNames","autoIncrement"]),cC(dC,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),lC(dC,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),hC(dC,"_store",IDBObjectStore,["deleteIndex"]),vC.prototype.objectStore=function(){return new dC(this._tx.objectStore.apply(this._tx,arguments))},uC(vC,"_tx",["objectStoreNames","mode"]),hC(vC,"_tx",IDBTransaction,["abort"]),yC.prototype.createObjectStore=function(){return new dC(this._db.createObjectStore.apply(this._db,arguments))},uC(yC,"_db",["name","version","objectStoreNames"]),hC(yC,"_db",IDBDatabase,["deleteObjectStore","close"]),gC.prototype.transaction=function(){return new vC(this._db.transaction.apply(this._db,arguments))},uC(gC,"_db",["name","version","objectStoreNames"]),hC(gC,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(o){[dC,fC].forEach(function(t){o in t.prototype&&(t.prototype[o.replace("open","iterate")]=function(){var t,e=(t=arguments,Array.prototype.slice.call(t)),n=e[e.length-1],r=this._store||this._index,i=r[o].apply(r,e.slice(0,-1));i.onsuccess=function(){n(i.result)}})})}),[fC,dC].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(e){r.iterateCursor(t,function(t){t?(i.push(t.value),void 0===n||i.length!=n?t.continue():e(i)):e(i)})})})});var _C,wC=1e4,EC="w:0.4.8",TC="FIS_v2",IC="https://firebaseinstallations.googleapis.com/v1",SC=36e5,NC=((_C={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',_C["not-registered"]="Firebase Installation is not registered.",_C["installation-not-found"]="Firebase Installation not found.",_C["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',_C["app-offline"]="Could not process request. Application offline.",_C["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",_C),CC=new zs("installations","Installations",NC);function AC(t){return t instanceof Hs&&t.code.includes("request-failed")}function kC(t){var e=t.projectId;return IC+"/projects/"+e+"/installations"}function RC(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function OC(r,i){return Is(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,i.json()];case 1:return e=t.sent(),n=e.error,[2,CC.create("request-failed",{requestName:r,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})]}})})}function PC(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function DC(t,e){var n=e.refreshToken,r=PC(t);return r.append("Authorization",TC+" "+n),r}function xC(n){return Is(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return[4,n()];case 1:return 500<=(e=t.sent()).status&&e.status<600?[2,n()]:[2,e]}})})}function LC(e){return new Promise(function(t){setTimeout(t,e)})}var MC=/^[cdef][\w-]{21}$/,FC="";function UC(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return btoa(String.fromCharCode.apply(String,As(t))).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22);return MC.test(e)?e:FC}catch(t){return FC}}function jC(t){return t.appName+"!"+t.appId}var VC=new Map;function qC(t,e){var n=jC(t);BC(n,e),function(t,e){var n=KC();n&&n.postMessage({key:t,fid:e});HC()}(n,e)}function BC(t,e){var n,r,i=VC.get(t);if(i)try{for(var o=Ns(i),s=o.next();!s.done;s=o.next()){(0,s.value)(e)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var WC=null;function KC(){return!WC&&"BroadcastChannel"in self&&((WC=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){BC(t.data.key,t.data.fid)}),WC}function HC(){0===VC.size&&WC&&(WC.close(),WC=null)}var GC,zC,QC="firebase-installations-database",YC=1,XC="firebase-installations-store",JC=null;function $C(){return JC=JC||mC(QC,YC,function(t){switch(t.oldVersion){case 0:t.createObjectStore(XC)}})}function ZC(s,a){return Is(this,void 0,void 0,function(){var e,n,r,i,o;return Ss(this,function(t){switch(t.label){case 0:return e=jC(s),[4,$C()];case 1:return n=t.sent(),r=n.transaction(XC,"readwrite"),[4,(i=r.objectStore(XC)).get(e)];case 2:return o=t.sent(),[4,i.put(a,e)];case 3:return t.sent(),[4,r.complete];case 4:return t.sent(),o&&o.fid===a.fid||qC(s,a.fid),[2,a]}})})}function tA(i){return Is(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return e=jC(i),[4,$C()];case 1:return n=t.sent(),[4,(r=n.transaction(XC,"readwrite")).objectStore(XC).delete(e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2]}})})}function eA(a,u){return Is(this,void 0,void 0,function(){var e,n,r,i,o,s;return Ss(this,function(t){switch(t.label){case 0:return e=jC(a),[4,$C()];case 1:return n=t.sent(),r=n.transaction(XC,"readwrite"),[4,(i=r.objectStore(XC)).get(e)];case 2:return o=t.sent(),void 0!==(s=u(o))?[3,4]:[4,i.delete(e)];case 3:return t.sent(),[3,6];case 4:return[4,i.put(s,e)];case 5:t.sent(),t.label=6;case 6:return[4,r.complete];case 7:return t.sent(),!s||o&&o.fid===s.fid||qC(a,s.fid),[2,s]}})})}function nA(i){return Is(this,void 0,void 0,function(){var r,e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,eA(i,function(t){var e=iA(t||{fid:UC(),registrationStatus:0}),n=function(t,e){{if(0!==e.registrationStatus)return 1===e.registrationStatus?{installationEntry:e,registrationPromise:function(o){return Is(this,void 0,void 0,function(){var e,n,r,i;return Ss(this,function(t){switch(t.label){case 0:return[4,rA(o)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,LC(100)];case 3:return t.sent(),[4,rA(o)];case 4:return e=t.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,nA(o)];case 6:return n=t.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}})})}(t)}:{installationEntry:e};if(!navigator.onLine){var n=Promise.reject(CC.create("app-offline"));return{installationEntry:e,registrationPromise:n}}var r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=function(r,i){return Is(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,7]),[4,function(a,t){var u=t.fid;return Is(this,void 0,void 0,function(){var e,n,r,i,o,s;return Ss(this,function(t){switch(t.label){case 0:return e=kC(a),n=PC(a),r={fid:u,authVersion:TC,appId:a.appId,sdkVersion:EC},i={method:"POST",headers:n,body:JSON.stringify(r)},[4,xC(function(){return fetch(e,i)})];case 1:return(o=t.sent()).ok?[4,o.json()]:[3,3];case 2:return s=t.sent(),[2,{fid:s.fid||u,registrationStatus:2,refreshToken:s.refreshToken,authToken:RC(s.authToken)}];case 3:return[4,OC("Create Installation",o)];case 4:throw t.sent()}})})}(r,i)];case 1:return e=t.sent(),[2,ZC(r,e)];case 2:return AC(n=t.sent())&&409===n.serverCode?[4,tA(r)]:[3,4];case 3:return t.sent(),[3,6];case 4:return[4,ZC(r,{fid:i.fid,registrationStatus:0})];case 5:t.sent(),t.label=6;case 6:throw n;case 7:return[2]}})})}(t,r);return{installationEntry:r,registrationPromise:i}}}(i,e);return r=n.registrationPromise,n.installationEntry})];case 1:return(e=t.sent()).fid!==FC?[3,3]:(n={},[4,r]);case 2:return[2,(n.installationEntry=t.sent(),n)];case 3:return[2,{installationEntry:e,registrationPromise:r}]}})})}function rA(t){return eA(t,function(t){if(!t)throw CC.create("installation-not-found");return iA(t)})}function iA(t){return 1===(e=t).registrationStatus&&e.registrationTime+wC<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function oA(t,h){var l=t.appConfig,f=t.platformLoggerProvider;return Is(this,void 0,void 0,function(){var r,i,o,s,a,u,c;return Ss(this,function(t){switch(t.label){case 0:return e=l,n=h.fid,r=kC(e)+"/"+n+"/authTokens:generate",i=DC(l,h),(o=f.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={installation:{sdkVersion:EC}},a={method:"POST",headers:i,body:JSON.stringify(s)},[4,xC(function(){return fetch(r,a)})];case 1:return(u=t.sent()).ok?[4,u.json()]:[3,3];case 2:return c=t.sent(),[2,RC(c)];case 3:return[4,OC("Generate Auth Token",u)];case 4:throw t.sent()}var e,n})})}function sA(a,u){return void 0===u&&(u=!1),Is(this,void 0,void 0,function(){var s,e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,eA(a.appConfig,function(t){if(!uA(t))throw CC.create("not-registered");var e,n,r,i=t.authToken;if(u||2!==(r=i).requestStatus||function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+SC}(r)){if(1===i.requestStatus)return s=function(r,i){return Is(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,aA(r.appConfig)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.authToken.requestStatus?[3,5]:[4,LC(100)];case 3:return t.sent(),[4,aA(r.appConfig)];case 4:return e=t.sent(),[3,2];case 5:return 0===(n=e.authToken).requestStatus?[2,sA(r,i)]:[2,n]}})})}(a,u),t;if(!navigator.onLine)throw CC.create("app-offline");var o=(e=t,n={requestStatus:1,requestTime:Date.now()},Ts(Ts({},e),{authToken:n}));return s=function(i,o){return Is(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,8]),[4,oA(i,o)];case 1:return e=t.sent(),r=Ts(Ts({},o),{authToken:e}),[4,ZC(i.appConfig,r)];case 2:return t.sent(),[2,e];case 3:return!AC(n=t.sent())||401!==n.serverCode&&404!==n.serverCode?[3,5]:[4,tA(i.appConfig)];case 4:return t.sent(),[3,7];case 5:return r=Ts(Ts({},o),{authToken:{requestStatus:0}}),[4,ZC(i.appConfig,r)];case 6:t.sent(),t.label=7;case 7:throw n;case 8:return[2]}})})}(a,o),o}return t})];case 1:return e=t.sent(),s?[4,s]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=e.authToken,t.label=4;case 4:return[2,n]}})})}function aA(t){return eA(t,function(t){if(!uA(t))throw CC.create("not-registered");var e,n=t.authToken;return 1===(e=n).requestStatus&&e.requestTime+wC<Date.now()?Ts(Ts({},t),{authToken:{requestStatus:0}}):t})}function uA(t){return void 0!==t&&2===t.registrationStatus}function cA(e,n){return void 0===n&&(n=!1),Is(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return[4,function(n){return Is(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return[4,nA(n)];case 1:return(e=t.sent().registrationPromise)?[4,e]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e.appConfig)];case 1:return t.sent(),[4,sA(e,n)];case 2:return[2,t.sent().token]}})})}function hA(a,u){return Is(this,void 0,void 0,function(){var r,i,o,s;return Ss(this,function(t){switch(t.label){case 0:return e=a,n=u.fid,r=kC(e)+"/"+n,i=DC(a,u),o={method:"DELETE",headers:i},[4,xC(function(){return fetch(r,o)})];case 1:return(s=t.sent()).ok?[3,3]:[4,OC("Delete Installation",s)];case 2:throw t.sent();case 3:return[2]}var e,n})})}function lA(t,r){var i=t.appConfig;return function(t,e){KC();var n=jC(t),r=VC.get(n);r||(r=new Set,VC.set(n,r)),r.add(e)}(i,r),function(){var t,e,n;t=r,e=jC(i),(n=VC.get(e))&&(n.delete(t),0===n.size&&VC.delete(e),HC())}}function fA(t){return CC.create("missing-app-config-values",{valueName:t})}(GC=zl).INTERNAL.registerComponent(new da("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw fA("App Configuration");if(!t.name)throw fA("App Name");try{for(var r=Ns(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw fA(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(i){return Is(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return[4,nA(i.appConfig)];case 1:return e=t.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):sA(i).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return cA(n,t)},delete:function(){return function(r){return Is(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,eA(e=r.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=t.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw CC.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw CC.create("app-offline");case 3:return[4,hA(e,n)];case 4:return t.sent(),[4,tA(e)];case 5:t.sent(),t.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return lA(n,t)}}},"PUBLIC")),GC.registerVersion("@firebase/installations","0.4.8");var pA=((zC={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',zC["only-available-in-window"]="This method is available in a Window context.",zC["only-available-in-sw"]="This method is available in a service worker context.",zC["permission-default"]="The notification permission was not granted and dismissed instead.",zC["permission-blocked"]="The notification permission was not granted and blocked instead.",zC["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",zC["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",zC["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",zC["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",zC["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",zC["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",zC["token-update-no-token"]="FCM returned no token when updating the user to push.",zC["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",zC["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",zC["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",zC["invalid-vapid-key"]="The public VAPID key must be a string.",zC["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",zC),dA=new zs("messaging","Messaging",pA);function vA(t){return dA.create("missing-app-config-values",{valueName:t})}function yA(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,As(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var gA="fcm_token_details_db",mA=5,bA="fcm_token_object_Store";function _A(a){return Is(this,void 0,void 0,function(){var e,s,n=this;return Ss(this,function(t){switch(t.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=t.sent(),!e.map(function(t){return t.name}).includes(gA))return[2,null];t.label=2;case 2:return s=null,[4,mC(gA,mA,function(o){return Is(n,void 0,void 0,function(){var e,n,r,i;return Ss(this,function(t){switch(t.label){case 0:return o.oldVersion<2?[2]:o.objectStoreNames.contains(bA)?[4,(e=o.transaction.objectStore(bA)).index("fcmSenderId").get(a)]:[2];case 1:return n=t.sent(),[4,e.clear()];case 2:if(t.sent(),!n)return[2];if(2===o.oldVersion){if(!(r=n).auth||!r.p256dh||!r.endpoint)return[2];s={token:r.fcmToken,createTime:null!==(i=r.createTime)&&void 0!==i?i:Date.now(),subscriptionOptions:{auth:r.auth,p256dh:r.p256dh,endpoint:r.endpoint,swScope:r.swScope,vapidKey:"string"==typeof r.vapidKey?r.vapidKey:yA(r.vapidKey)}}}else(3===o.oldVersion||4===o.oldVersion)&&(s={token:(r=n).fcmToken,createTime:r.createTime,subscriptionOptions:{auth:yA(r.auth),p256dh:yA(r.p256dh),endpoint:r.endpoint,swScope:r.swScope,vapidKey:yA(r.vapidKey)}});return[2]}})})})];case 3:return t.sent().close(),[4,bC(gA)];case 4:return t.sent(),[4,bC("fcm_vapid_details_db")];case 5:return t.sent(),[4,bC("undefined")];case 6:return t.sent(),[2,function(t){if(!t||!t.subscriptionOptions)return;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&0<t.createTime&&"string"==typeof t.token&&0<t.token.length&&"string"==typeof e.auth&&0<e.auth.length&&"string"==typeof e.p256dh&&0<e.p256dh.length&&"string"==typeof e.endpoint&&0<e.endpoint.length&&"string"==typeof e.swScope&&0<e.swScope.length&&"string"==typeof e.vapidKey&&0<e.vapidKey.length}(s)?s:null]}})})}var wA="firebase-messaging-database",EA=1,TA="firebase-messaging-store",IA=null;function SA(){return IA=IA||mC(wA,EA,function(t){switch(t.oldVersion){case 0:t.createObjectStore(TA)}})}function NA(i){return Is(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return e=AA(i),[4,SA()];case 1:return[4,t.sent().transaction(TA).objectStore(TA).get(e)];case 2:return(n=t.sent())?[2,n]:[3,3];case 3:return[4,_A(i.appConfig.senderId)];case 4:return(r=t.sent())?[4,CA(i,r)]:[3,6];case 5:return t.sent(),[2,r];case 6:return[2]}})})}function CA(i,o){return Is(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return e=AA(i),[4,SA()];case 1:return n=t.sent(),[4,(r=n.transaction(TA,"readwrite")).objectStore(TA).put(o,e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2,o]}})})}function AA(t){return t.appConfig.appId}var kA="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",RA="https://fcmregistrations.googleapis.com/v1",OA="FCM_MSG",PA="google.c.a.c_id";function DA(s,a){return Is(this,void 0,void 0,function(){var e,n,r,i,o;return Ss(this,function(t){switch(t.label){case 0:return[4,LA(s)];case 1:e=t.sent(),n={method:"DELETE",headers:e},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(xA(s.appConfig)+"/"+a,n)];case 3:return[4,t.sent().json()];case 4:if((r=t.sent()).error)throw i=r.error.message,dA.create("token-unsubscribe-failed",{errorInfo:i});return[3,6];case 5:throw o=t.sent(),dA.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}})})}function xA(t){var e=t.projectId;return RA+"/projects/"+e+"/registrations"}function LA(t){var n=t.appConfig,r=t.installations;return Is(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return[4,r.getToken()];case 1:return e=t.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}})})}function MA(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==kA&&(o.web.applicationPubKey=i),o}var FA,UA;function jA(l,f,p){return Is(this,void 0,void 0,function(){var a,u,c,h;return Ss(this,function(t){switch(t.label){case 0:if("granted"!==Notification.permission)throw dA.create("permission-blocked");return[4,function(n,r){return Is(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return[4,n.pushManager.getSubscription()];case 1:return(e=t.sent())?[2,e]:[2,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}(r)})]}})})}(f,p)];case 1:return a=t.sent(),[4,NA(l)];case 2:return u=t.sent(),c={vapidKey:p,swScope:f.scope,endpoint:a.endpoint,auth:yA(a.getKey("auth")),p256dh:yA(a.getKey("p256dh"))},u?[3,3]:[2,qA(l,c)];case 3:if(e=u.subscriptionOptions,r=(n=c).vapidKey===e.vapidKey,i=n.endpoint===e.endpoint,o=n.auth===e.auth,s=n.p256dh===e.p256dh,r&&i&&o&&s)return[3,8];t.label=4;case 4:return t.trys.push([4,6,,7]),[4,DA(l,u.token)];case 5:return t.sent(),[3,7];case 6:return h=t.sent(),console.warn(h),[3,7];case 7:return[2,qA(l,c)];case 8:return Date.now()>=u.createTime+6048e5?[2,function(i,o,s){return Is(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,5]),[4,function(a,u){return Is(this,void 0,void 0,function(){var e,n,r,i,o,s;return Ss(this,function(t){switch(t.label){case 0:return[4,LA(a)];case 1:e=t.sent(),n=MA(u.subscriptionOptions),r={method:"PATCH",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(xA(a.appConfig)+"/"+u.token,r)];case 3:return[4,t.sent().json()];case 4:return i=t.sent(),[3,6];case 5:throw o=t.sent(),dA.create("token-update-failed",{errorInfo:o});case 6:if(i.error)throw s=i.error.message,dA.create("token-update-failed",{errorInfo:s});if(!i.token)throw dA.create("token-update-no-token");return[2,i.token]}})})}(o,i)];case 1:return e=t.sent(),n=Ts({token:e,createTime:Date.now()},i),[4,CA(o,n)];case 2:return t.sent(),[2,e];case 3:return r=t.sent(),[4,VA(o,s)];case 4:throw t.sent(),r;case 5:return[2]}})})}({token:u.token,createTime:Date.now(),subscriptionOptions:c},l,f)]:[2,u.token];case 9:return[2]}var e,n,r,i,o,s})})}function VA(r,i){return Is(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,NA(r)];case 1:return(e=t.sent())?[4,DA(r,e.token)]:[3,4];case 2:return t.sent(),[4,function(i){return Is(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return e=AA(i),[4,SA()];case 1:return n=t.sent(),[4,(r=n.transaction(TA,"readwrite")).objectStore(TA).delete(e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2]}})})}(r)];case 3:t.sent(),t.label=4;case 4:return[4,i.pushManager.getSubscription()];case 5:return(n=t.sent())?[2,n.unsubscribe()]:[2,!0]}})})}function qA(r,i){return Is(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,function(a,u){return Is(this,void 0,void 0,function(){var e,n,r,i,o,s;return Ss(this,function(t){switch(t.label){case 0:return[4,LA(a)];case 1:e=t.sent(),n=MA(u),r={method:"POST",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(xA(a.appConfig),r)];case 3:return[4,t.sent().json()];case 4:return i=t.sent(),[3,6];case 5:throw o=t.sent(),dA.create("token-subscribe-failed",{errorInfo:o});case 6:if(i.error)throw s=i.error.message,dA.create("token-subscribe-failed",{errorInfo:s});if(!i.token)throw dA.create("token-subscribe-no-token");return[2,i.token]}})})}(r,i)];case 1:return e=t.sent(),n={token:e,createTime:Date.now(),subscriptionOptions:i},[4,CA(r,n)];case 2:return t.sent(),[2,n.token]}})})}function BA(t){return"object"==typeof t&&t&&PA in t}(UA=FA=FA||{}).PUSH_RECEIVED="push-received",UA.NOTIFICATION_CLICKED="notification-clicked";var WA=(Object.defineProperty(KA.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),KA.prototype.getToken=function(){return Is(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return this.vapidKey||(this.vapidKey=kA),[4,this.getServiceWorkerRegistration()];case 1:return e=t.sent(),"default"!==Notification.permission?[3,3]:[4,Notification.requestPermission()];case 2:t.sent(),t.label=3;case 3:if("granted"!==Notification.permission)throw dA.create("permission-blocked");return[2,jA(this.firebaseDependencies,e,this.vapidKey)]}})})},KA.prototype.deleteToken=function(){return Is(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return[4,this.getServiceWorkerRegistration()];case 1:return e=t.sent(),[2,VA(this.firebaseDependencies,e)]}})})},KA.prototype.requestPermission=function(){return Is(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?dA.create("permission-blocked"):dA.create("permission-default")}})})},KA.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw dA.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw dA.create("invalid-vapid-key");this.vapidKey=t},KA.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw dA.create("invalid-sw-registration");if(this.swRegistration)throw dA.create("use-sw-after-get-token");this.swRegistration=t},KA.prototype.onMessage=function(t){var e=this;return this.onMessageCallback="function"==typeof t?t:t.next,function(){e.onMessageCallback=null}},KA.prototype.setBackgroundMessageHandler=function(){throw dA.create("only-available-in-sw")},KA.prototype.onTokenRefresh=function(){return function(){}},KA.prototype.getServiceWorkerRegistration=function(){return Is(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:if(this.swRegistration)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 2:return e.swRegistration=t.sent(),this.swRegistration.update().catch(function(){}),[3,4];case 3:throw n=t.sent(),dA.create("failed-service-worker-registration",{browserErrorMessage:n.message});case 4:return[2,this.swRegistration]}})})},KA.prototype.messageEventListener=function(o){var s;return Is(this,void 0,void 0,function(){var e,n,r,i;return Ss(this,function(t){switch(t.label){case 0:return null!==(s=o.data)&&void 0!==s&&s.firebaseMessaging?(e=o.data.firebaseMessaging,n=e.type,r=e.payload,this.onMessageCallback&&n===FA.PUSH_RECEIVED&&this.onMessageCallback(r),BA(i=r.data)&&"1"===i["google.c.a.e"]?[4,this.logEvent(n,i)]:[3,2]):[2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},KA.prototype.logEvent=function(n,r){return Is(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return e=function(t){switch(t){case FA.NOTIFICATION_CLICKED:return"notification_open";case FA.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(n),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return t.sent().logEvent(e,{message_id:r[PA],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},KA);function KA(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}var HA=(Object.defineProperty(GA.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),GA.prototype.setBackgroundMessageHandler=function(t){if(!t||"function"!=typeof t)throw dA.create("invalid-bg-handler");this.bgMessageHandler=t},GA.prototype.getToken=function(){var n,r;return Is(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return this.vapidKey?[3,2]:[4,NA(this.firebaseDependencies)];case 1:e=t.sent(),this.vapidKey=null!==(r=null===(n=null==e?void 0:e.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==r?r:kA,t.label=2;case 2:return[2,jA(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},GA.prototype.deleteToken=function(){return VA(this.firebaseDependencies,self.registration)},GA.prototype.requestPermission=function(){throw dA.create("only-available-in-window")},GA.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw dA.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw dA.create("invalid-vapid-key");this.vapidKey=t},GA.prototype.useServiceWorker=function(){throw dA.create("only-available-in-window")},GA.prototype.onMessage=function(){throw dA.create("only-available-in-window")},GA.prototype.onTokenRefresh=function(){throw dA.create("only-available-in-window")},GA.prototype.onPush=function(i){return Is(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(i))?[4,zA()]:[2];case 1:return(n=t.sent()).some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})?[2,function(t,e){var n,r,i=QA(FA.PUSH_RECEIVED,e);try{for(var o=Ns(t),s=o.next();!s.done;s=o.next())s.value.postMessage(i)}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}(n,e)]:(r=function(t){var e;if(t&&"object"==typeof t.notification){var n=Ts({},t.notification);return n.data=Ts(Ts({},t.notification.data),((e={})[OA]=t,e)),n}}(e))?[4,function(t){var e,n=null!==(e=t.title)&&void 0!==e?e:"",r=t.actions,i=Notification.maxActions;return r&&i&&r.length>i&&console.warn("This browser only supports "+i+" actions. The remaining actions will not be displayed."),self.registration.showNotification(n,t)}(r)]:[3,3];case 2:return t.sent(),[3,5];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(e)]:[3,5];case 4:t.sent(),t.label=5;case 5:return[2]}})})},GA.prototype.onSubChange=function(n){var r,i;return Is(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return n.newSubscription?[3,2]:[4,VA(this.firebaseDependencies,self.registration)];case 1:return t.sent(),[2];case 2:return[4,NA(this.firebaseDependencies)];case 3:return e=t.sent(),[4,VA(this.firebaseDependencies,self.registration)];case 4:return t.sent(),[4,jA(this.firebaseDependencies,self.registration,null!==(i=null===(r=null==e?void 0:e.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==i?i:kA)];case 5:return t.sent(),[2]}})})},GA.prototype.onNotificationClick=function(s){var a,u;return Is(this,void 0,void 0,function(){var n,r,i,o;return Ss(this,function(t){switch(t.label){case 0:return!(n=null===(u=null===(a=s.notification)||void 0===a?void 0:a.data)||void 0===u?void 0:u[OA])||s.action?[2]:(s.stopImmediatePropagation(),s.notification.close(),(r=function(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;return i||(BA(t.data)?self.location.origin:null)}(n))?[4,function(u){return Is(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return Ss(this,function(t){switch(t.label){case 0:return e=new URL(u,self.location.href).href,[4,zA()];case 1:n=t.sent();try{for(r=Ns(n),i=r.next();!i.done;i=r.next())if(o=i.value,new URL(o.url,self.location.href).href===e)return[2,o]}catch(t){s={error:t}}finally{try{i&&!i.done&&(a=r.return)&&a.call(r)}finally{if(s)throw s.error}}return[2,null]}})})}(r)]:[2]);case 1:return(i=t.sent())?[3,4]:[4,self.clients.openWindow(r)];case 2:return i=t.sent(),[4,(e=3e3,new Promise(function(t){setTimeout(t,e)}))];case 3:return t.sent(),[3,6];case 4:return[4,i.focus()];case 5:i=t.sent(),t.label=6;case 6:return i?(o=QA(FA.NOTIFICATION_CLICKED,n),[2,i.postMessage(o)]):[2]}var e})})},GA);function GA(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}function zA(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function QA(t,e){return{firebaseMessaging:{type:t,payload:e}}}var YA={isSupported:XA};function XA(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}zl.INTERNAL.registerComponent(new da("messaging",function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw vA("App Configuration Object");if(!t.name)throw vA("App Name");var r=t.options;try{for(var i=Ns(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw vA(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!XA())throw dA.create("unsupported-browser");return new(self&&"ServiceWorkerGlobalScope"in self?HA:WA)(n)},"PUBLIC").setServiceProps(YA));var JA="firebasestorage.googleapis.com",$A=(ZA.prototype.codeProp=function(){return this.code},ZA.prototype.codeEquals=function(t){return ek(t)===this.codeProp()},ZA.prototype.serverResponseProp=function(){return this.serverResponse_},ZA.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(ZA.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(ZA.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(ZA.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(ZA.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),ZA);function ZA(t,e){this.code_=ek(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}var tk={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function ek(t){return"storage/"+t}function nk(){return new $A(tk.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function rk(){return new $A(tk.CANCELED,"User canceled the upload/download.")}function ik(){return new $A(tk.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ok(t,e,n){return new $A(tk.INVALID_ARGUMENT,"Invalid argument in `"+e+"` at index "+t+": "+n)}function sk(){return new $A(tk.APP_DELETED,"The Firebase app was deleted.")}function ak(t,e){return new $A(tk.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function uk(t){throw new $A(tk.INTERNAL_ERROR,"Internal error: "+t)}var ck={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function hk(t){switch(t){case ck.RAW:case ck.BASE64:case ck.BASE64URL:case ck.DATA_URL:return;default:throw"Expected one of the event types: ["+ck.RAW+", "+ck.BASE64+", "+ck.BASE64URL+", "+ck.DATA_URL+"]."}}var lk=function(t,e){this.data=t,this.contentType=e||null};function fk(t,e){switch(t){case ck.RAW:return new lk(pk(e));case ck.BASE64:case ck.BASE64URL:return new lk(dk(t,e));case ck.DATA_URL:return new lk((n=new vk(e)).base64?dk(ck.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw ak(ck.DATA_URL,"Malformed data URL.")}return pk(e)}(n.rest),new vk(e).contentType)}var n;throw nk()}function pk(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function dk(e,t){switch(e){case ck.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw ak(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case ck.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw ak(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(t)}catch(t){throw ak(e,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var vk=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw ak(ck.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(r=";base64",(n=i).length>=r.length&&n.substring(n.length-r.length)===r),this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)};var yk,gk,mk={STATE_CHANGED:"state_changed"},bk="running",_k="pausing",wk="paused",Ek="success",Tk="canceling",Ik="canceled",Sk="error",Nk={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ck(t){switch(t){case bk:case _k:case Tk:return Nk.RUNNING;case wk:return Nk.PAUSED;case Ek:return Nk.SUCCESS;case Ik:return Nk.CANCELED;case Sk:default:return Nk.ERROR}}function Ak(t){return null!=t}function kk(t){return void 0!==t}function Rk(t){return"function"==typeof t}function Ok(t){return"object"==typeof t}function Pk(t){return"string"==typeof t||t instanceof String}function Dk(t){return"number"==typeof t||t instanceof Number}function xk(t){return Lk()&&t instanceof Blob}function Lk(){return"undefined"!=typeof Blob}(gk=yk=yk||{})[gk.NO_ERROR=0]="NO_ERROR",gk[gk.NETWORK_ERROR=1]="NETWORK_ERROR",gk[gk.ABORT=2]="ABORT";var Mk=(Fk.prototype.send=function(t,e,n,r){if(this.sent_)throw uk("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),Ak(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return Ak(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},Fk.prototype.getErrorCode=function(){if(!this.sent_)throw uk("cannot .getErrorCode() before sending");return this.errorCode_},Fk.prototype.getStatus=function(){if(!this.sent_)throw uk("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},Fk.prototype.getResponseText=function(){if(!this.sent_)throw uk("cannot .getResponseText() before sending");return this.xhr_.responseText},Fk.prototype.abort=function(){this.xhr_.abort()},Fk.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},Fk.prototype.addUploadProgressListener=function(t){Ak(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},Fk.prototype.removeUploadProgressListener=function(t){Ak(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},Fk);function Fk(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=yk.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=yk.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=yk.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}var Uk=(jk.prototype.createXhrIo=function(){return new Mk},jk);function jk(){}function Vk(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Lk())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}var qk=(Bk.prototype.size=function(){return this.size_},Bk.prototype.type=function(){return this.type_},Bk.prototype.slice=function(t,e){if(xk(this.data_)){var n=this.data_,r=(o=t,s=e,(i=n).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new Bk(r)}var i,o,s;return new Bk(new Uint8Array(this.data_.buffer,t,e-t),!0)},Bk.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(Lk()){var n=t.map(function(t){return t instanceof Bk?t.data_:t});return new Bk(Vk.apply(null,n))}var r=t.map(function(t){return Pk(t)?fk(ck.RAW,t).data:t.data_}),i=0;r.forEach(function(t){i+=t.byteLength});var o=new Uint8Array(i),s=0;return r.forEach(function(t){for(var e=0;e<t.length;e++)o[s++]=t[e]}),new Bk(o,!0)},Bk.prototype.uploadData=function(){return this.data_},Bk);function Bk(t,e){var n=0,r="";xk(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}var Wk=(Object.defineProperty(Kk.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(Kk.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),Kk.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},Kk.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},Kk.makeFromBucketSpec=function(e){var t,n;try{t=Kk.makeFromUrl(e)}catch(t){return new Kk(e,"")}if(""===t.path)return t;throw n=e,new $A(tk.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")},Kk.makeFromUrl=function(t){var e=null,n="([A-Za-z0-9.\\-_]+)",r=new RegExp("^gs://"+n+"(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o,s=JA.replace(/[.]/g,"\\."),a=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+n+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+n+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],u=0;u<a.length;u++){var c=a[u],h=c.regex.exec(t);if(h){var l=h[c.indices.bucket],f=h[c.indices.path];e=new Kk(l,f=f||""),c.postModify(e);break}}if(null==e)throw o=t,new $A(tk.INVALID_URL,"Invalid URL '"+o+"'.");return e},Kk);function Kk(t,e){this.bucket=t,this.path_=e}function Hk(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return Ok(n=e)&&!Array.isArray(n)?e:null}function Gk(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function zk(t){return"https://"+JA+"/v0"+t}function Qk(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}function Yk(t,e){return e}var Xk=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Yk},Jk=null;function $k(){if(Jk)return Jk;var t=[];t.push(new Xk("bucket")),t.push(new Xk("generation")),t.push(new Xk("metageneration")),t.push(new Xk("name","fullPath",!0));var e=new Xk("name");e.xform=function(t,e){return!Pk(n=e)||n.length<2?n:Gk(n);var n},t.push(e);var n=new Xk("size");return n.xform=function(t,e){return Ak(e)?Number(e):e},t.push(n),t.push(new Xk("timeCreated")),t.push(new Xk("updated")),t.push(new Xk("md5Hash",null,!0)),t.push(new Xk("cacheControl",null,!0)),t.push(new Xk("contentDisposition",null,!0)),t.push(new Xk("contentEncoding",null,!0)),t.push(new Xk("contentLanguage",null,!0)),t.push(new Xk("contentType",null,!0)),t.push(new Xk("metadata","customMetadata",!0)),Jk=t}function Zk(r,i){Object.defineProperty(r,"ref",{get:function(){var t=r.bucket,e=r.fullPath,n=new Wk(t,e);return i.makeStorageReference(n)}})}function tR(t,e,n){var r=Hk(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return Zk(r,t),r}(t,r,n)}function eR(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function nR(t){if(!Ok(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if("customMetadata"===e){if(!Ok(n))throw"Expected object for 'customMetadata' mapping."}else if(Ok(r=n)&&null!==r)throw"Mapping for '"+e+"' cannot be an object."}var r}var rR="maxResults",iR=1e3,oR="pageToken",sR="prefixes",aR="items";function uR(t,e,n){var r=Hk(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[sR])for(var i=0,o=n[sR];i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new Wk(e,s));r.prefixes.push(a)}if(n[aR])for(var u=0,c=n[aR];u<c.length;u++){var h=c[u];a=t.makeStorageReference(new Wk(e,h.name));r.items.push(a)}return r}(t,e,r)}function cR(t){if(!Ok(t)||!t)throw"Expected ListOptions object.";for(var e in t)if(e===rR){if(!Dk(n=t[rR])||!Number.isInteger(n)||t[rR]<=0)throw"Expected maxResults to be a positive number.";if(1e3<t[rR])throw"Expected maxResults to be less than or equal to "+iR+"."}else{if(e!==oR)throw"Unknown option: "+e;if(t[oR]&&!Pk(t[oR]))throw"Expected pageToken to be string."}var n}var hR=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function lR(t){if(!t)throw nk()}function fR(r,i){return function(t,e){var n=tR(r,e,i);return lR(null!==n),n}}function pR(r,i){return function(t,e){var n=uR(r,i,e);return lR(null!==n),n}}function dR(r,i){return function(t,e){var n=tR(r,e,i);return lR(null!==n),function(r,t){var e=Hk(t);if(null===e)return null;if(!Pk(e.downloadTokens))return null;var n=e.downloadTokens;if(0===n.length)return null;var i=encodeURIComponent;return n.split(",").map(function(t){var e=r.bucket,n=r.fullPath;return zk("/b/"+i(e)+"/o/"+i(n))+Qk({alt:"media",token:t})})[0]}(n,e)}}function vR(o){return function(t,e){var n,r,i;return(n=401===t.getStatus()?new $A(tk.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(i=o.bucket,new $A(tk.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=o.path,new $A(tk.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")):e).setServerResponseProp(e.serverResponseProp()),n}}function yR(i){var o=vR(i);return function(t,e){var n,r=o(t,e);return 404===t.getStatus()&&(n=i.path,r=new $A(tk.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")),r.setServerResponseProp(e.serverResponseProp()),r}}function gR(t,e,n){var r=zk(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new hR(r,"GET",fR(t,n),i);return o.errorHandler=yR(e),o}function mR(t,e,n){var r,i,o=Object.assign({},n);return o.fullPath=t.path,o.size=e.size(),o.contentType||(o.contentType=(i=e,(r=null)&&r.contentType||i&&i.type()||"application/octet-stream")),o}function bR(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};var a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=mR(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+eR(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+a+"--",l=qk.getBlob(c,r,h);if(null===l)throw ik();var f={name:u.fullPath},p=zk(o),d=t.maxUploadRetryTime(),v=new hR(p,"POST",fR(t,n),d);return v.urlParams=f,v.headers=s,v.body=l.uploadData(),v.errorHandler=vR(e),v}var _R=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function wR(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){lR(!1)}return lR(!!n&&-1!==(e||["active"]).indexOf(n)),n}function ER(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=mR(e,r,i),a={name:s.fullPath},u=zk(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},h=eR(s,n),l=t.maxUploadRetryTime();var f=new hR(u,"POST",function(t){var e;wR(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){lR(!1)}return lR(Pk(e)),e},l);return f.urlParams=a,f.headers=c,f.body=h,f.errorHandler=vR(e),f}function TR(t,e,n,i){var r=t.maxUploadRetryTime(),o=new hR(n,"POST",function(t){var e=wR(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){lR(!1)}n||lR(!1);var r=Number(n);return lR(!isNaN(r)),new _R(r,i.size(),"final"===e)},r);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=vR(e),o}function IR(t,s,e,a,n,u,r,i){var c=new _R(0,0);if(r?(c.current=r.current,c.total=r.total):(c.current=0,c.total=a.size()),a.size()!==c.total)throw new $A(tk.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var o=c.total-c.current,h=o;0<n&&(h=Math.min(h,n));var l=c.current,f=l+h,p={"X-Goog-Upload-Command":h===o?"upload, finalize":"upload","X-Goog-Upload-Offset":c.current},d=a.slice(l,f);if(null===d)throw ik();var v=s.maxUploadRetryTime(),y=new hR(e,"POST",function(t,e){var n,r=wR(t,["active","final"]),i=c.current+h,o=a.size();return n="final"===r?fR(s,u)(t,e):null,new _R(i,o,"final"===r,n)},v);return y.headers=p,y.body=d.uploadData(),y.progressCallback=i||null,y.errorHandler=vR(t),y}var SR=function(t,e,n){if(Rk(t)||Ak(e)||Ak(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}},NR=function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o};function CR(e,t,n){for(var r=t.length,i=t.length,o=0;o<t.length;o++)if(t[o].optional){r=o;break}var s,a,u,c,h,l;if(!(r<=n.length&&n.length<=i))throw s=r,a=i,u=e,c=n.length,l=s===a?1===(h=s)?"argument":"arguments":(h="between "+s+" and "+a,"arguments"),new $A(tk.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+u+"`: Expected "+h+" "+l+", received "+c+".");for(o=0;o<n.length;o++)try{t[o].validator(n[o])}catch(t){throw t instanceof Error?ok(o,e,t.message):ok(o,e,t)}}var AR=function(e,t){var n=this;this.validator=function(t){n.optional&&!kk(t)||e(t)},this.optional=!!t};function kR(t,e){function n(t){if(!Pk(t))throw"Expected string."}var r,i,o;return r=t?(i=n,o=t,function(t){i(t),o(t)}):n,new AR(r,e)}function RR(){return new AR(function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||Lk()&&t instanceof Blob))throw"Expected Blob or File."})}function OR(t){return new AR(nR,t)}function PR(){return new AR(function(t){if(!(Dk(t)&&0<=t))throw"Expected a number 0 or greater."})}function DR(e,t){return new AR(function(t){if(!(null===t||Ak(t)&&t instanceof Object))throw"Expected an Object.";null!=e&&e(t)},t)}function xR(t){return new AR(function(t){if(!(null===t||Rk(t)))throw"Expected a Function."},t)}function LR(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve().then(function(){return n.apply(void 0,t)})}}var MR=(FR.prototype.makeProgressCallback_=function(){var e=this,n=this.transferred_;return function(t){return e.updateProgress_(n+t)}},FR.prototype.shouldDoResumable_=function(t){return 262144<t.size()},FR.prototype.start_=function(){this.state_===bk&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},FR.prototype.resolveToken_=function(e){var n=this;this.authWrapper_.getAuthToken().then(function(t){switch(n.state_){case bk:e(t);break;case Tk:n.transition_(Ik);break;case _k:n.transition_(wk)}})},FR.prototype.createResumable_=function(){var r=this;this.resolveToken_(function(t){var e=ER(r.authWrapper_,r.location_,r.mappings_,r.blob_,r.metadata_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.uploadUrl_=t,r.needToFetchStatus_=!1,r.completeTransitions_()},r.errorHandler_)})},FR.prototype.fetchStatus_=function(){var r=this,i=this.uploadUrl_;this.resolveToken_(function(t){var e=TR(r.authWrapper_,r.location_,i,r.blob_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){t=t,r.request_=null,r.updateProgress_(t.current),r.needToFetchStatus_=!1,t.finalized&&(r.needToFetchMetadata_=!0),r.completeTransitions_()},r.errorHandler_)})},FR.prototype.continueUpload_=function(){var r=this,i=262144*this.chunkMultiplier_,o=new _R(this.transferred_,this.blob_.size()),s=this.uploadUrl_;this.resolveToken_(function(t){var e;try{e=IR(r.location_,r.authWrapper_,s,r.blob_,i,r.mappings_,o,r.makeProgressCallback_())}catch(t){return r.error_=t,void r.transition_(Sk)}var n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.increaseMultiplier_(),r.request_=null,r.updateProgress_(t.current),t.finalized?(r.metadata_=t.metadata,r.transition_(Ek)):r.completeTransitions_()},r.errorHandler_)})},FR.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},FR.prototype.fetchMetadata_=function(){var r=this;this.resolveToken_(function(t){var e=gR(r.authWrapper_,r.location_,r.mappings_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.metadata_=t,r.transition_(Ek)},r.metadataErrorHandler_)})},FR.prototype.oneShotUpload_=function(){var r=this;this.resolveToken_(function(t){var e=bR(r.authWrapper_,r.location_,r.mappings_,r.blob_,r.metadata_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.metadata_=t,r.updateProgress_(r.blob_.size()),r.transition_(Ek)},r.errorHandler_)})},FR.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},FR.prototype.transition_=function(t){if(this.state_!==t)switch(t){case Tk:case _k:this.state_=t,null!==this.request_&&this.request_.cancel();break;case bk:var e=this.state_===wk;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case wk:this.state_=t,this.notifyObservers_();break;case Ik:this.error_=rk(),this.state_=t,this.notifyObservers_();break;case Sk:case Ek:this.state_=t,this.notifyObservers_()}},FR.prototype.completeTransitions_=function(){switch(this.state_){case _k:this.transition_(wk);break;case Tk:this.transition_(Ik);break;case bk:this.start_()}},Object.defineProperty(FR.prototype,"snapshot",{get:function(){var t=Ck(this.state_);return new NR(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),FR.prototype.on=function(t,e,n,o){var r="Expected a function or an Object with one of `next`, `error`, `complete` properties.",i=xR(!0).validator,s=DR(null,!0).validator;function a(t){try{return void i(t)}catch(t){}try{if(s(t),!(kk(t.next)||kk(t.error)||kk(t.complete)))throw"";return}catch(t){throw r}}CR("on",[kR(function(){if(t!==mk.STATE_CHANGED)throw"Expected one of the event types: ["+mk.STATE_CHANGED+"]."}),DR(a,!0),xR(!0),xR(!0)],arguments);var u=this;function c(i){return function(t,e,n){null!==i&&CR("on",i,arguments);var r=new SR(t,e,o);return u.addObserver_(r),function(){u.removeObserver_(r)}}}var h=[DR(function(t){if(null===t)throw r;a(t)}),xR(!0),xR(!0)];return kk(e)||kk(n)||kk(o)?c(null)(e,n,o):c(h)},FR.prototype.then=function(t,e){return this.promise_.then(t,e)},FR.prototype.catch=function(t){return this.then(null,t)},FR.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},FR.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},FR.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),this.observers_.slice().forEach(function(t){e.notifyObserver_(t)})},FR.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(Ck(this.state_)){case Nk.SUCCESS:LR(this.resolve_.bind(null,this.snapshot))();break;case Nk.CANCELED:case Nk.ERROR:LR(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},FR.prototype.notifyObserver_=function(t){switch(Ck(this.state_)){case Nk.RUNNING:case Nk.PAUSED:t.next&&LR(t.next.bind(t,this.snapshot))();break;case Nk.SUCCESS:t.complete&&LR(t.complete.bind(t))();break;case Nk.CANCELED:case Nk.ERROR:t.error&&LR(t.error.bind(t,this.error_))();break;default:t.error&&LR(t.error.bind(t,this.error_))()}},FR.prototype.resume=function(){CR("resume",[],arguments);var t=this.state_===wk||this.state_===_k;return t&&this.transition_(bk),t},FR.prototype.pause=function(){CR("pause",[],arguments);var t=this.state_===bk;return t&&this.transition_(_k),t},FR.prototype.cancel=function(){CR("cancel",[],arguments);var t=this.state_===bk||this.state_===_k;return t&&this.transition_(Tk),t},FR);function FR(t,e,n,r,i,o){var s=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=bk,this.errorHandler_=function(t){s.request_=null,s.chunkMultiplier_=1,t.codeEquals(tk.CANCELED)?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=t,s.transition_(Sk))},this.metadataErrorHandler_=function(t){s.request_=null,t.codeEquals(tk.CANCELED)?s.completeTransitions_():(s.error_=t,s.transition_(Sk))},this.promise_=new Promise(function(t,e){s.resolve_=t,s.reject_=e,s.start_()}),this.promise_.then(null,function(){})}var UR=(jR.prototype.toString=function(){return CR("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},jR.prototype.newRef=function(t,e){return new jR(t,e)},jR.prototype.mappings=function(){return $k()},jR.prototype.child=function(t){CR("child",[kR()],arguments);var e,n,r=(e=this.location.path,n=t.split("/").filter(function(t){return 0<t.length}).join("/"),0===e.length?n:e+"/"+n),i=new Wk(this.location.bucket,r);return this.newRef(this.authWrapper,i)},Object.defineProperty(jR.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new Wk(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(jR.prototype,"root",{get:function(){var t=new Wk(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(jR.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(jR.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(jR.prototype,"name",{get:function(){return Gk(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(jR.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),jR.prototype.put=function(t,e){return void 0===e&&(e=null),CR("put",[RR(),OR(!0)],arguments),this.throwIfRoot_("put"),new MR(this,this.authWrapper,this.location,this.mappings(),new qk(t),e)},jR.prototype.putString=function(t,e,n){void 0===e&&(e=ck.RAW),CR("putString",[kR(),kR(hk,!0),OR(!0)],arguments),this.throwIfRoot_("putString");var r=fk(e,t),i=Object.assign({},n);return!Ak(i.contentType)&&Ak(r.contentType)&&(i.contentType=r.contentType),new MR(this,this.authWrapper,this.location,this.mappings(),new qk(r.data,!0),i)},jR.prototype.delete=function(){var a=this;return CR("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then(function(t){var e,n,r,i,o,s=(e=a.authWrapper,n=a.location,r=zk(n.fullServerUrl()),i=e.maxOperationRetryTime(),(o=new hR(r,"DELETE",function(t,e){},i)).successCodes=[200,204],o.errorHandler=yR(n),o);return a.authWrapper.makeRequest(s,t).getPromise()})},jR.prototype.listAll=function(){CR("listAll",[],arguments);var t={prefixes:[],items:[]};return this.listAllHelper(t).then(function(){return t})},jR.prototype.listAllHelper=function(o,s){return Is(this,void 0,void 0,function(){var e,n,r,i;return Ss(this,function(t){switch(t.label){case 0:return e={pageToken:s},[4,this.list(e)];case 1:return n=t.sent(),(r=o.prefixes).push.apply(r,n.prefixes),(i=o.items).push.apply(i,n.items),null==n.nextPageToken?[3,3]:[4,this.listAllHelper(o,n.nextPageToken)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},jR.prototype.list=function(r){CR("list",[new AR(cR,!0)],arguments);var i=this;return this.authWrapper.getAuthToken().then(function(t){var e=r||{},n=function(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&0<n.length&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=zk(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime(),u=new hR(s,"GET",pR(t,e.bucket),a);return u.urlParams=o,u.errorHandler=vR(e),u}(i.authWrapper,i.location,"/",e.pageToken,e.maxResults);return i.authWrapper.makeRequest(n,t).getPromise()})},jR.prototype.getMetadata=function(){var n=this;return CR("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then(function(t){var e=gR(n.authWrapper,n.location,n.mappings());return n.authWrapper.makeRequest(e,t).getPromise()})},jR.prototype.updateMetadata=function(h){var l=this;return CR("updateMetadata",[OR()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then(function(t){var e,n,r,i,o,s,a,u,c=(e=l.authWrapper,n=l.location,r=h,i=l.mappings(),o=zk(n.fullServerUrl()),s=eR(r,i),a=e.maxOperationRetryTime(),(u=new hR(o,"PATCH",fR(e,i),a)).headers={"Content-Type":"application/json; charset=utf-8"},u.body=s,u.errorHandler=yR(n),u);return l.authWrapper.makeRequest(c,t).getPromise()})},jR.prototype.getDownloadURL=function(){var u=this;return CR("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then(function(t){var e,n,r,i,o,s,a=(e=u.authWrapper,n=u.location,r=u.mappings(),i=zk(n.fullServerUrl()),o=e.maxOperationRetryTime(),(s=new hR(i,"GET",dR(e,r),o)).errorHandler=yR(n),s);return u.authWrapper.makeRequest(a,t).getPromise().then(function(t){if(null===t)throw new $A(tk.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return t})})},jR.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw e=t,new $A(tk.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').");var e},jR);function jR(t,e){this.authWrapper=t,this.location=e instanceof Wk?e:Wk.makeFromUrl(e)}var VR=(qR.prototype.getPromise=function(){return this.promise_},qR.prototype.cancel=function(t){},qR);function qR(t){this.promise_=Promise.reject(t)}var BR=(WR.prototype.addRequest=function(t){var e=this,n=this.id;this.id++,this.map.set(n,t),t.getPromise().then(function(){return e.map.delete(n)},function(){return e.map.delete(n)})},WR.prototype.clear=function(){this.map.forEach(function(t){t&&t.cancel(!0)}),this.map.clear()},WR);function WR(){this.map=new Map,this.id=-9007199254740991}var KR=(HR.extractBucket_=function(t){var e=t.storageBucket||null;return null==e?null:Wk.makeFromBucketSpec(e).bucket},HR.prototype.getAuthToken=function(){var t=this.authProvider_.getImmediate({optional:!0});return t?t.getToken().then(function(t){return null!==t?t.accessToken:null},function(){return null}):Promise.resolve(null)},HR.prototype.bucket=function(){if(this.deleted_)throw sk();return this.bucket_},HR.prototype.service=function(){return this.service_},HR.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},HR.prototype.makeRequest=function(t,e){if(this.deleted_)return new VR(sk());var n=this.requestMaker_(t,this.appId_,e,this.pool_);return this.requestMap_.addRequest(n),n},HR.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},HR.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},HR.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},HR.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},HR.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},HR);function HR(t,e,n,r,i,o){var s;if(this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=t,null!==this.app_){var a=this.app_.options;Ak(a)&&(this.bucket_=HR.extractBucket_(a),this.appId_=null!==(s=a.appId)&&void 0!==s?s:null)}this.authProvider_=e,this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=o,this.service_=i,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requestMap_=new BR}var GR=(zR.prototype.start_=function(){var e,n,t,r,i,o,s,a,u,c=this;function h(t,e){var n,r=c.resolve_,i=c.reject_,o=e.xhr;if(e.wasSuccessCode)try{var s=c.callback_(o,o.getResponseText());kk(s)?r(s):r()}catch(t){i(t)}else null!==o?((n=nk()).setServerResponseProp(o.getResponseText()),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):e.canceled?i(n=(c.appDelete_?sk:rk)()):i(n=new $A(tk.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}function l(){return 2===s}function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a||(a=!0,n.apply(null,t))}function p(t){i=setTimeout(function(){i=null,e(d,l())},t)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];a||(t||l()||o?f.call.apply(f,ks([null,t],e)):(r<64&&(r*=2),p(1===s?(s=2,0):1e3*(r+Math.random()))))}function v(t){u||(u=!0,a||(null!==i?(t||(s=2),clearTimeout(i),p(0)):t||(s=1)))}this.canceled_?h(0,new QR(!1,null,!0)):this.backoffId_=(e=function(o,t){if(t)o(!1,new QR(!1,null,!0));else{var e=c.pool_.createXhrIo();c.pendingXhr_=e,null!==c.progressCallback_&&e.addUploadProgressListener(s),e.send(c.url_,c.method_,c.body_,c.headers_).then(function(t){null!==c.progressCallback_&&t.removeUploadProgressListener(s),c.pendingXhr_=null;var e=(t=t).getErrorCode()===yk.NO_ERROR,n=t.getStatus();if(e&&!c.isRetryStatusCode_(n)){var r=-1!==c.successCodes_.indexOf(n);o(!0,new QR(r,t))}else{var i=t.getErrorCode()===yk.ABORT;o(!1,new QR(!1,null,i))}})}function s(t){var e=t.loaded,n=t.lengthComputable?t.total:-1;null!==c.progressCallback_&&c.progressCallback_(e,n)}},n=h,t=this.timeout_,i=null,u=a=o=!(r=1),p(s=0),setTimeout(function(){v(o=!0)},t),v)},zR.prototype.getPromise=function(){return this.promise_},zR.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},zR.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},zR);function zR(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}var QR=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function YR(t,e,n,r){var i,o,s,a,u,c,h=Qk(t.urlParams),l=t.url+h,f=Object.assign({},t.headers);return i=f,(o=e)&&(i["X-Firebase-GMPID"]=o),s=f,null!==(a=n)&&0<a.length&&(s.Authorization="Firebase "+a),u=f,c=void 0!==zl?zl.SDK_VERSION:"AppManager",u["X-Firebase-Storage-Version"]="webjs/"+c,new GR(l,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}var XR=(JR.prototype.ref=function(t){if(CR("ref",[kR(function(t){if("string"!=typeof t)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new UR(this.authWrapper_,this.bucket_);return null!=t?e.child(t):e},JR.prototype.refFromURL=function(t){return CR("refFromURL",[kR(function(t){if("string"!=typeof t)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{Wk.makeFromUrl(t)}catch(t){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new UR(this.authWrapper_,t)},Object.defineProperty(JR.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),JR.prototype.setMaxUploadRetryTime=function(t){CR("setMaxUploadRetryTime",[PR()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},JR.prototype.setMaxOperationRetryTime=function(t){CR("setMaxOperationRetryTime",[PR()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(JR.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(JR.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),JR);function JR(t,e,n,r){if(this.bucket_=null,this.authWrapper_=new KR(t,e,function(t,e){return new UR(t,e)},YR,this,n),this.app_=t,null!=r)this.bucket_=Wk.makeFromBucketSpec(r);else{var i=this.authWrapper_.bucket();null!=i&&(this.bucket_=new Wk(i,""))}this.internals_=new $R(this)}var $R=(ZR.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},ZR);function ZR(t){this.service_=t}var tO,eO;function nO(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new XR(n,r,new Uk,e)}eO={TaskState:Nk,TaskEvent:mk,StringFormat:ck,Storage:XR,Reference:UR},(tO=zl).INTERNAL.registerComponent(new da("storage",nO,"PUBLIC").setServiceProps(eO).setMultipleInstances(!0)),tO.registerVersion("@firebase/storage","0.3.32");var rO,iO,oO,sO,aO="0.3.1",uO="FB-PERF-TRACE-MEASURE",cO="@firebase/performance/config",hO="@firebase/performance/configexpire",lO="Performance",fO=((rO={})["trace started"]="Trace {$traceName} was started before.",rO["trace stopped"]="Trace {$traceName} is not running.",rO["no window"]="Window is not available.",rO["no app id"]="App id is not available.",rO["no project id"]="Project id is not available.",rO["no api key"]="Api key is not available.",rO["invalid cc log"]="Attempted to queue invalid cc event",rO["FB not default"]="Performance can only start when Firebase app instance is the default one.",rO["RC response not ok"]="RC response is not ok",rO["invalid attribute name"]="Attribute name {$attributeName} is invalid.",rO["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",rO["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",rO["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",rO),pO=new zs("performance",lO,fO),dO=(vO.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},vO.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},vO.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},vO.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},vO.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},vO.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},vO.prototype.requiredApisAvailable=function(){return!!(fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled)},vO.prototype.setupObserver=function(t,i){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var e=0,n=t.getEntries();e<n.length;e++){var r=n[e];i(r)}}).observe({entryTypes:[t]})},vO.getInstance=function(){return void 0===iO&&(iO=new vO(oO)),iO},vO);function vO(t){if(!(this.window=t))throw pO.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}function yO(t,e){var n=t.length-e.length;if(n<0||1<n)throw pO.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var gO,mO,bO,_O=(wO.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw pO.create("no app id");return t},wO.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw pO.create("no project id");return t},wO.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw pO.create("no api key");return t},wO.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},wO.getInstance=function(){return void 0===sO&&(sO=new wO),sO},wO);function wO(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=yO("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=yO("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.shouldSendToFl=!1,this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}function EO(){return gO}(bO=mO=mO||{})[bO.UNKNOWN=0]="UNKNOWN",bO[bO.VISIBLE=1]="VISIBLE",bO[bO.HIDDEN=2]="HIDDEN";var TO=["firebase_","google_","ga_"],IO=new RegExp("^[a-zA-Z]\\w*$");function SO(){switch(dO.getInstance().document.visibilityState){case"visible":return mO.VISIBLE;case"hidden":return mO.HIDDEN;default:return mO.UNKNOWN}}var NO=new Oa(lO);NO.logLevel=Ta.INFO;var CO="0.0.1",AO={loggingEnabled:!0,shouldSendToFl:!0},kO={shouldSendToFl:!1},RO="FIREBASE_INSTALLATIONS_AUTH";function OO(e){var r,t=function(){var t=dO.getInstance().localStorage;if(!t)return;var e=t.getItem(hO);if(!e||!function(t){return Number(t)>Date.now()}(e))return;var n=t.getItem(cO);if(!n)return;try{return JSON.parse(n)}catch(t){return}}();return t?(DO(e,t),Promise.resolve()):(r=e,function(){var t=_O.getInstance().installationsService.getToken();return t.then(function(t){}),t}().then(function(t){var e="https://firebaseremoteconfig.googleapis.com/v1/projects/"+_O.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+_O.getInstance().getApiKey(),n=new Request(e,{method:"POST",headers:{Authorization:RO+" "+t},body:JSON.stringify({app_instance_id:r,app_instance_id_token:t,app_id:_O.getInstance().getAppId(),app_version:aO,sdk_version:CO})});return fetch(n).then(function(t){if(t.ok)return t.json();throw pO.create("RC response not ok")})}).catch(function(){NO.info(PO)}).then(function(t){return DO(e,t)}).then(function(t){return function(t){var e=dO.getInstance().localStorage;if(!t||!e)return;e.setItem(cO,JSON.stringify(t)),e.setItem(hO,String(Date.now()+60*_O.getInstance().configTimeToLive*60*1e3))}(t)},function(){}))}var PO="Could not fetch config, will use default configs";function DO(t,e){if(!e)return e;var n,r,i=_O.getInstance(),o=e.entries||{},s=e.state;return i.loggingEnabled=void 0!==o.fpr_enabled?"true"===String(o.fpr_enabled):AO.loggingEnabled,o.fpr_log_source&&(i.logSource=Number(o.fpr_log_source)),o.fpr_log_endpoint_url&&(i.logEndPointUrl=o.fpr_log_endpoint_url),o.fpr_log_transport_key&&(i.transportKey=o.fpr_log_transport_key),i.shouldSendToFl=void 0===s||"INSTANCE_STATE_UNSPECIFIED"===s||"NO_TEMPLATE"===s?kO.shouldSendToFl:o.fpr_log_transport_web_percent?(n=t,r=Number(o.fpr_log_transport_web_percent),0!==n.length&&function(t){for(var e=0,n=0;n<t.length;n++)e=(e<<3)+e-t.charCodeAt(n);return e=Math.abs(e%100)}(n)<r):AO.shouldSendToFl,void 0!==o.fpr_vc_network_request_sampling_rate&&(i.networkRequestsSamplingRate=Number(o.fpr_vc_network_request_sampling_rate)),void 0!==o.fpr_vc_trace_sampling_rate&&(i.tracesSamplingRate=Number(o.fpr_vc_trace_sampling_rate)),i.logTraceAfterSampling=xO(i.tracesSamplingRate),i.logNetworkAfterSampling=xO(i.networkRequestsSamplingRate),e}function xO(t){return Math.random()<=t}var LO,MO=1;function FO(){return MO=2,LO=LO||function(){var n=dO.getInstance().document;return new Promise(function(t){if(n&&"complete"!==n.readyState){var e=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",e),t())};n.addEventListener("readystatechange",e)}else t()})}().then(function(){return(t=_O.getInstance().installationsService.getId()).then(function(t){gO=t}),t;var t}).then(function(t){return OO(t)}).then(function(){return UO()},function(){return UO()})}function UO(){MO=3}var jO,VO=1e4,qO=5500,BO=3,WO=BO,KO=[],HO=!1;function GO(t){setTimeout(function(){if(0!==WO)return KO.length?void function(){var t=ks(KO);KO=[];var e=t.map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}});(function(t,e){return _O.getInstance().shouldSendToFl?function(t,i){return function(t){var e=_O.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then(function(t){return t.ok||NO.info("Call to Firebase backend failed."),t.json()}).then(function(t){var e=Number(t.nextRequestWaitMillis),n=VO;isNaN(e)||(n=Math.max(e,n));var r=t.logResponseDetails;Array.isArray(r)&&0<r.length&&"RETRY_REQUEST_LATER"===r[0].responseAction&&(KO=ks(i,KO),NO.info("Retry transport request later.")),WO=BO,GO(n)})}(t,e):function(t){return fetch(_O.getInstance().logEndPointUrl,{method:"POST",body:JSON.stringify(t)}).then(function(t){return t.ok||NO.info("Call to Firebase backend failed."),t.json()}).then(function(t){var e=Number(t.next_request_wait_millis),n=isNaN(e)?VO:Math.max(VO,e);WO=BO,GO(n)})}(t)})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:_O.getInstance().logSource,log_event:e},t).catch(function(){KO=ks(t,KO),WO--,NO.info("Tries left: "+WO+"."),GO(VO)})}():GO(VO)},t)}function zO(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t){if(!t.eventTime||!t.message)throw pO.create("invalid cc log");KO=ks(KO,[t])}({message:n.apply(void 0,t),eventTime:Date.now()})}}function QO(t,e){(jO=jO||zO(JO))(t,e)}function YO(t){var e=_O.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&dO.getInstance().requiredApisAvailable()&&(t.isAuto&&SO()!==mO.VISIBLE||e.loggingEnabled&&e.logTraceAfterSampling&&(3===MO?XO(t):FO().then(function(){return XO(t)},function(){return XO(t)})))}function XO(t){EO()&&setTimeout(function(){return QO(t,1)},0)}function JO(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:$O(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:$O(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function $O(){return{google_app_id:_O.getInstance().getAppId(),app_instance_id:EO(),web_app_info:{sdk_version:aO,page_url:dO.getInstance().getUrl(),service_worker_status:"serviceWorker"in(t=dO.getInstance().navigator)?t.serviceWorker.controller?2:3:1,visibility_state:SO(),effective_connection_type:function(){var t=dO.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var ZO=["_fp","_fcp","_fid"];var tP=(eP.prototype.start=function(){if(1!==this.state)throw pO.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},eP.prototype.stop=function(){if(2!==this.state)throw pO.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),YO(this)},eP.prototype.record=function(t,e,n){if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Ts({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}YO(this)},eP.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]&&this.putMetric(t,0),this.counters[t]+=e},eP.prototype.putMetric=function(t,e){if(n=t,r=this.name,0===n.length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<ZO.indexOf(n))&&n.startsWith("_"))throw pO.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=e},eP.prototype.getMetric=function(t){return this.counters[t]||0},eP.prototype.putAttribute=function(t,e){var n,r,i=!(0===(n=t).length||40<n.length||TO.some(function(t){return n.startsWith(t)})||!n.match(IO)),o=0!==(r=e).length&&r.length<=100;if(i&&o)this.customAttributes[t]=e;else{if(!i)throw pO.create("invalid attribute name",{attributeName:t});if(!o)throw pO.create("invalid attribute value",{attributeValue:e})}},eP.prototype.getAttribute=function(t){return this.customAttributes[t]},eP.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},eP.prototype.getAttributes=function(){return Ts({},this.customAttributes)},eP.prototype.setStartTime=function(t){this.startTimeUs=t},eP.prototype.setDuration=function(t){this.durationUs=t},eP.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},eP.createOobTrace=function(t,e,n){var r=dO.getInstance().getUrl();if(r){var i=new eP("_wt_"+r,!0),o=Math.floor(1e3*dO.getInstance().getTimeOrigin());if(i.setStartTime(o),t&&t[0]&&(i.setDuration(Math.floor(1e3*t[0].duration)),i.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),i.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),i.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e){var s=e.find(function(t){return"first-paint"===t.name});s&&s.startTime&&i.putMetric("_fp",Math.floor(1e3*s.startTime));var a=e.find(function(t){return"first-contentful-paint"===t.name});a&&a.startTime&&i.putMetric("_fcp",Math.floor(1e3*a.startTime)),n&&i.putMetric("_fid",Math.floor(1e3*n))}YO(i)}},eP.createUserTimingTrace=function(t){YO(new eP(t,!1,t))},eP);function eP(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=dO.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||uO+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function nP(t){var e=t;if(e&&void 0!==e.responseStart){var n=dO.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=_O.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout(function(){return QO(t,0)},0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}var rP=5e3;function iP(){EO()&&(setTimeout(function(){return function(){var t=dO.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout(function(){tP.createOobTrace(e,n),r=void 0},rP);t.onFirstInputDelay(function(t){r&&(clearTimeout(r),tP.createOobTrace(e,n,t))})}else tP.createOobTrace(e,n)}()},0),setTimeout(function(){return function(){for(var t=dO.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){nP(r[n])}t.setupObserver("resource",nP)}()},0),setTimeout(function(){return function(){for(var t=dO.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){oP(r[n])}t.setupObserver("measure",oP)}()},0))}function oP(t){var e=t.name;e.substring(0,uO.length)!==uO&&tP.createUserTimingTrace(e)}var sP=(aP.prototype.trace=function(t){return new tP(t)},Object.defineProperty(aP.prototype,"instrumentationEnabled",{get:function(){return _O.getInstance().instrumentationEnabled},set:function(t){_O.getInstance().instrumentationEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(aP.prototype,"dataCollectionEnabled",{get:function(){return _O.getInstance().dataCollectionEnabled},set:function(t){_O.getInstance().dataCollectionEnabled=t},enumerable:!0,configurable:!0}),aP);function aP(t){this.app=t,dO.getInstance().requiredApisAvailable()?(HO||(GO(qO),HO=!0),FO().then(iP,iP)):NO.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.")}var uP;function cP(t,e){if("[DEFAULT]"!==t.name)throw pO.create("FB not default");if("undefined"==typeof window)throw pO.create("no window");return oO=window,_O.getInstance().firebaseAppInstance=t,_O.getInstance().installationsService=e,new sP(t)}(uP=zl).INTERNAL.registerComponent(new da("performance",function(t){var e=t.getProvider("app").getImmediate(),n=t.getProvider("installations").getImmediate();return cP(e,n)},"PUBLIC")),uP.registerVersion("@firebase/performance","0.3.1");var hP,lP,fP,pP,dP="measurementId",vP="firebase_id",yP="origin",gP="https://www.googletagmanager.com/gtag/js";(lP=hP=hP||{}).EVENT="event",lP.SET="set",lP.CONFIG="config",(pP=fP=fP||{}).ADD_SHIPPING_INFO="add_shipping_info",pP.ADD_PAYMENT_INFO="add_payment_info",pP.ADD_TO_CART="add_to_cart",pP.ADD_TO_WISHLIST="add_to_wishlist",pP.BEGIN_CHECKOUT="begin_checkout",pP.CHECKOUT_PROGRESS="checkout_progress",pP.EXCEPTION="exception",pP.GENERATE_LEAD="generate_lead",pP.LOGIN="login",pP.PAGE_VIEW="page_view",pP.PURCHASE="purchase",pP.REFUND="refund",pP.REMOVE_FROM_CART="remove_from_cart",pP.SCREEN_VIEW="screen_view",pP.SEARCH="search",pP.SELECT_CONTENT="select_content",pP.SELECT_ITEM="select_item",pP.SELECT_PROMOTION="select_promotion",pP.SET_CHECKOUT_OPTION="set_checkout_option",pP.SHARE="share",pP.SIGN_UP="sign_up",pP.TIMING_COMPLETE="timing_complete",pP.VIEW_CART="view_cart",pP.VIEW_ITEM="view_item",pP.VIEW_ITEM_LIST="view_item_list",pP.VIEW_PROMOTION="view_promotion",pP.VIEW_SEARCH_RESULTS="view_search_results";var mP,bP=new Oa("@firebase/analytics");function _P(t,n,e){var f,p,r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[n].push(arguments)};return window[e]&&"function"==typeof window[e]&&(r=window[e]),window[e]=(f=r,p=t,function(t,e,n){if(t===hP.EVENT){var r=[];if(n&&n.send_to){var i=n.send_to;Array.isArray(i)||(i=[i]);for(var o=0,s=i;o<s.length;o++){var a=s[o],u=p[a];if(!u){r=[];break}r.push(u)}}if(0===r.length)for(var c=0,h=Object.values(p);c<h.length;c++){var l=h[c];r.push(l)}Promise.all(r).then(function(){return f(hP.EVENT,e,n||{})}).catch(function(t){return bP.error(t)})}else t===hP.CONFIG?(p[e]||Promise.resolve()).then(function(){f(hP.CONFIG,e,n)}).catch(function(t){return bP.error(t)}):f(hP.SET,e)}),{gtagCore:r,wrappedGtag:window[e]}}var wP,EP,TP=((mP={})["no-ga-id"]='"'+dP+'" field is empty in Firebase config. Firebase Analytics requires this field to contain a valid measurement ID.',mP["already-exists"]="A Firebase Analytics instance with the measurement ID ${id}  already exists. Only one Firebase Analytics instance can be created for each measurement ID.",mP["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",mP["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate",mP),IP=new zs("analytics","Analytics",TP),SP={},NP="dataLayer",CP="gtag",AP=!1;function kP(t){if(AP)throw IP.create("already-initialized");t.dataLayerName&&(NP=t.dataLayerName),t.gtagName&&(CP=t.gtagName)}function RP(t,e){var n,r,i,o,c=t.options[dP];if(!c)throw IP.create("no-ga-id");if(null!=SP[c])throw IP.create("already-exists",{id:c});if(!AP){!function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(gP))return r}}()&&(i=NP,(o=document.createElement("script")).src=gP+"?l="+i,o.async=!0,document.head.appendChild(o)),n=NP,r=[],Array.isArray(window[n])?r=window[n]:window[n]=r;var s=_P(SP,NP,CP),a=s.wrappedGtag,u=s.gtagCore;EP=a,wP=u,AP=!0}return SP[c]=function(r,i,o){return Is(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,i.getId()];case 1:return e=t.sent(),o("js",new Date),o(hP.CONFIG,r.options[dP],((n={})[vP]=e,n[yP]="firebase",n.update=!0,n)),[2]}})})}(t,e,wP),{app:t,logEvent:function(t,e,n){return r=EP,i=c,o=t,u=(s=e)||{},(a=n)&&a.global||(u=Ts(Ts({},s),{send_to:i})),void r(hP.EVENT,o,u||{});var r,i,o,s,a,u},setCurrentScreen:function(t,e){return n=EP,r=c,i=t,void((o=e)&&o.global?n(hP.SET,{screen_name:i}):n(hP.CONFIG,r,{update:!0,screen_name:i}));var n,r,i,o},setUserId:function(t,e){return n=EP,r=c,i=t,void((o=e)&&o.global?n(hP.SET,{user_id:i}):n(hP.CONFIG,r,{update:!0,user_id:i}));var n,r,i,o},setUserProperties:function(t,e){return function(t,e,n,r){if(r&&r.global){for(var i={},o=0,s=Object.keys(n);o<s.length;o++){var a=s[o];i["user_properties."+a]=n[a]}t(hP.SET,i)}else t(hP.CONFIG,e,{update:!0,user_properties:n})}(EP,c,t,e)},setAnalyticsCollectionEnabled:function(t){return e=t,void(window["ga-disable-"+c]=!e);var e}}}var OP,PP="analytics";(OP=zl).INTERNAL.registerComponent(new da(PP,function(t){return RP(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:kP,EventName:fP})),OP.INTERNAL.registerComponent(new da("analytics-internal",function(t){try{return{logEvent:t.getProvider(PP).getImmediate().logEvent}}catch(t){throw IP.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),OP.registerVersion("@firebase/analytics","0.3.3");var DP,xP=(LP.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},LP.prototype.fetch=function(s){return Is(this,void 0,void 0,function(){var e,n,r,i,o;return Ss(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=t.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(s.cacheMaxAgeMillis,n)?[2,r]:(s.eTag=r&&r.eTag,[4,this.client.fetch(s)]);case 2:return i=t.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return t.sent(),[2,i]}})})},LP);function LP(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}var MP=((DP={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",DP["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",DP["registration-api-key"]="Undefined API key. Check Firebase app initialization.",DP["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",DP["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",DP["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",DP["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",DP["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",DP["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",DP["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',DP["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',DP["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",DP["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",DP),FP=new zs("remoteconfig","Remote Config",MP);var UP=(jP.prototype.fetch=function(w){return Is(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,h,l,f,p,d,v,y,g,m,b,_;return Ss(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:n=t.sent(),r=n[0],i=n[1],o=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",s=o+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":w.eTag||"*"},u={sdk_version:this.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:this.appId,language_code:(void 0===e&&(e=navigator),e.languages&&e.languages[0]||e.language)},c={method:"POST",headers:a,body:JSON.stringify(u)},h=fetch(s,c),l=new Promise(function(t,e){w.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",e(t)})}),t.label=2;case 2:return t.trys.push([2,5,,6]),[4,Promise.race([h,l])];case 3:return t.sent(),[4,h];case 4:return f=t.sent(),[3,6];case 5:throw p=t.sent(),d="fetch-client-network","AbortError"===p.name&&(d="fetch-timeout"),FP.create(d,{originalErrorMessage:p.message});case 6:if(v=f.status,y=f.headers.get("ETag")||void 0,200!==f.status)return[3,11];b=void 0,t.label=7;case 7:return t.trys.push([7,9,,10]),[4,f.json()];case 8:return b=t.sent(),[3,10];case 9:throw _=t.sent(),FP.create("fetch-client-parse",{originalErrorMessage:_.message});case 10:g=b.entries,m=b.state,t.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===m?v=500:"NO_CHANGE"===m?v=304:"NO_TEMPLATE"!==m&&"EMPTY_CONFIG"!==m||(g={}),304!==v&&200!==v)throw FP.create("fetch-status",{httpStatus:v});return[2,{status:v,eTag:y,config:g}]}var e})})},jP);function jP(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var VP=(qP.prototype.addEventListener=function(t){this.listeners.push(t)},qP.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},qP);function qP(){this.listeners=[]}var BP=["1","true","t","yes","y","on"],WP=(KP.prototype.asString=function(){return this._value},KP.prototype.asBoolean=function(){return"static"!==this._source&&0<=BP.indexOf(this._value.toLowerCase())},KP.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},KP.prototype.getSource=function(){return this._source},KP);function KP(t,e){void 0===e&&(e=""),this._source=t,this._value=e}var HP=(GP.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=Ta.DEBUG;break;case"silent":this._logger.logLevel=Ta.SILENT;break;default:this._logger.logLevel=Ta.ERROR}},Object.defineProperty(GP.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!0,configurable:!0}),Object.defineProperty(GP.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!0,configurable:!0}),GP.prototype.activate=function(){return Is(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=t.sent(),n=e[0],r=e[1],n&&n.config&&n.eTag&&n.eTag!==r?[4,Promise.all([this._storageCache.setActiveConfig(n.config),this._storage.setActiveConfigEtag(n.eTag)])]:[2,!1];case 2:return t.sent(),[2,!0]}})})},GP.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},GP.prototype.fetch=function(){return Is(this,void 0,void 0,function(){var r,i,o,s=this;return Ss(this,function(t){switch(t.label){case 0:r=new VP,setTimeout(function(){return Is(s,void 0,void 0,function(){return Ss(this,function(t){return r.abort(),[2]})})},this.settings.fetchTimeoutMillis),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:r})];case 2:return t.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return t.sent(),[3,6];case 4:return i=t.sent(),n="fetch-throttle",o=(e=i)instanceof Hs&&-1!==e.code.indexOf(n)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(o)];case 5:throw t.sent(),i;case 6:return[2]}var e,n})})},GP.prototype.fetchAndActivate=function(){return Is(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},GP.prototype.getAll=function(){var n=this;return function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(Ts(Ts({},t),e))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},GP.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},GP.prototype.getNumber=function(t){return this.getValue(t).asNumber()},GP.prototype.getString=function(t){return this.getValue(t).asString()},GP.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new WP("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new WP("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new WP("static"))},GP);function GP(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function zP(t,e){var n=t.target.error||void 0;return FP.create(e,{originalErrorMessage:n&&n.message})}var QP="app_namespace_store",YP="firebase_remote_config",XP=1;var JP=($P.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},$P.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},$P.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},$P.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},$P.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},$P.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},$P.prototype.getActiveConfig=function(){return this.get("active_config")},$P.prototype.setActiveConfig=function(t){return this.set("active_config",t)},$P.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},$P.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},$P.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},$P.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},$P.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},$P.prototype.get=function(a){return Is(this,void 0,void 0,function(){var o,s=this;return Ss(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(n,e){var t=o.transaction([QP],"readonly").objectStore(QP),r=s.createCompositeKey(a);try{var i=t.get(r);i.onerror=function(t){e(zP(t,"storage-get"))},i.onsuccess=function(t){var e=t.target.result;n(e?e.value:void 0)}}catch(t){e(FP.create("storage-get",{originalErrorMessage:t&&t.message}))}})]}})})},$P.prototype.set=function(a,u){return Is(this,void 0,void 0,function(){var o,s=this;return Ss(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([QP],"readwrite").objectStore(QP),r=s.createCompositeKey(a);try{var i=n.put({compositeKey:r,value:u});i.onerror=function(t){e(zP(t,"storage-set"))},i.onsuccess=function(){t()}}catch(t){e(FP.create("storage-set",{originalErrorMessage:t&&t.message}))}})]}})})},$P.prototype.delete=function(a){return Is(this,void 0,void 0,function(){var o,s=this;return Ss(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([QP],"readwrite").objectStore(QP),r=s.createCompositeKey(a);try{var i=n.delete(r);i.onerror=function(t){e(zP(t,"storage-delete"))},i.onsuccess=function(){t()}}catch(t){e(FP.create("storage-delete",{originalErrorMessage:t&&t.message}))}})]}})})},$P.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},$P);function $P(t,e,n,r){void 0===r&&(r=new Promise(function(e,n){var t=indexedDB.open(YP,XP);t.onerror=function(t){n(zP(t,"storage-open"))},t.onsuccess=function(t){e(t.target.result)},t.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(QP,{keyPath:"compositeKey"})}}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var ZP=(tD.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},tD.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},tD.prototype.getActiveConfig=function(){return this.activeConfig},tD.prototype.loadFromStorage=function(){return Is(this,void 0,void 0,function(){var e,n,r,i,o,s;return Ss(this,function(t){switch(t.label){case 0:return e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,e];case 1:return(i=t.sent())&&(this.lastFetchStatus=i),[4,n];case 2:return(o=t.sent())&&(this.lastSuccessfulFetchTimestampMillis=o),[4,r];case 3:return(s=t.sent())&&(this.activeConfig=s),[2]}})})},tD.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},tD.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},tD.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},tD);function tD(t){this.storage=t}var eD=(nD.prototype.fetch=function(n){return Is(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=t.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(n,e)]}})})},nD.prototype.attemptFetch=function(c,t){var h=t.throttleEndTimeMillis,l=t.backoffCount;return Is(this,void 0,void 0,function(){var s,a,u;return Ss(this,function(t){switch(t.label){case 0:return[4,(i=c.signal,o=h,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(FP.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this.client.fetch(c)];case 3:return s=t.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return t.sent(),[2,s];case 5:if(!function(t){if(t instanceof Hs){var e=Number(t.httpStatus);return 429===e||500===e||503===e||504===e}}(a=t.sent()))throw a;return u={throttleEndTimeMillis:Date.now()+(e=l,n=1e3*Math.pow(2,e),r=Math.round(.5*n*(Math.random()-.5)*2),Math.min(144e5,n+r)),backoffCount:l+1},[4,this.storage.setThrottleMetadata(u)];case 6:return t.sent(),[2,this.attemptFetch(c,u)];case 7:return[2]}var e,n,r,i,o})})},nD);function nD(t,e){this.client=t,this.storage=e}var rD,iD="@firebase/remote-config";return(rD=zl).INTERNAL.registerComponent(new da("remoteConfig",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw FP.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw FP.create("registration-project-id");if(!s)throw FP.create("registration-api-key");if(!a)throw FP.create("registration-app-id");e=e||"firebase";var u=new JP(a,n.name,e),c=new ZP(u),h=new Oa(iD);h.logLevel=Ta.ERROR;var l=new UP(r,rD.SDK_VERSION,e,o,s,a),f=new eD(l,u),p=new xP(f,u,c,h),d=new HP(n,p,c,u,h);return d.ensureInitialized(),d},"PUBLIC").setMultipleInstances(!0)),rD.registerVersion(iD,"0.1.19"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),zl.registerVersion("firebase","7.14.1","cdn"),zl});
//# sourceMappingURL=firebase.js.map
